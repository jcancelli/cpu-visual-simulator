var app=function(){"use strict";function t(){}const e=t=>t;function n(t){return t()}function r(){return Object.create(null)}function o(t){t.forEach(n)}function i(t){return"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function c(e,...n){if(null==e)return t;const r=e.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}function u(t){let e;return c(t,(t=>e=t))(),e}function a(t,e,n){t.$$.on_destroy.push(c(e,n))}function l(e){return e&&i(e.destroy)?e.destroy:t}const f="undefined"!=typeof window;let d=f?()=>window.performance.now():()=>Date.now(),h=f?t=>requestAnimationFrame(t):t;const p=new Set;function g(t){p.forEach((e=>{e.c(t)||(p.delete(e),e.f())})),0!==p.size&&h(g)}function m(t){let e;return 0===p.size&&h(g),{promise:new Promise((n=>{p.add(e={c:t,f:n})})),abort(){p.delete(e)}}}function v(t,e){t.appendChild(e)}function w(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function y(t){const e=C("style");return function(t,e){v(t.head||t,e)}(w(t),e),e.sheet}function b(t,e,n){t.insertBefore(e,n||null)}function $(t){t.parentNode.removeChild(t)}function A(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function C(t){return document.createElement(t)}function x(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function R(t){return document.createTextNode(t)}function I(){return R(" ")}function L(){return R("")}function N(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function S(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function k(t){return""===t?null:+t}function U(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function E(t,e){t.value=null==e?"":e}function T(t,e,n,r){null===n?t.style.removeProperty(e):t.style.setProperty(e,n,r?"important":"")}function O(t,e){for(let n=0;n<t.options.length;n+=1){const r=t.options[n];if(r.__value===e)return void(r.selected=!0)}t.selectedIndex=-1}function D(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}function _(t,e,{bubbles:n=!1,cancelable:r=!1}={}){const o=document.createEvent("CustomEvent");return o.initCustomEvent(t,n,r,e),o}const P=new Map;let M,F=0;function B(t,e,n,r,o,i,s,c=0){const u=16.666/r;let a="{\n";for(let t=0;t<=1;t+=u){const r=e+(n-e)*i(t);a+=100*t+`%{${s(r,1-r)}}\n`}const l=a+`100% {${s(n,1-n)}}\n}`,f=`__svelte_${function(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(l)}_${c}`,d=w(t),{stylesheet:h,rules:p}=P.get(d)||function(t,e){const n={stylesheet:y(e),rules:{}};return P.set(t,n),n}(d,t);p[f]||(p[f]=!0,h.insertRule(`@keyframes ${f} ${l}`,h.cssRules.length));const g=t.style.animation||"";return t.style.animation=`${g?`${g}, `:""}${f} ${r}ms linear ${o}ms 1 both`,F+=1,f}function H(t,e){const n=(t.style.animation||"").split(", "),r=n.filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")),o=n.length-r.length;o&&(t.style.animation=r.join(", "),F-=o,F||h((()=>{F||(P.forEach((t=>{const{stylesheet:e}=t;let n=e.cssRules.length;for(;n--;)e.deleteRule(n);t.rules={}})),P.clear())})))}function z(t){M=t}function W(){if(!M)throw new Error("Function called outside component initialization");return M}function X(t){W().$$.on_mount.push(t)}const Z=[],V=[],q=[],G=[],J=Promise.resolve();let j=!1;function Q(t){q.push(t)}const Y=new Set;let K,tt=0;function et(){const t=M;do{for(;tt<Z.length;){const t=Z[tt];tt++,z(t),nt(t.$$)}for(z(null),Z.length=0,tt=0;V.length;)V.pop()();for(let t=0;t<q.length;t+=1){const e=q[t];Y.has(e)||(Y.add(e),e())}q.length=0}while(Z.length);for(;G.length;)G.pop()();j=!1,Y.clear(),z(t)}function nt(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Q)}}function rt(){return K||(K=Promise.resolve(),K.then((()=>{K=null}))),K}function ot(t,e,n){t.dispatchEvent(_(`${e?"intro":"outro"}${n}`))}const it=new Set;let st;function ct(){st={r:0,c:[],p:st}}function ut(){st.r||o(st.c),st=st.p}function at(t,e){t&&t.i&&(it.delete(t),t.i(e))}function lt(t,e,n,r){if(t&&t.o){if(it.has(t))return;it.add(t),st.c.push((()=>{it.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}}const ft={duration:0};function dt(n,r,s,c){let u=r(n,s),a=c?0:1,l=null,f=null,h=null;function p(){h&&H(n,h)}function g(t,e){const n=t.b-a;return e*=Math.abs(n),{a:a,b:t.b,d:n,duration:e,start:t.start,end:t.start+e,group:t.group}}function v(r){const{delay:i=0,duration:s=300,easing:c=e,tick:v=t,css:w}=u||ft,y={start:d()+i,b:r};r||(y.group=st,st.r+=1),l||f?f=y:(w&&(p(),h=B(n,a,r,s,i,c,w)),r&&v(0,1),l=g(y,s),Q((()=>ot(n,r,"start"))),m((t=>{if(f&&t>f.start&&(l=g(f,s),f=null,ot(n,l.b,"start"),w&&(p(),h=B(n,a,l.b,l.duration,0,c,u.css))),l)if(t>=l.end)v(a=l.b,1-a),ot(n,l.b,"end"),f||(l.b?p():--l.group.r||o(l.group.c)),l=null;else if(t>=l.start){const e=t-l.start;a=l.a+l.d*c(e/l.duration),v(a,1-a)}return!(!l&&!f)})))}return{run(t){i(u)?rt().then((()=>{u=u(),v(t)})):v(t)},end(){p(),l=f=null}}}const ht="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function pt(t,e){lt(t,1,1,(()=>{e.delete(t.key)}))}function gt(t){t&&t.c()}function mt(t,e,r,s){const{fragment:c,on_mount:u,on_destroy:a,after_update:l}=t.$$;c&&c.m(e,r),s||Q((()=>{const e=u.map(n).filter(i);a?a.push(...e):o(e),t.$$.on_mount=[]})),l.forEach(Q)}function vt(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function wt(t,e){-1===t.$$.dirty[0]&&(Z.push(t),j||(j=!0,J.then(et)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function yt(e,n,i,s,c,u,a,l=[-1]){const f=M;z(e);const d=e.$$={fragment:null,ctx:null,props:u,update:t,not_equal:c,bound:r(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(f?f.$$.context:[])),callbacks:r(),dirty:l,skip_bound:!1,root:n.target||f.$$.root};a&&a(d.root);let h=!1;if(d.ctx=i?i(e,n.props||{},((t,n,...r)=>{const o=r.length?r[0]:n;return d.ctx&&c(d.ctx[t],d.ctx[t]=o)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](o),h&&wt(e,t)),n})):[],d.update(),h=!0,o(d.before_update),d.fragment=!!s&&s(d.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);d.fragment&&d.fragment.l(t),t.forEach($)}else d.fragment&&d.fragment.c();n.intro&&at(e.$$.fragment),mt(e,n.target,n.anchor,n.customElement),et()}z(f)}class bt{$destroy(){vt(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const $t=[];function At(e,n=t){let r;const o=new Set;function i(t){if(s(e,t)&&(e=t,r)){const t=!$t.length;for(const t of o)t[1](),$t.push(t,e);if(t){for(let t=0;t<$t.length;t+=2)$t[t][0]($t[t+1]);$t.length=0}}}return{set:i,update:function(t){i(t(e))},subscribe:function(s,c=t){const u=[s,c];return o.add(u),1===o.size&&(r=n(i)||t),s(e),()=>{o.delete(u),0===o.size&&(r(),r=null)}}}}var Ct=At(),xt=At(),Rt=At(),It=At(),Lt=At(),Nt=At(),St={ram:Ct,cpu:xt,wires:Rt,controlBar:It,debug:Lt,messageFeed:Nt},kt=function(t,e){return kt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},kt(t,e)};function Ut(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}kt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Et=function(){return Et=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Et.apply(this,arguments)};function Tt(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{u(r.next(t))}catch(t){i(t)}}function c(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,c)}u((r=r.apply(t,e||[])).next())}))}function Ot(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}}function Dt(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))}var _t=At({showDegugger:!1,showNodes:!1,showNodeNames:!1,showNodesCoordinates:!1}),Pt=_t.subscribe;_t.set;var Mt=_t.update;var Ft={subscribe:Pt,setShowDebugger:function(t){Mt((function(e){return Et(Et({},e),{showDegugger:t})}))},updateShowDebugger:function(t){Mt((function(e){return Et(Et({},e),{showDegugger:t(e.showDegugger)})}))},setShowNodes:function(t){Mt((function(e){return Et(Et({},e),{showNodes:t})}))},updateShowNodes:function(t){Mt((function(e){return Et(Et({},e),{showNodes:t(e.showNodes)})}))},setShowNodeNames:function(t){Mt((function(e){return Et(Et({},e),{showNodeNames:t})}))},updateShowNodeNames:function(t){Mt((function(e){return Et(Et({},e),{showNodeNames:t(e.showNodeNames)})}))},setShowNodeCoordinates:function(t){Mt((function(e){return Et(Et({},e),{showNodesCoordinates:t})}))},updateShowNodeCoordinates:function(t){Mt((function(e){return Et(Et({},e),{showNodesCoordinates:t(e.showNodesCoordinates)})}))}},Bt=function(){function t(t,e,n){this.x=e,this.y=n,this.name=t,this.neighbours=[]}return t.prototype.isAlignedTo=function(t){return this.x===t.x||this.y===t.y},t.prototype.isConnectedTo=function(t){return this.neighbours.some((function(e){return e===t}))},t.prototype.connectTo=function(t,e){if(!this.isAlignedTo(t))throw new Error("Cannot connect 2 nodes that are not aligned (nodeA: "+this.name+" nodeB: "+t.name+")");if(this.isConnectedTo(t))throw new Error("This node is already connected to "+t.name);this.neighbours.push(t),t.neighbours.push(this)},t.distance=function(t,e){return Math.hypot(t.x-e.x,t.y-e.y)},t.direction=function(t,e){return t.x>e.x?{x:-1,y:0}:t.x<e.x?{x:1,y:0}:t.y>e.y?{x:0,y:-1}:{x:0,y:1}},t}(),Ht=[new Bt("RAM:DATA",1250,115),new Bt("DATA:1",1250,85),new Bt("DATA:2",751,85),new Bt("DATA:3",527,85),new Bt("DATA:4",262,85),new Bt("DATA:5",95,85),new Bt("DATA:6",95,390),new Bt("DATA:7",95,617),new Bt("DATA:8",320,390),new Bt("DATA:9",312,250),new Bt("DATA:10",477,250),new Bt("DATA:11",652,490),new Bt("IR:1",262,151),new Bt("IR:2",312,182),new Bt("IR:3",212,182),new Bt("MUX:1",477,292),new Bt("MUX:2",527,292),new Bt("MUX:3",502,332),new Bt("ACC:1",327,617),new Bt("ACC:2",412,601),new Bt("ALU:1",320,432),new Bt("ALU:2",502,432),new Bt("ALU:3",526,490),new Bt("ALU:4",412,538),new Bt("SW:1",652,601)],zt=[new Bt("RAM:ADD",1058,250),new Bt("ADD:1",751,250),new Bt("ADD:2",670,250),new Bt("ADD:3",590,250),new Bt("ADD:4",590,137),new Bt("ADD:5",535,250),new Bt("ADD:6",519,250),new Bt("INC:1",670,212),new Bt("INC:2",670,182),new Bt("PC:1",670,152),new Bt("PC:2",622,137)],Wt=[new Bt("RAM:CTRL",1058,370),new Bt("CTRL:1",751,370),new Bt("CTRL:2",507,370),new Bt("CTRL:3",494,370),new Bt("CTRL:4",240,370),new Bt("CTRL:5",185,382),new Bt("CTRL:6",185,398),new Bt("CTRL:7",185,490),new Bt("CU:1",212,281),new Bt("CU:2",272,313),new Bt("CU:3",240,342),new Bt("CU:4",185,342),new Bt("MUX:4",464,313),new Bt("ALU:5",297,490)],Xt=Dt(Dt(Dt([],Ht,!0),zt,!0),Wt,!0);function Zt(t){return Xt.find((function(e){return e.name===t}))}var Vt=function(){function t(t,e,n,r){void 0===r&&(r=!0),this.a=t,this.b=e,this.type=n,this.a.connectTo(e,this),this.linecap=r}return t.prototype.isConnecting=function(t,e){return this.a===t&&this.b===e||this.a===e&&this.b===t},t.WIDTH=5,t}(),qt={name:"DATA_INT",color:"cyan",animationColor:"darkgreen"},Gt={name:"DATA_EXT",color:"blue",animationColor:"lime"},Jt={name:"CONTROL_INT",color:"#ff7a90",animationColor:"lime"},jt={name:"CONTROL_EXT",color:"red",animationColor:"lime"},Qt={name:"ADDRESS_INT",color:"yellow",animationColor:"darkgreen"},Yt={name:"ADDRESS_EXT",color:"darkorange",animationColor:"lime"},Kt={name:"INVISIBLE",color:"transparent",animationColor:"transparent"},te=[new Vt(Zt("RAM:DATA"),Zt("DATA:1"),Gt),new Vt(Zt("DATA:1"),Zt("DATA:2"),Gt,!1),new Vt(Zt("DATA:2"),Zt("DATA:3"),qt,!1),new Vt(Zt("DATA:3"),Zt("DATA:4"),qt),new Vt(Zt("DATA:4"),Zt("DATA:5"),qt),new Vt(Zt("DATA:5"),Zt("DATA:6"),qt),new Vt(Zt("DATA:6"),Zt("DATA:7"),qt),new Vt(Zt("DATA:6"),Zt("DATA:8"),qt),new Vt(Zt("DATA:8"),Zt("ALU:1"),qt),new Vt(Zt("DATA:7"),Zt("ACC:1"),qt),new Vt(Zt("MUX:3"),Zt("ALU:2"),qt),new Vt(Zt("ALU:4"),Zt("ACC:2"),qt),new Vt(Zt("ALU:3"),Zt("DATA:11"),qt),new Vt(Zt("DATA:11"),Zt("SW:1"),qt),new Vt(Zt("DATA:4"),Zt("IR:1"),qt),new Vt(Zt("IR:3"),Zt("CU:1"),qt),new Vt(Zt("IR:2"),Zt("DATA:9"),qt),new Vt(Zt("DATA:9"),Zt("DATA:10"),qt),new Vt(Zt("DATA:10"),Zt("MUX:1"),qt),new Vt(Zt("DATA:3"),Zt("MUX:2"),qt)],ee=[new Vt(Zt("RAM:ADD"),Zt("ADD:1"),Yt,!1),new Vt(Zt("ADD:1"),Zt("ADD:2"),Qt,!1),new Vt(Zt("ADD:2"),Zt("INC:1"),Qt),new Vt(Zt("INC:2"),Zt("PC:1"),Qt),new Vt(Zt("PC:2"),Zt("ADD:4"),Qt),new Vt(Zt("ADD:2"),Zt("ADD:3"),Qt),new Vt(Zt("ADD:3"),Zt("ADD:4"),Qt),new Vt(Zt("ADD:3"),Zt("ADD:5"),Qt),new Vt(Zt("ADD:5"),Zt("ADD:6"),Kt),new Vt(Zt("ADD:6"),Zt("DATA:10"),Qt)],ne=[new Vt(Zt("CU:2"),Zt("MUX:4"),Jt),new Vt(Zt("RAM:CTRL"),Zt("CTRL:1"),jt,!1),new Vt(Zt("CTRL:1"),Zt("CTRL:2"),Jt,!1),new Vt(Zt("CTRL:2"),Zt("CTRL:3"),Kt),new Vt(Zt("CTRL:3"),Zt("CTRL:4"),Jt),new Vt(Zt("CTRL:4"),Zt("CU:3"),Jt),new Vt(Zt("CU:4"),Zt("CTRL:5"),Jt),new Vt(Zt("CTRL:5"),Zt("CTRL:6"),Kt),new Vt(Zt("CTRL:6"),Zt("CTRL:7"),Jt),new Vt(Zt("CTRL:7"),Zt("ALU:5"),Jt)],re=Dt(Dt(Dt([],te,!0),ee,!0),ne,!0);function oe(t){return re.find((function(e){return e.a.name+"-"+e.b.name===t||e.b.name+"-"+e.a.name===t}))}var ie=At({animationSpeedMultiplier:1,animate:!0}),se=ie.subscribe;ie.set;var ce=ie.update;var ue,ae,le={subscribe:se,setAnimationSpeedMultiplier:function(t){ce((function(e){return Et(Et({},e),{animationSpeedMultiplier:t})}))},updateAnimationSpeedMultiplier:function(t){ce((function(e){return Et(Et({},e),{animationSpeedMultiplier:t(e.animationSpeedMultiplier)})}))},setAnimate:function(t){ce((function(e){return Et(Et({},e),{animate:t})}))},updateAnimate:function(t){ce((function(e){return Et(Et({},e),{animate:t(e.animate)})}))}},fe=function(){function t(t,e){this.pos={x:0,y:0},this.path=Dt([],t,!0),this.wires=Dt([],e,!0),this.reset()}return t.prototype.play=function(){return Tt(this,void 0,void 0,(function(){return Ot(this,(function(t){return[2,new Promise(this._play.bind(this))]}))}))},t.prototype._play=function(t,e){this.resolve=t,requestAnimationFrame(this.startAnimation.bind(this))},t.prototype.startAnimation=function(t){this.previousTimestamp=t,this.animate(t)},t.prototype.animate=function(t){this.deltatime=(t-this.previousTimestamp)/1e3;var e=Math.floor(400*this.deltatime*u(le).animationSpeedMultiplier);if(this.draw(e),this.pos.x===this.path[this.path.length-1].x&&this.pos.y===this.path[this.path.length-1].y)return he(0),this.reset(),void this.resolve();this.previousTimestamp=t,requestAnimationFrame(this.animate.bind(this))},t.prototype.draw=function(t){for(ae.beginPath(),ae.moveTo(this.pos.x,this.pos.y);t>0;){for(this.nextNode=pe(this.pos,this.path[this.nextNodeIndex],t),ae.strokeStyle=this.wires[this.nextNodeIndex-1].type.animationColor;(this.pos.x!==this.nextNode.node.x||this.pos.y!==this.nextNode.node.y)&&t>0;)this.incrementedX=this.pos.x+this.nextNode.direction.x,this.incrementedY=this.pos.y+this.nextNode.direction.y,ae.lineTo(this.incrementedX,this.incrementedY),ae.stroke(),this.pos.x=this.incrementedX,this.pos.y=this.incrementedY,t--;de(.05),this.pos.x===this.path[this.nextNodeIndex].x&&this.pos.y===this.path[this.nextNodeIndex].y&&(this.nextNodeIndex++,this.nextNodeIndex===this.path.length&&(t=0))}ae.closePath()},t.prototype.reset=function(){this.pos.x=this.path[0].x,this.pos.y=this.path[0].y,this.nextNodeIndex=1},t}();function de(t){ae.save(),ae.globalAlpha=t,ae.globalCompositeOperation="destination-out",ae.fillStyle="#FFF",ae.fillRect(0,0,ue.width,ue.height),ae.restore()}function he(t){de(.1),40!==++t?requestAnimationFrame((function(){return he(t)})):ae.clearRect(0,0,ue.width,ue.height)}function pe(t,e,n){var r=Bt.direction(t,e),o=Bt.distance(t,e),i=e;return o>n&&(o=n,i=function(t,e,n){return{x:t.x+e*n.x,y:t.y+e*n.y}}(t,n,r)),{distance:o,direction:r,node:i}}function ge(e){let n,r,o,i;return{c(){n=C("div"),r=C("canvas"),o=I(),i=C("canvas"),S(r,"class","static svelte-78q7p9"),S(i,"class","dynamic svelte-78q7p9"),S(n,"class","wires svelte-78q7p9")},m(t,s){b(t,n,s),v(n,r),e[4](r),v(n,o),v(n,i),e[5](i)},p:t,i:t,o:t,d(t){t&&$(n),e[4](null),e[5](null)}}}function me(t,e,n){var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{u(r.next(t))}catch(t){i(t)}}function c(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,c)}u((r=r.apply(t,e||[])).next())}))};const o=new Map;let i,s;function c(){const t=i.getContext("2d");t.lineWidth=Vt.WIDTH,t.clearRect(0,0,s.width,s.height);for(const e of re)t.lineCap=e.linecap?"square":"butt",t.strokeStyle=e.type.color,t.beginPath(),t.moveTo(e.a.x,e.a.y),t.lineTo(e.b.x,e.b.y),t.stroke()}return X((()=>r(void 0,void 0,void 0,(function*(){n(0,i.width=n(1,s.width=i.clientWidth,s),i),n(0,i.height=n(1,s.height=i.clientHeight,s),i),c(),(ae=(ue=s).getContext("2d")).lineCap="round",ae.lineWidth=Vt.WIDTH})))),[i,s,function(t,e){return r(this,void 0,void 0,(function*(){const n=Zt(t),r=Zt(e);if(!n)throw new Error("Node "+t+" is undefined");if(!r)throw new Error("Node "+e+" is undefined");let i;if(i=o.get(t+e))i.reset();else{const s=function(t,e){for(var n=[t],r=new Set,o={},i=0;i<n.length;)for(var s=n[i++],c=0,u=s.neighbours;c<u.length;c++){var a=u[c];if(!r.has(a)){if(r.add(a),a===e){for(var l=[a];s!==t;)l.push(s),s=o[s.name];return l.push(s),l.reverse(),l}o[a.name]=s,n.push(a)}}throw new Error("No path connecting "+t.name+" to "+e.name)}(n,r),c=function(t){for(var e=[],n=0;n<t.length-1;n++)e.push(oe("".concat(t[n].name,"-").concat(t[n+1].name)));return e}(s);i=new fe(s,c),o.set(t+e,i)}yield i.play()}))},c,function(t){V[t?"unshift":"push"]((()=>{i=t,n(0,i)}))},function(t){V[t?"unshift":"push"]((()=>{s=t,n(1,s)}))}]}class ve extends bt{constructor(t){super(),yt(this,t,me,ge,s,{flashWire:2,drawStaticWires:3})}get flashWire(){return this.$$.ctx[2]}get drawStaticWires(){return this.$$.ctx[3]}}var we=At({binary:!1,showLabels:!0}),ye=we.subscribe;we.set;var be=we.update;var $e={subscribe:ye,setBinary:function(t){be((function(e){return Et(Et({},e),{binary:t})}))},updateBinary:function(t){be((function(e){return Et(Et({},e),{binary:t(e.binary)})}))},setShowLabels:function(t){be((function(e){return Et(Et({},e),{showLabels:t})}))},updateShowLabels:function(t){be((function(e){return Et(Et({},e),{showLabels:t(e.showLabels)})}))}};function Ae(e){let n,r,o=(e[6].showLabels?e[0]:"")+"";return{c(){n=C("div"),r=R(o),S(n,"class","label svelte-105xhao"),T(n,"top",e[1]),T(n,"left",e[2]),T(n,"bottom",e[4]),T(n,"right",e[3]),T(n,"font-size",e[7][e[5]])},m(t,e){b(t,n,e),v(n,r)},p(t,[e]){65&e&&o!==(o=(t[6].showLabels?t[0]:"")+"")&&U(r,o),2&e&&T(n,"top",t[1]),4&e&&T(n,"left",t[2]),16&e&&T(n,"bottom",t[4]),8&e&&T(n,"right",t[3]),32&e&&T(n,"font-size",t[7][t[5]])},i:t,o:t,d(t){t&&$(n)}}}function Ce(t,e,n){let r;a(t,$e,(t=>n(6,r=t)));let{text:o=""}=e,{top:i="auto"}=e,{left:s="auto"}=e,{right:c="auto"}=e,{bottom:u="auto"}=e,{fontSize:l="MEDIUM"}=e;return t.$$set=t=>{"text"in t&&n(0,o=t.text),"top"in t&&n(1,i=t.top),"left"in t&&n(2,s=t.left),"right"in t&&n(3,c=t.right),"bottom"in t&&n(4,u=t.bottom),"fontSize"in t&&n(5,l=t.fontSize)},[o,i,s,c,u,l,r,{SMALL:"12px",MEDIUM:"16px",LARGE:"24px"}]}class xe extends bt{constructor(t){super(),yt(this,t,Ce,Ae,s,{text:0,top:1,left:2,right:3,bottom:4,fontSize:5})}}var Re=function(t){function e(e){var n=t.call(this,e)||this;return n.isChecked=!0,n}return Ut(e,t),e}(Error),Ie=function(t){function e(e,n){return t.call(this,"Value ".concat(e," out of ").concat(n,"-bit valid range"))||this}return Ut(e,t),e}(Re);function Le(t,e){if(Math.abs(t)>e)throw new Error("Position ".concat(t," out of range +/-").concat(e));if(0===t)throw new Error("Positions start from 1");return t<0?this.value.length+t:t-1}function Ne(t){if(t<1||t>32)throw new Error("Binary numbers must be between ".concat(1," and ").concat(32," bits"))}function Se(t,e){return t<=function(t){return Ne(t),Math.pow(2,t)}(e)&&t>=Ue(e)}function ke(t,e){return t<=function(t){return Ne(t),Math.pow(2,t-1)-1}(e)&&t>=Ue(e)}function Ue(t){return Ne(t),-Math.pow(2,t-1)}function Ee(t,e){return Ne(e),Te((t>>>0).toString(2),e)}function Te(t,e){return("00000000000000000000000000000000"+t).slice(-e)}var Oe,De=function(){function t(t,e){if("string"==typeof e){if(!function(t,e){return Ne(e),new RegExp("^[01]{1,".concat(e,"}$")).test(t)}(e,t))throw new Ie(e,t);this.value=Te(e,t)}else if("number"==typeof e){if(!Se(e,t))throw new Ie(e,t);this.value=Ee(e,t)}else this.value=Ee(e.signed(),t)}return t.prototype.signed=function(){return this.value.startsWith("0")?parseInt(this.value,2):~~parseInt(("11111111111111111111111111111111"+this.value).slice(-32),2)},t.prototype.unsigned=function(){return parseInt(this.value,2)},t.prototype.toBinaryString=function(){return this.value},t.prototype.bits=function(){return this.value.length},t.prototype.bytes=function(){return this.bits()/8},t.prototype.getByte=function(e){var n=8*Le(e,this.bytes());return new t(8,this.value.substring(n,n+8))},t.prototype.getBytes=function(){for(var t=[],e=1;e<=this.bytes();e++)t.push(this.getByte(e));return t},t.prototype.isBitSet=function(t){return"1"===this.value.charAt(Le(t,this.bits()))},t.prototype.setBit=function(e,n){return new t(this.bits(),function(t,e,n){if(!/^[10]*$/.test(t))throw new Error("Invalid binary string");var r=t.split("");return r[Le(e,t.length)]=n?"1":"0",r.join("")}(this.value,e,n))},t.fromBytesValues=function(e){return Ne(8*e.length),"number"==typeof e[0]?t.fromBytesValues(e.map((function(e){return new t(8,e)}))):"string"==typeof e[0]?new t(8*e.length,e.join("")):new t(8*e.length,e.map((function(t){return t.toBinaryString()})).join(""))},t}(),_e=254;function Pe(t){if(!Me(t))throw new Error("Invalid address: "+t);return t/2}function Me(t){return t%2==0&&t>=0&&t<=_e}var Fe=At(),Be=Fe.subscribe,He=Fe.set,ze=Fe.update;function We(t){ze(t),Oe=t(Oe)}function Xe(){var t;t={instructionRegister:null,programCounter:new De(8,0),increment:new De(8,2),alu1:null,alu2:null,operation:"",accumulator:new De(16,0),zeroFlag:!0,negativeFlag:!1,isJumping:!1,isHalting:!1},He(t),Oe=t}Xe();var Ze={subscribe:Be,reset:Xe,clear:function(){We((function(t){return Et(Et({},t),{instructionRegister:null,alu1:null,alu2:null,operation:"",isJumping:!1,isHalting:!1})}))},setIR:function(t){if(t&&!t.opcode)throw new Error("Invalid opcode");We((function(e){return Et(Et({},e),{instructionRegister:t})}))},setPC:function(t){if("number"==typeof t&&(t=new De(8,t)),!Me(t.unsigned()))throw new Error("Invalid address");We((function(e){return Et(Et({},e),{programCounter:t})}))},setALU1:function(t){"number"==typeof t&&(t=new De(16,t)),We((function(e){return Et(Et({},e),{alu1:null===t?null:t})}))},setALU2:function(t){"number"==typeof t&&(t=new De(16,t)),We((function(e){return Et(Et({},e),{alu2:null===t?null:t})}))},setOperation:function(t){We((function(e){return Et(Et({},e),{operation:t})}))},setACC:function(t){"number"==typeof t&&(t=new De(16,t)),We((function(e){return Et(Et({},e),{accumulator:t})}))},setZeroFlag:function(t){We((function(e){return Et(Et({},e),{zeroFlag:t})}))},setNegativeFlag:function(t){We((function(e){return Et(Et({},e),{negativeFlag:t})}))},setIsJumping:function(t){We((function(e){return Et(Et({},e),{isJumping:t})}))},setIsHalting:function(t){We((function(e){return Et(Et({},e),{isHalting:t})}))}};function Ve(t,e,n){return(1-n)*t+n*e}function qe(t,e,n,r){return Tt(this,void 0,void 0,(function(){return Ot(this,(function(o){return[2,new Promise((function(o,i){var s,c=0,a=function(i){if(s||(s=i),c>=1)return o(),void t.style.setProperty(e,"rgb(".concat(r.r,", ").concat(r.g,", ").concat(r.b,")"));var l=Math.round(Ve(n.r,r.r,c)),f=Math.round(Ve(n.g,r.g,c)),d=Math.round(Ve(n.b,r.b,c));t.style.setProperty(e,"rgb(".concat(l,", ").concat(f,", ").concat(d,")")),c=(i-s)/(300*u(le).animationSpeedMultiplier),requestAnimationFrame(a)};requestAnimationFrame(a)}))]}))}))}function Ge(t,e,n,r){return Tt(this,void 0,void 0,(function(){return Ot(this,(function(o){return[2,qe(t,e,n,r).then((function(){return qe(t,e,r,n)}))]}))}))}function Je(t){let e,n,r,o,i,s,c,u,a;return n=new xe({props:{text:"IR",top:"-20px",left:"10px"}}),{c(){e=C("div"),gt(n.$$.fragment),r=I(),o=C("div"),i=R(t[2]),s=I(),c=C("div"),u=R(t[3]),S(o,"class","opcode svelte-1bh6588"),S(c,"class","operand svelte-1bh6588"),S(e,"class","ir svelte-1bh6588")},m(l,f){b(l,e,f),mt(n,e,null),v(e,r),v(e,o),v(o,i),t[8](o),v(e,s),v(e,c),v(c,u),t[9](c),a=!0},p(t,[e]){(!a||4&e)&&U(i,t[2]),(!a||8&e)&&U(u,t[3])},i(t){a||(at(n.$$.fragment,t),a=!0)},o(t){lt(n.$$.fragment,t),a=!1},d(r){r&&$(e),vt(n),t[8](null),t[9](null)}}}function je(t,e,n){let r,o;a(t,Ze,(t=>n(6,r=t))),a(t,$e,(t=>n(7,o=t)));var i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{u(r.next(t))}catch(t){i(t)}}function c(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,c)}u((r=r.apply(t,e||[])).next())}))};let s,c,u,l;return t.$$.update=()=>{192&t.$$.dirty&&(o.binary?(n(2,u=r.instructionRegister?r.instructionRegister.binaryOpcode():""),n(3,l=r.instructionRegister?r.instructionRegister.binaryOperand():"")):(n(2,u=r.instructionRegister?r.instructionRegister.opcode.symbolic:""),r.instructionRegister&&r.instructionRegister.opcode.takesOperand?r.instructionRegister.immediateFlag()?n(3,l=`#${r.instructionRegister.numericOperand()}`):n(3,l=`${r.instructionRegister.numericOperand()}`):n(3,l="")))},[s,c,u,l,function(){return i(this,void 0,void 0,(function*(){return Ge(s,"background-color",{r:211,g:211,b:211},{r:0,g:255,b:0})}))},function(){return Ge(c,"background-color",{r:211,g:211,b:211},{r:0,g:255,b:0})},r,o,function(t){V[t?"unshift":"push"]((()=>{s=t,n(0,s)}))},function(t){V[t?"unshift":"push"]((()=>{c=t,n(1,c)}))}]}class Qe extends bt{constructor(t){super(),yt(this,t,je,Je,s,{flashOpcode:4,flashOperand:5})}get flashOpcode(){return this.$$.ctx[4]}get flashOperand(){return this.$$.ctx[5]}}function Ye(e){let n,r,o;return r=new xe({props:{text:"Control Unit / Decoder"}}),{c(){n=C("div"),gt(r.$$.fragment),S(n,"class","control-unit svelte-dhlklz")},m(t,i){b(t,n,i),mt(r,n,null),e[2](n),o=!0},p:t,i(t){o||(at(r.$$.fragment,t),o=!0)},o(t){lt(r.$$.fragment,t),o=!1},d(t){t&&$(n),vt(r),e[2](null)}}}function Ke(t,e,n){var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{u(r.next(t))}catch(t){i(t)}}function c(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,c)}u((r=r.apply(t,e||[])).next())}))};let o;return[o,function(){return r(this,void 0,void 0,(function*(){return Ge(o,"background-color",{r:211,g:211,b:211},{r:0,g:255,b:0})}))},function(t){V[t?"unshift":"push"]((()=>{o=t,n(0,o)}))}]}class tn extends bt{constructor(t){super(),yt(this,t,Ke,Ye,s,{flash:1})}get flash(){return this.$$.ctx[1]}}function en(t){let e,n,r,o,i,s=(t[1].binary?t[2].accumulator.toBinaryString():t[2].accumulator.signed())+"";return n=new xe({props:{text:"ACC",top:"-20px",left:"0"}}),{c(){e=C("div"),gt(n.$$.fragment),r=I(),o=R(s),S(e,"class","acc svelte-uj5a0h")},m(s,c){b(s,e,c),mt(n,e,null),v(e,r),v(e,o),t[4](e),i=!0},p(t,[e]){(!i||6&e)&&s!==(s=(t[1].binary?t[2].accumulator.toBinaryString():t[2].accumulator.signed())+"")&&U(o,s)},i(t){i||(at(n.$$.fragment,t),i=!0)},o(t){lt(n.$$.fragment,t),i=!1},d(r){r&&$(e),vt(n),t[4](null)}}}function nn(t,e,n){let r,o;a(t,$e,(t=>n(1,r=t))),a(t,Ze,(t=>n(2,o=t)));var i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{u(r.next(t))}catch(t){i(t)}}function c(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,c)}u((r=r.apply(t,e||[])).next())}))};let s;return[s,r,o,function(){return i(this,void 0,void 0,(function*(){return Ge(s,"background-color",{r:211,g:211,b:211},{r:0,g:255,b:0})}))},function(t){V[t?"unshift":"push"]((()=>{s=t,n(0,s)}))}]}class rn extends bt{constructor(t){super(),yt(this,t,nn,en,s,{flash:3})}get flash(){return this.$$.ctx[3]}}function on(t){let e,n,r,o,i,s,c,u,a,l,f,d,h,p,g,m=t[2].zeroFlag?"1":"0",w=t[2].negativeFlag?"1":"0";return n=new xe({props:{text:"SW",top:"-20px",left:"0"}}),i=new xe({props:{text:"Z",bottom:"-20px",left:"25%"}}),l=new xe({props:{text:"N",bottom:"-20px",left:"25%"}}),{c(){e=C("div"),gt(n.$$.fragment),r=I(),o=C("div"),gt(i.$$.fragment),s=I(),c=R(m),u=I(),a=C("div"),gt(l.$$.fragment),f=I(),d=R(w),h=I(),p=C("div"),p.textContent="------",S(o,"class","zero svelte-5ceng0"),S(a,"class","negative svelte-5ceng0"),S(p,"class","other svelte-5ceng0"),S(e,"class","sw svelte-5ceng0")},m(m,w){b(m,e,w),mt(n,e,null),v(e,r),v(e,o),mt(i,o,null),v(o,s),v(o,c),t[5](o),v(e,u),v(e,a),mt(l,a,null),v(a,f),v(a,d),t[6](a),v(e,h),v(e,p),g=!0},p(t,[e]){(!g||4&e)&&m!==(m=t[2].zeroFlag?"1":"0")&&U(c,m),(!g||4&e)&&w!==(w=t[2].negativeFlag?"1":"0")&&U(d,w)},i(t){g||(at(n.$$.fragment,t),at(i.$$.fragment,t),at(l.$$.fragment,t),g=!0)},o(t){lt(n.$$.fragment,t),lt(i.$$.fragment,t),lt(l.$$.fragment,t),g=!1},d(r){r&&$(e),vt(n),vt(i),t[5](null),vt(l),t[6](null)}}}function sn(t,e,n){let r;a(t,Ze,(t=>n(2,r=t)));var o=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{u(r.next(t))}catch(t){i(t)}}function c(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,c)}u((r=r.apply(t,e||[])).next())}))};let i,s;return[i,s,r,function(){return o(this,void 0,void 0,(function*(){return Ge(i,"background-color",{r:211,g:211,b:211},{r:0,g:255,b:0})}))},function(){return o(this,void 0,void 0,(function*(){return Ge(s,"background-color",{r:211,g:211,b:211},{r:0,g:255,b:0})}))},function(t){V[t?"unshift":"push"]((()=>{i=t,n(0,i)}))},function(t){V[t?"unshift":"push"]((()=>{s=t,n(1,s)}))}]}class cn extends bt{constructor(t){super(),yt(this,t,sn,on,s,{flashZeroFlag:3,flashNegativeFlag:4})}get flashZeroFlag(){return this.$$.ctx[3]}get flashNegativeFlag(){return this.$$.ctx[4]}}function un(t){let e,n,r,o,i,s,c,u,a,l=(t[2].binary?t[3].programCounter.toBinaryString():t[3].programCounter.unsigned())+"",f=(t[2].binary?t[3].increment.toBinaryString():t[3].increment.unsigned())+"";return n=new xe({props:{text:"PC",top:"-20px",left:"0"}}),{c(){e=C("div"),gt(n.$$.fragment),r=I(),o=R(l),i=I(),s=C("div"),c=R("+"),u=R(f),S(e,"class","pc svelte-chlt1z"),S(s,"class","inc svelte-chlt1z")},m(l,f){b(l,e,f),mt(n,e,null),v(e,r),v(e,o),t[6](e),b(l,i,f),b(l,s,f),v(s,c),v(s,u),t[7](s),a=!0},p(t,[e]){(!a||12&e)&&l!==(l=(t[2].binary?t[3].programCounter.toBinaryString():t[3].programCounter.unsigned())+"")&&U(o,l),(!a||12&e)&&f!==(f=(t[2].binary?t[3].increment.toBinaryString():t[3].increment.unsigned())+"")&&U(u,f)},i(t){a||(at(n.$$.fragment,t),a=!0)},o(t){lt(n.$$.fragment,t),a=!1},d(r){r&&$(e),vt(n),t[6](null),r&&$(i),r&&$(s),t[7](null)}}}function an(t,e,n){let r,o;a(t,$e,(t=>n(2,r=t))),a(t,Ze,(t=>n(3,o=t)));var i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{u(r.next(t))}catch(t){i(t)}}function c(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,c)}u((r=r.apply(t,e||[])).next())}))};let s,c;return[s,c,r,o,function(){return i(this,void 0,void 0,(function*(){return Ge(s,"background-color",{r:211,g:211,b:211},{r:0,g:255,b:0})}))},function(){return i(this,void 0,void 0,(function*(){return Ge(c,"background-color",{r:211,g:211,b:211},{r:0,g:255,b:0})}))},function(t){V[t?"unshift":"push"]((()=>{s=t,n(0,s)}))},function(t){V[t?"unshift":"push"]((()=>{c=t,n(1,c)}))}]}class ln extends bt{constructor(t){super(),yt(this,t,an,un,s,{flashPC:4,flashINC:5})}get flashPC(){return this.$$.ctx[4]}get flashINC(){return this.$$.ctx[5]}}function fn(e){let n,r,o,i,s,c;return s=new xe({props:{text:"MUX"}}),{c(){n=C("div"),r=x("svg"),o=x("path"),i=I(),gt(s.$$.fragment),S(o,"d","M 0 0 L 100 0 L 80 40 L 20 40 Z"),S(r,"xmlns","http://www.w3.org/2000/svg"),S(r,"viewBox","-1 -1 102 42"),S(r,"class","svelte-1klag0e"),S(n,"class","mux svelte-1klag0e")},m(t,u){b(t,n,u),v(n,r),v(r,o),e[2](r),v(n,i),mt(s,n,null),c=!0},p:t,i(t){c||(at(s.$$.fragment,t),c=!0)},o(t){lt(s.$$.fragment,t),c=!1},d(t){t&&$(n),e[2](null),vt(s)}}}function dn(t,e,n){var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{u(r.next(t))}catch(t){i(t)}}function c(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,c)}u((r=r.apply(t,e||[])).next())}))};let o;return[o,function(){return r(this,void 0,void 0,(function*(){return Ge(o,"fill",{r:211,g:211,b:211},{r:0,g:255,b:0})}))},function(t){V[t?"unshift":"push"]((()=>{o=t,n(0,o)}))}]}class hn extends bt{constructor(t){super(),yt(this,t,dn,fn,s,{flash:1})}get flash(){return this.$$.ctx[1]}}function pn(t){let e,n,r,o,i,s,c,u,a,l,f,d,h,p,g,m=t[0].operation+"";return i=new xe({props:{text:"ALU",top:"-20px",left:"45%"}}),{c(){e=C("div"),n=x("svg"),r=x("path"),o=I(),gt(i.$$.fragment),s=I(),c=C("div"),u=R(t[4]),a=I(),l=C("div"),f=R(m),d=I(),h=C("div"),p=R(t[5]),S(r,"d","m 0 0 l 192 0 l 32 32 l 32 -32 l 192 0 l -96 160 l -256 0 z"),S(n,"xmlns","http://www.w3.org/2000/svg"),S(n,"viewBox","-1 -1 450 162"),S(n,"class","svelte-charl4"),S(c,"class","operand first svelte-charl4"),S(l,"class","operator svelte-charl4"),S(h,"class","operand second svelte-charl4"),S(e,"class","alu svelte-charl4")},m(m,w){b(m,e,w),v(e,n),v(n,r),v(e,o),mt(i,e,null),v(e,s),v(e,c),v(c,u),t[10](c),v(e,a),v(e,l),v(l,f),t[11](l),v(e,d),v(e,h),v(h,p),t[12](h),g=!0},p(t,[e]){(!g||16&e)&&U(u,t[4]),(!g||1&e)&&m!==(m=t[0].operation+"")&&U(f,m),(!g||32&e)&&U(p,t[5])},i(t){g||(at(i.$$.fragment,t),g=!0)},o(t){lt(i.$$.fragment,t),g=!1},d(n){n&&$(e),vt(i),t[10](null),t[11](null),t[12](null)}}}function gn(t,e,n){let r,o;a(t,Ze,(t=>n(0,r=t))),a(t,$e,(t=>n(9,o=t)));var i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{u(r.next(t))}catch(t){i(t)}}function c(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,c)}u((r=r.apply(t,e||[])).next())}))};let s,c,u,l="",f="";return t.$$.update=()=>{513&t.$$.dirty&&(o.binary?(n(4,l=null!==r.alu1?r.alu1.toBinaryString():""),n(5,f=null!==r.alu2?r.alu2.toBinaryString():"")):(n(4,l=null!==r.alu1?""+r.alu1.signed():""),n(5,f=null!==r.alu2?""+r.alu2.signed():"")))},[r,s,c,u,l,f,function(){return i(this,void 0,void 0,(function*(){return Ge(s,"background-color",{r:211,g:211,b:211},{r:0,g:255,b:0})}))},function(){return i(this,void 0,void 0,(function*(){return Ge(c,"background-color",{r:211,g:211,b:211},{r:0,g:255,b:0})}))},function(){return i(this,void 0,void 0,(function*(){return Ge(u,"background-color",{r:211,g:211,b:211},{r:0,g:255,b:0})}))},o,function(t){V[t?"unshift":"push"]((()=>{s=t,n(1,s)}))},function(t){V[t?"unshift":"push"]((()=>{u=t,n(3,u)}))},function(t){V[t?"unshift":"push"]((()=>{c=t,n(2,c)}))}]}class mn extends bt{constructor(t){super(),yt(this,t,gn,pn,s,{flashFirstOperand:6,flashSecondOperand:7,flashOperator:8})}get flashFirstOperand(){return this.$$.ctx[6]}get flashSecondOperand(){return this.$$.ctx[7]}get flashOperator(){return this.$$.ctx[8]}}var vn=At([]),wn=(vn.subscribe,function(t){vn.update((function(e){return Dt(Dt([],e,!0),[t],!1)}))}),yn=At({showLogger:!1});yn.subscribe;var bn=Date.now();function $n(){return Date.now()-bn}var An={error:function(t,e,n){void 0===n&&(n=!1),wn({logType:n?"CHECKED_ERROR":"UNCHECKED_ERROR",logGroup:e,timestamp:$n(),message:n?t.message:t.stack})},info:function(t,e){wn({logType:"INFO",logGroup:e,timestamp:$n(),message:t})}},Cn=function(){function t(){this._conditions=[],this._endsStep=!1,this._sideffects=[],this._conditions=[]}return t.prototype.condition=function(t){return this._conditions.push(t),this},t.prototype.endstep=function(){return this._endsStep=!0,this},t.prototype.sideffects=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this._sideffects).push.apply(t,e),this},t.prototype.execute=function(t){return Tt(this,void 0,void 0,(function(){var e;return Ot(this,(function(n){return this._conditions.reduceRight((function(e,n){return e&&n(t)}),!0)?(An.info("Executing: ".concat(this.toString()),"EXECUTION"),e=Dt(Dt([],this._sideffects.map((function(e){return e.execute(t)})),!0),[this.action(t)],!1),[2,Promise.all(e)]):[2]}))}))},t.prototype.doesEndStep=function(){return this._endsStep},t.prototype.toString=function(){return"".concat(this.constructor.name," endStep:").concat(this._endsStep,", sideffects:[").concat(this._sideffects.length,"]")},t}(),xn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ut(e,t),e.prototype.action=function(t){return Tt(this,void 0,void 0,(function(){return Ot(this,(function(e){return u(le).animate?[2,this._animate(t)]:[2]}))}))},e}(Cn),Rn=function(t){function e(e){var n=t.call(this)||this;return n.component=e,n}return Ut(e,t),e.prototype._animate=function(t){return Tt(this,void 0,void 0,(function(){return Ot(this,(function(t){return[2,u(St.cpu).flash(this.component)]}))}))},e.prototype.toString=function(){return"".concat(t.prototype.toString.call(this),", component: ").concat(this.component)},e}(xn);function In(t){let e,n,r,o,i,s,c,u,a,l,f,d,h,p,g,m,w,y,A;o=new xe({props:{text:"CPU",fontSize:"LARGE",top:"-30px",left:"47%"}});s=new Qe({props:{}}),t[8](s);u=new tn({props:{}}),t[9](u);l=new ln({props:{}}),t[10](l);d=new hn({props:{}}),t[11](d);p=new mn({props:{}}),t[12](p);m=new cn({props:{}}),t[13](m);return y=new rn({props:{}}),t[14](y),{c(){e=C("div"),n=I(),r=C("div"),gt(o.$$.fragment),i=I(),gt(s.$$.fragment),c=I(),gt(u.$$.fragment),a=I(),gt(l.$$.fragment),f=I(),gt(d.$$.fragment),h=I(),gt(p.$$.fragment),g=I(),gt(m.$$.fragment),w=I(),gt(y.$$.fragment),S(e,"class","cpu-bg svelte-u2pya7"),S(r,"class","cpu svelte-u2pya7")},m(t,$){b(t,e,$),b(t,n,$),b(t,r,$),mt(o,r,null),v(r,i),mt(s,r,null),v(r,c),mt(u,r,null),v(r,a),mt(l,r,null),v(r,f),mt(d,r,null),v(r,h),mt(p,r,null),v(r,g),mt(m,r,null),v(r,w),mt(y,r,null),A=!0},p(t,[e]){s.$set({});u.$set({});l.$set({});d.$set({});p.$set({});m.$set({});y.$set({})},i(t){A||(at(o.$$.fragment,t),at(s.$$.fragment,t),at(u.$$.fragment,t),at(l.$$.fragment,t),at(d.$$.fragment,t),at(p.$$.fragment,t),at(m.$$.fragment,t),at(y.$$.fragment,t),A=!0)},o(t){lt(o.$$.fragment,t),lt(s.$$.fragment,t),lt(u.$$.fragment,t),lt(l.$$.fragment,t),lt(d.$$.fragment,t),lt(p.$$.fragment,t),lt(m.$$.fragment,t),lt(y.$$.fragment,t),A=!1},d(i){i&&$(e),i&&$(n),i&&$(r),vt(o),t[8](null),vt(s),t[9](null),vt(u),t[10](null),vt(l),t[11](null),vt(d),t[12](null),vt(p),t[13](null),vt(m),t[14](null),vt(y)}}}function Ln(t,e,n){var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{u(r.next(t))}catch(t){i(t)}}function c(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,c)}u((r=r.apply(t,e||[])).next())}))};let o,i,s,c,u,a,l;return[o,i,s,c,u,a,l,function(t){return r(this,void 0,void 0,(function*(){switch(t){case"IR":return Promise.all([o.flashOpcode(),o.flashOperand()]);case"IR:OPC":return o.flashOpcode();case"IR:OPR":return o.flashOperand();case"PC":return s.flashPC();case"INC":return s.flashINC();case"MUX":return c.flash();case"CU":return i.flash();case"ALU:1":return u.flashFirstOperand();case"ALU:2":return u.flashSecondOperand();case"ALU:OPR":return u.flashOperator();case"ACC":return l.flash();case"SW:Z":return a.flashZeroFlag();case"SW:N":return a.flashNegativeFlag()}}))},function(t){V[t?"unshift":"push"]((()=>{o=t,n(0,o)}))},function(t){V[t?"unshift":"push"]((()=>{i=t,n(1,i)}))},function(t){V[t?"unshift":"push"]((()=>{s=t,n(2,s)}))},function(t){V[t?"unshift":"push"]((()=>{c=t,n(3,c)}))},function(t){V[t?"unshift":"push"]((()=>{u=t,n(4,u)}))},function(t){V[t?"unshift":"push"]((()=>{a=t,n(5,a)}))},function(t){V[t?"unshift":"push"]((()=>{l=t,n(6,l)}))}]}class Nn extends bt{constructor(t){super(),yt(this,t,Ln,In,s,{flash:7})}get flash(){return this.$$.ctx[7]}}function Sn(t){const e=t-1;return e*e*e+1}function kn(t,{delay:e=0,duration:n=400,easing:r=Sn}={}){const o=getComputedStyle(t),i=+o.opacity,s=parseFloat(o.height),c=parseFloat(o.paddingTop),u=parseFloat(o.paddingBottom),a=parseFloat(o.marginTop),l=parseFloat(o.marginBottom),f=parseFloat(o.borderTopWidth),d=parseFloat(o.borderBottomWidth);return{delay:e,duration:n,easing:r,css:t=>`overflow: hidden;opacity: ${Math.min(20*t,1)*i};height: ${t*s}px;padding-top: ${t*c}px;padding-bottom: ${t*u}px;margin-top: ${t*a}px;margin-bottom: ${t*l}px;border-top-width: ${t*f}px;border-bottom-width: ${t*d}px;`}}var Un=[{symbolic:"NOP",numeric:0,takesOperand:!1,takesImmediate:!1,operator:""},{symbolic:"HLT",numeric:1,takesOperand:!1,takesImmediate:!1,operator:""},{symbolic:"JMP",numeric:2,takesOperand:!0,takesImmediate:!1,operator:""},{symbolic:"JZ",numeric:3,takesOperand:!0,takesImmediate:!1,operator:""},{symbolic:"JNZ",numeric:4,takesOperand:!0,takesImmediate:!1,operator:""},{symbolic:"JN",numeric:5,takesOperand:!0,takesImmediate:!1,operator:""},{symbolic:"JNN",numeric:6,takesOperand:!0,takesImmediate:!1,operator:""},{symbolic:"LOD",numeric:7,takesOperand:!0,takesImmediate:!0,operator:"="},{symbolic:"STO",numeric:8,takesOperand:!0,takesImmediate:!1,operator:""},{symbolic:"ADD",numeric:9,takesOperand:!0,takesImmediate:!0,operator:"+"},{symbolic:"SUB",numeric:10,takesOperand:!0,takesImmediate:!0,operator:"-"},{symbolic:"MUL",numeric:11,takesOperand:!0,takesImmediate:!0,operator:"*"},{symbolic:"DIV",numeric:12,takesOperand:!0,takesImmediate:!0,operator:"/"},{symbolic:"AND",numeric:13,takesOperand:!0,takesImmediate:!0,operator:"&"},{symbolic:"CMP",numeric:14,takesOperand:!0,takesImmediate:!0,operator:":"},{symbolic:"NOT",numeric:15,takesOperand:!0,takesImmediate:!0,operator:"!"}];function En(t){return"string"==typeof t?Un.find((function(e){return e.symbolic===t})):Un.find((function(e){return e.numeric===t.getByte(1).unsigned()}))}function Tn(t){return t.isBitSet(1)}function On(t,e){return t.setBit(1,e)}function Dn(t){return On(t,!1)}var _n=function(){function t(t,e,n,r){if(void 0===r&&(r=!1),16!==n.bits())throw new Error("Value must be 16 bit");this.opcode=En(Dn(n)),this.symbolicOpcode=t,this.symbolicOperand=e,this.value=n,r&&(this.opcode=void 0)}return t.prototype.immediateFlag=function(){return Tn(this.value)},t.prototype.opcodeValue=function(){return this.value.getByte(1)},t.prototype.operandValue=function(){return this.value.getByte(2)},t.prototype.numericOpcode=function(){return this.value.getByte(1).signed()},t.prototype.numericOperand=function(){return this.immediateFlag()?this.value.getByte(2).signed():this.value.getByte(2).unsigned()},t.prototype.binaryOpcode=function(){return this.value.getByte(1).toBinaryString()},t.prototype.binaryOperand=function(){return this.value.getByte(2).toBinaryString()},t}(),Pn=function(t){function e(e,n){var r=t.call(this,e)||this;return r.inputString=n,r}return Ut(e,t),e}(Re),Mn=/^[01]{0,8}\s?[01]{1,8}?$/,Fn=/^-?[0-9]{1,5}$/,Bn=/#-?[0-9]{1,3}/,Hn=/[A-Z_]{1,10}/,zn=/#[A-Z_]{1,10}/,Wn=new RegExp("^"+/[A-Z]{2,3}/.source+"( (("+Bn.source+")|("+zn.source+")|("+/[0-9]{1,3}/.source+")|("+Hn.source+")))?$");function Xn(t,e){var n=Mn.test(t),r=Wn.test(t),o=Fn.test(t);if(e&&!n)throw new Pn("Invalid binary input",t);if(!e&&!o&&!r)throw new Pn("Invalid input",t);return r?function(t){var e=t.split(" "),n=e[0],r=e[1],o=!!r,i=En(n);if(!i)throw new Pn("Invalid opcode",t);if(o){if(!i.takesOperand)throw new Pn("Opcode doesn't allow operand",t);return zn.test(r)?function(t,e){var n=t.split(" "),r=n[0],o=n[1],i=o.slice(1);if(!ur.hasLabel(i))throw new Pn("Unknown label",t);var s=On(new De(8,e.numeric),!0).signed(),c=ur.getAddress(i);if(!e.takesImmediate)throw new Pn("Opcode doesn't allow immediate operand",t);if(!ke(c,8))throw new Pn("Operand is not a valid 8 bit signed value",t);return new _n(r,o,De.fromBytesValues([s,c]))}(t,i):Hn.test(r)?function(t,e){var n=t.split(" "),r=n[0],o=n[1];if(!ur.hasLabel(o))throw new Pn("Unknown label",t);var i=ur.getAddress(o);return new _n(r,o,De.fromBytesValues([e.numeric,i]))}(t,i):Bn.test(r)?function(t,e){var n=t.split(" "),r=n[0],o=n[1],i=On(new De(8,e.numeric),!0).signed(),s=parseInt(o.slice(1));if(!e.takesImmediate)throw new Pn("Opcode doesn't allow immediate operand",t);if(!ke(s,8))throw new Pn("Operand is not a valid 8 bit signed value",t);return new _n(r,o,De.fromBytesValues([i,s]))}(t,i):function(t,e){var n=t.split(" "),r=n[0],o=n[1],i=parseInt(o);if(!Me(i))throw new Pn("Operand is not a valid address",t);return new _n(r,o,De.fromBytesValues([e.numeric,i]))}(t,i)}if(i.takesOperand)throw new Pn("Opcode requires operand",t);return new _n(n,"",De.fromBytesValues([i.numeric,0]))}(t):n&&e?function(t){if(t.includes(" ")){var e=t.split(" ");t=e[0]+Te(e[1],8)}var n=new De(16,t),r=n.getByte(1),o=n.getByte(2),i=Tn(r),s=En(Dn(r)),c=!1;s&&s.takesOperand?i&&!s.takesImmediate?c=!0:i||Me(o.unsigned())||(c=!0):c=!0;var u=c?n.signed().toString():s.symbolic,a=i?"#"+o.signed():o.unsigned().toString();c&&(a="");return new _n(u,a,n,c)}(t):function(t){var e=parseInt(t);if(!ke(e,16))throw new Pn("Input is not a valid 16 bit signed value",t);var n=new De(16,e),r=n.getByte(1),o=En(Dn(r)),i=Tn(r),s=!o||i&&!o.takesImmediate||i&&!o.takesOperand;return new _n(t,"",n,s)}(t)}var Zn=At(new Array),Vn=Zn.subscribe,qn=Zn.set,Gn=Zn.update,Jn=[];function jn(t){Gn(t),Jn=t(Jn)}function Qn(){for(var t=Pe(0);t<=Pe(_e);t++)Jn[t]=Xn("NOP",!1);var e;qn(e=Jn),Jn=e}Qn();var Yn={subscribe:Vn,read:function(t){if(!Me(t))throw new Error("Invalid address: "+t);return Jn[Pe(t)]},write:function(t,e){if(!Me(t))throw new Error("Invalid address: "+t);var n=Pe(t);jn((function(t){return t.map((function(t,r){return n===r?e:t}))}))},clear:Qn,updateLabels:function(t,e){jn((function(n){return n.map((function(n){return n.symbolicOperand===t?new _n(n.symbolicOpcode,e,n.value):n.symbolicOperand==="#"+t?new _n(n.symbolicOpcode,"#"+e,n.value):n}))}))},deleteLabel:function(t){jn((function(e){return e.map((function(e){return e.symbolicOperand===t?new _n(e.symbolicOpcode,e.numericOperand().toString(),e.value):e.symbolicOperand==="#"+t?new _n(e.symbolicOpcode,"#"+e.numericOperand(),e.value):e}))}))},moveFirstHalfUpFromAddress:function(t){console.log("moveFirstHalfUpFromAddress "+t)},moveFirstHalfDownFromAddress:function(t){console.log("moveFirstHalfDownFromAddress "+t)},moveSecondHalfUpFromAddress:function(t){console.log("moveSecondHalfUpFromAddress "+t)},moveSecondHalfDownFromAddress:function(t){console.log("moveSecondHalfDownFromAddress "+t)}},Kn=At([]),tr=Kn.subscribe,er=Kn.set,nr=Kn.update,rr=[];function or(t){return rr[Pe(t)]}function ir(t){if(""===t)return-1;var e=rr.findIndex((function(e){return e===t}));return-1===e?-1:function(t){var e=2*t;if(!Me(e))throw new Error("Invalid index: "+t);return e}(e)}function sr(t){return-1!==ir(t)}function cr(){for(var t=Pe(0);t<=Pe(_e);t++)rr[t]="";er(rr)}cr();var ur={subscribe:tr,getLabel:or,getAddress:ir,setLabel:function(t,e){var n=or(t);if(n!==e){if(sr(e))throw new Re("Label already exists");var r,o=Pe(t);nr(r=function(t){return t.map((function(t,n){return n===o?e:t}))}),rr=r(rr),""!==n&&(""===e?Yn.deleteLabel(n):Yn.updateLabels(n,e))}},hasLabel:sr,clear:cr},ar={address:null,column:"CELL"},lr=At(ar),fr=lr.subscribe;lr.set;var dr=lr.update;function hr(t){dr(t),ar=t(ar)}var pr={subscribe:fr,selectUp:function(){hr((function(t){var e=t.address-=2;return Et(Et({},t),{address:e<0?_e:e})}))},selectDown:function(){hr((function(t){var e=t.address+=2;return Et(Et({},t),{address:e>_e?0:e})}))},selectLeft:function(){hr((function(t){return Et(Et({},t),{column:"LABEL"})}))},selectRight:function(){hr((function(t){return Et(Et({},t),{column:"CELL"})}))},select:function(t,e){if(void 0===e&&(e="CELL"),!Me(t))throw new Error("Invalid address");hr((function(n){return Et(Et({},n),{address:t,column:e})}))},deselect:function(){hr((function(t){return Et(Et({},t),{address:null})}))},noSelection:function(){return null===ar.address}};function gr(n){let r,o,s,c,u,a;return{c(){r=x("svg"),o=x("rect"),s=x("path"),S(o,"fill","none"),S(o,"height","24px"),S(o,"width","24px"),S(s,"d","M21,12l-4.37,6.16C16.26,18.68,15.65,19,15,19h-3l0-2h3l3.55-5L15,7H5v3H3V7c0-1.1,0.9-2,2-2h10c0.65,0,1.26,0.31,1.63,0.84 L21,12z M10,15H7v-3H5v3H2v2h3v3h2v-3h3V15z"),S(r,"xmlns","http://www.w3.org/2000/svg"),S(r,"viewBox","0 0 24 24"),S(r,"class","svelte-17eshqc")},m(t,e){b(t,r,e),v(r,o),v(r,s),u||(a=N(r,"click",n[0]),u=!0)},p:t,i(o){c||Q((()=>{c=function(n,r,o){let s,c,u=r(n,o),a=!1,l=0;function f(){s&&H(n,s)}function h(){const{delay:r=0,duration:o=300,easing:i=e,tick:h=t,css:p}=u||ft;p&&(s=B(n,0,1,o,r,i,p,l++)),h(0,1);const g=d()+r,v=g+o;c&&c.abort(),a=!0,Q((()=>ot(n,!0,"start"))),c=m((t=>{if(a){if(t>=v)return h(1,0),ot(n,!0,"end"),f(),a=!1;if(t>=g){const e=i((t-g)/o);h(e,1-e)}}return a}))}let p=!1;return{start(){p||(p=!0,H(n),i(u)?(u=u(),rt().then(h)):h())},invalidate(){p=!1},end(){a&&(f(),a=!1)}}}(r,n[6],{delay:300}),c.start()}))},o:t,d(t){t&&$(r),u=!1,a()}}}function mr(t){let e,n,r,i,s;return{c(){e=C("input"),e.value=t[3],S(e,"class","svelte-17eshqc")},m(n,o){b(n,e,o),t[12](e),r=!0,i||(s=[N(e,"input",wr),N(e,"focus",t[0]),N(e,"focusout",t[1])],i=!0)},p(t,n){(!r||8&n&&e.value!==t[3])&&(e.value=t[3])},i(o){r||(Q((()=>{n||(n=dt(e,t[5],{},!0)),n.run(1)})),r=!0)},o(o){n||(n=dt(e,t[5],{},!1)),n.run(0),r=!1},d(r){r&&$(e),t[12](null),r&&n&&n.end(),i=!1,o(s)}}}function vr(t){let e,n,r,o;const i=[mr,gr],s=[];function c(t,e){return t[4]?0:1}return n=c(t),r=s[n]=i[n](t),{c(){e=C("div"),r.c(),S(e,"class","label svelte-17eshqc")},m(t,r){b(t,e,r),s[n].m(e,null),o=!0},p(t,[o]){let u=n;n=c(t),n===u?s[n].p(t,o):(ct(),lt(s[u],1,1,(()=>{s[u]=null})),ut(),r=s[n],r?r.p(t,o):(r=s[n]=i[n](t),r.c()),at(r,1),r.m(e,null))},i(t){o||(at(r),o=!0)},o(t){lt(r),o=!1},d(t){t&&$(e),s[n].d()}}}function wr({target:t}){t.value=t.value.toUpperCase().replaceAll(/[^A-Z_]/g,"").slice(0,10)}function yr(t,e,n){let r,o,i,s,c,u;a(t,Nt,(t=>n(14,s=t))),a(t,ur,(t=>n(11,c=t))),a(t,pr,(t=>n(15,u=t))),function(){const t=W()}();let l,{address:f}=e,{selected:d}=e;function h(){try{if(!l)return;An.info(`RamLabel input: "${l.value}"`,"USER_INPUT"),ur.setLabel(f,l.value),n(3,r=c[Pe(f)])}catch(t){s.message("ERROR",t.message),An.error(t,"USER_INPUT",t.isChecked)}}return t.$$set=t=>{"address"in t&&n(7,f=t.address),"selected"in t&&n(8,d=t.selected)},t.$$.update=()=>{2176&t.$$.dirty&&n(3,r=c[Pe(f)]),8&t.$$.dirty&&(o=!r),264&t.$$.dirty&&n(4,i=d||!!r),260&t.$$.dirty&&d&&l&&l.focus()},[function(){pr.select(f,"LABEL")},function(){h(),"LABEL"===u.column&&f===u.address&&pr.deselect()},l,r,i,function(t,{delay:e=0,duration:n=200}){return{delay:0,duration:o?n:0,css:t=>o?`transform: scaleX(${t})`:""}},function(t,{delay:e=0,duration:n=0}){return{delay:o?e:0,duration:n,css:t=>o?`filter: opacity(${t})`:""}},f,d,h,function(){return f},c,function(t){V[t?"unshift":"push"]((()=>{l=t,n(2,l)}))}]}class br extends bt{constructor(t){super(),yt(this,t,yr,vr,s,{address:7,selected:8,select:0,deselect:1,commitInput:9,getAddress:10})}get select(){return this.$$.ctx[0]}get deselect(){return this.$$.ctx[1]}get commitInput(){return this.$$.ctx[9]}get getAddress(){return this.$$.ctx[10]}}function $r(e){let n,r,o=(e[2].binary?new De(8,e[0]).toBinaryString():e[0])+"";return{c(){n=C("div"),r=R(o),S(n,"class","address svelte-dn79ne")},m(t,o){b(t,n,o),v(n,r),e[5](n)},p(t,[e]){5&e&&o!==(o=(t[2].binary?new De(8,t[0]).toBinaryString():t[0])+"")&&U(r,o)},i:t,o:t,d(t){t&&$(n),e[5](null)}}}function Ar(t,e,n){let r;a(t,$e,(t=>n(2,r=t)));let o,{address:i}=e;return t.$$set=t=>{"address"in t&&n(0,i=t.address)},[i,o,r,function(){return i},function(){return Ge(o,"background-color",{r:255,g:140,b:0},{r:0,g:255,b:0})},function(t){V[t?"unshift":"push"]((()=>{o=t,n(1,o)}))}]}class Cr extends bt{constructor(t){super(),yt(this,t,Ar,$r,s,{address:0,getAddress:3,flash:4})}get getAddress(){return this.$$.ctx[3]}get flash(){return this.$$.ctx[4]}}function xr(t){let e,n,r,o,i=t[5]&&Ir(t);return{c(){e=C("div"),n=R(t[6]),r=I(),i&&i.c(),o=L(),S(e,"class","opcode svelte-17cpvp8")},m(t,s){b(t,e,s),v(e,n),b(t,r,s),i&&i.m(t,s),b(t,o,s)},p(t,e){64&e&&U(n,t[6]),t[5]?i?i.p(t,e):(i=Ir(t),i.c(),i.m(o.parentNode,o)):i&&(i.d(1),i=null)},d(t){t&&$(e),t&&$(r),i&&i.d(t),t&&$(o)}}}function Rr(t){let e,n,r,i;return{c(){e=C("input"),e.value=n=t[6]+(t[5]?" "+t[5]:""),S(e,"class","svelte-17cpvp8")},m(n,o){b(n,e,o),t[15](e),r||(i=[l(t[7].call(null,e)),N(e,"focusout",t[2]),N(e,"input",Nr)],r=!0)},p(t,r){96&r&&n!==(n=t[6]+(t[5]?" "+t[5]:""))&&e.value!==n&&(e.value=n)},d(n){n&&$(e),t[15](null),r=!1,o(i)}}}function Ir(t){let e,n;return{c(){e=C("div"),n=R(t[5]),S(e,"class","operand svelte-17cpvp8")},m(t,r){b(t,e,r),v(e,n)},p(t,e){32&e&&U(n,t[5])},d(t){t&&$(e)}}}function Lr(e){let n,r,o;function i(t,e){return t[0]?Rr:xr}let s=i(e),c=s(e);return{c(){n=C("div"),c.c(),S(n,"class","cell svelte-17cpvp8")},m(t,i){b(t,n,i),c.m(n,null),e[16](n),r||(o=N(n,"click",e[1]),r=!0)},p(t,[e]){s===(s=i(t))&&c?c.p(t,e):(c.d(1),c=s(t),c&&(c.c(),c.m(n,null)))},i:t,o:t,d(t){t&&$(n),c.d(),e[16](null),r=!1,o()}}}function Nr({target:t}){t.value=t.value.toUpperCase().replaceAll(/[^A-Z0-9 _\-#\(\)]*/g,"")}function Sr(t,e,n){let r,o,i,s,c,u,l;a(t,Nt,(t=>n(17,s=t))),a(t,$e,(t=>n(13,c=t))),a(t,pr,(t=>n(18,u=t))),a(t,Yn,(t=>n(14,l=t)));let f,d,{address:h}=e,{selected:p=!1}=e;function g(){try{d&&""!==d.value&&(An.info(`RamCell input: "${d.value}"`,"USER_INPUT"),Yn.write(h,Xn(d.value.trim(),c.binary)))}catch(t){s.message("ERROR",t.message),An.error(t,"USER_INPUT",t.isChecked)}}return t.$$set=t=>{"address"in t&&n(8,h=t.address),"selected"in t&&n(0,p=t.selected)},t.$$.update=()=>{16640&t.$$.dirty&&n(12,r=l[Pe(h)]),12288&t.$$.dirty&&n(6,o=c.binary?r.binaryOpcode():r.symbolicOpcode),12288&t.$$.dirty&&n(5,i=c.binary?r.binaryOperand():r.symbolicOperand)},[p,function(){pr.select(h,"CELL")},function(){g(),"CELL"===u.column&&h===u.address&&pr.deselect()},f,d,i,o,function(t){t.value=o+(i?` ${i}`:""),t.focus(),setTimeout((()=>t.select()))},h,g,function(){return Ge(f,"background-color",{r:211,g:211,b:211},{r:0,g:255,b:0})},function(){return h},r,c,l,function(t){V[t?"unshift":"push"]((()=>{d=t,n(4,d)}))},function(t){V[t?"unshift":"push"]((()=>{f=t,n(3,f)}))}]}class kr extends bt{constructor(t){super(),yt(this,t,Sr,Lr,s,{address:8,selected:0,select:1,deselect:2,commitInput:9,flash:10,getAddress:11})}get select(){return this.$$.ctx[1]}get deselect(){return this.$$.ctx[2]}get commitInput(){return this.$$.ctx[9]}get flash(){return this.$$.ctx[10]}get getAddress(){return this.$$.ctx[11]}}function Ur(t,e,n){const r=t.slice();return r[25]=e[n],r[26]=e,r[27]=n,r}function Er(t,e,n){const r=t.slice();return r[25]=e[n],r[28]=e,r[27]=n,r}function Tr(t){let e,n,r=t[27];const o=()=>t[15](e,r),i=()=>t[15](null,r);let s={address:t[25],selected:t[4].address===t[25]&&"LABEL"===t[4].column};return e=new br({props:s}),o(),{c(){gt(e.$$.fragment)},m(t,r){mt(e,t,r),n=!0},p(t,n){r!==t[27]&&(i(),r=t[27],o());const s={};1&n&&(s.address=t[25]),17&n&&(s.selected=t[4].address===t[25]&&"LABEL"===t[4].column),e.$set(s)},i(t){n||(at(e.$$.fragment,t),n=!0)},o(t){lt(e.$$.fragment,t),n=!1},d(t){i(),vt(e,t)}}}function Or(t){let e,n,r,o,i,s,c=t[27];const u=()=>t[16](n,c),a=()=>t[16](null,c);let l={address:t[25]};n=new Cr({props:l}),u();const f=()=>t[17](o,c),d=()=>t[17](null,c);let h={address:t[25],selected:t[4].address===t[25]&&"CELL"===t[4].column};return o=new kr({props:h}),f(),{c(){e=C("div"),gt(n.$$.fragment),r=I(),gt(o.$$.fragment),i=I(),S(e,"class","row svelte-1gpgw8f")},m(t,c){b(t,e,c),mt(n,e,null),v(e,r),mt(o,e,null),v(e,i),s=!0},p(t,e){c!==t[27]&&(a(),c=t[27],u());const r={};1&e&&(r.address=t[25]),n.$set(r),c!==t[27]&&(d(),c=t[27],f());const i={};1&e&&(i.address=t[25]),17&e&&(i.selected=t[4].address===t[25]&&"CELL"===t[4].column),o.$set(i)},i(t){s||(at(n.$$.fragment,t),at(o.$$.fragment,t),s=!0)},o(t){lt(n.$$.fragment,t),lt(o.$$.fragment,t),s=!1},d(t){t&&$(e),a(),vt(n),d(),vt(o)}}}function Dr(t){let e,n,r,i,s,c,u,a,f;n=new xe({props:{text:"RAM",fontSize:"LARGE",top:"-30px",right:"0"}});let d=t[0],h=[];for(let e=0;e<d.length;e+=1)h[e]=Tr(Er(t,d,e));const p=t=>lt(h[t],1,1,(()=>{h[t]=null}));let g=t[0],m=[];for(let e=0;e<g.length;e+=1)m[e]=Or(Ur(t,g,e));const w=t=>lt(m[t],1,1,(()=>{m[t]=null}));return{c(){e=C("div"),gt(n.$$.fragment),r=I(),i=C("div");for(let t=0;t<h.length;t+=1)h[t].c();s=I(),c=C("div");for(let t=0;t<m.length;t+=1)m[t].c();S(i,"class","labels svelte-1gpgw8f"),S(c,"class","ram svelte-1gpgw8f"),S(e,"class","ram-wrapper svelte-1gpgw8f")},m(o,d){b(o,e,d),mt(n,e,null),v(e,r),v(e,i);for(let t=0;t<h.length;t+=1)h[t].m(i,null);v(e,s),v(e,c);for(let t=0;t<m.length;t+=1)m[t].m(c,null);u=!0,a||(f=[N(e,"wheel",t[5]),l(t[6].call(null,e))],a=!0)},p(t,[e]){if(19&e){let n;for(d=t[0],n=0;n<d.length;n+=1){const r=Er(t,d,n);h[n]?(h[n].p(r,e),at(h[n],1)):(h[n]=Tr(r),h[n].c(),at(h[n],1),h[n].m(i,null))}for(ct(),n=d.length;n<h.length;n+=1)p(n);ut()}if(29&e){let n;for(g=t[0],n=0;n<g.length;n+=1){const r=Ur(t,g,n);m[n]?(m[n].p(r,e),at(m[n],1)):(m[n]=Or(r),m[n].c(),at(m[n],1),m[n].m(c,null))}for(ct(),n=g.length;n<m.length;n+=1)w(n);ut()}},i(t){if(!u){at(n.$$.fragment,t);for(let t=0;t<d.length;t+=1)at(h[t]);for(let t=0;t<g.length;t+=1)at(m[t]);u=!0}},o(t){lt(n.$$.fragment,t),h=h.filter(Boolean);for(let t=0;t<h.length;t+=1)lt(h[t]);m=m.filter(Boolean);for(let t=0;t<m.length;t+=1)lt(m[t]);u=!1},d(t){t&&$(e),vt(n),A(h,t),A(m,t),a=!1,o(f)}}}function _r(t,e,n){let r,o;a(t,pr,(t=>n(4,o=t)));var i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{u(r.next(t))}catch(t){i(t)}}function c(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,c)}u((r=r.apply(t,e||[])).next())}))};let s=0,c=[],u=[],l=[],f=[];function d({deltaY:t}){let e=s+(t>0?2:-2);e<0&&(e=220),e>220&&(e=0),n(13,s=e)}function h(){d({deltaY:-1})}function p(){d({deltaY:1})}function g(t){if(!Me(t))throw new Error("Invalid address");return t>=s&&t<=r}function m(t){if(!Me(t))throw new Error("Invalid address");if(g(t))return;let e=t,r=e+34;r>_e&&(e-=r-_e),n(13,s=e)}return t.$$.update=()=>{if(8192&t.$$.dirty&&n(14,r=s+34),24576&t.$$.dirty){n(0,c=[]);for(let t=s,e=0;t<=r;t+=2,e++)n(0,c[e]=t,c)}},[c,u,l,f,o,function({deltaY:t}){pr.deselect(),d({deltaY:t})},function(t){const e=t=>{switch(t.key){case"ArrowUp":!function(t){pr.noSelection()||(t.ctrlKey?Yn.moveSecondHalfUpFromAddress(o.address):t.shiftKey&&Yn.moveFirstHalfUpFromAddress(o.address),o.address===s&&h(),pr.selectUp())}(t);break;case"ArrowDown":!function(t){pr.noSelection()||(t.ctrlKey?Yn.moveSecondHalfDownFromAddress(o.address):t.shiftKey&&Yn.moveFirstHalfDownFromAddress(o.address),o.address===r&&p(),pr.selectDown())}(t);break;case"ArrowLeft":pr.noSelection()||pr.selectLeft();break;case"ArrowRight":pr.noSelection()||pr.selectRight();break;case"Enter":pr.noSelection()?pr.select(s):pr.deselect()}};return document.addEventListener("keydown",e),{destroy(){document.removeEventListener("keydown",e)}}},h,p,g,m,function(t){return i(this,void 0,void 0,(function*(){if(!Me(t))throw new Error("Invalid address");return m(t),l.find((e=>e.getAddress()===t)).flash()}))},function(t){return i(this,void 0,void 0,(function*(){if(!Me(t))throw new Error("Invalid address");return m(t),f.find((e=>e.getAddress()===t)).flash()}))},s,r,function(t,e){V[t?"unshift":"push"]((()=>{u[e]=t,n(1,u)}))},function(t,e){V[t?"unshift":"push"]((()=>{l[e]=t,n(2,l)}))},function(t,e){V[t?"unshift":"push"]((()=>{f[e]=t,n(3,f)}))}]}class Pr extends bt{constructor(t){super(),yt(this,t,_r,Dr,s,{scrollUp:7,scrollDown:8,addressIsVisible:9,showAddress:10,flashAddress:11,flashContent:12})}get scrollUp(){return this.$$.ctx[7]}get scrollDown(){return this.$$.ctx[8]}get addressIsVisible(){return this.$$.ctx[9]}get showAddress(){return this.$$.ctx[10]}get flashAddress(){return this.$$.ctx[11]}get flashContent(){return this.$$.ctx[12]}}function Mr(t){let e,n,r=t[0].name+"";return{c(){e=C("span"),n=R(r),S(e,"class","name svelte-uld4ti")},m(t,r){b(t,e,r),v(e,n)},p(t,e){1&e&&r!==(r=t[0].name+"")&&U(n,r)},d(t){t&&$(e)}}}function Fr(t){let e,n,r,o,i,s,c,u=t[0].x+"",a=t[0].y+"";return{c(){e=C("span"),n=R("x: "),r=R(u),o=I(),i=C("span"),s=R("y: "),c=R(a),S(e,"class","x svelte-uld4ti"),S(i,"class","y svelte-uld4ti")},m(t,u){b(t,e,u),v(e,n),v(e,r),b(t,o,u),b(t,i,u),v(i,s),v(i,c)},p(t,e){1&e&&u!==(u=t[0].x+"")&&U(r,u),1&e&&a!==(a=t[0].y+"")&&U(c,a)},d(t){t&&$(e),t&&$(o),t&&$(i)}}}function Br(e){let n,r,o,i,s,c,u=e[1].showNodeNames&&Mr(e),a=e[1].showNodesCoordinates&&Fr(e);return{c(){n=C("div"),r=C("div"),i=I(),s=C("div"),u&&u.c(),c=I(),a&&a.c(),S(r,"class","dot svelte-uld4ti"),S(r,"title",o=`${e[0].name} x: ${e[0].x} y: ${e[0].y}`),S(s,"class","text svelte-uld4ti"),S(n,"class","node svelte-uld4ti"),T(n,"top",e[0].y+"px"),T(n,"left",e[0].x+"px")},m(t,e){b(t,n,e),v(n,r),v(n,i),v(n,s),u&&u.m(s,null),v(s,c),a&&a.m(s,null)},p(t,[e]){1&e&&o!==(o=`${t[0].name} x: ${t[0].x} y: ${t[0].y}`)&&S(r,"title",o),t[1].showNodeNames?u?u.p(t,e):(u=Mr(t),u.c(),u.m(s,c)):u&&(u.d(1),u=null),t[1].showNodesCoordinates?a?a.p(t,e):(a=Fr(t),a.c(),a.m(s,null)):a&&(a.d(1),a=null),1&e&&T(n,"top",t[0].y+"px"),1&e&&T(n,"left",t[0].x+"px")},i:t,o:t,d(t){t&&$(n),u&&u.d(),a&&a.d()}}}function Hr(t,e,n){let r;a(t,Ft,(t=>n(1,r=t)));let{node:o}=e;return t.$$set=t=>{"node"in t&&n(0,o=t.node)},[o,r]}class zr extends bt{constructor(t){super(),yt(this,t,Hr,Br,s,{node:0})}}function Wr(t,e,n){const r=t.slice();return r[7]=e[n],r}function Xr(t){let e,n,r=Xt,o=[];for(let e=0;e<r.length;e+=1)o[e]=Zr(Wr(t,r,e));const i=t=>lt(o[t],1,1,(()=>{o[t]=null}));return{c(){for(let t=0;t<o.length;t+=1)o[t].c();e=L()},m(t,r){for(let e=0;e<o.length;e+=1)o[e].m(t,r);b(t,e,r),n=!0},p(t,n){if(0&n){let s;for(r=Xt,s=0;s<r.length;s+=1){const i=Wr(t,r,s);o[s]?(o[s].p(i,n),at(o[s],1)):(o[s]=Zr(i),o[s].c(),at(o[s],1),o[s].m(e.parentNode,e))}for(ct(),s=r.length;s<o.length;s+=1)i(s);ut()}},i(t){if(!n){for(let t=0;t<r.length;t+=1)at(o[t]);n=!0}},o(t){o=o.filter(Boolean);for(let t=0;t<o.length;t+=1)lt(o[t]);n=!1},d(t){A(o,t),t&&$(e)}}}function Zr(e){let n,r;return n=new zr({props:{node:e[7]}}),{c(){gt(n.$$.fragment)},m(t,e){mt(n,t,e),r=!0},p:t,i(t){r||(at(n.$$.fragment,t),r=!0)},o(t){lt(n.$$.fragment,t),r=!1},d(t){vt(n,t)}}}function Vr(t){let e,n,r,o,i,s,c,u;n=new ve({props:{}}),t[4](n);o=new Nn({props:{}}),t[5](o);s=new Pr({props:{}}),t[6](s);let a=t[3].showNodes&&Xr(t);return{c(){e=C("div"),gt(n.$$.fragment),r=I(),gt(o.$$.fragment),i=I(),gt(s.$$.fragment),c=I(),a&&a.c(),S(e,"class","stage svelte-saqh3s")},m(t,l){b(t,e,l),mt(n,e,null),v(e,r),mt(o,e,null),v(e,i),mt(s,e,null),v(e,c),a&&a.m(e,null),u=!0},p(t,[r]){n.$set({});o.$set({});s.$set({}),t[3].showNodes?a?(a.p(t,r),8&r&&at(a,1)):(a=Xr(t),a.c(),at(a,1),a.m(e,null)):a&&(ct(),lt(a,1,1,(()=>{a=null})),ut())},i(t){u||(at(n.$$.fragment,t),at(o.$$.fragment,t),at(s.$$.fragment,t),at(a),u=!0)},o(t){lt(n.$$.fragment,t),lt(o.$$.fragment,t),lt(s.$$.fragment,t),lt(a),u=!1},d(r){r&&$(e),t[4](null),vt(n),t[5](null),vt(o),t[6](null),vt(s),a&&a.d()}}}function qr(t,e,n){let r,o,i,s;return a(t,Rt,(t=>n(0,r=t))),a(t,xt,(t=>n(1,o=t))),a(t,Ct,(t=>n(2,i=t))),a(t,Ft,(t=>n(3,s=t))),[r,o,i,s,function(t){V[t?"unshift":"push"]((()=>{r=t,Rt.set(r)}))},function(t){V[t?"unshift":"push"]((()=>{o=t,xt.set(o)}))},function(t){V[t?"unshift":"push"]((()=>{i=t,Ct.set(i)}))}]}class Gr extends bt{constructor(t){super(),yt(this,t,qr,Vr,s,{})}}var Jr=function(t){function e(e,n){var r=t.call(this)||this;return r.component=e,r.address=n,r}return Ut(e,t),e.prototype._animate=function(t){return Tt(this,void 0,void 0,(function(){var e,n;return Ot(this,(function(r){if(e=u(St.ram),"number"!=typeof(n="number"==typeof this.address?this.address:t[this.address]))throw new Error(this.address+" is not a number");switch(this.component){case"ADDRESS":return[2,e.flashAddress(n)];case"DATA":return[2,e.flashContent(n)]}return[2]}))}))},e.prototype.toString=function(){return"".concat(t.prototype.toString.call(this),", component: ").concat(this.component,", address: ").concat(this.address)},e}(xn),jr=function(t){function e(e,n){var r=t.call(this)||this;return r.from=e,r.to=n,r}return Ut(e,t),e.prototype._animate=function(t){return Tt(this,void 0,void 0,(function(){return Ot(this,(function(t){return[2,u(St.wires).flashWire(this.from,this.to)]}))}))},e.prototype.toString=function(){return"".concat(t.prototype.toString.call(this),", from: ").concat(this.from,", to: ").concat(this.to)},e}(xn),Qr=function(t){function e(e){var n=t.call(this)||this;return n.key=e,n}return Ut(e,t),e.prototype.toString=function(){return"".concat(t.prototype.toString.call(this),", key: ").concat(this.key)},e}(Cn),Yr=function(t){function e(e){var n=t.call(this,e)||this;if("RAM"===e)throw new Error("CacheCpuValue cannot cache RAM value");return n}return Ut(e,t),e.prototype.action=function(t){return Tt(this,void 0,void 0,(function(){var e;return Ot(this,(function(n){switch(e=u(Ze),this.key){case"ACC":t.ACC=e.accumulator.signed();break;case"ALU:1":t["ALU:1"]=e.alu1.signed();break;case"ALU:2":t["ALU:2"]=e.alu2.signed();break;case"ALU:OPR":t["ALU:OPR"]=e.operation;break;case"IR":t.IR=e.instructionRegister,t["IR:OPC"]=e.instructionRegister.numericOpcode(),t["IR:OPR"]=e.instructionRegister.numericOperand();break;case"PC":t.PC=e.programCounter.unsigned();break;case"INC":t.INC=e.increment.unsigned();break;case"SW:Z":t["SW:Z"]=e.zeroFlag;break;case"SW:N":t["SW:N"]=e.negativeFlag;break;default:throw new Error('Unexpected cacheable key "'.concat(this.key,'"'))}return[2]}))}))},e}(Qr),Kr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ut(e,t),e}(Cn),to=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ut(e,t),e.prototype.action=function(t){return Tt(this,void 0,void 0,(function(){var e,n;return Ot(this,(function(r){return e=t["ALU:2"]===t["ALU:1"],n=t["ALU:2"]>t["ALU:1"],Ze.setZeroFlag(e),Ze.setNegativeFlag(n),t["SW:Z"]=e,t["SW:N"]=n,[2]}))}))},e}(Kr),eo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ut(e,t),e.prototype.action=function(t){return Tt(this,void 0,void 0,(function(){var e;return Ot(this,(function(n){switch(n.label){case 0:switch(t["ALU:OPR"]){case"!":e=~t["ALU:2"];break;case"&":e=t["ALU:1"]&t["ALU:2"];break;case"*":e=t["ALU:1"]*t["ALU:2"];break;case"+":e=t["ALU:1"]+t["ALU:2"];break;case"-":e=t["ALU:1"]-t["ALU:2"];break;case"/":if(0===t["ALU:2"])throw new Error("Division by zero");e=t["ALU:1"]/t["ALU:2"];break;case"=":e=t["ALU:2"];break;default:throw new Error('Operator "'.concat(t["ALU:OP"],"\" doesn't set the Accumulator"))}return Ze.setACC(e),[4,u(xt).flash("ACC")];case 1:return n.sent(),t.ACC=e,[2]}}))}))},e}(Kr),no=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ut(e,t),e.prototype.action=function(t){return Tt(this,void 0,void 0,(function(){var e,n;return Ot(this,(function(r){switch(r.label){case 0:return e=0===t.ACC,n=t.ACC<0,e===u(Ze).zeroFlag?[3,2]:(Ze.setZeroFlag(e),[4,u(xt).flash("SW:Z")]);case 1:r.sent(),r.label=2;case 2:return n===u(Ze).negativeFlag?[3,4]:(Ze.setNegativeFlag(n),[4,u(xt).flash("SW:N")]);case 3:r.sent(),r.label=4;case 4:return t["SW:Z"]=e,t["SW:N"]=n,[2]}}))}))},e}(Kr),ro=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ut(e,t),e}(Cn),oo=function(t){function e(e){var n=t.call(this)||this;return n.address=e,n}return Ut(e,t),e.prototype.action=function(t){return Tt(this,void 0,void 0,(function(){var e,n;return Ot(this,(function(r){switch(r.label){case 0:if("number"!=typeof(e="number"==typeof this.address?this.address:t[this.address]))throw new Error("Address is not a number");return n=Yn.read(e).symbolicOpcode,/^[A-Z]+$/.test(n)&&"NOP"!==n?Yn.write(e,Xn(new De(16,t.ACC).toBinaryString(),!0)):Yn.write(e,Xn(t.ACC.toString(),!1)),[4,u(Ct).flashContent(e)];case 1:return r.sent(),[2]}}))}))},e}(ro),io=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ut(e,t),e.prototype.action=function(t){return Tt(this,void 0,void 0,(function(){return Ot(this,(function(t){return Ze.setIsHalting(!0),[2]}))}))},e}(Kr),so=function(t){function e(e){var n=t.call(this,"RAM")||this;return n.address=e,n}return Ut(e,t),e.prototype.action=function(t){return Tt(this,void 0,void 0,(function(){var e;return Ot(this,(function(n){if("number"!=typeof(e="number"==typeof this.address?this.address:t[this.address]))throw new Error("Address is not a number");return t.RAM={address:e,data:Yn.read(e)},[2]}))}))},e}(Qr),co=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ut(e,t),e.prototype.action=function(t){return Tt(this,void 0,void 0,(function(){return Ot(this,(function(e){switch(e.label){case 0:return Ze.setALU1(t.ACC),[4,u(xt).flash("ALU:1")];case 1:return e.sent(),t["ALU:1"]=t.ACC,[2]}}))}))},e}(Kr),uo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ut(e,t),e.prototype.action=function(t){return Tt(this,void 0,void 0,(function(){return Ot(this,(function(e){switch(e.label){case 0:return Ze.setIR(t.RAM.data),[4,u(xt).flash("IR")];case 1:return e.sent(),t.IR=t.RAM.data,t["IR:OPC"]=t.IR.numericOpcode(),t["IR:OPR"]=t.IR.numericOperand(),[2]}}))}))},e}(Kr),ao=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ut(e,t),e.prototype.action=function(t){return Tt(this,void 0,void 0,(function(){var e;return Ot(this,(function(n){switch(n.label){case 0:return e=t.PC+t.INC,Ze.setPC(e),[4,u(xt).flash("PC")];case 1:return n.sent(),t.PC=e,[2]}}))}))},e}(Kr),lo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ut(e,t),e.prototype.action=function(t){return Tt(this,void 0,void 0,(function(){return Ot(this,(function(e){switch(e.label){case 0:return Ze.setIsJumping(!0),Ze.setPC(t["IR:OPR"]),[4,u(xt).flash("PC")];case 1:return e.sent(),t.PC=t["IR:OPR"],[2]}}))}))},e}(Kr),fo=function(t){function e(e){var n=t.call(this)||this;return n.value=e,n}return Ut(e,t),e.prototype.action=function(t){return Tt(this,void 0,void 0,(function(){return Ot(this,(function(e){switch(e.label){case 0:switch(this.value){case"IR:OPR":Ze.setALU2(t.IR.numericOperand()),t["ALU:2"]=t.IR.numericOperand();break;case"RAM":Ze.setALU2(t.RAM.data.value.signed()),t["ALU:2"]=t.RAM.data.value.signed();break;default:throw new Error('Unexpected value "'.concat(this.value,'"'))}return[4,u(xt).flash("ALU:2")];case 1:return e.sent(),[2]}}))}))},e}(Kr),ho=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ut(e,t),e.prototype.action=function(t){return Tt(this,void 0,void 0,(function(){return Ot(this,(function(e){switch(e.label){case 0:return Ze.setOperation(t.IR.opcode.operator),[4,u(xt).flash("ALU:OPR")];case 1:return e.sent(),t["ALU:OPR"]=t.IR.opcode.operator,[2]}}))}))},e}(Kr);function po(t){return t["SW:Z"]}function go(t){return!t["SW:Z"]}function mo(t){return t["SW:N"]}function vo(t){return!t["SW:N"]}var wo=[new Yr("INC").sideffects(new jr("PC:1","INC:2")),new jr("INC:1","PC:2"),new ao],yo=[new Yr("PC").sideffects(new Rn("PC")),new jr("PC:2","RAM:ADD"),new Jr("ADDRESS","PC"),new jr("CU:3","RAM:CTRL"),new so("PC").sideffects(new Jr("DATA","PC")),new jr("RAM:DATA","IR:1"),new uo],bo=[new Rn("IR:OPC"),new jr("IR:3","CU:1"),new Rn("CU")],$o=[new jr("CU:2","MUX:4"),new Rn("MUX")],Ao=[new jr("CU:4","ALU:5"),new ho],Co=[new Yr("ACC").sideffects(new Rn("ACC")),new jr("ACC:1","ALU:1"),new co];function xo(t){return t?Ro:Io}var Ro=[new Rn("IR:OPR"),new jr("IR:2","MUX:1"),new jr("MUX:3","ALU:2"),new fo("IR:OPR")],Io=[new Rn("IR:OPR"),new jr("IR:2","RAM:ADD"),new Jr("ADDRESS","IR:OPR"),new Rn("CU"),new jr("CU:3","RAM:CTRL"),new so("IR:OPR").sideffects(new Jr("DATA","IR:OPR")),new jr("RAM:DATA","MUX:2"),new jr("MUX:3","ALU:2"),new fo("RAM")],Lo=[new Rn("IR:OPR"),new jr("IR:2","PC:2"),new lo],No=[new Rn("IR:OPR").condition(po),new jr("IR:2","PC:2").condition(po),(new lo).condition(po)],So=[new Rn("IR:OPR").condition(go),new jr("IR:2","PC:2").condition(go),(new lo).condition(go)],ko=[new Rn("IR:OPR").condition(mo),new jr("IR:2","PC:2").condition(mo),(new lo).condition(mo)],Uo=[new Rn("IR:OPR").condition(vo),new jr("IR:2","PC:2").condition(vo),(new lo).condition(vo)];var Eo=Et(Et({},At(!1)),{update:function(){return Eo.set(Oo||Do||_o)}}),To={subscribe:Eo.subscribe},Oo=!1,Do=!1,_o=!1,Po=!1,Mo="ENQUEUING_FETCH",Fo=[],Bo={IR:null,"IR:OPC":null,"IR:OPR":null,PC:null,INC:null,"ALU:1":null,"ALU:2":null,"ALU:OPR":"",ACC:null,"SW:Z":!0,"SW:N":!1,RAM:null};function Ho(){return Tt(this,void 0,void 0,(function(){var t;return Ot(this,(function(e){switch(e.label){case 0:return Vo()||!Zo()?[3,2]:[4,(t=Fo.shift()).execute(Bo)];case 1:return e.sent(),Do&&t.doesEndStep()&&Go(!1),[3,0];case 2:return[2]}}))}))}function zo(){qo(!0),Go(!1),Jo(!1),An.info("Execution - START","EXECUTION")}function Wo(){qo(!1),Go(!1),Jo(!1),An.info("Execution - PAUSE","EXECUTION")}function Xo(){Wo(),Mo="ENQUEUING_FETCH",Fo=[],An.info("Execution - RESET","EXECUTION")}function Zo(){return Oo||Do||_o}function Vo(){return 0===Fo.length}function qo(t){Oo=t,Eo.update()}function Go(t){Do=t,Eo.update()}function Jo(t){_o=t,Eo.update()}setInterval((function(){return Tt(this,void 0,void 0,(function(){var t;return Ot(this,(function(e){switch(e.label){case 0:if(Po||!Zo())return[2];Po=!0,e.label=1;case 1:switch(e.trys.push([1,12,13,14]),Mo){case"ENQUEUING_FETCH":return[3,2];case"EXECUTING_FETCH":return[3,3];case"ENQUEUING_INSTRUCTION":return[3,5];case"EXECUTING_INSTRUCTION":return[3,6];case"ENQUEUEING_PC_INCREMENT":return[3,8];case"EXECUTING_PC_INCREMENT":return[3,9]}return[3,11];case 2:return Fo.push.apply(Fo,yo),Ze.clear(),Mo="EXECUTING_FETCH",[3,11];case 3:return[4,Ho()];case 4:return e.sent(),Vo()&&(Mo="ENQUEUING_INSTRUCTION"),[3,11];case 5:return Fo.push.apply(Fo,function(t){if(!t.opcode)throw new Error("Invalid opcode");var e=[];switch(t.opcode.symbolic){case"ADD":case"SUB":case"MUL":case"DIV":case"AND":e.push.apply(e,Dt(Dt(Dt(Dt(Dt(Dt([],bo,!1),$o,!1),Ao,!1),Co,!1),xo(t.immediateFlag()),!1),[new jr("ALU:4","ACC:2"),new eo,new jr("ALU:3","SW:1"),new no],!1));break;case"NOT":e.push.apply(e,Dt(Dt(Dt(Dt([],bo,!1),$o,!1),Ao,!1),[new jr("ALU:4","ACC:2"),new eo,new jr("ALU:3","SW:1"),new no],!1));break;case"CMP":e.push.apply(e,Dt(Dt(Dt(Dt(Dt(Dt([],bo,!1),$o,!1),Ao,!1),Co,!1),xo(t.immediateFlag()),!1),[new jr("ALU:3","SW:1"),new to],!1));break;case"LOD":e.push.apply(e,Dt(Dt(Dt(Dt(Dt([],bo,!1),$o,!1),Ao,!1),xo(t.immediateFlag()),!1),[new jr("ALU:4","ACC:2"),new eo],!1));break;case"STO":e.push.apply(e,Dt(Dt([],bo,!1),[new jr("IR:2","RAM:ADD"),new Jr("ADDRESS","IR:OPR"),new Yr("ACC").sideffects(new Rn("ACC")),new jr("ACC:1","RAM:DATA"),new jr("CU:3","RAM:CTRL"),new oo("IR:OPR")],!1));break;case"JMP":e.push.apply(e,Dt(Dt([],bo,!1),Lo,!1));break;case"JZ":e.push.apply(e,Dt(Dt(Dt([],bo,!1),[new Rn("SW:Z")],!1),No,!1));break;case"JNZ":e.push.apply(e,Dt(Dt(Dt([],bo,!1),[new Rn("SW:Z")],!1),So,!1));break;case"JN":e.push.apply(e,Dt(Dt(Dt([],bo,!1),[new Rn("SW:N")],!1),ko,!1));break;case"JNN":e.push.apply(e,Dt(Dt(Dt([],bo,!1),[new Rn("SW:N")],!1),Uo,!1));break;case"NOP":e.push.apply(e,bo);break;case"HLT":e.push.apply(e,Dt(Dt([],bo,!1),[new io],!1));break;default:throw new Error('Unrecognized opcode: "'.concat(t.opcode.symbolic,'"'))}return e}(Bo.IR)),Mo="EXECUTING_INSTRUCTION",[3,11];case 6:return[4,Ho()];case 7:return e.sent(),Vo()&&(u(Ze).programCounter.unsigned()!==_e||u(Ze).isJumping||Ze.setIsHalting(!0),u(Ze).isJumping?(Mo="ENQUEUING_FETCH",_o&&Jo(!1)):Mo="ENQUEUEING_PC_INCREMENT"),[3,11];case 8:return Fo.push.apply(Fo,wo),Mo="EXECUTING_PC_INCREMENT",[3,11];case 9:return[4,Ho()];case 10:return e.sent(),_o&&(Jo(!1),Ze.setIsHalting(!0)),Vo()&&(Mo="ENQUEUING_FETCH"),[3,11];case 11:return[3,14];case 12:return t=e.sent(),Ze.setIsHalting(!0),u(Nt).message("ERROR",t.message),An.error(t,"EXECUTION",t.isChecked),[3,14];case 13:return u(Ze).isHalting&&Xo(),Po=!1,[7];case 14:return[2]}}))}))}),50);var jo={start:zo,pause:Wo,toggle:function(){u(Eo)?Wo():zo()},step:function(){qo(!1),Go(!0),Jo(!1),An.info("Execution - STEP","EXECUTION")},instruction:function(){qo(!1),Go(!1),Jo(!0),An.info("Execution - INSTRUCTION","EXECUTION")},reset:Xo};function Qo(t){let e,n;return{c(){e=x("svg"),n=x("path"),S(n,"d","M8 6.82v10.36c0 .79.87 1.27 1.54.84l8.14-5.18c.62-.39.62-1.29 0-1.69L9.54 5.98C8.87 5.55 8 6.03 8 6.82z"),S(e,"xmlns","http://www.w3.org/2000/svg"),S(e,"height","24px"),S(e,"viewBox","0 0 24 24"),S(e,"width","24px"),S(e,"fill","#000000"),S(e,"class","svelte-1mc7lva")},m(t,r){b(t,e,r),v(e,n)},d(t){t&&$(e)}}}function Yo(t){let e,n;return{c(){e=x("svg"),n=x("path"),S(n,"d","M8 19c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2s-2 .9-2 2v10c0 1.1.9 2 2 2zm6-12v10c0 1.1.9 2 2 2s2-.9 2-2V7c0-1.1-.9-2-2-2s-2 .9-2 2z"),S(e,"xmlns","http://www.w3.org/2000/svg"),S(e,"height","24px"),S(e,"viewBox","0 0 24 24"),S(e,"width","24px"),S(e,"fill","#000000"),S(e,"class","svelte-1mc7lva")},m(t,r){b(t,e,r),v(e,n)},d(t){t&&$(e)}}}function Ko(e){let n,r,i,s,c,u,a,l,f,d,h,p,g,m,w,y,A,x,L,k,E,T,O,D,_,P,M,F,B,H,z,W,X,Z,V,q,G,J,j,Q,Y,K=e[2].binary?"Symbolic":"Binary";function tt(t,e){return t[0]?Yo:Qo}let et=tt(e),nt=et(e);return{c(){n=C("div"),r=C("div"),i=C("fieldset"),s=C("legend"),s.textContent="Execution",c=I(),u=C("button"),u.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#000000" class="svelte-1mc7lva"><path d="M7 6c.55 0 1 .45 1 1v10c0 .55-.45 1-1 1s-1-.45-1-1V7c0-.55.45-1 1-1zm3.66 6.82l5.77 4.07c.66.47 1.58-.01 1.58-.82V7.93c0-.81-.91-1.28-1.58-.82l-5.77 4.07c-.57.4-.57 1.24 0 1.64z"></path></svg>',a=I(),l=C("button"),nt.c(),f=I(),d=C("button"),d.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#000000" class="svelte-1mc7lva"><path d="M7.58 16.89l5.77-4.07c.56-.4.56-1.24 0-1.63L7.58 7.11C6.91 6.65 6 7.12 6 7.93v8.14c0 .81.91 1.28 1.58.82zM16 7v10c0 .55.45 1 1 1s1-.45 1-1V7c0-.55-.45-1-1-1s-1 .45-1 1z"></path></svg>',h=I(),p=C("fieldset"),g=C("legend"),g.textContent="Step",m=I(),w=C("button"),w.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#000000" class="svelte-1mc7lva"><path d="M8 6.82v10.36c0 .79.87 1.27 1.54.84l8.14-5.18c.62-.39.62-1.29 0-1.69L9.54 5.98C8.87 5.55 8 6.03 8 6.82z"></path></svg>',y=I(),A=C("button"),A.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#000000" class="svelte-1mc7lva"><path d="M7.58 16.89l5.77-4.07c.56-.4.56-1.24 0-1.63L7.58 7.11C6.91 6.65 6 7.12 6 7.93v8.14c0 .81.91 1.28 1.58.82zM16 7v10c0 .55.45 1 1 1s1-.45 1-1V7c0-.55-.45-1-1-1s-1 .45-1 1z"></path></svg>',x=I(),L=C("fieldset"),k=C("legend"),k.textContent="Instruction",E=I(),T=C("button"),T.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#000000" class="svelte-1mc7lva"><path d="M8 6.82v10.36c0 .79.87 1.27 1.54.84l8.14-5.18c.62-.39.62-1.29 0-1.69L9.54 5.98C8.87 5.55 8 6.03 8 6.82z"></path></svg>',O=I(),D=C("button"),D.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#000000" class="svelte-1mc7lva"><path d="M7.58 16.89l5.77-4.07c.56-.4.56-1.24 0-1.63L7.58 7.11C6.91 6.65 6 7.12 6 7.93v8.14c0 .81.91 1.28 1.58.82zM16 7v10c0 .55.45 1 1 1s1-.45 1-1V7c0-.55-.45-1-1-1s-1 .45-1 1z"></path></svg>',_=I(),P=C("div"),M=C("fieldset"),M.innerHTML='<legend class="svelte-1mc7lva">Animation speed</legend> \n\t\t\t<input type="range" disabled=""/>',F=I(),B=C("fieldset"),H=C("legend"),H.textContent="Animation",z=I(),W=C("input"),X=I(),Z=C("div"),V=C("fieldset"),q=C("legend"),q.textContent="Dispaly",G=I(),J=C("button"),j=R(K),S(s,"class","svelte-1mc7lva"),S(u,"title","Reset"),u.disabled=!0,S(u,"class","svelte-1mc7lva"),S(l,"title","Play"),S(l,"class","svelte-1mc7lva"),S(d,"title","Skip to end"),d.disabled=!0,S(d,"class","svelte-1mc7lva"),S(i,"class","svelte-1mc7lva"),S(g,"class","svelte-1mc7lva"),S(w,"title","Play step"),w.disabled=!0,S(w,"class","svelte-1mc7lva"),S(A,"title","Skip step"),A.disabled=!0,S(A,"class","svelte-1mc7lva"),S(p,"class","svelte-1mc7lva"),S(k,"class","svelte-1mc7lva"),S(T,"class","svelte-1mc7lva"),D.disabled=!0,S(D,"class","svelte-1mc7lva"),S(L,"class","svelte-1mc7lva"),S(r,"class","execution-buttons svelte-1mc7lva"),S(M,"class","svelte-1mc7lva"),S(H,"class","svelte-1mc7lva"),S(W,"type","checkbox"),S(B,"class","svelte-1mc7lva"),S(P,"class","animation svelte-1mc7lva"),S(q,"class","svelte-1mc7lva"),S(V,"class","svelte-1mc7lva"),S(Z,"class","display svelte-1mc7lva"),S(n,"class","control-bar svelte-1mc7lva")},m(t,o){b(t,n,o),v(n,r),v(r,i),v(i,s),v(i,c),v(i,u),v(i,a),v(i,l),nt.m(l,null),v(i,f),v(i,d),v(r,h),v(r,p),v(p,g),v(p,m),v(p,w),v(p,y),v(p,A),v(r,x),v(r,L),v(L,k),v(L,E),v(L,T),v(L,O),v(L,D),v(n,_),v(n,P),v(P,M),v(P,F),v(P,B),v(B,H),v(B,z),v(B,W),W.checked=e[1].animate,v(n,X),v(n,Z),v(Z,V),v(V,q),v(V,G),v(V,J),v(J,j),Q||(Y=[N(u,"click",e[3]),N(l,"click",e[4]),N(d,"click",ti),N(w,"click",e[5]),N(A,"click",ei),N(T,"click",e[6]),N(D,"click",ni),N(W,"change",e[8]),N(J,"click",e[7])],Q=!0)},p(t,[e]){et!==(et=tt(t))&&(nt.d(1),nt=et(t),nt&&(nt.c(),nt.m(l,null))),2&e&&(W.checked=t[1].animate),4&e&&K!==(K=t[2].binary?"Symbolic":"Binary")&&U(j,K)},i:t,o:t,d(t){t&&$(n),nt.d(),Q=!1,o(Y)}}}function ti(){}function ei(){}function ni(){}function ri(t,e,n){let r,o,i;return a(t,To,(t=>n(0,r=t))),a(t,le,(t=>n(1,o=t))),a(t,$e,(t=>n(2,i=t))),[r,o,i,function(){jo.reset()},function(){jo.toggle()},function(){jo.step()},function(){jo.instruction()},function(){$e.updateBinary((t=>!t))},function(){o.animate=this.checked,le.set(o)}]}class oi extends bt{constructor(t){super(),yt(this,t,ri,Ko,s,{})}}function ii(t,e,n){const r=t.slice();return r[0]=e[n],r}function si(t,e){let n,r,o,i,s,c,u,a,l,f,d,h=e[0].message+"";function p(){return e[3](e[0])}return{key:t,first:null,c(){n=C("div"),r=C("button"),r.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#FFFFFF" class="svelte-zq3a2s"><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M18.3 5.71c-.39-.39-1.02-.39-1.41 0L12 10.59 7.11 5.7c-.39-.39-1.02-.39-1.41 0-.39.39-.39 1.02 0 1.41L10.59 12 5.7 16.89c-.39.39-.39 1.02 0 1.41.39.39 1.02.39 1.41 0L12 13.41l4.89 4.89c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L13.41 12l4.89-4.89c.38-.38.38-1.02 0-1.4z"></path></svg>',o=I(),i=C("p"),s=R(h),c=I(),S(r,"class","close-message svelte-zq3a2s"),S(i,"class","svelte-zq3a2s"),S(n,"class",u="message "+e[0].type+" svelte-zq3a2s"),this.first=n},m(t,e){b(t,n,e),v(n,r),v(n,o),v(n,i),v(i,s),v(n,c),l=!0,f||(d=N(r,"click",p),f=!0)},p(t,r){e=t,(!l||2&r)&&h!==(h=e[0].message+"")&&U(s,h),(!l||2&r&&u!==(u="message "+e[0].type+" svelte-zq3a2s"))&&S(n,"class",u)},i(t){l||(Q((()=>{a||(a=dt(n,kn,{},!0)),a.run(1)})),l=!0)},o(t){a||(a=dt(n,kn,{},!1)),a.run(0),l=!1},d(t){t&&$(n),t&&a&&a.end(),f=!1,d()}}}function ci(t){let e,n,r=[],o=new Map,i=t[1];const s=t=>t[0].id;for(let e=0;e<i.length;e+=1){let n=ii(t,i,e),c=s(n);o.set(c,r[e]=si(c,n))}return{c(){e=C("div");for(let t=0;t<r.length;t+=1)r[t].c();S(e,"class","feed svelte-zq3a2s")},m(t,o){b(t,e,o);for(let t=0;t<r.length;t+=1)r[t].m(e,null);n=!0},p(t,[n]){6&n&&(i=t[1],ct(),r=function(t,e,n,r,o,i,s,c,u,a,l,f){let d=t.length,h=i.length,p=d;const g={};for(;p--;)g[t[p].key]=p;const m=[],v=new Map,w=new Map;for(p=h;p--;){const t=f(o,i,p),c=n(t);let u=s.get(c);u?r&&u.p(t,e):(u=a(c,t),u.c()),v.set(c,m[p]=u),c in g&&w.set(c,Math.abs(p-g[c]))}const y=new Set,b=new Set;function $(t){at(t,1),t.m(c,l),s.set(t.key,t),l=t.first,h--}for(;d&&h;){const e=m[h-1],n=t[d-1],r=e.key,o=n.key;e===n?(l=e.first,d--,h--):v.has(o)?!s.has(r)||y.has(r)?$(e):b.has(o)?d--:w.get(r)>w.get(o)?(b.add(r),$(e)):(y.add(o),d--):(u(n,s),d--)}for(;d--;){const e=t[d];v.has(e.key)||u(e,s)}for(;h;)$(m[h-1]);return m}(r,n,s,1,t,i,o,e,pt,si,null,ii),ut())},i(t){if(!n){for(let t=0;t<i.length;t+=1)at(r[t]);n=!0}},o(t){for(let t=0;t<r.length;t+=1)lt(r[t]);n=!1},d(t){t&&$(e);for(let t=0;t<r.length;t+=1)r[t].d()}}}function ui(t,e,n){let r=[];function o(t){n(1,r=r.filter((e=>e.id!==t)))}return[function(t,e){3===r.length&&r.shift(),n(1,r=[...r,{id:Math.random(),type:t,message:e}])},r,o,t=>o(t.id)]}class ai extends bt{constructor(t){super(),yt(this,t,ui,ci,s,{message:0})}get message(){return this.$$.ctx[0]}}function li(t,e,n){const r=t.slice();return r[48]=e[n],r}function fi(t,e,n){const r=t.slice();return r[51]=e[n],r}function di(t,e,n){const r=t.slice();return r[51]=e[n],r}function hi(t,e,n){const r=t.slice();return r[56]=e[n],r}function pi(t){let e,n,r,s,c,u,a,l,f,d,h,p,g,m,w,y,x,L,T,D,_,P,M,F,B,H,z,W,X,Z,V,q,G,J,j,Y,K,tt,et,nt,rt,ot,it,st,ct,ut,at,lt,ft,dt,ht,pt,gt,mt,vt,wt,yt,bt,$t,At,Ct,xt,Rt,It,Lt,Nt,St,kt,Ut,Et,Tt,Ot,Dt,_t,Pt,Mt,Ft,Bt,Ht,zt,Wt,Zt,Vt,qt,Gt,Jt,jt,Qt,Yt,Kt,te,ee,ne,re,oe,ie,se,ce,ue,ae,le,fe,de,he,pe,ge,me,ve,we,ye,be,$e,Ae,Ce,xe,Re,Ie,Le,Ne,Se,ke,Ue,Ee=t[9].binary?"Symbolic":"Binary",Te=t[9].showLabels?"No-Labels":"Labels",Oe=t[8].showNodes?"Hide":"Show",De=t[8].showNodeNames?"No-Names":"Names",_e=t[8].showNodesCoordinates?"No-Coordinates":"Coordinates",Pe=["IR","IR:OPC","IR:OPR","PC","INC","MUX","CU","ALU:1","ALU:2","ALU:OPR","ACC","SW:Z","SW:N"],Me=[];for(let e=0;e<13;e+=1)Me[e]=gi(hi(t,Pe,e));let Fe=Xt,Be=[];for(let e=0;e<Fe.length;e+=1)Be[e]=mi(di(t,Fe,e));let He=Xt,ze=[];for(let e=0;e<He.length;e+=1)ze[e]=vi(fi(t,He,e));let We=["ERROR","WARNING","SUCCESS","INFO"],Xe=[];for(let e=0;e<4;e+=1)Xe[e]=wi(li(t,We,e));return{c(){e=C("div"),n=C("h2"),n.textContent="Debugger",r=I(),s=C("button"),s.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#FFFFFF"><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M18.3 5.71c-.39-.39-1.02-.39-1.41 0L12 10.59 7.11 5.7c-.39-.39-1.02-.39-1.41 0-.39.39-.39 1.02 0 1.41L10.59 12 5.7 16.89c-.39.39-.39 1.02 0 1.41.39.39 1.02.39 1.41 0L12 13.41l4.89 4.89c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L13.41 12l4.89-4.89c.38-.38.38-1.02 0-1.4z"></path></svg>',c=I(),u=C("fieldset"),a=C("legend"),a.textContent="Input",l=I(),f=C("input"),d=I(),h=C("input"),p=I(),g=C("fieldset"),m=C("legend"),m.textContent="Execution",w=I(),y=C("button"),y.textContent="Start",x=I(),L=C("button"),L.textContent="Pause",T=I(),D=C("button"),D.textContent="Step",_=I(),P=C("button"),P.textContent="Instruction",M=I(),F=C("button"),F.textContent="Reset",B=I(),H=C("fieldset"),z=C("legend"),z.textContent="RAM",W=I(),X=C("button"),X.textContent="Clear",Z=I(),V=C("button"),V.textContent="Dump",q=I(),G=C("fieldset"),J=C("legend"),J.textContent="RAM Animation",j=I(),Y=C("button"),Y.textContent="Show address",K=I(),tt=C("button"),tt.textContent="Flash address",et=I(),nt=C("button"),nt.textContent="Flash data",rt=I(),ot=C("button"),ot.textContent="Scroll Up",it=I(),st=C("button"),st.textContent="Scroll Down",ct=I(),ut=C("fieldset"),at=C("legend"),at.textContent="CPU",lt=I(),ft=C("button"),ft.textContent="Set ACC",dt=I(),ht=C("button"),ht.textContent="Set PC",pt=I(),gt=C("button"),gt.textContent="Set IR",mt=I(),vt=C("button"),vt.textContent="Set ALU1",wt=I(),yt=C("button"),yt.textContent="Set ALU2",bt=I(),$t=C("button"),$t.textContent="Set ALU op",At=I(),Ct=C("button"),Ct.textContent="Set SWZ",xt=I(),Rt=C("button"),Rt.textContent="Set SWN",It=I(),Lt=C("fieldset"),Nt=C("legend"),Nt.textContent="CPU Animation",St=I(),kt=C("select");for(let t=0;t<13;t+=1)Me[t].c();Ut=I(),Et=C("button"),Et.textContent="Flash component",Tt=I(),Ot=C("fieldset"),Dt=C("legend"),Dt.textContent="Dispaly",_t=I(),Pt=C("button"),Mt=R(Ee),Ft=I(),Bt=C("button"),Ht=R(Te),zt=I(),Wt=C("fieldset"),Zt=C("legend"),Zt.textContent="Nodes",Vt=I(),qt=C("button"),Gt=R(Oe),Jt=I(),jt=C("button"),Qt=R(De),Kt=I(),te=C("button"),ee=R(_e),re=I(),oe=C("fieldset"),ie=C("legend"),ie.textContent="Wires",se=I(),ce=C("select");for(let t=0;t<Be.length;t+=1)Be[t].c();ue=I(),ae=C("select");for(let t=0;t<ze.length;t+=1)ze[t].c();le=I(),fe=C("button"),fe.textContent="Flash",de=I(),he=C("fieldset"),pe=C("legend"),pe.textContent="Message",ge=I(),me=C("select");for(let t=0;t<4;t+=1)Xe[t].c();ve=I(),we=C("button"),we.textContent="Show",ye=I(),be=C("fieldset"),$e=C("legend"),$e.textContent="Position",Ae=I(),Ce=C("button"),Ce.textContent="Left",xe=I(),Re=C("button"),Re.textContent="Top",Ie=I(),Le=C("button"),Le.textContent="Bottom",Ne=I(),Se=C("button"),Se.textContent="Right",S(n,"class","svelte-foehai"),S(s,"class","close-debugger svelte-foehai"),S(s,"title","Close"),S(f,"type","number"),S(f,"placeholder","Number input"),S(f,"class","svelte-foehai"),S(h,"type","text"),S(h,"placeholder","String input"),S(h,"class","svelte-foehai"),S(u,"class","svelte-foehai"),S(y,"class","svelte-foehai"),S(L,"class","svelte-foehai"),S(D,"class","svelte-foehai"),S(P,"class","svelte-foehai"),S(F,"class","svelte-foehai"),S(g,"class","svelte-foehai"),S(X,"class","svelte-foehai"),S(V,"class","svelte-foehai"),S(H,"class","svelte-foehai"),S(Y,"class","svelte-foehai"),S(tt,"class","svelte-foehai"),S(nt,"class","svelte-foehai"),S(ot,"class","svelte-foehai"),S(st,"class","svelte-foehai"),S(G,"class","svelte-foehai"),S(ft,"class","svelte-foehai"),S(ht,"class","svelte-foehai"),S(gt,"class","svelte-foehai"),S(vt,"class","svelte-foehai"),S(yt,"class","svelte-foehai"),S($t,"class","svelte-foehai"),S(Ct,"class","svelte-foehai"),S(Rt,"class","svelte-foehai"),S(ut,"class","svelte-foehai"),void 0===t[6]&&Q((()=>t[35].call(kt))),S(Et,"class","svelte-foehai"),S(Lt,"class","svelte-foehai"),S(Pt,"class","svelte-foehai"),S(Bt,"class","svelte-foehai"),S(Ot,"class","svelte-foehai"),S(qt,"class","svelte-foehai"),jt.disabled=Yt=!t[8].showNodes,S(jt,"class","svelte-foehai"),te.disabled=ne=!t[8].showNodes,S(te,"class","svelte-foehai"),S(Wt,"class","svelte-foehai"),void 0===t[3]&&Q((()=>t[36].call(ce))),void 0===t[4]&&Q((()=>t[37].call(ae))),S(fe,"class","svelte-foehai"),S(oe,"class","svelte-foehai"),void 0===t[5]&&Q((()=>t[38].call(me))),S(we,"class","svelte-foehai"),S(he,"class","svelte-foehai"),S(Ce,"class","svelte-foehai"),S(Re,"class","svelte-foehai"),S(Le,"class","svelte-foehai"),S(Se,"class","svelte-foehai"),S(be,"class","svelte-foehai"),S(e,"class","debug svelte-foehai")},m(o,$){b(o,e,$),v(e,n),v(e,r),v(e,s),v(e,c),v(e,u),v(u,a),v(u,l),v(u,f),E(f,t[0]),v(u,d),v(u,h),E(h,t[2]),v(e,p),v(e,g),v(g,m),v(g,w),v(g,y),v(g,x),v(g,L),v(g,T),v(g,D),v(g,_),v(g,P),v(g,M),v(g,F),v(e,B),v(e,H),v(H,z),v(H,W),v(H,X),v(H,Z),v(H,V),v(e,q),v(e,G),v(G,J),v(G,j),v(G,Y),v(G,K),v(G,tt),v(G,et),v(G,nt),v(G,rt),v(G,ot),v(G,it),v(G,st),v(e,ct),v(e,ut),v(ut,at),v(ut,lt),v(ut,ft),v(ut,dt),v(ut,ht),v(ut,pt),v(ut,gt),v(ut,mt),v(ut,vt),v(ut,wt),v(ut,yt),v(ut,bt),v(ut,$t),v(ut,At),v(ut,Ct),v(ut,xt),v(ut,Rt),v(e,It),v(e,Lt),v(Lt,Nt),v(Lt,St),v(Lt,kt);for(let t=0;t<13;t+=1)Me[t].m(kt,null);O(kt,t[6]),v(Lt,Ut),v(Lt,Et),v(e,Tt),v(e,Ot),v(Ot,Dt),v(Ot,_t),v(Ot,Pt),v(Pt,Mt),v(Ot,Ft),v(Ot,Bt),v(Bt,Ht),v(e,zt),v(e,Wt),v(Wt,Zt),v(Wt,Vt),v(Wt,qt),v(qt,Gt),v(Wt,Jt),v(Wt,jt),v(jt,Qt),v(Wt,Kt),v(Wt,te),v(te,ee),v(e,re),v(e,oe),v(oe,ie),v(oe,se),v(oe,ce);for(let t=0;t<Be.length;t+=1)Be[t].m(ce,null);O(ce,t[3]),v(oe,ue),v(oe,ae);for(let t=0;t<ze.length;t+=1)ze[t].m(ae,null);O(ae,t[4]),v(oe,le),v(oe,fe),v(e,de),v(e,he),v(he,pe),v(he,ge),v(he,me);for(let t=0;t<4;t+=1)Xe[t].m(me,null);O(me,t[5]),v(he,ve),v(he,we),v(e,ye),v(e,be),v(be,$e),v(be,Ae),v(be,Ce),v(be,xe),v(be,Re),v(be,Ie),v(be,Le),v(be,Ne),v(be,Se),t[43](e),ke||(Ue=[N(s,"click",t[10]),N(f,"input",t[33]),N(h,"input",t[34]),N(y,"click",jo.start),N(L,"click",jo.pause),N(D,"click",jo.step),N(P,"click",jo.instruction),N(F,"click",jo.reset),N(X,"click",t[20]),N(V,"click",t[21]),N(Y,"click",t[17]),N(tt,"click",t[18]),N(nt,"click",t[19]),N(ot,"click",(function(){i(t[7].scrollUp)&&t[7].scrollUp.apply(this,arguments)})),N(st,"click",(function(){i(t[7].scrollDown)&&t[7].scrollDown.apply(this,arguments)})),N(ft,"click",t[22]),N(ht,"click",t[23]),N(gt,"click",t[24]),N(vt,"click",t[25]),N(yt,"click",t[26]),N($t,"click",t[27]),N(Ct,"click",t[28]),N(Rt,"click",t[29]),N(kt,"change",t[35]),N(Et,"click",t[30]),N(Pt,"click",t[12]),N(Bt,"click",t[13]),N(qt,"click",t[14]),N(jt,"click",t[15]),N(te,"click",t[16]),N(ce,"change",t[36]),N(ae,"change",t[37]),N(fe,"click",t[31]),N(me,"change",t[38]),N(we,"click",t[32]),N(Ce,"click",t[39]),N(Re,"click",t[40]),N(Le,"click",t[41]),N(Se,"click",t[42])],ke=!0)},p(e,n){if(t=e,1&n[0]&&k(f.value)!==t[0]&&E(f,t[0]),4&n[0]&&h.value!==t[2]&&E(h,t[2]),64&n[0]&&O(kt,t[6]),512&n[0]&&Ee!==(Ee=t[9].binary?"Symbolic":"Binary")&&U(Mt,Ee),512&n[0]&&Te!==(Te=t[9].showLabels?"No-Labels":"Labels")&&U(Ht,Te),256&n[0]&&Oe!==(Oe=t[8].showNodes?"Hide":"Show")&&U(Gt,Oe),256&n[0]&&De!==(De=t[8].showNodeNames?"No-Names":"Names")&&U(Qt,De),256&n[0]&&Yt!==(Yt=!t[8].showNodes)&&(jt.disabled=Yt),256&n[0]&&_e!==(_e=t[8].showNodesCoordinates?"No-Coordinates":"Coordinates")&&U(ee,_e),256&n[0]&&ne!==(ne=!t[8].showNodes)&&(te.disabled=ne),0&n){let e;for(Fe=Xt,e=0;e<Fe.length;e+=1){const r=di(t,Fe,e);Be[e]?Be[e].p(r,n):(Be[e]=mi(r),Be[e].c(),Be[e].m(ce,null))}for(;e<Be.length;e+=1)Be[e].d(1);Be.length=Fe.length}if(8&n[0]&&O(ce,t[3]),0&n){let e;for(He=Xt,e=0;e<He.length;e+=1){const r=fi(t,He,e);ze[e]?ze[e].p(r,n):(ze[e]=vi(r),ze[e].c(),ze[e].m(ae,null))}for(;e<ze.length;e+=1)ze[e].d(1);ze.length=He.length}16&n[0]&&O(ae,t[4]),32&n[0]&&O(me,t[5])},d(n){n&&$(e),A(Me,n),A(Be,n),A(ze,n),A(Xe,n),t[43](null),ke=!1,o(Ue)}}}function gi(e){let n,r,o;return{c(){n=C("option"),r=R(e[56]),n.__value=o=e[56],n.value=n.__value},m(t,e){b(t,n,e),v(n,r)},p:t,d(t){t&&$(n)}}}function mi(e){let n,r,o,i=e[51].name+"";return{c(){n=C("option"),r=R(i),n.__value=o=e[51].name,n.value=n.__value},m(t,e){b(t,n,e),v(n,r)},p:t,d(t){t&&$(n)}}}function vi(e){let n,r,o,i=e[51].name+"";return{c(){n=C("option"),r=R(i),n.__value=o=e[51].name,n.value=n.__value},m(t,e){b(t,n,e),v(n,r)},p:t,d(t){t&&$(n)}}}function wi(e){let n,r,o;return{c(){n=C("option"),r=R(e[48]),n.__value=o=e[48],n.value=n.__value},m(t,e){b(t,n,e),v(n,r)},p:t,d(t){t&&$(n)}}}function yi(e){let n,r=e[8].showDegugger&&pi(e);return{c(){r&&r.c(),n=L()},m(t,e){r&&r.m(t,e),b(t,n,e)},p(t,e){t[8].showDegugger?r?r.p(t,e):(r=pi(t),r.c(),r.m(n.parentNode,n)):r&&(r.d(1),r=null)},i:t,o:t,d(t){r&&r.d(t),t&&$(n)}}}function bi(t,e,n){let r,o,i,s,c,l,f,d;a(t,Nt,(t=>n(45,o=t))),a(t,xt,(t=>n(46,i=t))),a(t,Yn,(t=>n(47,s=t))),a(t,Ct,(t=>n(7,c=t))),a(t,Ft,(t=>n(8,l=t))),a(t,$e,(t=>n(9,f=t)));let h,p,g,m,v="",w="";function y(t){switch(t){case"top":n(1,d.style.top="0",d),n(1,d.style.bottom="auto",d);break;case"right":n(1,d.style.right="0",d),n(1,d.style.left="auto",d);break;case"bottom":n(1,d.style.bottom="0",d),n(1,d.style.top="auto",d);break;case"left":n(1,d.style.left="0",d),n(1,d.style.right="auto",d)}}X((()=>{const t=t=>{t.shiftKey&&"d"===t.key.toLowerCase()&&Ft.updateShowDebugger((t=>!t))};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)}));return t.$$.update=()=>{1&t.$$.dirty[0]&&(r=parseInt(v))},[v,d,w,h,p,g,m,c,l,f,function(){Ft.setShowDebugger(!1)},y,function(){$e.updateBinary((t=>!t))},function(){$e.updateShowLabels((t=>!t))},function(){Ft.updateShowNodes((t=>!t))},function(){Ft.updateShowNodeNames((t=>!t))},function(){Ft.updateShowNodeCoordinates((t=>!t))},function(){Me(r)&&c.showAddress(r)},function(){Me(r)&&c.flashAddress(r)},function(){Me(r)&&c.flashContent(r)},function(){Yn.clear(),ur.clear()},function(){console.log("--- RAM CONTENT ----------------"),console.dir(s),console.log("--------------------------------")},function(){Ze.setACC(r)},function(){Ze.setPC(r)},function(){Ze.setIR(Xn(w,!1))},function(){Ze.setALU1(r)},function(){Ze.setALU2(r)},function(){["+","-","*","/",":","!","&","=",""].includes(w)&&Ze.setOperation(w)},function(){Ze.setZeroFlag(!!v)},function(){Ze.setNegativeFlag(!!v)},function(){i.flash(m)},function(){Zt(h)&&Zt(p)&&u(St.wires).flashWire(h,p)},function(){o.message(g,w)},function(){v=k(this.value),n(0,v)},function(){w=this.value,n(2,w)},function(){m=D(this),n(6,m)},function(){h=D(this),n(3,h)},function(){p=D(this),n(4,p)},function(){g=D(this),n(5,g)},()=>y("left"),()=>y("top"),()=>y("bottom"),()=>y("right"),function(t){V[t?"unshift":"push"]((()=>{d=t,n(1,d)}))}]}class $i extends bt{constructor(t){super(),yt(this,t,bi,yi,s,{},null,[-1,-1])}}const{window:Ai}=ht;function Ci(t){let e,n,r,o,i,s,c,u,a,l,f;n=new Gr({});o=new oi({props:{}}),t[5](o);s=new $i({props:{}}),t[7](s);return u=new ai({props:{}}),t[8](u),{c(){e=C("div"),gt(n.$$.fragment),r=I(),gt(o.$$.fragment),i=I(),gt(s.$$.fragment),c=I(),gt(u.$$.fragment),S(e,"class","app svelte-1v7r9sc")},m(d,h){b(d,e,h),mt(n,e,null),v(e,r),mt(o,e,null),t[6](e),b(d,i,h),mt(s,d,h),b(d,c,h),mt(u,d,h),a=!0,l||(f=N(Ai,"resize",t[4]),l=!0)},p(t,[e]){o.$set({});s.$set({});u.$set({})},i(t){a||(at(n.$$.fragment,t),at(o.$$.fragment,t),at(s.$$.fragment,t),at(u.$$.fragment,t),a=!0)},o(t){lt(n.$$.fragment,t),lt(o.$$.fragment,t),lt(s.$$.fragment,t),lt(u.$$.fragment,t),a=!1},d(r){r&&$(e),vt(n),t[5](null),vt(o),t[6](null),r&&$(i),t[7](null),vt(s,r),r&&$(c),t[8](null),vt(u,r),l=!1,f()}}}function xi(t,e,n){let r,o,i,s;function c(){let t=window.innerWidth/1400,e=window.innerHeight/800,r=t<e?t:e;n(0,s.style.transform=`scale(${r})`,s)}return a(t,It,(t=>n(1,r=t))),a(t,Lt,(t=>n(2,o=t))),a(t,Nt,(t=>n(3,i=t))),X((()=>{c(),u(Rt).drawStaticWires()})),[s,r,o,i,c,function(t){V[t?"unshift":"push"]((()=>{r=t,It.set(r)}))},function(t){V[t?"unshift":"push"]((()=>{s=t,n(0,s)}))},function(t){V[t?"unshift":"push"]((()=>{o=t,Lt.set(o)}))},function(t){V[t?"unshift":"push"]((()=>{i=t,Nt.set(i)}))}]}return new class extends bt{constructor(t){super(),yt(this,t,xi,Ci,s,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
