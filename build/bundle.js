var app=function(){"use strict";function t(){}const e=t=>t;function n(t,e){for(const n in e)t[n]=e[n];return t}function s(t){return t()}function r(){return Object.create(null)}function o(t){t.forEach(s)}function i(t){return"function"==typeof t}function c(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function a(e,...n){if(null==e)return t;const s=e.subscribe(...n);return s.unsubscribe?()=>s.unsubscribe():s}function l(t){let e;return a(t,(t=>e=t))(),e}function u(t,e,n){t.$$.on_destroy.push(a(e,n))}function f(t,e,n,s){if(t){const r=d(t,e,n,s);return t[0](r)}}function d(t,e,s,r){return t[1]&&r?n(s.ctx.slice(),t[1](r(e))):s.ctx}function p(t,e,n,s){if(t[2]&&s){const r=t[2](s(n));if(void 0===e.dirty)return r;if("object"==typeof r){const t=[],n=Math.max(e.dirty.length,r.length);for(let s=0;s<n;s+=1)t[s]=e.dirty[s]|r[s];return t}return e.dirty|r}return e.dirty}function h(t,e,n,s,r,o){if(r){const i=d(e,n,s,o);t.p(i,r)}}function m(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let t=0;t<n;t++)e[t]=-1;return e}return-1}function g(t){const e={};for(const n in t)"$"!==n[0]&&(e[n]=t[n]);return e}function $(t,e){const n={};e=new Set(e);for(const s in t)e.has(s)||"$"===s[0]||(n[s]=t[s]);return n}function y(t){return null==t?"":t}function w(t,e,n){return t.set(n),e}function b(e){return e&&i(e.destroy)?e.destroy:t}const v="undefined"!=typeof window;let x=v?()=>window.performance.now():()=>Date.now(),k=v?t=>requestAnimationFrame(t):t;const _=new Set;function S(t){_.forEach((e=>{e.c(t)||(_.delete(e),e.f())})),0!==_.size&&k(S)}function A(t){let e;return 0===_.size&&k(S),{promise:new Promise((n=>{_.add(e={c:t,f:n})})),abort(){_.delete(e)}}}function E(t,e){t.appendChild(e)}function N(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function I(t){const e=L("style");return function(t,e){E(t.head||t,e)}(N(t),e),e.sheet}function T(t,e,n){t.insertBefore(e,n||null)}function C(t){t.parentNode.removeChild(t)}function O(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function L(t){return document.createElement(t)}function R(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function U(t){return document.createTextNode(t)}function D(){return U(" ")}function P(){return U("")}function Q(t,e,n,s){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n,s)}function M(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function B(t){return""===t?null:+t}function F(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function j(t,e){t.value=null==e?"":e}function K(t,e,n,s){null===n?t.style.removeProperty(e):t.style.setProperty(e,n,s?"important":"")}function W(t,e){for(let n=0;n<t.options.length;n+=1){const s=t.options[n];if(s.__value===e)return void(s.selected=!0)}t.selectedIndex=-1}function q(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}function H(t,e,{bubbles:n=!1,cancelable:s=!1}={}){const r=document.createEvent("CustomEvent");return r.initCustomEvent(t,n,s,e),r}const V=new Map;let G,X=0;function J(t,e,n,s,r,o,i,c=0){const a=16.666/s;let l="{\n";for(let t=0;t<=1;t+=a){const s=e+(n-e)*o(t);l+=100*t+`%{${i(s,1-s)}}\n`}const u=l+`100% {${i(n,1-n)}}\n}`,f=`__svelte_${function(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(u)}_${c}`,d=N(t),{stylesheet:p,rules:h}=V.get(d)||function(t,e){const n={stylesheet:I(e),rules:{}};return V.set(t,n),n}(d,t);h[f]||(h[f]=!0,p.insertRule(`@keyframes ${f} ${u}`,p.cssRules.length));const m=t.style.animation||"";return t.style.animation=`${m?`${m}, `:""}${f} ${s}ms linear ${r}ms 1 both`,X+=1,f}function z(t,e){const n=(t.style.animation||"").split(", "),s=n.filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")),r=n.length-s.length;r&&(t.style.animation=s.join(", "),X-=r,X||k((()=>{X||(V.forEach((t=>{const{stylesheet:e}=t;let n=e.cssRules.length;for(;n--;)e.deleteRule(n);t.rules={}})),V.clear())})))}function Y(t){G=t}function Z(){if(!G)throw new Error("Function called outside component initialization");return G}function tt(t){Z().$$.on_mount.push(t)}function et(){const t=Z();return(e,n,{cancelable:s=!1}={})=>{const r=t.$$.callbacks[e];if(r){const o=H(e,n,{cancelable:s});return r.slice().forEach((e=>{e.call(t,o)})),!o.defaultPrevented}return!0}}function nt(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach((t=>t.call(this,e)))}const st=[],rt=[],ot=[],it=[],ct=Promise.resolve();let at=!1;function lt(t){ot.push(t)}function ut(t){it.push(t)}const ft=new Set;let dt,pt=0;function ht(){const t=G;do{for(;pt<st.length;){const t=st[pt];pt++,Y(t),mt(t.$$)}for(Y(null),st.length=0,pt=0;rt.length;)rt.pop()();for(let t=0;t<ot.length;t+=1){const e=ot[t];ft.has(e)||(ft.add(e),e())}ot.length=0}while(st.length);for(;it.length;)it.pop()();at=!1,ft.clear(),Y(t)}function mt(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(lt)}}function gt(){return dt||(dt=Promise.resolve(),dt.then((()=>{dt=null}))),dt}function $t(t,e,n){t.dispatchEvent(H(`${e?"intro":"outro"}${n}`))}const yt=new Set;let wt;function bt(){wt={r:0,c:[],p:wt}}function vt(){wt.r||o(wt.c),wt=wt.p}function xt(t,e){t&&t.i&&(yt.delete(t),t.i(e))}function kt(t,e,n,s){if(t&&t.o){if(yt.has(t))return;yt.add(t),wt.c.push((()=>{yt.delete(t),s&&(n&&t.d(1),s())})),t.o(e)}else s&&s()}const _t={duration:0};function St(n,s,r,c){let a=s(n,r),l=c?0:1,u=null,f=null,d=null;function p(){d&&z(n,d)}function h(t,e){const n=t.b-l;return e*=Math.abs(n),{a:l,b:t.b,d:n,duration:e,start:t.start,end:t.start+e,group:t.group}}function m(s){const{delay:r=0,duration:i=300,easing:c=e,tick:m=t,css:g}=a||_t,$={start:x()+r,b:s};s||($.group=wt,wt.r+=1),u||f?f=$:(g&&(p(),d=J(n,l,s,i,r,c,g)),s&&m(0,1),u=h($,i),lt((()=>$t(n,s,"start"))),A((t=>{if(f&&t>f.start&&(u=h(f,i),f=null,$t(n,u.b,"start"),g&&(p(),d=J(n,l,u.b,u.duration,0,c,a.css))),u)if(t>=u.end)m(l=u.b,1-l),$t(n,u.b,"end"),f||(u.b?p():--u.group.r||o(u.group.c)),u=null;else if(t>=u.start){const e=t-u.start;l=u.a+u.d*c(e/u.duration),m(l,1-l)}return!(!u&&!f)})))}return{run(t){i(a)?gt().then((()=>{a=a(),m(t)})):m(t)},end(){p(),u=f=null}}}const At="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function Et(t,e){kt(t,1,1,(()=>{e.delete(t.key)}))}function Nt(t,e,n){const s=t.$$.props[e];void 0!==s&&(t.$$.bound[s]=n,n(t.$$.ctx[s]))}function It(t){t&&t.c()}function Tt(t,e,n,r){const{fragment:c,on_mount:a,on_destroy:l,after_update:u}=t.$$;c&&c.m(e,n),r||lt((()=>{const e=a.map(s).filter(i);l?l.push(...e):o(e),t.$$.on_mount=[]})),u.forEach(lt)}function Ct(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Ot(t,e){-1===t.$$.dirty[0]&&(st.push(t),at||(at=!0,ct.then(ht)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Lt(e,n,s,i,c,a,l,u=[-1]){const f=G;Y(e);const d=e.$$={fragment:null,ctx:null,props:a,update:t,not_equal:c,bound:r(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(f?f.$$.context:[])),callbacks:r(),dirty:u,skip_bound:!1,root:n.target||f.$$.root};l&&l(d.root);let p=!1;if(d.ctx=s?s(e,n.props||{},((t,n,...s)=>{const r=s.length?s[0]:n;return d.ctx&&c(d.ctx[t],d.ctx[t]=r)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](r),p&&Ot(e,t)),n})):[],d.update(),p=!0,o(d.before_update),d.fragment=!!i&&i(d.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);d.fragment&&d.fragment.l(t),t.forEach(C)}else d.fragment&&d.fragment.c();n.intro&&xt(e.$$.fragment),Tt(e,n.target,n.anchor,n.customElement),ht()}Y(f)}class Rt{$destroy(){Ct(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Ut=[];function Dt(e,n=t){let s;const r=new Set;function o(t){if(c(e,t)&&(e=t,s)){const t=!Ut.length;for(const t of r)t[1](),Ut.push(t,e);if(t){for(let t=0;t<Ut.length;t+=2)Ut[t][0](Ut[t+1]);Ut.length=0}}}return{set:o,update:function(t){o(t(e))},subscribe:function(i,c=t){const a=[i,c];return r.add(a),1===r.size&&(s=n(o)||t),i(e),()=>{r.delete(a),0===r.size&&(s(),s=null)}}}}var Pt=Dt(),Qt=Dt(),Mt=Dt(),Bt=Dt(),Ft=Dt(),jt=Dt(),Kt=Dt(),Wt=Dt(),qt=Dt(),Ht=Dt(),Vt=Dt(!1),Gt=Dt(!1),Xt=Dt(!1),Jt=Dt(!1),zt=function(t,e){return zt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},zt(t,e)};function Yt(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}zt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Zt=function(){return Zt=Object.assign||function(t){for(var e,n=1,s=arguments.length;n<s;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},Zt.apply(this,arguments)};function te(t,e,n,s){return new(n||(n=Promise))((function(r,o){function i(t){try{a(s.next(t))}catch(t){o(t)}}function c(t){try{a(s.throw(t))}catch(t){o(t)}}function a(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,c)}a((s=s.apply(t,e||[])).next())}))}function ee(t,e){var n,s,r,o,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,s&&(r=2&o[0]?s.return:o[0]?s.throw||((r=s.return)&&r.call(s),0):s.next)&&!(r=r.call(s,o[1])).done)return r;switch(s=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,s=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(r=i.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){i.label=o[1];break}if(6===o[0]&&i.label<r[1]){i.label=r[1],r=o;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(o);break}r[2]&&i.ops.pop(),i.trys.pop();continue}o=e.call(t,i)}catch(t){o=[6,t],s=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}}function ne(t,e,n){if(n||2===arguments.length)for(var s,r=0,o=e.length;r<o;r++)!s&&r in e||(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}var se=function(){function t(t,e,n,s){void 0===s&&(s=null),this.x=e,this.y=n,this.name=t,this.neighbours=[],this.intersectionType=s}return t.prototype.isAlignedTo=function(t){return this.x===t.x||this.y===t.y},t.prototype.isConnectedTo=function(t){return this.neighbours.some((function(e){return e===t}))},t.prototype.connectTo=function(t,e){if(!this.isAlignedTo(t))throw new Error("Cannot connect 2 nodes that are not aligned (nodeA: "+this.name+" nodeB: "+t.name+")");if(this.isConnectedTo(t))throw new Error("This node is already connected to "+t.name);this.neighbours.push(t),t.neighbours.push(this)},t.distance=function(t,e){return Math.hypot(t.x-e.x,t.y-e.y)},t.direction=function(t,e){return t.x>e.x?{x:-1,y:0}:t.x<e.x?{x:1,y:0}:t.y>e.y?{x:0,y:-1}:{x:0,y:1}},t}(),re={name:"DATA_INT",color:"cyan",animationColor:"darkgreen"},oe={name:"DATA_EXT",color:"blue",animationColor:"lime"},ie={name:"CONTROL_INT",color:"#ff7a90",animationColor:"lime"},ce={name:"CONTROL_EXT",color:"red",animationColor:"lime"},ae={name:"ADDRESS_INT",color:"yellow",animationColor:"darkgreen"},le={name:"ADDRESS_EXT",color:"darkorange",animationColor:"lime"},ue={name:"INVISIBLE",color:"transparent",animationColor:"transparent"},fe=[new se("RAM:DATA",1250,115),new se("DATA:1",1250,85,oe),new se("DATA:2",749,85),new se("DATA:3",527,85),new se("DATA:4",262,85),new se("DATA:5",95,85,re),new se("DATA:6",95,390),new se("DATA:7",95,617,re),new se("DATA:8",320,390,re),new se("DATA:9",312,250,re),new se("DATA:10",477,250),new se("DATA:11",652,490,re),new se("IR:1",262,151),new se("IR:2",312,180),new se("IR:3",212,180),new se("MUX:1",477,292),new se("MUX:2",527,292),new se("MUX:3",502,332),new se("ACC:1",327,617),new se("ACC:2",412,601),new se("ALU:1",320,432),new se("ALU:2",502,432),new se("ALU:3",526,490),new se("ALU:4",412,538),new se("SW:1",652,601)],de=[new se("RAM:ADD",1061,250),new se("ADD:1",749,250),new se("ADD:2",670,250),new se("ADD:3",590,250),new se("ADD:4",590,137,ae),new se("ADD:5",532,250),new se("ADD:6",522,250),new se("INC:1",670,210),new se("INC:2",670,182),new se("PC:1",670,150),new se("PC:2",622,137)],pe=[new se("RAM:CTRL",1061,370),new se("CTRL:1",749,370),new se("CTRL:2",507,370),new se("CTRL:3",497,370),new se("CTRL:4",240,370,ie),new se("CTRL:5",185,385),new se("CTRL:6",185,395),new se("CTRL:7",185,490,ie),new se("CU:1",212,281),new se("CU:2",270,313),new se("CU:3",240,340),new se("CU:4",185,340),new se("MUX:4",464,313),new se("ALU:5",297,490)],he=ne(ne(ne([],fe,!0),de,!0),pe,!0);function me(t){return he.find((function(e){return e.name===t}))}var ge=function(){function t(t,e,n){this.a=t,this.b=e,this.type=n,this.a.connectTo(e,this)}return t.prototype.isConnecting=function(t,e){return this.a===t&&this.b===e||this.a===e&&this.b===t},t.WIDTH=5,t}(),$e=[new ge(me("RAM:DATA"),me("DATA:1"),oe),new ge(me("DATA:1"),me("DATA:2"),oe),new ge(me("DATA:2"),me("DATA:3"),re),new ge(me("DATA:3"),me("DATA:4"),re),new ge(me("DATA:4"),me("DATA:5"),re),new ge(me("DATA:5"),me("DATA:6"),re),new ge(me("DATA:6"),me("DATA:7"),re),new ge(me("DATA:6"),me("DATA:8"),re),new ge(me("DATA:8"),me("ALU:1"),re),new ge(me("DATA:7"),me("ACC:1"),re),new ge(me("MUX:3"),me("ALU:2"),re),new ge(me("ALU:4"),me("ACC:2"),re),new ge(me("ALU:3"),me("DATA:11"),re),new ge(me("DATA:11"),me("SW:1"),re),new ge(me("DATA:4"),me("IR:1"),re),new ge(me("IR:3"),me("CU:1"),re),new ge(me("IR:2"),me("DATA:9"),re),new ge(me("DATA:9"),me("DATA:10"),re),new ge(me("DATA:10"),me("MUX:1"),re),new ge(me("DATA:3"),me("MUX:2"),re)],ye=[new ge(me("RAM:ADD"),me("ADD:1"),le),new ge(me("ADD:1"),me("ADD:2"),ae),new ge(me("ADD:2"),me("INC:1"),ae),new ge(me("INC:2"),me("PC:1"),ae),new ge(me("PC:2"),me("ADD:4"),ae),new ge(me("ADD:2"),me("ADD:3"),ae),new ge(me("ADD:3"),me("ADD:4"),ae),new ge(me("ADD:3"),me("ADD:5"),ae),new ge(me("ADD:5"),me("ADD:6"),ue),new ge(me("ADD:6"),me("DATA:10"),ae)],we=[new ge(me("CU:2"),me("MUX:4"),ie),new ge(me("RAM:CTRL"),me("CTRL:1"),ce),new ge(me("CTRL:1"),me("CTRL:2"),ie),new ge(me("CTRL:2"),me("CTRL:3"),ue),new ge(me("CTRL:3"),me("CTRL:4"),ie),new ge(me("CTRL:4"),me("CU:3"),ie),new ge(me("CU:4"),me("CTRL:5"),ie),new ge(me("CTRL:5"),me("CTRL:6"),ue),new ge(me("CTRL:6"),me("CTRL:7"),ie),new ge(me("CTRL:7"),me("ALU:5"),ie)],be=ne(ne(ne([],$e,!0),ye,!0),we,!0);function ve(t){return be.find((function(e){return e.a.name+"-"+e.b.name===t||e.b.name+"-"+e.a.name===t}))}function xe(t,e){localStorage.setItem(t,e.toString())}function ke(t){return null!==localStorage.getItem(t)}function _e(t){return"true"===localStorage.getItem(t)}function Se(t){return+localStorage.getItem(t)}function Ae(t){return localStorage.getItem(t)}var Ee,Ne,Ie,Te=["en","it"],Ce=Dt(!!ke("showSettings")&&_e("showSettings")),Oe=Dt(!!ke("displayAsBinary")&&_e("displayAsBinary")),Le=Dt(!ke("displayLabels")||_e("displayLabels")),Re=Dt(!!ke("displayStepText")&&_e("displayStepText")),Ue=Dt(!!ke("minimalAnimations")&&_e("minimalAnimations")),De=Dt(ke("animationSpeed")?Se("animationSpeed"):1.6),Pe=Dt(ke("language")?(Ee="language",localStorage.getItem(Ee)):function(){var t=void 0!==navigator.languages?navigator.languages[0]:navigator.language;return t=t.split("-")[0],Te.includes(t)?t:"en"}()),Qe=Dt(!!ke("ttsEnabled")&&_e("ttsEnabled")),Me=Dt(ke("ttsSpeed")?Se("ttsSpeed"):1),Be=Dt(ke("ttsVoice")?Ae("ttsVoice"):""),Fe=Dt();function je(t){return window.speechSynthesis.getVoices().filter((function(e){return e.lang.startsWith(t)}))}Pe.subscribe((function(t){return Fe.set(je(t))})),Fe.subscribe((function(t){var e;ke("ttsVoice")&&(null==t?void 0:t.find((function(t){return t.name===Ae("ttsVoice")})))?Be.set(Ae("ttsVoice")):Be.set((null===(e=t[0])||void 0===e?void 0:e.name)||"")})),window.addEventListener("load",(function(){Fe.set(je(l(Pe))),Ce.subscribe((function(t){return xe("showSettings",t)})),Oe.subscribe((function(t){return xe("displayAsBinary",t)})),Le.subscribe((function(t){return xe("displayLabels",t)})),Re.subscribe((function(t){return xe("displayStepText",t)})),Ue.subscribe((function(t){return xe("minimalAnimations",t)})),De.subscribe((function(t){return xe("animationSpeed",t)})),Pe.subscribe((function(t){return xe("language",t)})),Qe.subscribe((function(t){return xe("ttsEnabled",t)})),Me.subscribe((function(t){return xe("ttsSpeed",t)})),Be.subscribe((function(t){return xe("ttsVoice",t)}))}));var Ke=function(){function t(t,e){this.pos={x:0,y:0},this.path=ne([],t,!0),this.wires=ne([],e,!0),this.reset()}return t.prototype.play=function(){return te(this,void 0,void 0,(function(){return ee(this,(function(t){return[2,new Promise(this._play.bind(this))]}))}))},t.prototype._play=function(t,e){this.resolve=t,requestAnimationFrame(this.startAnimation.bind(this))},t.prototype.startAnimation=function(t){this.previousTimestamp=t,this.animate(t)},t.prototype.animate=function(t){this.deltatime=(t-this.previousTimestamp)/1e3;var e=Math.floor(400*this.deltatime*l(De));if(this.draw(e),this.pos.x===this.path[this.path.length-1].x&&this.pos.y===this.path[this.path.length-1].y)return qe(0),this.reset(),void this.resolve();this.previousTimestamp=t,requestAnimationFrame(this.animate.bind(this))},t.prototype.draw=function(t){for(Ie.beginPath(),Ie.moveTo(this.pos.x,this.pos.y);t>0;){for(this.nextNode=He(this.pos,this.path[this.nextNodeIndex],t),Ie.strokeStyle=this.wires[this.nextNodeIndex-1].type.animationColor;(this.pos.x!==this.nextNode.node.x||this.pos.y!==this.nextNode.node.y)&&t>0;)this.incrementedX=this.pos.x+this.nextNode.direction.x,this.incrementedY=this.pos.y+this.nextNode.direction.y,Ie.lineTo(this.incrementedX,this.incrementedY),Ie.stroke(),this.pos.x=this.incrementedX,this.pos.y=this.incrementedY,t--;We(.05),this.pos.x===this.path[this.nextNodeIndex].x&&this.pos.y===this.path[this.nextNodeIndex].y&&(this.nextNodeIndex++,this.nextNodeIndex===this.path.length&&(t=0))}Ie.closePath()},t.prototype.reset=function(){this.pos.x=this.path[0].x,this.pos.y=this.path[0].y,this.nextNodeIndex=1},t}();function We(t){Ie.save(),Ie.globalAlpha=t,Ie.globalCompositeOperation="destination-out",Ie.fillStyle="#FFF",Ie.fillRect(0,0,Ne.width,Ne.height),Ie.restore()}function qe(t){We(.1),40!==++t?requestAnimationFrame((function(){return qe(t)})):Ie.clearRect(0,0,Ne.width,Ne.height)}function He(t,e,n){var s=se.direction(t,e),r=se.distance(t,e),o=e;return r>n&&(r=n,o=function(t,e,n){return{x:t.x+e*n.x,y:t.y+e*n.y}}(t,n,s)),{distance:r,direction:s,node:o}}function Ve(e){let n,s,r;return{c(){n=L("canvas"),s=D(),r=L("canvas"),M(n,"class","absolute z-[2] top-0 left-0 w-app h-app"),M(r,"class","absolute z-[2] top-0 left-0 w-app h-app")},m(t,o){T(t,n,o),e[4](n),T(t,s,o),T(t,r,o),e[5](r)},p:t,i:t,o:t,d(t){t&&C(n),e[4](null),t&&C(s),t&&C(r),e[5](null)}}}function Ge(t,e,n){var s=this&&this.__awaiter||function(t,e,n,s){return new(n||(n=Promise))((function(r,o){function i(t){try{a(s.next(t))}catch(t){o(t)}}function c(t){try{a(s.throw(t))}catch(t){o(t)}}function a(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,c)}a((s=s.apply(t,e||[])).next())}))};const r=new Map;let o,i;function c(){const t=o.getContext("2d");t.lineWidth=ge.WIDTH,t.clearRect(0,0,i.width,i.height);for(const e of be)t.strokeStyle=e.type.color,t.beginPath(),t.moveTo(e.a.x,e.a.y),t.lineTo(e.b.x,e.b.y),t.stroke();for(const e of he.filter((t=>null!==t.intersectionType))){const n=ge.WIDTH/2-.5;t.beginPath(),t.fillStyle=e.intersectionType.color,t.arc(e.x,e.y,n,0,2*Math.PI),t.fill()}}return tt((()=>s(void 0,void 0,void 0,(function*(){n(0,o.width=n(1,i.width=1400,i),o),n(0,o.height=n(1,i.height=800,i),o),c(),(Ie=(Ne=i).getContext("2d")).lineCap="round",Ie.lineWidth=ge.WIDTH})))),[o,i,function(t,e){return s(this,void 0,void 0,(function*(){const n=me(t),s=me(e);if(!n)throw new Error("Node "+t+" is undefined");if(!s)throw new Error("Node "+e+" is undefined");let o;if(o=r.get(t+e))o.reset();else{const i=function(t,e){for(var n=[t],s=new Set,r={},o=0;o<n.length;)for(var i=n[o++],c=0,a=i.neighbours;c<a.length;c++){var l=a[c];if(!s.has(l)){if(s.add(l),l===e){for(var u=[l];i!==t;)u.push(i),i=r[i.name];return u.push(i),u.reverse(),u}r[l.name]=i,n.push(l)}}throw new Error("No path connecting "+t.name+" to "+e.name)}(n,s),c=function(t){for(var e=[],n=0;n<t.length-1;n++)e.push(ve("".concat(t[n].name,"-").concat(t[n+1].name)));return e}(i);o=new Ke(i,c),r.set(t+e,o)}yield o.play()}))},c,function(t){rt[t?"unshift":"push"]((()=>{o=t,n(0,o)}))},function(t){rt[t?"unshift":"push"]((()=>{i=t,n(1,i)}))}]}class Xe extends Rt{constructor(t){super(),Lt(this,t,Ge,Ve,c,{flashWire:2,drawStaticWires:3})}get flashWire(){return this.$$.ctx[2]}get drawStaticWires(){return this.$$.ctx[3]}}function Je(e){let n,s,r,o=(e[6]?e[0]:"")+"";return{c(){n=L("div"),s=U(o),M(n,"class",r="absolute w-fit font-bold cursor-default "+e[7][e[5]]+" leading-tight"),K(n,"top",e[1]),K(n,"left",e[2]),K(n,"bottom",e[4]),K(n,"right",e[3]),K(n,"font-size",e[7][e[5]])},m(t,e){T(t,n,e),E(n,s)},p(t,[e]){65&e&&o!==(o=(t[6]?t[0]:"")+"")&&F(s,o),32&e&&r!==(r="absolute w-fit font-bold cursor-default "+t[7][t[5]]+" leading-tight")&&M(n,"class",r),2&e&&K(n,"top",t[1]),4&e&&K(n,"left",t[2]),16&e&&K(n,"bottom",t[4]),8&e&&K(n,"right",t[3]),32&e&&K(n,"font-size",t[7][t[5]])},i:t,o:t,d(t){t&&C(n)}}}function ze(t,e,n){let s;u(t,Le,(t=>n(6,s=t)));let{text:r=""}=e,{top:o="auto"}=e,{left:i="auto"}=e,{right:c="auto"}=e,{bottom:a="auto"}=e,{fontSize:l="MEDIUM"}=e;return t.$$set=t=>{"text"in t&&n(0,r=t.text),"top"in t&&n(1,o=t.top),"left"in t&&n(2,i=t.left),"right"in t&&n(3,c=t.right),"bottom"in t&&n(4,a=t.bottom),"fontSize"in t&&n(5,l=t.fontSize)},[r,o,i,c,a,l,s,{SMALL:"text-xs",MEDIUM:"text-base",LARGE:"text-2xl"}]}class Ye extends Rt{constructor(t){super(),Lt(this,t,ze,Je,c,{text:0,top:1,left:2,right:3,bottom:4,fontSize:5})}}var Ze=[{symbolic:"NOP",numeric:0,takesOperand:!1,takesImmediate:!1,operator:""},{symbolic:"HLT",numeric:1,takesOperand:!1,takesImmediate:!1,operator:""},{symbolic:"JMP",numeric:2,takesOperand:!0,takesImmediate:!1,operator:""},{symbolic:"JZ",numeric:3,takesOperand:!0,takesImmediate:!1,operator:""},{symbolic:"JNZ",numeric:4,takesOperand:!0,takesImmediate:!1,operator:""},{symbolic:"JN",numeric:5,takesOperand:!0,takesImmediate:!1,operator:""},{symbolic:"JNN",numeric:6,takesOperand:!0,takesImmediate:!1,operator:""},{symbolic:"LOD",numeric:7,takesOperand:!0,takesImmediate:!0,operator:"="},{symbolic:"STO",numeric:8,takesOperand:!0,takesImmediate:!1,operator:""},{symbolic:"ADD",numeric:9,takesOperand:!0,takesImmediate:!0,operator:"+"},{symbolic:"SUB",numeric:10,takesOperand:!0,takesImmediate:!0,operator:"-"},{symbolic:"MUL",numeric:11,takesOperand:!0,takesImmediate:!0,operator:"*"},{symbolic:"DIV",numeric:12,takesOperand:!0,takesImmediate:!0,operator:"/"},{symbolic:"AND",numeric:13,takesOperand:!0,takesImmediate:!0,operator:"&"},{symbolic:"CMP",numeric:14,takesOperand:!0,takesImmediate:!0,operator:":"},{symbolic:"NOT",numeric:15,takesOperand:!0,takesImmediate:!0,operator:"!"}];function tn(t){return"string"==typeof t?Ze.find((function(e){return e.symbolic===t})):Ze.find((function(e){return e.numeric===t.getByte(1).unsigned()}))}function en(t){return t.isBitSet(1)}function nn(t,e){return t.setBit(1,e)}function sn(t){return nn(t,!1)}var rn=function(t){function e(e){var n=t.call(this,e)||this;return n.isChecked=!0,n}return Yt(e,t),e}(Error),on=function(t){function e(e,n){var s=t.call(this,e)||this;return s.inputString=n,s}return Yt(e,t),e}(rn);function cn(t,e){if(Math.abs(t)>e)throw new Error("Position ".concat(t," out of range +/-").concat(e));if(0===t)throw new Error("Positions start from 1");return t<0?this.value.length+t:t-1}function an(t){if(t<1||t>32)throw new Error("Binary numbers must be between ".concat(1," and ").concat(32," bits"))}function ln(t,e){return t<=function(t){return an(t),Math.pow(2,t)}(e)&&t>=fn(e)}function un(t,e){return t<=function(t){return an(t),Math.pow(2,t-1)-1}(e)&&t>=fn(e)}function fn(t){return an(t),-Math.pow(2,t-1)}function dn(t,e){return an(e),pn((t>>>0).toString(2),e)}function pn(t,e){return("00000000000000000000000000000000"+t).slice(-e)}var hn=254;function mn(t){if(!gn(t))throw new Error("Invalid address: "+t);return t/2}function gn(t){return t%2==0&&t>=0&&t<=hn}var $n=function(t){function e(e,n){return t.call(this,"Value ".concat(e," out of ").concat(n,"-bit valid range"))||this}return Yt(e,t),e}(rn),yn=function(){function t(t,e){if("string"==typeof e){if(!function(t,e){return an(e),new RegExp("^[01]{1,".concat(e,"}$")).test(t)}(e,t))throw new $n(e,t);this.value=pn(e,t)}else if("number"==typeof e){if(!ln(e,t))throw new $n(e,t);this.value=dn(e,t)}else this.value=dn(e.signed(),t)}return t.prototype.signed=function(){return this.value.startsWith("0")?parseInt(this.value,2):~~parseInt(("11111111111111111111111111111111"+this.value).slice(-32),2)},t.prototype.unsigned=function(){return parseInt(this.value,2)},t.prototype.toBinaryString=function(){return this.value},t.prototype.toInstruction=function(){try{return Ro(this.toBinaryString())}catch(t){throw new rn("Not a vali instruction")}},t.prototype.bits=function(){return this.value.length},t.prototype.bytes=function(){return this.bits()/8},t.prototype.getByte=function(e){var n=8*cn(e,this.bytes());return new t(8,this.value.substring(n,n+8))},t.prototype.getBytes=function(){for(var t=[],e=1;e<=this.bytes();e++)t.push(this.getByte(e));return t},t.prototype.isBitSet=function(t){return"1"===this.value.charAt(cn(t,this.bits()))},t.prototype.setBit=function(e,n){return new t(this.bits(),function(t,e,n){if(!/^[10]*$/.test(t))throw new Error("Invalid binary string");var s=t.split("");return s[cn(e,t.length)]=n?"1":"0",s.join("")}(this.value,e,n))},t.fromBytesValues=function(e){return an(8*e.length),"number"==typeof e[0]?t.fromBytesValues(e.map((function(e){return new t(8,e)}))):"string"==typeof e[0]?new t(8*e.length,e.join("")):new t(8*e.length,e.map((function(t){return t.toBinaryString()})).join(""))},t}(),wn=function(){function t(t,e,n,s){if(void 0===s&&(s=!1),16!==n.bits())throw new Error("Value must be 16 bit");this.opcode=tn(sn(n)),this.symbolicOpcode=t,this.symbolicOperand=e,this.value=n,s&&(this.opcode=void 0)}return t.prototype.immediateFlag=function(){return en(this.value)},t.prototype.opcodeValue=function(){return this.value.getByte(1)},t.prototype.operandValue=function(){return this.value.getByte(2)},t.prototype.numericOpcode=function(){return this.value.getByte(1).signed()},t.prototype.numericOperand=function(){return this.immediateFlag()?this.value.getByte(2).signed():this.value.getByte(2).unsigned()},t.prototype.binaryOpcode=function(){return this.value.getByte(1).toBinaryString()},t.prototype.binaryOperand=function(){return this.value.getByte(2).toBinaryString()},t.prototype.symbolic=function(){return this.symbolicOpcode+(""!==this.symbolicOperand?" ".concat(this.symbolicOperand):"")},t}();const bn=Symbol.for("yaml.alias"),vn=Symbol.for("yaml.document"),xn=Symbol.for("yaml.map"),kn=Symbol.for("yaml.pair"),_n=Symbol.for("yaml.scalar"),Sn=Symbol.for("yaml.seq"),An=Symbol.for("yaml.node.type"),En=t=>!!t&&"object"==typeof t&&t[An]===bn,Nn=t=>!!t&&"object"==typeof t&&t[An]===vn,In=t=>!!t&&"object"==typeof t&&t[An]===xn,Tn=t=>!!t&&"object"==typeof t&&t[An]===kn,Cn=t=>!!t&&"object"==typeof t&&t[An]===_n,On=t=>!!t&&"object"==typeof t&&t[An]===Sn;function Ln(t){if(t&&"object"==typeof t)switch(t[An]){case xn:case Sn:return!0}return!1}function Rn(t){if(t&&"object"==typeof t)switch(t[An]){case bn:case xn:case _n:case Sn:return!0}return!1}class Un{constructor(t){Object.defineProperty(this,An,{value:t})}clone(){const t=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return this.range&&(t.range=this.range.slice()),t}}const Dn=Symbol("break visit"),Pn=Symbol("skip children"),Qn=Symbol("remove node");function Mn(t,e){const n=function(t){if("object"==typeof t&&(t.Collection||t.Node||t.Value))return Object.assign({Alias:t.Node,Map:t.Node,Scalar:t.Node,Seq:t.Node},t.Value&&{Map:t.Value,Scalar:t.Value,Seq:t.Value},t.Collection&&{Map:t.Collection,Seq:t.Collection},t);return t}(e);if(Nn(t)){Bn(null,t.contents,n,Object.freeze([t]))===Qn&&(t.contents=null)}else Bn(null,t,n,Object.freeze([]))}function Bn(t,e,n,s){const r=function(t,e,n,s){return"function"==typeof n?n(t,e,s):In(e)?n.Map?.(t,e,s):On(e)?n.Seq?.(t,e,s):Tn(e)?n.Pair?.(t,e,s):Cn(e)?n.Scalar?.(t,e,s):En(e)?n.Alias?.(t,e,s):void 0}(t,e,n,s);if(Rn(r)||Tn(r))return function(t,e,n){const s=e[e.length-1];if(Ln(s))s.items[t]=n;else if(Tn(s))"key"===t?s.key=n:s.value=n;else{if(!Nn(s)){const t=En(s)?"alias":"scalar";throw new Error(`Cannot replace node with ${t} parent`)}s.contents=n}}(t,s,r),Bn(t,r,n,s);if("symbol"!=typeof r)if(Ln(e)){s=Object.freeze(s.concat(e));for(let t=0;t<e.items.length;++t){const r=Bn(t,e.items[t],n,s);if("number"==typeof r)t=r-1;else{if(r===Dn)return Dn;r===Qn&&(e.items.splice(t,1),t-=1)}}}else if(Tn(e)){s=Object.freeze(s.concat(e));const t=Bn("key",e.key,n,s);if(t===Dn)return Dn;t===Qn&&(e.key=null);const r=Bn("value",e.value,n,s);if(r===Dn)return Dn;r===Qn&&(e.value=null)}return r}Mn.BREAK=Dn,Mn.SKIP=Pn,Mn.REMOVE=Qn;const Fn={"!":"%21",",":"%2C","[":"%5B","]":"%5D","{":"%7B","}":"%7D"};class jn{constructor(t,e){this.docStart=null,this.docEnd=!1,this.yaml=Object.assign({},jn.defaultYaml,t),this.tags=Object.assign({},jn.defaultTags,e)}clone(){const t=new jn(this.yaml,this.tags);return t.docStart=this.docStart,t}atDocument(){const t=new jn(this.yaml,this.tags);switch(this.yaml.version){case"1.1":this.atNextDocument=!0;break;case"1.2":this.atNextDocument=!1,this.yaml={explicit:jn.defaultYaml.explicit,version:"1.2"},this.tags=Object.assign({},jn.defaultTags)}return t}add(t,e){this.atNextDocument&&(this.yaml={explicit:jn.defaultYaml.explicit,version:"1.1"},this.tags=Object.assign({},jn.defaultTags),this.atNextDocument=!1);const n=t.trim().split(/[ \t]+/),s=n.shift();switch(s){case"%TAG":{if(2!==n.length&&(e(0,"%TAG directive should contain exactly two parts"),n.length<2))return!1;const[t,s]=n;return this.tags[t]=s,!0}case"%YAML":{if(this.yaml.explicit=!0,1!==n.length)return e(0,"%YAML directive should contain exactly one part"),!1;const[t]=n;if("1.1"===t||"1.2"===t)return this.yaml.version=t,!0;return e(6,`Unsupported YAML version ${t}`,/^\d+\.\d+$/.test(t)),!1}default:return e(0,`Unknown directive ${s}`,!0),!1}}tagName(t,e){if("!"===t)return"!";if("!"!==t[0])return e(`Not a valid tag: ${t}`),null;if("<"===t[1]){const n=t.slice(2,-1);return"!"===n||"!!"===n?(e(`Verbatim tags aren't resolved, so ${t} is invalid.`),null):(">"!==t[t.length-1]&&e("Verbatim tags must end with a >"),n)}const[,n,s]=t.match(/^(.*!)([^!]*)$/);s||e(`The ${t} tag has no suffix`);const r=this.tags[n];return r?r+decodeURIComponent(s):"!"===n?t:(e(`Could not resolve tag: ${t}`),null)}tagString(t){for(const[e,n]of Object.entries(this.tags))if(t.startsWith(n))return e+t.substring(n.length).replace(/[!,[\]{}]/g,(t=>Fn[t]));return"!"===t[0]?t:`!<${t}>`}toString(t){const e=this.yaml.explicit?[`%YAML ${this.yaml.version||"1.2"}`]:[],n=Object.entries(this.tags);let s;if(t&&n.length>0&&Rn(t.contents)){const e={};Mn(t.contents,((t,n)=>{Rn(n)&&n.tag&&(e[n.tag]=!0)})),s=Object.keys(e)}else s=[];for(const[r,o]of n)"!!"===r&&"tag:yaml.org,2002:"===o||t&&!s.some((t=>t.startsWith(o)))||e.push(`%TAG ${r} ${o}`);return e.join("\n")}}function Kn(t){if(/[\x00-\x19\s,[\]{}]/.test(t)){const e=JSON.stringify(t);throw new Error(`Anchor must not contain whitespace or control characters: ${e}`)}return!0}function Wn(t){const e=new Set;return Mn(t,{Value(t,n){n.anchor&&e.add(n.anchor)}}),e}function qn(t,e){for(let n=1;;++n){const s=`${t}${n}`;if(!e.has(s))return s}}jn.defaultYaml={explicit:!1,version:"1.2"},jn.defaultTags={"!!":"tag:yaml.org,2002:"};class Hn extends Un{constructor(t){super(bn),this.source=t,Object.defineProperty(this,"tag",{set(){throw new Error("Alias nodes cannot have tags")}})}resolve(t){let e;return Mn(t,{Node:(t,n)=>{if(n===this)return Mn.BREAK;n.anchor===this.source&&(e=n)}}),e}toJSON(t,e){if(!e)return{source:this.source};const{anchors:n,doc:s,maxAliasCount:r}=e,o=this.resolve(s);if(!o){const t=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new ReferenceError(t)}const i=n.get(o);if(!i||void 0===i.res){throw new ReferenceError("This should not happen: Alias anchor was not resolved?")}if(r>=0&&(i.count+=1,0===i.aliasCount&&(i.aliasCount=Vn(s,o,n)),i.count*i.aliasCount>r)){throw new ReferenceError("Excessive alias count indicates a resource exhaustion attack")}return i.res}toString(t,e,n){const s=`*${this.source}`;if(t){if(Kn(this.source),t.options.verifyAliasOrder&&!t.anchors.has(this.source)){const t=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new Error(t)}if(t.implicitKey)return`${s} `}return s}}function Vn(t,e,n){if(En(e)){const s=e.resolve(t),r=n&&s&&n.get(s);return r?r.count*r.aliasCount:0}if(Ln(e)){let s=0;for(const r of e.items){const e=Vn(t,r,n);e>s&&(s=e)}return s}if(Tn(e)){const s=Vn(t,e.key,n),r=Vn(t,e.value,n);return Math.max(s,r)}return 1}function Gn(t,e,n){if(Array.isArray(t))return t.map(((t,e)=>Gn(t,String(e),n)));if(t&&"function"==typeof t.toJSON){if(!n||!(t=>(Cn(t)||Ln(t))&&!!t.anchor)(t))return t.toJSON(e,n);const s={aliasCount:0,count:1,res:void 0};n.anchors.set(t,s),n.onCreate=t=>{s.res=t,delete n.onCreate};const r=t.toJSON(e,n);return n.onCreate&&n.onCreate(r),r}return"bigint"!=typeof t||n?.keep?t:Number(t)}const Xn=t=>!t||"function"!=typeof t&&"object"!=typeof t;class Jn extends Un{constructor(t){super(_n),this.value=t}toJSON(t,e){return e?.keep?this.value:Gn(this.value,t,e)}toString(){return String(this.value)}}Jn.BLOCK_FOLDED="BLOCK_FOLDED",Jn.BLOCK_LITERAL="BLOCK_LITERAL",Jn.PLAIN="PLAIN",Jn.QUOTE_DOUBLE="QUOTE_DOUBLE",Jn.QUOTE_SINGLE="QUOTE_SINGLE";function zn(t,e,n){if(Nn(t)&&(t=t.contents),Rn(t))return t;if(Tn(t)){const e=n.schema[xn].createNode?.(n.schema,null,n);return e.items.push(t),e}(t instanceof String||t instanceof Number||t instanceof Boolean||"function"==typeof BigInt&&t instanceof BigInt)&&(t=t.valueOf());const{aliasDuplicateObjects:s,onAnchor:r,onTagObj:o,schema:i,sourceObjects:c}=n;let a;if(s&&t&&"object"==typeof t){if(a=c.get(t),a)return a.anchor||(a.anchor=r(t)),new Hn(a.anchor);a={anchor:null,node:null},c.set(t,a)}e?.startsWith("!!")&&(e="tag:yaml.org,2002:"+e.slice(2));let l=function(t,e,n){if(e){const t=n.filter((t=>t.tag===e)),s=t.find((t=>!t.format))??t[0];if(!s)throw new Error(`Tag ${e} not found`);return s}return n.find((e=>e.identify?.(t)&&!e.format))}(t,e,i.tags);if(!l){if(t&&"function"==typeof t.toJSON&&(t=t.toJSON()),!t||"object"!=typeof t){const e=new Jn(t);return a&&(a.node=e),e}l=t instanceof Map?i[xn]:Symbol.iterator in Object(t)?i[Sn]:i[xn]}o&&(o(l),delete n.onTagObj);const u=l?.createNode?l.createNode(n.schema,t,n):new Jn(t);return e&&(u.tag=e),a&&(a.node=u),u}function Yn(t,e,n){let s=n;for(let t=e.length-1;t>=0;--t){const n=e[t];if("number"==typeof n&&Number.isInteger(n)&&n>=0){const t=[];t[n]=s,s=t}else s=new Map([[n,s]])}return zn(s,void 0,{aliasDuplicateObjects:!1,keepUndefined:!1,onAnchor:()=>{throw new Error("This should not happen, please report a bug.")},schema:t,sourceObjects:new Map})}const Zn=t=>null==t||"object"==typeof t&&!!t[Symbol.iterator]().next().done;class ts extends Un{constructor(t,e){super(t),Object.defineProperty(this,"schema",{value:e,configurable:!0,enumerable:!1,writable:!0})}clone(t){const e=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return t&&(e.schema=t),e.items=e.items.map((e=>Rn(e)||Tn(e)?e.clone(t):e)),this.range&&(e.range=this.range.slice()),e}addIn(t,e){if(Zn(t))this.add(e);else{const[n,...s]=t,r=this.get(n,!0);if(Ln(r))r.addIn(s,e);else{if(void 0!==r||!this.schema)throw new Error(`Expected YAML collection at ${n}. Remaining path: ${s}`);this.set(n,Yn(this.schema,s,e))}}}deleteIn(t){const[e,...n]=t;if(0===n.length)return this.delete(e);const s=this.get(e,!0);if(Ln(s))return s.deleteIn(n);throw new Error(`Expected YAML collection at ${e}. Remaining path: ${n}`)}getIn(t,e){const[n,...s]=t,r=this.get(n,!0);return 0===s.length?!e&&Cn(r)?r.value:r:Ln(r)?r.getIn(s,e):void 0}hasAllNullValues(t){return this.items.every((e=>{if(!Tn(e))return!1;const n=e.value;return null==n||t&&Cn(n)&&null==n.value&&!n.commentBefore&&!n.comment&&!n.tag}))}hasIn(t){const[e,...n]=t;if(0===n.length)return this.has(e);const s=this.get(e,!0);return!!Ln(s)&&s.hasIn(n)}setIn(t,e){const[n,...s]=t;if(0===s.length)this.set(n,e);else{const t=this.get(n,!0);if(Ln(t))t.setIn(s,e);else{if(void 0!==t||!this.schema)throw new Error(`Expected YAML collection at ${n}. Remaining path: ${s}`);this.set(n,Yn(this.schema,s,e))}}}}ts.maxFlowStringSingleLineLength=60;const es=t=>t.replace(/^(?!$)(?: $)?/gm,"#");function ns(t,e){return/^\n+$/.test(t)?t.substring(1):e?t.replace(/^(?! *$)/gm,e):t}const ss=(t,e,n)=>t.endsWith("\n")?ns(n,e):n.includes("\n")?"\n"+ns(n,e):(t.endsWith(" ")?"":" ")+n,rs="flow",os="block",is="quoted";function cs(t,e,n="flow",{indentAtStart:s,lineWidth:r=80,minContentWidth:o=20,onFold:i,onOverflow:c}={}){if(!r||r<0)return t;const a=Math.max(1+o,1+r-e.length);if(t.length<=a)return t;const l=[],u={};let f,d,p=r-e.length;"number"==typeof s&&(s>r-Math.max(2,o)?l.push(0):p=r-s);let h,m=!1,g=-1,$=-1,y=-1;for(n===os&&(g=as(t,g),-1!==g&&(p=g+a));h=t[g+=1];){if(n===is&&"\\"===h){switch($=g,t[g+1]){case"x":g+=3;break;case"u":g+=5;break;case"U":g+=9;break;default:g+=1}y=g}if("\n"===h)n===os&&(g=as(t,g)),p=g+a,f=void 0;else{if(" "===h&&d&&" "!==d&&"\n"!==d&&"\t"!==d){const e=t[g+1];e&&" "!==e&&"\n"!==e&&"\t"!==e&&(f=g)}if(g>=p)if(f)l.push(f),p=f+a,f=void 0;else if(n===is){for(;" "===d||"\t"===d;)d=h,h=t[g+=1],m=!0;const e=g>y+1?g-2:$-1;if(u[e])return t;l.push(e),u[e]=!0,p=e+a,f=void 0}else m=!0}d=h}if(m&&c&&c(),0===l.length)return t;i&&i();let w=t.slice(0,l[0]);for(let s=0;s<l.length;++s){const r=l[s],o=l[s+1]||t.length;0===r?w=`\n${e}${t.slice(0,o)}`:(n===is&&u[r]&&(w+=`${t[r]}\\`),w+=`\n${e}${t.slice(r+1,o)}`)}return w}function as(t,e){let n=t[e+1];for(;" "===n||"\t"===n;){do{n=t[e+=1]}while(n&&"\n"!==n);n=t[e+1]}return e}const ls=t=>({indentAtStart:t.indentAtStart,lineWidth:t.options.lineWidth,minContentWidth:t.options.minContentWidth}),us=t=>/^(%|---|\.\.\.)/m.test(t);function fs(t,e){const n=JSON.stringify(t);if(e.options.doubleQuotedAsJSON)return n;const{implicitKey:s}=e,r=e.options.doubleQuotedMinMultiLineLength,o=e.indent||(us(t)?"  ":"");let i="",c=0;for(let t=0,e=n[t];e;e=n[++t])if(" "===e&&"\\"===n[t+1]&&"n"===n[t+2]&&(i+=n.slice(c,t)+"\\ ",t+=1,c=t,e="\\"),"\\"===e)switch(n[t+1]){case"u":{i+=n.slice(c,t);const e=n.substr(t+2,4);switch(e){case"0000":i+="\\0";break;case"0007":i+="\\a";break;case"000b":i+="\\v";break;case"001b":i+="\\e";break;case"0085":i+="\\N";break;case"00a0":i+="\\_";break;case"2028":i+="\\L";break;case"2029":i+="\\P";break;default:"00"===e.substr(0,2)?i+="\\x"+e.substr(2):i+=n.substr(t,6)}t+=5,c=t+1}break;case"n":if(s||'"'===n[t+2]||n.length<r)t+=1;else{for(i+=n.slice(c,t)+"\n\n";"\\"===n[t+2]&&"n"===n[t+3]&&'"'!==n[t+4];)i+="\n",t+=2;i+=o," "===n[t+2]&&(i+="\\"),t+=1,c=t+1}break;default:t+=1}return i=c?i+n.slice(c):n,s?i:cs(i,o,is,ls(e))}function ds(t,e){if(!1===e.options.singleQuote||e.implicitKey&&t.includes("\n")||/[ \t]\n|\n[ \t]/.test(t))return fs(t,e);const n=e.indent||(us(t)?"  ":""),s="'"+t.replace(/'/g,"''").replace(/\n+/g,`$&\n${n}`)+"'";return e.implicitKey?s:cs(s,n,rs,ls(e))}function ps(t,e){const{singleQuote:n}=e.options;let s;if(!1===n)s=fs;else{const e=t.includes('"'),r=t.includes("'");s=e&&!r?ds:r&&!e?fs:n?ds:fs}return s(t,e)}function hs({comment:t,type:e,value:n},s,r,o){const{blockQuote:i,commentString:c,lineWidth:a}=s.options;if(!i||/\n[\t ]+$/.test(n)||/^\s*$/.test(n))return ps(n,s);const l=s.indent||(s.forceBlockIndent||us(n)?"  ":""),u="literal"===i||"folded"!==i&&e!==Jn.BLOCK_FOLDED&&(e===Jn.BLOCK_LITERAL||!function(t,e,n){if(!e||e<0)return!1;const s=e-n,r=t.length;if(r<=s)return!1;for(let e=0,n=0;e<r;++e)if("\n"===t[e]){if(e-n>s)return!0;if(n=e+1,r-n<=s)return!1}return!0}(n,a,l.length));if(!n)return u?"|\n":">\n";let f,d;for(d=n.length;d>0;--d){const t=n[d-1];if("\n"!==t&&"\t"!==t&&" "!==t)break}let p=n.substring(d);const h=p.indexOf("\n");-1===h?f="-":n===p||h!==p.length-1?(f="+",o&&o()):f="",p&&(n=n.slice(0,-p.length),"\n"===p[p.length-1]&&(p=p.slice(0,-1)),p=p.replace(/\n+(?!\n|$)/g,`$&${l}`));let m,g=!1,$=-1;for(m=0;m<n.length;++m){const t=n[m];if(" "===t)g=!0;else{if("\n"!==t)break;$=m}}let y=n.substring(0,$<m?$+1:m);y&&(n=n.substring(y.length),y=y.replace(/\n+/g,`$&${l}`));let w=(u?"|":">")+(g?l?"2":"1":"")+f;if(t&&(w+=" "+c(t.replace(/ ?[\r\n]+/g," ")),r&&r()),u)return`${w}\n${l}${y}${n=n.replace(/\n+/g,`$&${l}`)}${p}`;return`${w}\n${l}${cs(`${y}${n=n.replace(/\n+/g,"\n$&").replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,`$&${l}`)}${p}`,l,os,ls(s))}`}function ms(t,e,n,s){const{implicitKey:r,inFlow:o}=e,i="string"==typeof t.value?t:Object.assign({},t,{value:String(t.value)});let{type:c}=t;c!==Jn.QUOTE_DOUBLE&&/[\x00-\x08\x0b-\x1f\x7f-\x9f\u{D800}-\u{DFFF}]/u.test(i.value)&&(c=Jn.QUOTE_DOUBLE);const a=t=>{switch(t){case Jn.BLOCK_FOLDED:case Jn.BLOCK_LITERAL:return r||o?ps(i.value,e):hs(i,e,n,s);case Jn.QUOTE_DOUBLE:return fs(i.value,e);case Jn.QUOTE_SINGLE:return ds(i.value,e);case Jn.PLAIN:return function(t,e,n,s){const{type:r,value:o}=t,{actualString:i,implicitKey:c,indent:a,inFlow:l}=e;if(c&&/[\n[\]{},]/.test(o)||l&&/[[\]{},]/.test(o))return ps(o,e);if(!o||/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(o))return c||l||!o.includes("\n")?ps(o,e):hs(t,e,n,s);if(!c&&!l&&r!==Jn.PLAIN&&o.includes("\n"))return hs(t,e,n,s);if(""===a&&us(o))return e.forceBlockIndent=!0,hs(t,e,n,s);const u=o.replace(/\n+/g,`$&\n${a}`);if(i){const t=t=>t.default&&"tag:yaml.org,2002:str"!==t.tag&&t.test?.test(u),{compat:n,tags:s}=e.doc.schema;if(s.some(t)||n?.some(t))return ps(o,e)}return c?u:cs(u,a,rs,ls(e))}(i,e,n,s);default:return null}};let l=a(c);if(null===l){const{defaultKeyType:t,defaultStringType:n}=e.options,s=r&&t||n;if(l=a(s),null===l)throw new Error(`Unsupported default string type ${s}`)}return l}function gs(t,e){const n=Object.assign({blockQuote:!0,commentString:es,defaultKeyType:null,defaultStringType:"PLAIN",directives:null,doubleQuotedAsJSON:!1,doubleQuotedMinMultiLineLength:40,falseStr:"false",indentSeq:!0,lineWidth:80,minContentWidth:20,nullStr:"null",simpleKeys:!1,singleQuote:null,trueStr:"true",verifyAliasOrder:!0},t.schema.toStringOptions,e);let s;switch(n.collectionStyle){case"block":s=!1;break;case"flow":s=!0;break;default:s=null}return{anchors:new Set,doc:t,indent:"",indentStep:"number"==typeof n.indent?" ".repeat(n.indent):"  ",inFlow:s,options:n}}function $s(t,e,n,s){if(Tn(t))return t.toString(e,n,s);if(En(t)){if(e.doc.directives)return t.toString(e);if(e.resolvedAliases?.has(t))throw new TypeError("Cannot stringify circular structure without alias nodes");e.resolvedAliases?e.resolvedAliases.add(t):e.resolvedAliases=new Set([t]),t=t.resolve(e.doc)}let r;const o=Rn(t)?t:e.doc.createNode(t,{onTagObj:t=>r=t});r||(r=function(t,e){if(e.tag){const n=t.filter((t=>t.tag===e.tag));if(n.length>0)return n.find((t=>t.format===e.format))??n[0]}let n,s;if(Cn(e)){s=e.value;const r=t.filter((t=>t.identify?.(s)));n=r.find((t=>t.format===e.format))??r.find((t=>!t.format))}else s=e,n=t.find((t=>t.nodeClass&&s instanceof t.nodeClass));if(!n)throw new Error(`Tag not resolved for ${s?.constructor?.name??typeof s} value`);return n}(e.doc.schema.tags,o));const i=function(t,e,{anchors:n,doc:s}){if(!s.directives)return"";const r=[],o=(Cn(t)||Ln(t))&&t.anchor;o&&Kn(o)&&(n.add(o),r.push(`&${o}`));const i=t.tag?t.tag:e.default?null:e.tag;return i&&r.push(s.directives.tagString(i)),r.join(" ")}(o,r,e);i.length>0&&(e.indentAtStart=(e.indentAtStart??0)+i.length+1);const c="function"==typeof r.stringify?r.stringify(o,e,n,s):Cn(o)?ms(o,e,n,s):o.toString(e,n,s);return i?Cn(o)||"{"===c[0]||"["===c[0]?`${i} ${c}`:`${i}\n${e.indent}${c}`:c}function ys(t,e){"debug"!==t&&"warn"!==t||("undefined"!=typeof process&&process.emitWarning?process.emitWarning(e):console.warn(e))}function ws(t,e,{key:n,value:s}){if(t?.doc.schema.merge&&bs(n))if(s=En(s)?s.resolve(t.doc):s,On(s))for(const n of s.items)vs(t,e,n);else if(Array.isArray(s))for(const n of s)vs(t,e,n);else vs(t,e,s);else{const r=Gn(n,"",t);if(e instanceof Map)e.set(r,Gn(s,r,t));else if(e instanceof Set)e.add(r);else{const o=function(t,e,n){if(null===e)return"";if("object"!=typeof e)return String(e);if(Rn(t)&&n&&n.doc){const e=gs(n.doc,{});e.anchors=new Set;for(const t of n.anchors.keys())e.anchors.add(t.anchor);e.inFlow=!0,e.inStringifyKey=!0;const s=t.toString(e);if(!n.mapKeyWarned){let t=JSON.stringify(s);t.length>40&&(t=t.substring(0,36)+'..."'),ys(n.doc.options.logLevel,`Keys with collection values will be stringified due to JS Object restrictions: ${t}. Set mapAsMap: true to use object keys.`),n.mapKeyWarned=!0}return s}return JSON.stringify(e)}(n,r,t),i=Gn(s,o,t);o in e?Object.defineProperty(e,o,{value:i,writable:!0,enumerable:!0,configurable:!0}):e[o]=i}}return e}const bs=t=>"<<"===t||Cn(t)&&"<<"===t.value&&(!t.type||t.type===Jn.PLAIN);function vs(t,e,n){const s=t&&En(n)?n.resolve(t.doc):n;if(!In(s))throw new Error("Merge sources must be maps or map aliases");const r=s.toJSON(null,t,Map);for(const[t,n]of r)e instanceof Map?e.has(t)||e.set(t,n):e instanceof Set?e.add(t):Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(e,t,{value:n,writable:!0,enumerable:!0,configurable:!0});return e}function xs(t,e,n){const s=zn(t,void 0,n),r=zn(e,void 0,n);return new ks(s,r)}class ks{constructor(t,e=null){Object.defineProperty(this,An,{value:kn}),this.key=t,this.value=e}clone(t){let{key:e,value:n}=this;return Rn(e)&&(e=e.clone(t)),Rn(n)&&(n=n.clone(t)),new ks(e,n)}toJSON(t,e){return ws(e,e?.mapAsMap?new Map:{},this)}toString(t,e,n){return t?.doc?function({key:t,value:e},n,s,r){const{allNullValues:o,doc:i,indent:c,indentStep:a,options:{commentString:l,indentSeq:u,simpleKeys:f}}=n;let d=Rn(t)&&t.comment||null;if(f){if(d)throw new Error("With simple keys, key nodes cannot have comments");if(Ln(t))throw new Error("With simple keys, collection cannot be used as a key value")}let p=!f&&(!t||d&&null==e&&!n.inFlow||Ln(t)||(Cn(t)?t.type===Jn.BLOCK_FOLDED||t.type===Jn.BLOCK_LITERAL:"object"==typeof t));n=Object.assign({},n,{allNullValues:!1,implicitKey:!p&&(f||!o),indent:c+a});let h=!1,m=!1,g=$s(t,n,(()=>h=!0),(()=>m=!0));if(!p&&!n.inFlow&&g.length>1024){if(f)throw new Error("With simple keys, single line scalar must not span more than 1024 characters");p=!0}if(n.inFlow){if(o||null==e)return h&&s&&s(),""===g?"?":p?`? ${g}`:g}else if(o&&!f||null==e&&p)return g=`? ${g}`,d&&!h?g+=ss(g,n.indent,l(d)):m&&r&&r(),g;h&&(d=null),p?(d&&(g+=ss(g,n.indent,l(d))),g=`? ${g}\n${c}:`):(g=`${g}:`,d&&(g+=ss(g,n.indent,l(d))));let $="",y=null;Rn(e)?(e.spaceBefore&&($="\n"),e.commentBefore&&($+=`\n${ns(l(e.commentBefore),n.indent)}`),y=e.comment):e&&"object"==typeof e&&(e=i.createNode(e));n.implicitKey=!1,p||d||!Cn(e)||(n.indentAtStart=g.length+1),m=!1,u||!(a.length>=2)||n.inFlow||p||!On(e)||e.flow||e.tag||e.anchor||(n.indent=n.indent.substr(2));let w=!1;const b=$s(e,n,(()=>w=!0),(()=>m=!0));let v=" ";$||d?v=""!==b||n.inFlow?`${$}\n${n.indent}`:"\n"===$?"\n\n":$:!p&&Ln(e)?("["===b[0]||"{"===b[0])&&!b.includes("\n")||(v=`\n${n.indent}`):""!==b&&"\n"!==b[0]||(v="");return g+=v+b,n.inFlow?w&&s&&s():y&&!w?g+=ss(g,n.indent,l(y)):m&&r&&r(),g}(this,t,e,n):JSON.stringify(this)}}function _s(t,e,n){return(e.inFlow??t.flow?As:Ss)(t,e,n)}function Ss({comment:t,items:e},n,{blockItemPrefix:s,flowChars:r,itemIndent:o,onChompKeep:i,onComment:c}){const{indent:a,options:{commentString:l}}=n,u=Object.assign({},n,{indent:o,type:null});let f=!1;const d=[];for(let t=0;t<e.length;++t){const r=e[t];let i=null;if(Rn(r))!f&&r.spaceBefore&&d.push(""),Es(n,d,r.commentBefore,f),r.comment&&(i=r.comment);else if(Tn(r)){const t=Rn(r.key)?r.key:null;t&&(!f&&t.spaceBefore&&d.push(""),Es(n,d,t.commentBefore,f))}f=!1;let c=$s(r,u,(()=>i=null),(()=>f=!0));i&&(c+=ss(c,o,l(i))),f&&i&&(f=!1),d.push(s+c)}let p;if(0===d.length)p=r.start+r.end;else{p=d[0];for(let t=1;t<d.length;++t){const e=d[t];p+=e?`\n${a}${e}`:"\n"}}return t?(p+="\n"+ns(l(t),a),c&&c()):f&&i&&i(),p}function As({comment:t,items:e},n,{flowChars:s,itemIndent:r,onComment:o}){const{indent:i,indentStep:c,options:{commentString:a}}=n;r+=c;const l=Object.assign({},n,{indent:r,inFlow:!0,type:null});let u=!1,f=0;const d=[];for(let t=0;t<e.length;++t){const s=e[t];let o=null;if(Rn(s))s.spaceBefore&&d.push(""),Es(n,d,s.commentBefore,!1),s.comment&&(o=s.comment);else if(Tn(s)){const t=Rn(s.key)?s.key:null;t&&(t.spaceBefore&&d.push(""),Es(n,d,t.commentBefore,!1),t.comment&&(u=!0));const e=Rn(s.value)?s.value:null;e?(e.comment&&(o=e.comment),e.commentBefore&&(u=!0)):null==s.value&&t&&t.comment&&(o=t.comment)}o&&(u=!0);let i=$s(s,l,(()=>o=null));t<e.length-1&&(i+=","),o&&(i+=ss(i,r,a(o))),!u&&(d.length>f||i.includes("\n"))&&(u=!0),d.push(i),f=d.length}let p;const{start:h,end:m}=s;if(0===d.length)p=h+m;else{if(!u){u=d.reduce(((t,e)=>t+e.length+2),2)>ts.maxFlowStringSingleLineLength}if(u){p=h;for(const t of d)p+=t?`\n${c}${i}${t}`:"\n";p+=`\n${i}${m}`}else p=`${h} ${d.join(" ")} ${m}`}return t&&(p+=ss(p,a(t),i),o&&o()),p}function Es({indent:t,options:{commentString:e}},n,s,r){if(s&&r&&(s=s.replace(/^\n+/,"")),s){const r=ns(e(s),t);n.push(r.trimStart())}}function Ns(t,e){const n=Cn(e)?e.value:e;for(const s of t)if(Tn(s)){if(s.key===e||s.key===n)return s;if(Cn(s.key)&&s.key.value===n)return s}}class Is extends ts{constructor(t){super(xn,t),this.items=[]}static get tagName(){return"tag:yaml.org,2002:map"}add(t,e){let n;n=Tn(t)?t:t&&"object"==typeof t&&"key"in t?new ks(t.key,t.value):new ks(t,t?.value);const s=Ns(this.items,n.key),r=this.schema?.sortMapEntries;if(s){if(!e)throw new Error(`Key ${n.key} already set`);Cn(s.value)&&Xn(n.value)?s.value.value=n.value:s.value=n.value}else if(r){const t=this.items.findIndex((t=>r(n,t)<0));-1===t?this.items.push(n):this.items.splice(t,0,n)}else this.items.push(n)}delete(t){const e=Ns(this.items,t);if(!e)return!1;return this.items.splice(this.items.indexOf(e),1).length>0}get(t,e){const n=Ns(this.items,t)?.value;return(!e&&Cn(n)?n.value:n)??void 0}has(t){return!!Ns(this.items,t)}set(t,e){this.add(new ks(t,e),!0)}toJSON(t,e,n){const s=n?new n:e?.mapAsMap?new Map:{};e?.onCreate&&e.onCreate(s);for(const t of this.items)ws(e,s,t);return s}toString(t,e,n){if(!t)return JSON.stringify(this);for(const t of this.items)if(!Tn(t))throw new Error(`Map items must all be pairs; found ${JSON.stringify(t)} instead`);return!t.allNullValues&&this.hasAllNullValues(!1)&&(t=Object.assign({},t,{allNullValues:!0})),_s(this,t,{blockItemPrefix:"",flowChars:{start:"{",end:"}"},itemIndent:t.indent||"",onChompKeep:n,onComment:e})}}const Ts={collection:"map",createNode:function(t,e,n){const{keepUndefined:s,replacer:r}=n,o=new Is(t),i=(t,i)=>{if("function"==typeof r)i=r.call(e,t,i);else if(Array.isArray(r)&&!r.includes(t))return;(void 0!==i||s)&&o.items.push(xs(t,i,n))};if(e instanceof Map)for(const[t,n]of e)i(t,n);else if(e&&"object"==typeof e)for(const t of Object.keys(e))i(t,e[t]);return"function"==typeof t.sortMapEntries&&o.items.sort(t.sortMapEntries),o},default:!0,nodeClass:Is,tag:"tag:yaml.org,2002:map",resolve:(t,e)=>(In(t)||e("Expected a mapping for this tag"),t)};class Cs extends ts{constructor(t){super(Sn,t),this.items=[]}static get tagName(){return"tag:yaml.org,2002:seq"}add(t){this.items.push(t)}delete(t){const e=Os(t);if("number"!=typeof e)return!1;return this.items.splice(e,1).length>0}get(t,e){const n=Os(t);if("number"!=typeof n)return;const s=this.items[n];return!e&&Cn(s)?s.value:s}has(t){const e=Os(t);return"number"==typeof e&&e<this.items.length}set(t,e){const n=Os(t);if("number"!=typeof n)throw new Error(`Expected a valid index, not ${t}.`);const s=this.items[n];Cn(s)&&Xn(e)?s.value=e:this.items[n]=e}toJSON(t,e){const n=[];e?.onCreate&&e.onCreate(n);let s=0;for(const t of this.items)n.push(Gn(t,String(s++),e));return n}toString(t,e,n){return t?_s(this,t,{blockItemPrefix:"- ",flowChars:{start:"[",end:"]"},itemIndent:(t.indent||"")+"  ",onChompKeep:n,onComment:e}):JSON.stringify(this)}}function Os(t){let e=Cn(t)?t.value:t;return e&&"string"==typeof e&&(e=Number(e)),"number"==typeof e&&Number.isInteger(e)&&e>=0?e:null}const Ls={collection:"seq",createNode:function(t,e,n){const{replacer:s}=n,r=new Cs(t);if(e&&Symbol.iterator in Object(e)){let t=0;for(let o of e){if("function"==typeof s){const n=e instanceof Set?o:String(t++);o=s.call(e,n,o)}r.items.push(zn(o,void 0,n))}}return r},default:!0,nodeClass:Cs,tag:"tag:yaml.org,2002:seq",resolve:(t,e)=>(On(t)||e("Expected a sequence for this tag"),t)},Rs={identify:t=>"string"==typeof t,default:!0,tag:"tag:yaml.org,2002:str",resolve:t=>t,stringify:(t,e,n,s)=>ms(t,e=Object.assign({actualString:!0},e),n,s)},Us={identify:t=>null==t,createNode:()=>new Jn(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:()=>new Jn(null),stringify:({source:t},e)=>"string"==typeof t&&Us.test.test(t)?t:e.options.nullStr},Ds={identify:t=>"boolean"==typeof t,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:[Tt]rue|TRUE|[Ff]alse|FALSE)$/,resolve:t=>new Jn("t"===t[0]||"T"===t[0]),stringify({source:t,value:e},n){if(t&&Ds.test.test(t)){if(e===("t"===t[0]||"T"===t[0]))return t}return e?n.options.trueStr:n.options.falseStr}};function Ps({format:t,minFractionDigits:e,tag:n,value:s}){if("bigint"==typeof s)return String(s);const r="number"==typeof s?s:Number(s);if(!isFinite(r))return isNaN(r)?".nan":r<0?"-.inf":".inf";let o=JSON.stringify(s);if(!t&&e&&(!n||"tag:yaml.org,2002:float"===n)&&/^\d/.test(o)){let t=o.indexOf(".");t<0&&(t=o.length,o+=".");let n=e-(o.length-t-1);for(;n-- >0;)o+="0"}return o}const Qs={identify:t=>"number"==typeof t,default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF|nan|NaN|NAN))$/,resolve:t=>"nan"===t.slice(-3).toLowerCase()?NaN:"-"===t[0]?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:Ps},Ms={identify:t=>"number"==typeof t,default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:\.[0-9]+|[0-9]+(?:\.[0-9]*)?)[eE][-+]?[0-9]+$/,resolve:t=>parseFloat(t),stringify(t){const e=Number(t.value);return isFinite(e)?e.toExponential():Ps(t)}},Bs={identify:t=>"number"==typeof t,default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:\.[0-9]+|[0-9]+\.[0-9]*)$/,resolve(t){const e=new Jn(parseFloat(t)),n=t.indexOf(".");return-1!==n&&"0"===t[t.length-1]&&(e.minFractionDigits=t.length-n-1),e},stringify:Ps},Fs=t=>"bigint"==typeof t||Number.isInteger(t),js=(t,e,n,{intAsBigInt:s})=>s?BigInt(t):parseInt(t.substring(e),n);function Ks(t,e,n){const{value:s}=t;return Fs(s)&&s>=0?n+s.toString(e):Ps(t)}const Ws={identify:t=>Fs(t)&&t>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^0o[0-7]+$/,resolve:(t,e,n)=>js(t,2,8,n),stringify:t=>Ks(t,8,"0o")},qs={identify:Fs,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9]+$/,resolve:(t,e,n)=>js(t,0,10,n),stringify:Ps},Hs={identify:t=>Fs(t)&&t>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^0x[0-9a-fA-F]+$/,resolve:(t,e,n)=>js(t,2,16,n),stringify:t=>Ks(t,16,"0x")},Vs=[Ts,Ls,Rs,Us,Ds,Ws,qs,Hs,Qs,Ms,Bs];function Gs(t){return"bigint"==typeof t||Number.isInteger(t)}const Xs=({value:t})=>JSON.stringify(t),Js=[{identify:t=>"string"==typeof t,default:!0,tag:"tag:yaml.org,2002:str",resolve:t=>t,stringify:Xs},{identify:t=>null==t,createNode:()=>new Jn(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^null$/,resolve:()=>null,stringify:Xs},{identify:t=>"boolean"==typeof t,default:!0,tag:"tag:yaml.org,2002:bool",test:/^true|false$/,resolve:t=>"true"===t,stringify:Xs},{identify:Gs,default:!0,tag:"tag:yaml.org,2002:int",test:/^-?(?:0|[1-9][0-9]*)$/,resolve:(t,e,{intAsBigInt:n})=>n?BigInt(t):parseInt(t,10),stringify:({value:t})=>Gs(t)?t.toString():JSON.stringify(t)},{identify:t=>"number"==typeof t,default:!0,tag:"tag:yaml.org,2002:float",test:/^-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/,resolve:t=>parseFloat(t),stringify:Xs}],zs={default:!0,tag:"",test:/^/,resolve:(t,e)=>(e(`Unresolved plain scalar ${JSON.stringify(t)}`),t)},Ys=[Ts,Ls].concat(Js,zs),Zs={identify:t=>t instanceof Uint8Array,default:!1,tag:"tag:yaml.org,2002:binary",resolve(t,e){if("function"==typeof Buffer)return Buffer.from(t,"base64");if("function"==typeof atob){const e=atob(t.replace(/[\n\r]/g,"")),n=new Uint8Array(e.length);for(let t=0;t<e.length;++t)n[t]=e.charCodeAt(t);return n}return e("This environment does not support reading binary tags; either Buffer or atob is required"),t},stringify({comment:t,type:e,value:n},s,r,o){const i=n;let c;if("function"==typeof Buffer)c=i instanceof Buffer?i.toString("base64"):Buffer.from(i.buffer).toString("base64");else{if("function"!=typeof btoa)throw new Error("This environment does not support writing binary tags; either Buffer or btoa is required");{let t="";for(let e=0;e<i.length;++e)t+=String.fromCharCode(i[e]);c=btoa(t)}}if(e||(e=Jn.BLOCK_LITERAL),e!==Jn.QUOTE_DOUBLE){const t=Math.max(s.options.lineWidth-s.indent.length,s.options.minContentWidth),n=Math.ceil(c.length/t),r=new Array(n);for(let e=0,s=0;e<n;++e,s+=t)r[e]=c.substr(s,t);c=r.join(e===Jn.BLOCK_LITERAL?"\n":" ")}return ms({comment:t,type:e,value:c},s,r,o)}};function tr(t,e){if(On(t))for(let n=0;n<t.items.length;++n){let s=t.items[n];if(!Tn(s)){if(In(s)){s.items.length>1&&e("Each pair must have its own sequence indicator");const t=s.items[0]||new ks(new Jn(null));if(s.commentBefore&&(t.key.commentBefore=t.key.commentBefore?`${s.commentBefore}\n${t.key.commentBefore}`:s.commentBefore),s.comment){const e=t.value??t.key;e.comment=e.comment?`${s.comment}\n${e.comment}`:s.comment}s=t}t.items[n]=Tn(s)?s:new ks(s)}}else e("Expected a sequence for this tag");return t}function er(t,e,n){const{replacer:s}=n,r=new Cs(t);r.tag="tag:yaml.org,2002:pairs";let o=0;if(e&&Symbol.iterator in Object(e))for(let t of e){let i,c;if("function"==typeof s&&(t=s.call(e,String(o++),t)),Array.isArray(t)){if(2!==t.length)throw new TypeError(`Expected [key, value] tuple: ${t}`);i=t[0],c=t[1]}else if(t&&t instanceof Object){const e=Object.keys(t);if(1!==e.length)throw new TypeError(`Expected { key: value } tuple: ${t}`);i=e[0],c=t[i]}else i=t;r.items.push(xs(i,c,n))}return r}const nr={collection:"seq",default:!1,tag:"tag:yaml.org,2002:pairs",resolve:tr,createNode:er};class sr extends Cs{constructor(){super(),this.add=Is.prototype.add.bind(this),this.delete=Is.prototype.delete.bind(this),this.get=Is.prototype.get.bind(this),this.has=Is.prototype.has.bind(this),this.set=Is.prototype.set.bind(this),this.tag=sr.tag}toJSON(t,e){if(!e)return super.toJSON(t);const n=new Map;e?.onCreate&&e.onCreate(n);for(const t of this.items){let s,r;if(Tn(t)?(s=Gn(t.key,"",e),r=Gn(t.value,s,e)):s=Gn(t,"",e),n.has(s))throw new Error("Ordered maps must not include duplicate keys");n.set(s,r)}return n}}sr.tag="tag:yaml.org,2002:omap";const rr={collection:"seq",identify:t=>t instanceof Map,nodeClass:sr,default:!1,tag:"tag:yaml.org,2002:omap",resolve(t,e){const n=tr(t,e),s=[];for(const{key:t}of n.items)Cn(t)&&(s.includes(t.value)?e(`Ordered maps must not include duplicate keys: ${t.value}`):s.push(t.value));return Object.assign(new sr,n)},createNode(t,e,n){const s=er(t,e,n),r=new sr;return r.items=s.items,r}};function or({value:t,source:e},n){return e&&(t?ir:cr).test.test(e)?e:t?n.options.trueStr:n.options.falseStr}const ir={identify:t=>!0===t,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/,resolve:()=>new Jn(!0),stringify:or},cr={identify:t=>!1===t,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/i,resolve:()=>new Jn(!1),stringify:or},ar={identify:t=>"number"==typeof t,default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?\.(?:inf|Inf|INF|nan|NaN|NAN)$/,resolve:t=>"nan"===t.slice(-3).toLowerCase()?NaN:"-"===t[0]?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:Ps},lr={identify:t=>"number"==typeof t,default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:[0-9][0-9_]*)?(?:\.[0-9_]*)?[eE][-+]?[0-9]+$/,resolve:t=>parseFloat(t.replace(/_/g,"")),stringify(t){const e=Number(t.value);return isFinite(e)?e.toExponential():Ps(t)}},ur={identify:t=>"number"==typeof t,default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:[0-9][0-9_]*)?\.[0-9_]*$/,resolve(t){const e=new Jn(parseFloat(t.replace(/_/g,""))),n=t.indexOf(".");if(-1!==n){const s=t.substring(n+1).replace(/_/g,"");"0"===s[s.length-1]&&(e.minFractionDigits=s.length)}return e},stringify:Ps},fr=t=>"bigint"==typeof t||Number.isInteger(t);function dr(t,e,n,{intAsBigInt:s}){const r=t[0];if("-"!==r&&"+"!==r||(e+=1),t=t.substring(e).replace(/_/g,""),s){switch(n){case 2:t=`0b${t}`;break;case 8:t=`0o${t}`;break;case 16:t=`0x${t}`}const e=BigInt(t);return"-"===r?BigInt(-1)*e:e}const o=parseInt(t,n);return"-"===r?-1*o:o}function pr(t,e,n){const{value:s}=t;if(fr(s)){const t=s.toString(e);return s<0?"-"+n+t.substr(1):n+t}return Ps(t)}const hr={identify:fr,default:!0,tag:"tag:yaml.org,2002:int",format:"BIN",test:/^[-+]?0b[0-1_]+$/,resolve:(t,e,n)=>dr(t,2,2,n),stringify:t=>pr(t,2,"0b")},mr={identify:fr,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^[-+]?0[0-7_]+$/,resolve:(t,e,n)=>dr(t,1,8,n),stringify:t=>pr(t,8,"0")},gr={identify:fr,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9][0-9_]*$/,resolve:(t,e,n)=>dr(t,0,10,n),stringify:Ps},$r={identify:fr,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^[-+]?0x[0-9a-fA-F_]+$/,resolve:(t,e,n)=>dr(t,2,16,n),stringify:t=>pr(t,16,"0x")};class yr extends Is{constructor(t){super(t),this.tag=yr.tag}add(t){let e;e=Tn(t)?t:"object"==typeof t&&"key"in t&&"value"in t&&null===t.value?new ks(t.key,null):new ks(t,null);Ns(this.items,e.key)||this.items.push(e)}get(t,e){const n=Ns(this.items,t);return!e&&Tn(n)?Cn(n.key)?n.key.value:n.key:n}set(t,e){if("boolean"!=typeof e)throw new Error("Expected boolean value for set(key, value) in a YAML set, not "+typeof e);const n=Ns(this.items,t);n&&!e?this.items.splice(this.items.indexOf(n),1):!n&&e&&this.items.push(new ks(t))}toJSON(t,e){return super.toJSON(t,e,Set)}toString(t,e,n){if(!t)return JSON.stringify(this);if(this.hasAllNullValues(!0))return super.toString(Object.assign({},t,{allNullValues:!0}),e,n);throw new Error("Set items must all have null values")}}yr.tag="tag:yaml.org,2002:set";const wr={collection:"map",identify:t=>t instanceof Set,nodeClass:yr,default:!1,tag:"tag:yaml.org,2002:set",resolve(t,e){if(In(t)){if(t.hasAllNullValues(!0))return Object.assign(new yr,t);e("Set items must all have null values")}else e("Expected a mapping for this tag");return t},createNode(t,e,n){const{replacer:s}=n,r=new yr(t);if(e&&Symbol.iterator in Object(e))for(let t of e)"function"==typeof s&&(t=s.call(e,t,t)),r.items.push(xs(t,null,n));return r}};function br(t,e){const n=t[0],s="-"===n||"+"===n?t.substring(1):t,r=t=>e?BigInt(t):Number(t),o=s.replace(/_/g,"").split(":").reduce(((t,e)=>t*r(60)+r(e)),r(0));return"-"===n?r(-1)*o:o}function vr(t){let{value:e}=t,n=t=>t;if("bigint"==typeof e)n=t=>BigInt(t);else if(isNaN(e)||!isFinite(e))return Ps(t);let s="";e<0&&(s="-",e*=n(-1));const r=n(60),o=[e%r];return e<60?o.unshift(0):(e=(e-o[0])/r,o.unshift(e%r),e>=60&&(e=(e-o[0])/r,o.unshift(e))),s+o.map((t=>t<10?"0"+String(t):String(t))).join(":").replace(/000000\d*$/,"")}const xr={identify:t=>"bigint"==typeof t||Number.isInteger(t),default:!0,tag:"tag:yaml.org,2002:int",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+$/,resolve:(t,e,{intAsBigInt:n})=>br(t,n),stringify:vr},kr={identify:t=>"number"==typeof t,default:!0,tag:"tag:yaml.org,2002:float",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\.[0-9_]*$/,resolve:t=>br(t,!1),stringify:vr},_r={identify:t=>t instanceof Date,default:!0,tag:"tag:yaml.org,2002:timestamp",test:RegExp("^([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})(?:(?:t|T|[ \\t]+)([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\.[0-9]+)?)(?:[ \\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?)?$"),resolve(t){const e=t.match(_r.test);if(!e)throw new Error("!!timestamp expects a date, starting with yyyy-mm-dd");const[,n,s,r,o,i,c]=e.map(Number),a=e[7]?Number((e[7]+"00").substr(1,3)):0;let l=Date.UTC(n,s-1,r,o||0,i||0,c||0,a);const u=e[8];if(u&&"Z"!==u){let t=br(u,!1);Math.abs(t)<30&&(t*=60),l-=6e4*t}return new Date(l)},stringify:({value:t})=>t.toISOString().replace(/((T00:00)?:00)?\.000Z$/,"")},Sr=[Ts,Ls,Rs,Us,ir,cr,hr,mr,gr,$r,ar,lr,ur,Zs,rr,nr,wr,xr,kr,_r],Ar=new Map([["core",Vs],["failsafe",[Ts,Ls,Rs]],["json",Ys],["yaml11",Sr],["yaml-1.1",Sr]]),Er={binary:Zs,bool:Ds,float:Bs,floatExp:Ms,floatNaN:Qs,floatTime:kr,int:qs,intHex:Hs,intOct:Ws,intTime:xr,map:Ts,null:Us,omap:rr,pairs:nr,seq:Ls,set:wr,timestamp:_r},Nr={"tag:yaml.org,2002:binary":Zs,"tag:yaml.org,2002:omap":rr,"tag:yaml.org,2002:pairs":nr,"tag:yaml.org,2002:set":wr,"tag:yaml.org,2002:timestamp":_r};function Ir(t,e){let n=Ar.get(e);if(!n){if(!Array.isArray(t)){const t=Array.from(Ar.keys()).filter((t=>"yaml11"!==t)).map((t=>JSON.stringify(t))).join(", ");throw new Error(`Unknown schema "${e}"; use one of ${t} or define customTags array`)}n=[]}if(Array.isArray(t))for(const e of t)n=n.concat(e);else"function"==typeof t&&(n=t(n.slice()));return n.map((t=>{if("string"!=typeof t)return t;const e=Er[t];if(e)return e;const n=Object.keys(Er).map((t=>JSON.stringify(t))).join(", ");throw new Error(`Unknown custom tag "${t}"; use one of ${n}`)}))}const Tr=(t,e)=>t.key<e.key?-1:t.key>e.key?1:0;class Cr{constructor({compat:t,customTags:e,merge:n,resolveKnownTags:s,schema:r,sortMapEntries:o,toStringDefaults:i}){this.compat=Array.isArray(t)?Ir(t,"compat"):t?Ir(null,t):null,this.merge=!!n,this.name="string"==typeof r&&r||"core",this.knownTags=s?Nr:{},this.tags=Ir(e,this.name),this.toStringOptions=i??null,Object.defineProperty(this,xn,{value:Ts}),Object.defineProperty(this,_n,{value:Rs}),Object.defineProperty(this,Sn,{value:Ls}),this.sortMapEntries="function"==typeof o?o:!0===o?Tr:null}clone(){const t=Object.create(Cr.prototype,Object.getOwnPropertyDescriptors(this));return t.tags=this.tags.slice(),t}}function Or(t,e,n,s){if(s&&"object"==typeof s)if(Array.isArray(s))for(let e=0,n=s.length;e<n;++e){const n=s[e],r=Or(t,s,String(e),n);void 0===r?delete s[e]:r!==n&&(s[e]=r)}else if(s instanceof Map)for(const e of Array.from(s.keys())){const n=s.get(e),r=Or(t,s,e,n);void 0===r?s.delete(e):r!==n&&s.set(e,r)}else if(s instanceof Set)for(const e of Array.from(s)){const n=Or(t,s,e,e);void 0===n?s.delete(e):n!==e&&(s.delete(e),s.add(n))}else for(const[e,n]of Object.entries(s)){const r=Or(t,s,e,n);void 0===r?delete s[e]:r!==n&&(s[e]=r)}return t.call(e,n,s)}class Lr{constructor(t,e,n){this.commentBefore=null,this.comment=null,this.errors=[],this.warnings=[],Object.defineProperty(this,An,{value:vn});let s=null;"function"==typeof e||Array.isArray(e)?s=e:void 0===n&&e&&(n=e,e=void 0);const r=Object.assign({intAsBigInt:!1,keepSourceTokens:!1,logLevel:"warn",prettyErrors:!0,strict:!0,uniqueKeys:!0,version:"1.2"},n);this.options=r;let{version:o}=r;n?._directives?(this.directives=n._directives.atDocument(),this.directives.yaml.explicit&&(o=this.directives.yaml.version)):this.directives=new jn({version:o}),this.setSchema(o,n),this.contents=void 0===t?null:this.createNode(t,s,n)}clone(){const t=Object.create(Lr.prototype,{[An]:{value:vn}});return t.commentBefore=this.commentBefore,t.comment=this.comment,t.errors=this.errors.slice(),t.warnings=this.warnings.slice(),t.options=Object.assign({},this.options),this.directives&&(t.directives=this.directives.clone()),t.schema=this.schema.clone(),t.contents=Rn(this.contents)?this.contents.clone(t.schema):this.contents,this.range&&(t.range=this.range.slice()),t}add(t){Rr(this.contents)&&this.contents.add(t)}addIn(t,e){Rr(this.contents)&&this.contents.addIn(t,e)}createAlias(t,e){if(!t.anchor){const n=Wn(this);t.anchor=!e||n.has(e)?qn(e||"a",n):e}return new Hn(t.anchor)}createNode(t,e,n){let s;if("function"==typeof e)t=e.call({"":t},"",t),s=e;else if(Array.isArray(e)){const t=t=>"number"==typeof t||t instanceof String||t instanceof Number,n=e.filter(t).map(String);n.length>0&&(e=e.concat(n)),s=e}else void 0===n&&e&&(n=e,e=void 0);const{aliasDuplicateObjects:r,anchorPrefix:o,flow:i,keepUndefined:c,onTagObj:a,tag:l}=n??{},{onAnchor:u,setAnchors:f,sourceObjects:d}=function(t,e){const n=[],s=new Map;let r=null;return{onAnchor:s=>{n.push(s),r||(r=Wn(t));const o=qn(e,r);return r.add(o),o},setAnchors:()=>{for(const t of n){const e=s.get(t);if("object"!=typeof e||!e.anchor||!Cn(e.node)&&!Ln(e.node)){const e=new Error("Failed to resolve repeated object (this should not happen)");throw e.source=t,e}e.node.anchor=e.anchor}},sourceObjects:s}}(this,o||"a"),p=zn(t,l,{aliasDuplicateObjects:r??!0,keepUndefined:c??!1,onAnchor:u,onTagObj:a,replacer:s,schema:this.schema,sourceObjects:d});return i&&Ln(p)&&(p.flow=!0),f(),p}createPair(t,e,n={}){const s=this.createNode(t,null,n),r=this.createNode(e,null,n);return new ks(s,r)}delete(t){return!!Rr(this.contents)&&this.contents.delete(t)}deleteIn(t){return Zn(t)?null!=this.contents&&(this.contents=null,!0):!!Rr(this.contents)&&this.contents.deleteIn(t)}get(t,e){return Ln(this.contents)?this.contents.get(t,e):void 0}getIn(t,e){return Zn(t)?!e&&Cn(this.contents)?this.contents.value:this.contents:Ln(this.contents)?this.contents.getIn(t,e):void 0}has(t){return!!Ln(this.contents)&&this.contents.has(t)}hasIn(t){return Zn(t)?void 0!==this.contents:!!Ln(this.contents)&&this.contents.hasIn(t)}set(t,e){null==this.contents?this.contents=Yn(this.schema,[t],e):Rr(this.contents)&&this.contents.set(t,e)}setIn(t,e){Zn(t)?this.contents=e:null==this.contents?this.contents=Yn(this.schema,Array.from(t),e):Rr(this.contents)&&this.contents.setIn(t,e)}setSchema(t,e={}){let n;switch("number"==typeof t&&(t=String(t)),t){case"1.1":this.directives?this.directives.yaml.version="1.1":this.directives=new jn({version:"1.1"}),n={merge:!0,resolveKnownTags:!1,schema:"yaml-1.1"};break;case"1.2":case"next":this.directives?this.directives.yaml.version=t:this.directives=new jn({version:t}),n={merge:!1,resolveKnownTags:!0,schema:"core"};break;case null:this.directives&&delete this.directives,n=null;break;default:{const e=JSON.stringify(t);throw new Error(`Expected '1.1', '1.2' or null as first argument, but found: ${e}`)}}if(e.schema instanceof Object)this.schema=e.schema;else{if(!n)throw new Error("With a null YAML version, the { schema: Schema } option is required");this.schema=new Cr(Object.assign(n,e))}}toJS({json:t,jsonArg:e,mapAsMap:n,maxAliasCount:s,onAnchor:r,reviver:o}={}){const i={anchors:new Map,doc:this,keep:!t,mapAsMap:!0===n,mapKeyWarned:!1,maxAliasCount:"number"==typeof s?s:100,stringify:$s},c=Gn(this.contents,e??"",i);if("function"==typeof r)for(const{count:t,res:e}of i.anchors.values())r(e,t);return"function"==typeof o?Or(o,{"":c},"",c):c}toJSON(t,e){return this.toJS({json:!0,jsonArg:t,mapAsMap:!1,onAnchor:e})}toString(t={}){if(this.errors.length>0)throw new Error("Document with errors cannot be stringified");if("indent"in t&&(!Number.isInteger(t.indent)||Number(t.indent)<=0)){const e=JSON.stringify(t.indent);throw new Error(`"indent" option must be a positive integer, not ${e}`)}return function(t,e){const n=[];let s=!0===e.directives;if(!1!==e.directives&&t.directives){const e=t.directives.toString(t);e?(n.push(e),s=!0):t.directives.docStart&&(s=!0)}s&&n.push("---");const r=gs(t,e),{commentString:o}=r.options;if(t.commentBefore){1!==n.length&&n.unshift("");const e=o(t.commentBefore);n.unshift(ns(e,""))}let i=!1,c=null;if(t.contents){if(Rn(t.contents)){if(t.contents.spaceBefore&&s&&n.push(""),t.contents.commentBefore){const e=o(t.contents.commentBefore);n.push(ns(e,""))}r.forceBlockIndent=!!t.comment,c=t.contents.comment}const e=c?void 0:()=>i=!0;let a=$s(t.contents,r,(()=>c=null),e);c&&(a+=ss(a,"",o(c))),"|"!==a[0]&&">"!==a[0]||"---"!==n[n.length-1]?n.push(a):n[n.length-1]=`--- ${a}`}else n.push($s(t.contents,r));if(t.directives?.docEnd)if(t.comment){const e=o(t.comment);e.includes("\n")?(n.push("..."),n.push(ns(e,""))):n.push(`... ${e}`)}else n.push("...");else{let e=t.comment;e&&i&&(e=e.replace(/^\n+/,"")),e&&(i&&!c||""===n[n.length-1]||n.push(""),n.push(ns(o(e),"")))}return n.join("\n")+"\n"}(this,t)}}function Rr(t){if(Ln(t))return!0;throw new Error("Expected a YAML collection as document contents")}class Ur extends Error{constructor(t,e,n,s){super(),this.name=t,this.code=n,this.message=s,this.pos=e}}class Dr extends Ur{constructor(t,e,n){super("YAMLParseError",t,e,n)}}class Pr extends Ur{constructor(t,e,n){super("YAMLWarning",t,e,n)}}const Qr=(t,e)=>n=>{if(-1===n.pos[0])return;n.linePos=n.pos.map((t=>e.linePos(t)));const{line:s,col:r}=n.linePos[0];n.message+=` at line ${s}, column ${r}`;let o=r-1,i=t.substring(e.lineStarts[s-1],e.lineStarts[s]).replace(/[\n\r]+$/,"");if(o>=60&&i.length>80){const t=Math.min(o-39,i.length-79);i="…"+i.substring(t),o-=t-1}if(i.length>80&&(i=i.substring(0,79)+"…"),s>1&&/^ *$/.test(i.substring(0,o))){let n=t.substring(e.lineStarts[s-2],e.lineStarts[s-1]);n.length>80&&(n=n.substring(0,79)+"…\n"),i=n+i}if(/[^ ]/.test(i)){let t=1;const e=n.linePos[1];e&&e.line===s&&e.col>r&&(t=Math.min(e.col-r,80-o));const c=" ".repeat(o)+"^".repeat(t);n.message+=`:\n\n${i}\n${c}\n`}};function Mr(t,{flow:e,indicator:n,next:s,offset:r,onError:o,startOnNewline:i}){let c=!1,a=i,l=i,u="",f="",d=!1,p=!1,h=!1,m=null,g=null,$=null,y=null,w=null;for(const s of t)switch(h&&("space"!==s.type&&"newline"!==s.type&&"comma"!==s.type&&o(s.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),h=!1),s.type){case"space":!e&&a&&"doc-start"!==n&&"\t"===s.source[0]&&o(s,"TAB_AS_INDENT","Tabs are not allowed as indentation"),l=!0;break;case"comment":{l||o(s,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");const t=s.source.substring(1)||" ";u?u+=f+t:u=t,f="",a=!1;break}case"newline":a?u?u+=s.source:c=!0:f+=s.source,a=!0,d=!0,(m||g)&&(p=!0),l=!0;break;case"anchor":m&&o(s,"MULTIPLE_ANCHORS","A node can have at most one anchor"),s.source.endsWith(":")&&o(s.offset+s.source.length-1,"BAD_ALIAS","Anchor ending in : is ambiguous",!0),m=s,null===w&&(w=s.offset),a=!1,l=!1,h=!0;break;case"tag":g&&o(s,"MULTIPLE_TAGS","A node can have at most one tag"),g=s,null===w&&(w=s.offset),a=!1,l=!1,h=!0;break;case n:(m||g)&&o(s,"BAD_PROP_ORDER",`Anchors and tags must be after the ${s.source} indicator`),y&&o(s,"UNEXPECTED_TOKEN",`Unexpected ${s.source} in ${e??"collection"}`),y=s,a=!1,l=!1;break;case"comma":if(e){$&&o(s,"UNEXPECTED_TOKEN",`Unexpected , in ${e}`),$=s,a=!1,l=!1;break}default:o(s,"UNEXPECTED_TOKEN",`Unexpected ${s.type} token`),a=!1,l=!1}const b=t[t.length-1],v=b?b.offset+b.source.length:r;return h&&s&&"space"!==s.type&&"newline"!==s.type&&"comma"!==s.type&&("scalar"!==s.type||""!==s.source)&&o(s.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),{comma:$,found:y,spaceBefore:c,comment:u,hasNewline:d,hasNewlineAfterProp:p,anchor:m,tag:g,end:v,start:w??v}}function Br(t){if(!t)return null;switch(t.type){case"alias":case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":if(t.source.includes("\n"))return!0;if(t.end)for(const e of t.end)if("newline"===e.type)return!0;return!1;case"flow-collection":for(const e of t.items){for(const t of e.start)if("newline"===t.type)return!0;if(e.sep)for(const t of e.sep)if("newline"===t.type)return!0;if(Br(e.key)||Br(e.value))return!0}return!1;default:return!0}}function Fr(t,e,n){if("flow-collection"===e?.type){const s=e.end[0];if(s.indent===t&&("]"===s.source||"}"===s.source)&&Br(e)){n(s,"BAD_INDENT","Flow end indicator should be more indented than parent",!0)}}}function jr(t,e,n){const{uniqueKeys:s}=t.options;if(!1===s)return!1;const r="function"==typeof s?s:(e,n)=>e===n||Cn(e)&&Cn(n)&&e.value===n.value&&!("<<"===e.value&&t.schema.merge);return e.some((t=>r(t.key,n)))}const Kr="All mapping items must start at the same column";function Wr(t,e,n,s){let r="";if(t){let o=!1,i="";for(const c of t){const{source:t,type:a}=c;switch(a){case"space":o=!0;break;case"comment":{n&&!o&&s(c,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");const e=t.substring(1)||" ";r?r+=i+e:r=e,i="";break}case"newline":r&&(i+=t),o=!0;break;default:s(c,"UNEXPECTED_TOKEN",`Unexpected ${a} at node end`)}e+=t.length}}return{comment:r,offset:e}}const qr="Block collections are not allowed within flow collections",Hr=t=>t&&("block-map"===t.type||"block-seq"===t.type);function Vr(t,e,n,s,r){let o;switch(n.type){case"block-map":o=function({composeNode:t,composeEmptyNode:e},n,s,r){const o=new Is(n.schema);n.atRoot&&(n.atRoot=!1);let i=s.offset;for(const c of s.items){const{start:a,key:l,sep:u,value:f}=c,d=Mr(a,{indicator:"explicit-key-ind",next:l??u?.[0],offset:i,onError:r,startOnNewline:!0}),p=!d.found;if(p){if(l&&("block-seq"===l.type?r(i,"BLOCK_AS_IMPLICIT_KEY","A block sequence may not be used as an implicit map key"):"indent"in l&&l.indent!==s.indent&&r(i,"BAD_INDENT",Kr)),!d.anchor&&!d.tag&&!u){d.comment&&(o.comment?o.comment+="\n"+d.comment:o.comment=d.comment);continue}(d.hasNewlineAfterProp||Br(l))&&r(l??a[a.length-1],"MULTILINE_IMPLICIT_KEY","Implicit keys need to be on a single line")}else d.found?.indent!==s.indent&&r(i,"BAD_INDENT",Kr);const h=d.end,m=l?t(n,l,d,r):e(n,h,a,null,d,r);n.schema.compat&&Fr(s.indent,l,r),jr(n,o.items,m)&&r(h,"DUPLICATE_KEY","Map keys must be unique");const g=Mr(u??[],{indicator:"map-value-ind",next:f,offset:m.range[2],onError:r,startOnNewline:!l||"block-scalar"===l.type});if(i=g.end,g.found){p&&("block-map"!==f?.type||g.hasNewline||r(i,"BLOCK_AS_IMPLICIT_KEY","Nested mappings are not allowed in compact mappings"),n.options.strict&&d.start<g.found.offset-1024&&r(m.range,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit block mapping key"));const a=f?t(n,f,g,r):e(n,i,u,null,g,r);n.schema.compat&&Fr(s.indent,f,r),i=a.range[2];const l=new ks(m,a);n.options.keepSourceTokens&&(l.srcToken=c),o.items.push(l)}else{p&&r(m.range,"MISSING_CHAR","Implicit map keys need to be followed by map values"),g.comment&&(m.comment?m.comment+="\n"+g.comment:m.comment=g.comment);const t=new ks(m);n.options.keepSourceTokens&&(t.srcToken=c),o.items.push(t)}}return o.range=[s.offset,i,i],o}(t,e,n,r);break;case"block-seq":o=function({composeNode:t,composeEmptyNode:e},n,s,r){const o=new Cs(n.schema);n.atRoot&&(n.atRoot=!1);let i=s.offset;for(const{start:c,value:a}of s.items){const l=Mr(c,{indicator:"seq-item-ind",next:a,offset:i,onError:r,startOnNewline:!0});if(i=l.end,!l.found){if(!(l.anchor||l.tag||a)){l.comment&&(o.comment=l.comment);continue}a&&"block-seq"===a.type?r(i,"BAD_INDENT","All sequence items must start at the same column"):r(i,"MISSING_CHAR","Sequence item without - indicator")}const u=a?t(n,a,l,r):e(n,i,c,null,l,r);n.schema.compat&&Fr(s.indent,a,r),i=u.range[2],o.items.push(u)}return o.range=[s.offset,i,i],o}(t,e,n,r);break;case"flow-collection":o=function({composeNode:t,composeEmptyNode:e},n,s,r){const o="{"===s.start.source,i=o?"flow map":"flow sequence",c=o?new Is(n.schema):new Cs(n.schema);c.flow=!0;const a=n.atRoot;a&&(n.atRoot=!1);let l=s.offset+s.start.source.length;for(let a=0;a<s.items.length;++a){const u=s.items[a],{start:f,key:d,sep:p,value:h}=u,m=Mr(f,{flow:i,indicator:"explicit-key-ind",next:d??p?.[0],offset:l,onError:r,startOnNewline:!1});if(!m.found){if(!(m.anchor||m.tag||p||h)){0===a&&m.comma?r(m.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${i}`):a<s.items.length-1&&r(m.start,"UNEXPECTED_TOKEN",`Unexpected empty item in ${i}`),m.comment&&(c.comment?c.comment+="\n"+m.comment:c.comment=m.comment),l=m.end;continue}!o&&n.options.strict&&Br(d)&&r(d,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line")}if(0===a)m.comma&&r(m.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${i}`);else if(m.comma||r(m.start,"MISSING_CHAR",`Missing , between ${i} items`),m.comment){let t="";t:for(const e of f)switch(e.type){case"comma":case"space":break;case"comment":t=e.source.substring(1);break t;default:break t}if(t){let e=c.items[c.items.length-1];Tn(e)&&(e=e.value??e.key),e.comment?e.comment+="\n"+t:e.comment=t,m.comment=m.comment.substring(t.length+1)}}if(o||p||m.found){const s=m.end,a=d?t(n,d,m,r):e(n,s,f,null,m,r);Hr(d)&&r(a.range,"BLOCK_IN_FLOW",qr);const g=Mr(p??[],{flow:i,indicator:"map-value-ind",next:h,offset:a.range[2],onError:r,startOnNewline:!1});if(g.found){if(!o&&!m.found&&n.options.strict){if(p)for(const t of p){if(t===g.found)break;if("newline"===t.type){r(t,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line");break}}m.start<g.found.offset-1024&&r(g.found,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit flow sequence key")}}else h&&("source"in h&&h.source&&":"===h.source[0]?r(h,"MISSING_CHAR",`Missing space after : in ${i}`):r(g.start,"MISSING_CHAR",`Missing , or : between ${i} items`));const $=h?t(n,h,g,r):g.found?e(n,g.end,p,null,g,r):null;$?Hr(h)&&r($.range,"BLOCK_IN_FLOW",qr):g.comment&&(a.comment?a.comment+="\n"+g.comment:a.comment=g.comment);const y=new ks(a,$);if(n.options.keepSourceTokens&&(y.srcToken=u),o){const t=c;jr(n,t.items,a)&&r(s,"DUPLICATE_KEY","Map keys must be unique"),t.items.push(y)}else{const t=new Is(n.schema);t.flow=!0,t.items.push(y),c.items.push(t)}l=$?$.range[2]:g.end}else{const s=h?t(n,h,m,r):e(n,m.end,p,null,m,r);c.items.push(s),l=s.range[2],Hr(h)&&r(s.range,"BLOCK_IN_FLOW",qr)}}const u=o?"}":"]",[f,...d]=s.end;let p=l;if(f&&f.source===u)p=f.offset+f.source.length;else{const t=i[0].toUpperCase()+i.substring(1);r(l,a?"MISSING_CHAR":"BAD_INDENT",a?`${t} must end with a ${u}`:`${t} in block collection must be sufficiently indented and end with a ${u}`),f&&1!==f.source.length&&d.unshift(f)}if(d.length>0){const t=Wr(d,p,n.options.strict,r);t.comment&&(c.comment?c.comment+="\n"+t.comment:c.comment=t.comment),c.range=[s.offset,p,t.offset]}else c.range=[s.offset,p,p];return c}(t,e,n,r)}if(!s)return o;const i=e.directives.tagName(s.source,(t=>r(s,"TAG_RESOLVE_FAILED",t)));if(!i)return o;const c=o.constructor;if("!"===i||i===c.tagName)return o.tag=c.tagName,o;const a=In(o)?"map":"seq";let l=e.schema.tags.find((t=>t.collection===a&&t.tag===i));if(!l){const t=e.schema.knownTags[i];if(!t||t.collection!==a)return r(s,"TAG_RESOLVE_FAILED",`Unresolved tag: ${i}`,!0),o.tag=i,o;e.schema.tags.push(Object.assign({},t,{default:!1})),l=t}const u=l.resolve(o,(t=>r(s,"TAG_RESOLVE_FAILED",t)),e.options),f=Rn(u)?u:new Jn(u);return f.range=o.range,f.tag=i,l?.format&&(f.format=l.format),f}function Gr(t,e,n){const s=t.offset,r=function({offset:t,props:e},n,s){if("block-scalar-header"!==e[0].type)return s(e[0],"IMPOSSIBLE","Block scalar header not found"),null;const{source:r}=e[0],o=r[0];let i=0,c="",a=-1;for(let e=1;e<r.length;++e){const n=r[e];if(c||"-"!==n&&"+"!==n){const s=Number(n);!i&&s?i=s:-1===a&&(a=t+e)}else c=n}-1!==a&&s(a,"UNEXPECTED_TOKEN",`Block scalar header includes extra characters: ${r}`);let l=!1,u="",f=r.length;for(let t=1;t<e.length;++t){const r=e[t];switch(r.type){case"space":l=!0;case"newline":f+=r.source.length;break;case"comment":if(n&&!l){s(r,"MISSING_CHAR","Comments must be separated from other tokens by white space characters")}f+=r.source.length,u=r.source.substring(1);break;case"error":s(r,"UNEXPECTED_TOKEN",r.message),f+=r.source.length;break;default:{s(r,"UNEXPECTED_TOKEN",`Unexpected token in block scalar header: ${r.type}`);const t=r.source;t&&"string"==typeof t&&(f+=t.length)}}}return{mode:o,indent:i,chomp:c,comment:u,length:f}}(t,e,n);if(!r)return{value:"",type:null,comment:"",range:[s,s,s]};const o=">"===r.mode?Jn.BLOCK_FOLDED:Jn.BLOCK_LITERAL,i=t.source?function(t){const e=t.split(/\n( *)/),n=e[0],s=n.match(/^( *)/),r=[s?.[1]?[s[1],n.slice(s[1].length)]:["",n]];for(let t=1;t<e.length;t+=2)r.push([e[t],e[t+1]]);return r}(t.source):[];let c=i.length;for(let t=i.length-1;t>=0;--t){const e=i[t][1];if(""!==e&&"\r"!==e)break;c=t}if(0===c){const e="+"===r.chomp&&i.length>0?"\n".repeat(Math.max(1,i.length-1)):"";let n=s+r.length;return t.source&&(n+=t.source.length),{value:e,type:o,comment:r.comment,range:[s,n,n]}}let a=t.indent+r.indent,l=t.offset+r.length,u=0;for(let t=0;t<c;++t){const[e,s]=i[t];if(""!==s&&"\r"!==s){if(e.length<a){const t="Block scalars with more-indented leading empty lines must use an explicit indentation indicator";n(l+e.length,"MISSING_CHAR",t)}0===r.indent&&(a=e.length),u=t;break}0===r.indent&&e.length>a&&(a=e.length),l+=e.length+s.length+1}for(let t=i.length-1;t>=c;--t)i[t][0].length>a&&(c=t+1);let f="",d="",p=!1;for(let t=0;t<u;++t)f+=i[t][0].slice(a)+"\n";for(let t=u;t<c;++t){let[e,s]=i[t];l+=e.length+s.length+1;const c="\r"===s[s.length-1];if(c&&(s=s.slice(0,-1)),s&&e.length<a){const t=`Block scalar lines must not be less indented than their ${r.indent?"explicit indentation indicator":"first line"}`;n(l-s.length-(c?2:1),"BAD_INDENT",t),e=""}o===Jn.BLOCK_LITERAL?(f+=d+e.slice(a)+s,d="\n"):e.length>a||"\t"===s[0]?(" "===d?d="\n":p||"\n"!==d||(d="\n\n"),f+=d+e.slice(a)+s,d="\n",p=!0):""===s?"\n"===d?f+="\n":d="\n":(f+=d+s,d=" ",p=!1)}switch(r.chomp){case"-":break;case"+":for(let t=c;t<i.length;++t)f+="\n"+i[t][0].slice(a);"\n"!==f[f.length-1]&&(f+="\n");break;default:f+="\n"}const h=s+r.length+t.source.length;return{value:f,type:o,comment:r.comment,range:[s,h,h]}}function Xr(t,e,n){const{offset:s,type:r,source:o,end:i}=t;let c,a;const l=(t,e,r)=>n(s+t,e,r);switch(r){case"scalar":c=Jn.PLAIN,a=function(t,e){let n="";switch(t[0]){case"\t":n="a tab character";break;case",":n="flow indicator character ,";break;case"%":n="directive indicator character %";break;case"|":case">":n=`block scalar indicator ${t[0]}`;break;case"@":case"`":n=`reserved character ${t[0]}`}n&&e(0,"BAD_SCALAR_START",`Plain value cannot start with ${n}`);return Jr(t)}(o,l);break;case"single-quoted-scalar":c=Jn.QUOTE_SINGLE,a=function(t,e){"'"===t[t.length-1]&&1!==t.length||e(t.length,"MISSING_CHAR","Missing closing 'quote");return Jr(t.slice(1,-1)).replace(/''/g,"'")}(o,l);break;case"double-quoted-scalar":c=Jn.QUOTE_DOUBLE,a=function(t,e){let n="";for(let s=1;s<t.length-1;++s){const r=t[s];if("\r"!==r||"\n"!==t[s+1])if("\n"===r){const{fold:e,offset:r}=zr(t,s);n+=e,s=r}else if("\\"===r){let r=t[++s];const o=Yr[r];if(o)n+=o;else if("\n"===r)for(r=t[s+1];" "===r||"\t"===r;)r=t[1+ ++s];else if("\r"===r&&"\n"===t[s+1])for(r=t[1+ ++s];" "===r||"\t"===r;)r=t[1+ ++s];else if("x"===r||"u"===r||"U"===r){const o={x:2,u:4,U:8}[r];n+=Zr(t,s+1,o,e),s+=o}else{const r=t.substr(s-1,2);e(s-1,"BAD_DQ_ESCAPE",`Invalid escape sequence ${r}`),n+=r}}else if(" "===r||"\t"===r){const e=s;let o=t[s+1];for(;" "===o||"\t"===o;)o=t[1+ ++s];"\n"===o||"\r"===o&&"\n"===t[s+2]||(n+=s>e?t.slice(e,s+1):r)}else n+=r}'"'===t[t.length-1]&&1!==t.length||e(t.length,"MISSING_CHAR",'Missing closing "quote');return n}(o,l);break;default:return n(t,"UNEXPECTED_TOKEN",`Expected a flow scalar value, but found: ${r}`),{value:"",type:null,comment:"",range:[s,s+o.length,s+o.length]}}const u=s+o.length,f=Wr(i,u,e,n);return{value:a,type:c,comment:f.comment,range:[s,u,f.offset]}}function Jr(t){let e,n;try{e=new RegExp("(.*?)(?<![ \t])[ \t]*\r?\n","sy"),n=new RegExp("[ \t]*(.*?)(?:(?<![ \t])[ \t]*)?\r?\n","sy")}catch(t){e=/(.*?)[ \t]*\r?\n/sy,n=/[ \t]*(.*?)[ \t]*\r?\n/sy}let s=e.exec(t);if(!s)return t;let r=s[1],o=" ",i=e.lastIndex;for(n.lastIndex=i;s=n.exec(t);)""===s[1]?"\n"===o?r+=o:o="\n":(r+=o+s[1],o=" "),i=n.lastIndex;const c=/[ \t]*(.*)/sy;return c.lastIndex=i,s=c.exec(t),r+o+(s?.[1]??"")}function zr(t,e){let n="",s=t[e+1];for(;!(" "!==s&&"\t"!==s&&"\n"!==s&&"\r"!==s||"\r"===s&&"\n"!==t[e+2]);)"\n"===s&&(n+="\n"),s=t[(e+=1)+1];return n||(n=" "),{fold:n,offset:e}}const Yr={0:"\0",a:"",b:"\b",e:"",f:"\f",n:"\n",r:"\r",t:"\t",v:"\v",N:"",_:" ",L:"\u2028",P:"\u2029"," ":" ",'"':'"',"/":"/","\\":"\\","\t":"\t"};function Zr(t,e,n,s){const r=t.substr(e,n),o=r.length===n&&/^[0-9a-fA-F]+$/.test(r)?parseInt(r,16):NaN;if(isNaN(o)){const r=t.substr(e-2,n+2);return s(e-2,"BAD_DQ_ESCAPE",`Invalid escape sequence ${r}`),r}return String.fromCodePoint(o)}function to(t,e,n,s){const{value:r,type:o,comment:i,range:c}="block-scalar"===e.type?Gr(e,t.options.strict,s):Xr(e,t.options.strict,s),a=n?t.directives.tagName(n.source,(t=>s(n,"TAG_RESOLVE_FAILED",t))):null,l=n&&a?function(t,e,n,s,r){if("!"===n)return t[_n];const o=[];for(const e of t.tags)if(!e.collection&&e.tag===n){if(!e.default||!e.test)return e;o.push(e)}for(const t of o)if(t.test?.test(e))return t;const i=t.knownTags[n];if(i&&!i.collection)return t.tags.push(Object.assign({},i,{default:!1,test:void 0})),i;return r(s,"TAG_RESOLVE_FAILED",`Unresolved tag: ${n}`,"tag:yaml.org,2002:str"!==n),t[_n]}(t.schema,r,a,n,s):"scalar"===e.type?function({directives:t,schema:e},n,s,r){const o=e.tags.find((t=>t.default&&t.test?.test(n)))||e[_n];if(e.compat){const i=e.compat.find((t=>t.default&&t.test?.test(n)))??e[_n];if(o.tag!==i.tag){r(s,"TAG_RESOLVE_FAILED",`Value may be parsed as either ${t.tagString(o.tag)} or ${t.tagString(i.tag)}`,!0)}}return o}(t,r,e,s):t.schema[_n];let u;try{const o=l.resolve(r,(t=>s(n??e,"TAG_RESOLVE_FAILED",t)),t.options);u=Cn(o)?o:new Jn(o)}catch(t){const o=t instanceof Error?t.message:String(t);s(n??e,"TAG_RESOLVE_FAILED",o),u=new Jn(r)}return u.range=c,u.source=r,o&&(u.type=o),a&&(u.tag=a),l.format&&(u.format=l.format),i&&(u.comment=i),u}function eo(t,e,n){if(e){null===n&&(n=e.length);for(let s=n-1;s>=0;--s){let n=e[s];switch(n.type){case"space":case"comment":case"newline":t-=n.source.length;continue}for(n=e[++s];"space"===n?.type;)t+=n.source.length,n=e[++s];break}}return t}const no={composeNode:so,composeEmptyNode:ro};function so(t,e,n,s){const{spaceBefore:r,comment:o,anchor:i,tag:c}=n;let a,l=!0;switch(e.type){case"alias":a=function({options:t},{offset:e,source:n,end:s},r){const o=new Hn(n.substring(1));""===o.source&&r(e,"BAD_ALIAS","Alias cannot be an empty string");o.source.endsWith(":")&&r(e+n.length-1,"BAD_ALIAS","Alias ending in : is ambiguous",!0);const i=e+n.length,c=Wr(s,i,t.strict,r);o.range=[e,i,c.offset],c.comment&&(o.comment=c.comment);return o}(t,e,s),(i||c)&&s(e,"ALIAS_PROPS","An alias node must not specify any properties");break;case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"block-scalar":a=to(t,e,c,s),i&&(a.anchor=i.source.substring(1));break;case"block-map":case"block-seq":case"flow-collection":a=Vr(no,t,e,c,s),i&&(a.anchor=i.source.substring(1));break;default:s(e,"UNEXPECTED_TOKEN","error"===e.type?e.message:`Unsupported token (type: ${e.type})`),a=ro(t,e.offset,void 0,null,n,s),l=!1}return i&&""===a.anchor&&s(i,"BAD_ALIAS","Anchor cannot be an empty string"),r&&(a.spaceBefore=!0),o&&("scalar"===e.type&&""===e.source?a.comment=o:a.commentBefore=o),t.options.keepSourceTokens&&l&&(a.srcToken=e),a}function ro(t,e,n,s,{spaceBefore:r,comment:o,anchor:i,tag:c},a){const l=to(t,{type:"scalar",offset:eo(e,n,s),indent:-1,source:""},c,a);return i&&(l.anchor=i.source.substring(1),""===l.anchor&&a(i,"BAD_ALIAS","Anchor cannot be an empty string")),r&&(l.spaceBefore=!0),o&&(l.comment=o),l}function oo(t){if("number"==typeof t)return[t,t+1];if(Array.isArray(t))return 2===t.length?t:[t[0],t[1]];const{offset:e,source:n}=t;return[e,e+("string"==typeof n?n.length:1)]}function io(t){let e="",n=!1,s=!1;for(let r=0;r<t.length;++r){const o=t[r];switch(o[0]){case"#":e+=(""===e?"":s?"\n\n":"\n")+(o.substring(1)||" "),n=!0,s=!1;break;case"%":"#"!==t[r+1]?.[0]&&(r+=1),n=!1;break;default:n||(s=!0),n=!1}}return{comment:e,afterEmptyLine:s}}class co{constructor(t={}){this.doc=null,this.atDirectives=!1,this.prelude=[],this.errors=[],this.warnings=[],this.onError=(t,e,n,s)=>{const r=oo(t);s?this.warnings.push(new Pr(r,e,n)):this.errors.push(new Dr(r,e,n))},this.directives=new jn({version:t.version||"1.2"}),this.options=t}decorate(t,e){const{comment:n,afterEmptyLine:s}=io(this.prelude);if(n){const r=t.contents;if(e)t.comment=t.comment?`${t.comment}\n${n}`:n;else if(s||t.directives.docStart||!r)t.commentBefore=n;else if(Ln(r)&&!r.flow&&r.items.length>0){let t=r.items[0];Tn(t)&&(t=t.key);const e=t.commentBefore;t.commentBefore=e?`${n}\n${e}`:n}else{const t=r.commentBefore;r.commentBefore=t?`${n}\n${t}`:n}}e?(Array.prototype.push.apply(t.errors,this.errors),Array.prototype.push.apply(t.warnings,this.warnings)):(t.errors=this.errors,t.warnings=this.warnings),this.prelude=[],this.errors=[],this.warnings=[]}streamInfo(){return{comment:io(this.prelude).comment,directives:this.directives,errors:this.errors,warnings:this.warnings}}*compose(t,e=!1,n=-1){for(const e of t)yield*this.next(e);yield*this.end(e,n)}*next(t){switch(t.type){case"directive":this.directives.add(t.source,((e,n,s)=>{const r=oo(t);r[0]+=e,this.onError(r,"BAD_DIRECTIVE",n,s)})),this.prelude.push(t.source),this.atDirectives=!0;break;case"document":{const e=function(t,e,{offset:n,start:s,value:r,end:o},i){const c=Object.assign({_directives:e},t),a=new Lr(void 0,c),l={atRoot:!0,directives:a.directives,options:a.options,schema:a.schema},u=Mr(s,{indicator:"doc-start",next:r??o?.[0],offset:n,onError:i,startOnNewline:!0});u.found&&(a.directives.docStart=!0,!r||"block-map"!==r.type&&"block-seq"!==r.type||u.hasNewline||i(u.end,"MISSING_CHAR","Block collection cannot start on same line with directives-end marker")),a.contents=r?so(l,r,u,i):ro(l,u.end,s,null,u,i);const f=a.contents.range[2],d=Wr(o,f,!1,i);return d.comment&&(a.comment=d.comment),a.range=[n,f,d.offset],a}(this.options,this.directives,t,this.onError);this.atDirectives&&!e.directives.docStart&&this.onError(t,"MISSING_CHAR","Missing directives-end/doc-start indicator line"),this.decorate(e,!1),this.doc&&(yield this.doc),this.doc=e,this.atDirectives=!1;break}case"byte-order-mark":case"space":break;case"comment":case"newline":this.prelude.push(t.source);break;case"error":{const e=t.source?`${t.message}: ${JSON.stringify(t.source)}`:t.message,n=new Dr(oo(t),"UNEXPECTED_TOKEN",e);this.atDirectives||!this.doc?this.errors.push(n):this.doc.errors.push(n);break}case"doc-end":{if(!this.doc){const e="Unexpected doc-end without preceding document";this.errors.push(new Dr(oo(t),"UNEXPECTED_TOKEN",e));break}this.doc.directives.docEnd=!0;const e=Wr(t.end,t.offset+t.source.length,this.doc.options.strict,this.onError);if(this.decorate(this.doc,!0),e.comment){const t=this.doc.comment;this.doc.comment=t?`${t}\n${e.comment}`:e.comment}this.doc.range[2]=e.offset;break}default:this.errors.push(new Dr(oo(t),"UNEXPECTED_TOKEN",`Unsupported token ${t.type}`))}}*end(t=!1,e=-1){if(this.doc)this.decorate(this.doc,!0),yield this.doc,this.doc=null;else if(t){const t=Object.assign({_directives:this.directives},this.options),n=new Lr(void 0,t);this.atDirectives&&this.onError(e,"MISSING_CHAR","Missing directives-end indicator line"),n.range=[0,e,e],this.decorate(n,!1),yield n}}}function ao(t){switch(t){case void 0:case" ":case"\n":case"\r":case"\t":return!0;default:return!1}}const lo="0123456789ABCDEFabcdef".split(""),uo="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-#;/?:@&=+$_.!~*'()".split(""),fo=",[]{}".split(""),po=" ,[]{}\n\r\t".split(""),ho=t=>!t||po.includes(t);class mo{constructor(){this.atEnd=!1,this.blockScalarIndent=-1,this.blockScalarKeep=!1,this.buffer="",this.flowKey=!1,this.flowLevel=0,this.indentNext=0,this.indentValue=0,this.lineEndPos=null,this.next=null,this.pos=0}*lex(t,e=!1){t&&(this.buffer=this.buffer?this.buffer+t:t,this.lineEndPos=null),this.atEnd=!e;let n=this.next??"stream";for(;n&&(e||this.hasChars(1));)n=yield*this.parseNext(n)}atLineEnd(){let t=this.pos,e=this.buffer[t];for(;" "===e||"\t"===e;)e=this.buffer[++t];return!e||"#"===e||"\n"===e||"\r"===e&&"\n"===this.buffer[t+1]}charAt(t){return this.buffer[this.pos+t]}continueScalar(t){let e=this.buffer[t];if(this.indentNext>0){let n=0;for(;" "===e;)e=this.buffer[++n+t];if("\r"===e){const e=this.buffer[n+t+1];if("\n"===e||!e&&!this.atEnd)return t+n+1}return"\n"===e||n>=this.indentNext||!e&&!this.atEnd?t+n:-1}if("-"===e||"."===e){const e=this.buffer.substr(t,3);if(("---"===e||"..."===e)&&ao(this.buffer[t+3]))return-1}return t}getLine(){let t=this.lineEndPos;return("number"!=typeof t||-1!==t&&t<this.pos)&&(t=this.buffer.indexOf("\n",this.pos),this.lineEndPos=t),-1===t?this.atEnd?this.buffer.substring(this.pos):null:("\r"===this.buffer[t-1]&&(t-=1),this.buffer.substring(this.pos,t))}hasChars(t){return this.pos+t<=this.buffer.length}setNext(t){return this.buffer=this.buffer.substring(this.pos),this.pos=0,this.lineEndPos=null,this.next=t,null}peek(t){return this.buffer.substr(this.pos,t)}*parseNext(t){switch(t){case"stream":return yield*this.parseStream();case"line-start":return yield*this.parseLineStart();case"block-start":return yield*this.parseBlockStart();case"doc":return yield*this.parseDocument();case"flow":return yield*this.parseFlowCollection();case"quoted-scalar":return yield*this.parseQuotedScalar();case"block-scalar":return yield*this.parseBlockScalar();case"plain-scalar":return yield*this.parsePlainScalar()}}*parseStream(){let t=this.getLine();if(null===t)return this.setNext("stream");if("\ufeff"===t[0]&&(yield*this.pushCount(1),t=t.substring(1)),"%"===t[0]){let e=t.length;const n=t.indexOf("#");if(-1!==n){const s=t[n-1];" "!==s&&"\t"!==s||(e=n-1)}for(;;){const n=t[e-1];if(" "!==n&&"\t"!==n)break;e-=1}const s=(yield*this.pushCount(e))+(yield*this.pushSpaces(!0));return yield*this.pushCount(t.length-s),this.pushNewline(),"stream"}if(this.atLineEnd()){const e=yield*this.pushSpaces(!0);return yield*this.pushCount(t.length-e),yield*this.pushNewline(),"stream"}return yield"",yield*this.parseLineStart()}*parseLineStart(){const t=this.charAt(0);if(!t&&!this.atEnd)return this.setNext("line-start");if("-"===t||"."===t){if(!this.atEnd&&!this.hasChars(4))return this.setNext("line-start");const t=this.peek(3);if("---"===t&&ao(this.charAt(3)))return yield*this.pushCount(3),this.indentValue=0,this.indentNext=0,"doc";if("..."===t&&ao(this.charAt(3)))return yield*this.pushCount(3),"stream"}return this.indentValue=yield*this.pushSpaces(!1),this.indentNext>this.indentValue&&!ao(this.charAt(1))&&(this.indentNext=this.indentValue),yield*this.parseBlockStart()}*parseBlockStart(){const[t,e]=this.peek(2);if(!e&&!this.atEnd)return this.setNext("block-start");if(("-"===t||"?"===t||":"===t)&&ao(e)){const t=(yield*this.pushCount(1))+(yield*this.pushSpaces(!0));return this.indentNext=this.indentValue+1,this.indentValue+=t,yield*this.parseBlockStart()}return"doc"}*parseDocument(){yield*this.pushSpaces(!0);const t=this.getLine();if(null===t)return this.setNext("doc");let e=yield*this.pushIndicators();switch(t[e]){case"#":yield*this.pushCount(t.length-e);case void 0:return yield*this.pushNewline(),yield*this.parseLineStart();case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel=1,"flow";case"}":case"]":return yield*this.pushCount(1),"doc";case"*":return yield*this.pushUntil(ho),"doc";case'"':case"'":return yield*this.parseQuotedScalar();case"|":case">":return e+=(yield*this.parseBlockScalarHeader()),e+=(yield*this.pushSpaces(!0)),yield*this.pushCount(t.length-e),yield*this.pushNewline(),yield*this.parseBlockScalar();default:return yield*this.parsePlainScalar()}}*parseFlowCollection(){let t,e,n=-1;do{t=yield*this.pushNewline(),t>0?(e=yield*this.pushSpaces(!1),this.indentValue=n=e):e=0,e+=(yield*this.pushSpaces(!0))}while(t+e>0);const s=this.getLine();if(null===s)return this.setNext("flow");if(-1!==n&&n<this.indentNext&&"#"!==s[0]||0===n&&(s.startsWith("---")||s.startsWith("..."))&&ao(s[3])){if(!(n===this.indentNext-1&&1===this.flowLevel&&("]"===s[0]||"}"===s[0])))return this.flowLevel=0,yield"",yield*this.parseLineStart()}let r=0;for(;","===s[r];)r+=(yield*this.pushCount(1)),r+=(yield*this.pushSpaces(!0)),this.flowKey=!1;switch(r+=(yield*this.pushIndicators()),s[r]){case void 0:return"flow";case"#":return yield*this.pushCount(s.length-r),"flow";case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel+=1,"flow";case"}":case"]":return yield*this.pushCount(1),this.flowKey=!0,this.flowLevel-=1,this.flowLevel?"flow":"doc";case"*":return yield*this.pushUntil(ho),"flow";case'"':case"'":return this.flowKey=!0,yield*this.parseQuotedScalar();case":":{const t=this.charAt(1);if(this.flowKey||ao(t)||","===t)return this.flowKey=!1,yield*this.pushCount(1),yield*this.pushSpaces(!0),"flow"}default:return this.flowKey=!1,yield*this.parsePlainScalar()}}*parseQuotedScalar(){const t=this.charAt(0);let e=this.buffer.indexOf(t,this.pos+1);if("'"===t)for(;-1!==e&&"'"===this.buffer[e+1];)e=this.buffer.indexOf("'",e+2);else for(;-1!==e;){let t=0;for(;"\\"===this.buffer[e-1-t];)t+=1;if(t%2==0)break;e=this.buffer.indexOf('"',e+1)}const n=this.buffer.substring(0,e);let s=n.indexOf("\n",this.pos);if(-1!==s){for(;-1!==s;){const t=this.continueScalar(s+1);if(-1===t)break;s=n.indexOf("\n",t)}-1!==s&&(e=s-("\r"===n[s-1]?2:1))}if(-1===e){if(!this.atEnd)return this.setNext("quoted-scalar");e=this.buffer.length}return yield*this.pushToIndex(e+1,!1),this.flowLevel?"flow":"doc"}*parseBlockScalarHeader(){this.blockScalarIndent=-1,this.blockScalarKeep=!1;let t=this.pos;for(;;){const e=this.buffer[++t];if("+"===e)this.blockScalarKeep=!0;else if(e>"0"&&e<="9")this.blockScalarIndent=Number(e)-1;else if("-"!==e)break}return yield*this.pushUntil((t=>ao(t)||"#"===t))}*parseBlockScalar(){let t,e=this.pos-1,n=0;t:for(let s=this.pos;t=this.buffer[s];++s)switch(t){case" ":n+=1;break;case"\n":e=s,n=0;break;case"\r":{const t=this.buffer[s+1];if(!t&&!this.atEnd)return this.setNext("block-scalar");if("\n"===t)break}default:break t}if(!t&&!this.atEnd)return this.setNext("block-scalar");if(n>=this.indentNext){-1===this.blockScalarIndent?this.indentNext=n:this.indentNext+=this.blockScalarIndent;do{const t=this.continueScalar(e+1);if(-1===t)break;e=this.buffer.indexOf("\n",t)}while(-1!==e);if(-1===e){if(!this.atEnd)return this.setNext("block-scalar");e=this.buffer.length}}if(!this.blockScalarKeep)for(;;){let t=e-1,s=this.buffer[t];"\r"===s&&(s=this.buffer[--t]);const r=t;for(;" "===s||"\t"===s;)s=this.buffer[--t];if(!("\n"===s&&t>=this.pos&&t+1+n>r))break;e=t}return yield"",yield*this.pushToIndex(e+1,!0),yield*this.parseLineStart()}*parsePlainScalar(){const t=this.flowLevel>0;let e,n=this.pos-1,s=this.pos-1;for(;e=this.buffer[++s];)if(":"===e){const e=this.buffer[s+1];if(ao(e)||t&&","===e)break;n=s}else if(ao(e)){let r=this.buffer[s+1];if("\r"===e&&("\n"===r?(s+=1,e="\n",r=this.buffer[s+1]):n=s),"#"===r||t&&fo.includes(r))break;if("\n"===e){const t=this.continueScalar(s+1);if(-1===t)break;s=Math.max(s,t-2)}}else{if(t&&fo.includes(e))break;n=s}return e||this.atEnd?(yield"",yield*this.pushToIndex(n+1,!0),t?"flow":"doc"):this.setNext("plain-scalar")}*pushCount(t){return t>0?(yield this.buffer.substr(this.pos,t),this.pos+=t,t):0}*pushToIndex(t,e){const n=this.buffer.slice(this.pos,t);return n?(yield n,this.pos+=n.length,n.length):(e&&(yield""),0)}*pushIndicators(){switch(this.charAt(0)){case"!":return(yield*this.pushTag())+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"&":return(yield*this.pushUntil(ho))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"-":case"?":case":":{const t=this.flowLevel>0,e=this.charAt(1);if(ao(e)||t&&fo.includes(e))return t?this.flowKey&&(this.flowKey=!1):this.indentNext=this.indentValue+1,(yield*this.pushCount(1))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators())}}return 0}*pushTag(){if("<"===this.charAt(1)){let t=this.pos+2,e=this.buffer[t];for(;!ao(e)&&">"!==e;)e=this.buffer[++t];return yield*this.pushToIndex(">"===e?t+1:t,!1)}{let t=this.pos+1,e=this.buffer[t];for(;e;)if(uo.includes(e))e=this.buffer[++t];else{if("%"!==e||!lo.includes(this.buffer[t+1])||!lo.includes(this.buffer[t+2]))break;e=this.buffer[t+=3]}return yield*this.pushToIndex(t,!1)}}*pushNewline(){const t=this.buffer[this.pos];return"\n"===t?yield*this.pushCount(1):"\r"===t&&"\n"===this.charAt(1)?yield*this.pushCount(2):0}*pushSpaces(t){let e,n=this.pos-1;do{e=this.buffer[++n]}while(" "===e||t&&"\t"===e);const s=n-this.pos;return s>0&&(yield this.buffer.substr(this.pos,s),this.pos=n),s}*pushUntil(t){let e=this.pos,n=this.buffer[e];for(;!t(n);)n=this.buffer[++e];return yield*this.pushToIndex(e,!1)}}class go{constructor(){this.lineStarts=[],this.addNewLine=t=>this.lineStarts.push(t),this.linePos=t=>{let e=0,n=this.lineStarts.length;for(;e<n;){const s=e+n>>1;this.lineStarts[s]<t?e=s+1:n=s}if(this.lineStarts[e]===t)return{line:e+1,col:1};if(0===e)return{line:0,col:t};return{line:e,col:t-this.lineStarts[e-1]+1}}}}function $o(t,e){for(let n=0;n<t.length;++n)if(t[n].type===e)return!0;return!1}function yo(t){for(let e=0;e<t.length;++e)switch(t[e].type){case"space":case"comment":case"newline":break;default:return e}return-1}function wo(t){switch(t?.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"flow-collection":return!0;default:return!1}}function bo(t){switch(t.type){case"document":return t.start;case"block-map":{const e=t.items[t.items.length-1];return e.sep??e.start}case"block-seq":return t.items[t.items.length-1].start;default:return[]}}function vo(t){if(0===t.length)return[];let e=t.length;t:for(;--e>=0;)switch(t[e].type){case"doc-start":case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":case"newline":break t}for(;"space"===t[++e]?.type;);return t.splice(e,t.length)}function xo(t){if("flow-seq-start"===t.start.type)for(const e of t.items)!e.sep||e.value||$o(e.start,"explicit-key-ind")||$o(e.sep,"map-value-ind")||(e.key&&(e.value=e.key),delete e.key,wo(e.value)?e.value.end?Array.prototype.push.apply(e.value.end,e.sep):e.value.end=e.sep:Array.prototype.push.apply(e.start,e.sep),delete e.sep)}class ko{constructor(t){this.atNewLine=!0,this.atScalar=!1,this.indent=0,this.offset=0,this.onKeyLine=!1,this.stack=[],this.source="",this.type="",this.lexer=new mo,this.onNewLine=t}*parse(t,e=!1){this.onNewLine&&0===this.offset&&this.onNewLine(0);for(const n of this.lexer.lex(t,e))yield*this.next(n);e||(yield*this.end())}*next(t){if(this.source=t,this.atScalar)return this.atScalar=!1,yield*this.step(),void(this.offset+=t.length);const e=function(t){switch(t){case"\ufeff":return"byte-order-mark";case"":return"doc-mode";case"":return"flow-error-end";case"":return"scalar";case"---":return"doc-start";case"...":return"doc-end";case"":case"\n":case"\r\n":return"newline";case"-":return"seq-item-ind";case"?":return"explicit-key-ind";case":":return"map-value-ind";case"{":return"flow-map-start";case"}":return"flow-map-end";case"[":return"flow-seq-start";case"]":return"flow-seq-end";case",":return"comma"}switch(t[0]){case" ":case"\t":return"space";case"#":return"comment";case"%":return"directive-line";case"*":return"alias";case"&":return"anchor";case"!":return"tag";case"'":return"single-quoted-scalar";case'"':return"double-quoted-scalar";case"|":case">":return"block-scalar-header"}return null}(t);if(e)if("scalar"===e)this.atNewLine=!1,this.atScalar=!0,this.type="scalar";else{switch(this.type=e,yield*this.step(),e){case"newline":this.atNewLine=!0,this.indent=0,this.onNewLine&&this.onNewLine(this.offset+t.length);break;case"space":this.atNewLine&&" "===t[0]&&(this.indent+=t.length);break;case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":this.atNewLine&&(this.indent+=t.length);break;case"doc-mode":case"flow-error-end":return;default:this.atNewLine=!1}this.offset+=t.length}else{const e=`Not a YAML token: ${t}`;yield*this.pop({type:"error",offset:this.offset,message:e,source:t}),this.offset+=t.length}}*end(){for(;this.stack.length>0;)yield*this.pop()}get sourceToken(){return{type:this.type,offset:this.offset,indent:this.indent,source:this.source}}*step(){const t=this.peek(1);if("doc-end"!==this.type||t&&"doc-end"===t.type){if(!t)return yield*this.stream();switch(t.type){case"document":return yield*this.document(t);case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return yield*this.scalar(t);case"block-scalar":return yield*this.blockScalar(t);case"block-map":return yield*this.blockMap(t);case"block-seq":return yield*this.blockSequence(t);case"flow-collection":return yield*this.flowCollection(t);case"doc-end":return yield*this.documentEnd(t)}yield*this.pop()}else{for(;this.stack.length>0;)yield*this.pop();this.stack.push({type:"doc-end",offset:this.offset,source:this.source})}}peek(t){return this.stack[this.stack.length-t]}*pop(t){const e=t??this.stack.pop();if(e)if(0===this.stack.length)yield e;else{const t=this.peek(1);switch("block-scalar"===e.type?e.indent="indent"in t?t.indent:0:"flow-collection"===e.type&&"document"===t.type&&(e.indent=0),"flow-collection"===e.type&&xo(e),t.type){case"document":t.value=e;break;case"block-scalar":t.props.push(e);break;case"block-map":{const n=t.items[t.items.length-1];if(n.value)return t.items.push({start:[],key:e,sep:[]}),void(this.onKeyLine=!0);if(!n.sep)return Object.assign(n,{key:e,sep:[]}),void(this.onKeyLine=!$o(n.start,"explicit-key-ind"));n.value=e;break}case"block-seq":{const n=t.items[t.items.length-1];n.value?t.items.push({start:[],value:e}):n.value=e;break}case"flow-collection":{const n=t.items[t.items.length-1];return void(!n||n.value?t.items.push({start:[],key:e,sep:[]}):n.sep?n.value=e:Object.assign(n,{key:e,sep:[]}))}default:yield*this.pop(),yield*this.pop(e)}if(!("document"!==t.type&&"block-map"!==t.type&&"block-seq"!==t.type||"block-map"!==e.type&&"block-seq"!==e.type)){const n=e.items[e.items.length-1];n&&!n.sep&&!n.value&&n.start.length>0&&-1===yo(n.start)&&(0===e.indent||n.start.every((t=>"comment"!==t.type||t.indent<e.indent)))&&("document"===t.type?t.end=n.start:t.items.push({start:n.start}),e.items.splice(-1,1))}}else{const t="Tried to pop an empty stack";yield{type:"error",offset:this.offset,source:"",message:t}}}*stream(){switch(this.type){case"directive-line":return void(yield{type:"directive",offset:this.offset,source:this.source});case"byte-order-mark":case"space":case"comment":case"newline":return void(yield this.sourceToken);case"doc-mode":case"doc-start":{const t={type:"document",offset:this.offset,start:[]};return"doc-start"===this.type&&t.start.push(this.sourceToken),void this.stack.push(t)}}yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML stream`,source:this.source}}*document(t){if(t.value)return yield*this.lineEnd(t);switch(this.type){case"doc-start":return void(-1!==yo(t.start)?(yield*this.pop(),yield*this.step()):t.start.push(this.sourceToken));case"anchor":case"tag":case"space":case"comment":case"newline":return void t.start.push(this.sourceToken)}const e=this.startBlockValue(t);e?this.stack.push(e):yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML document`,source:this.source}}*scalar(t){if("map-value-ind"===this.type){const e=vo(bo(this.peek(2)));let n;t.end?(n=t.end,n.push(this.sourceToken),delete t.end):n=[this.sourceToken];const s={type:"block-map",offset:t.offset,indent:t.indent,items:[{start:e,key:t,sep:n}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=s}else yield*this.lineEnd(t)}*blockScalar(t){switch(this.type){case"space":case"comment":case"newline":return void t.props.push(this.sourceToken);case"scalar":if(t.source=this.source,this.atNewLine=!0,this.indent=0,this.onNewLine){let t=this.source.indexOf("\n")+1;for(;0!==t;)this.onNewLine(this.offset+t),t=this.source.indexOf("\n",t)+1}yield*this.pop();break;default:yield*this.pop(),yield*this.step()}}*blockMap(t){const e=t.items[t.items.length-1];switch(this.type){case"newline":if(this.onKeyLine=!1,e.value){const n="end"in e.value?e.value.end:void 0;"comment"===(Array.isArray(n)?n[n.length-1]:void 0)?.type?n?.push(this.sourceToken):t.items.push({start:[this.sourceToken]})}else e.sep?e.sep.push(this.sourceToken):e.start.push(this.sourceToken);return;case"space":case"comment":if(e.value)t.items.push({start:[this.sourceToken]});else if(e.sep)e.sep.push(this.sourceToken);else{if(this.atIndentedComment(e.start,t.indent)){const n=t.items[t.items.length-2]?.value?.end;if(Array.isArray(n))return Array.prototype.push.apply(n,e.start),n.push(this.sourceToken),void t.items.pop()}e.start.push(this.sourceToken)}return}if(this.indent>=t.indent){const n=!this.onKeyLine&&this.indent===t.indent&&e.sep;let s=[];if(n&&e.sep&&!e.value){const n=[];for(let s=0;s<e.sep.length;++s){const r=e.sep[s];switch(r.type){case"newline":n.push(s);break;case"space":break;case"comment":r.indent>t.indent&&(n.length=0);break;default:n.length=0}}n.length>=2&&(s=e.sep.splice(n[1]))}switch(this.type){case"anchor":case"tag":return void(n||e.value?(s.push(this.sourceToken),t.items.push({start:s}),this.onKeyLine=!0):e.sep?e.sep.push(this.sourceToken):e.start.push(this.sourceToken));case"explicit-key-ind":return e.sep||$o(e.start,"explicit-key-ind")?n||e.value?(s.push(this.sourceToken),t.items.push({start:s})):this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]}):e.start.push(this.sourceToken),void(this.onKeyLine=!0);case"map-value-ind":if($o(e.start,"explicit-key-ind"))if(e.sep)if(e.value)t.items.push({start:[],key:null,sep:[this.sourceToken]});else if($o(e.sep,"map-value-ind"))this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:s,key:null,sep:[this.sourceToken]}]});else if(wo(e.key)&&!$o(e.sep,"newline")){const t=vo(e.start),n=e.key,s=e.sep;s.push(this.sourceToken),delete e.key,delete e.sep,this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:t,key:n,sep:s}]})}else s.length>0?e.sep=e.sep.concat(s,this.sourceToken):e.sep.push(this.sourceToken);else if($o(e.start,"newline"))Object.assign(e,{key:null,sep:[this.sourceToken]});else{const t=vo(e.start);this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:t,key:null,sep:[this.sourceToken]}]})}else e.sep?e.value||n?t.items.push({start:s,key:null,sep:[this.sourceToken]}):$o(e.sep,"map-value-ind")?this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[],key:null,sep:[this.sourceToken]}]}):e.sep.push(this.sourceToken):Object.assign(e,{key:null,sep:[this.sourceToken]});return void(this.onKeyLine=!0);case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const r=this.flowScalar(this.type);return void(n||e.value?(t.items.push({start:s,key:r,sep:[]}),this.onKeyLine=!0):e.sep?this.stack.push(r):(Object.assign(e,{key:r,sep:[]}),this.onKeyLine=!0))}default:{const r=this.startBlockValue(t);if(r)return n&&"block-seq"!==r.type&&$o(e.start,"explicit-key-ind")&&t.items.push({start:s}),void this.stack.push(r)}}}yield*this.pop(),yield*this.step()}*blockSequence(t){const e=t.items[t.items.length-1];switch(this.type){case"newline":if(e.value){const n="end"in e.value?e.value.end:void 0;"comment"===(Array.isArray(n)?n[n.length-1]:void 0)?.type?n?.push(this.sourceToken):t.items.push({start:[this.sourceToken]})}else e.start.push(this.sourceToken);return;case"space":case"comment":if(e.value)t.items.push({start:[this.sourceToken]});else{if(this.atIndentedComment(e.start,t.indent)){const n=t.items[t.items.length-2]?.value?.end;if(Array.isArray(n))return Array.prototype.push.apply(n,e.start),n.push(this.sourceToken),void t.items.pop()}e.start.push(this.sourceToken)}return;case"anchor":case"tag":if(e.value||this.indent<=t.indent)break;return void e.start.push(this.sourceToken);case"seq-item-ind":if(this.indent!==t.indent)break;return void(e.value||$o(e.start,"seq-item-ind")?t.items.push({start:[this.sourceToken]}):e.start.push(this.sourceToken))}if(this.indent>t.indent){const e=this.startBlockValue(t);if(e)return void this.stack.push(e)}yield*this.pop(),yield*this.step()}*flowCollection(t){const e=t.items[t.items.length-1];if("flow-error-end"===this.type){let t;do{yield*this.pop(),t=this.peek(1)}while(t&&"flow-collection"===t.type)}else if(0===t.end.length){switch(this.type){case"comma":case"explicit-key-ind":return void(!e||e.sep?t.items.push({start:[this.sourceToken]}):e.start.push(this.sourceToken));case"map-value-ind":return void(!e||e.value?t.items.push({start:[],key:null,sep:[this.sourceToken]}):e.sep?e.sep.push(this.sourceToken):Object.assign(e,{key:null,sep:[this.sourceToken]}));case"space":case"comment":case"newline":case"anchor":case"tag":return void(!e||e.value?t.items.push({start:[this.sourceToken]}):e.sep?e.sep.push(this.sourceToken):e.start.push(this.sourceToken));case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const n=this.flowScalar(this.type);return void(!e||e.value?t.items.push({start:[],key:n,sep:[]}):e.sep?this.stack.push(n):Object.assign(e,{key:n,sep:[]}))}case"flow-map-end":case"flow-seq-end":return void t.end.push(this.sourceToken)}const n=this.startBlockValue(t);n?this.stack.push(n):(yield*this.pop(),yield*this.step())}else{const e=this.peek(2);if("block-map"===e.type&&("map-value-ind"===this.type&&e.indent===t.indent||"newline"===this.type&&!e.items[e.items.length-1].sep))yield*this.pop(),yield*this.step();else if("map-value-ind"===this.type&&"flow-collection"!==e.type){const n=vo(bo(e));xo(t);const s=t.end.splice(1,t.end.length);s.push(this.sourceToken);const r={type:"block-map",offset:t.offset,indent:t.indent,items:[{start:n,key:t,sep:s}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=r}else yield*this.lineEnd(t)}}flowScalar(t){if(this.onNewLine){let t=this.source.indexOf("\n")+1;for(;0!==t;)this.onNewLine(this.offset+t),t=this.source.indexOf("\n",t)+1}return{type:t,offset:this.offset,indent:this.indent,source:this.source}}startBlockValue(t){switch(this.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return this.flowScalar(this.type);case"block-scalar-header":return{type:"block-scalar",offset:this.offset,indent:this.indent,props:[this.sourceToken],source:""};case"flow-map-start":case"flow-seq-start":return{type:"flow-collection",offset:this.offset,indent:this.indent,start:this.sourceToken,items:[],end:[]};case"seq-item-ind":return{type:"block-seq",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]};case"explicit-key-ind":{this.onKeyLine=!0;const e=vo(bo(t));return e.push(this.sourceToken),{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:e}]}}case"map-value-ind":{this.onKeyLine=!0;const e=vo(bo(t));return{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:e,key:null,sep:[this.sourceToken]}]}}}return null}atIndentedComment(t,e){return"comment"===this.type&&(!(this.indent<=e)&&t.every((t=>"newline"===t.type||"space"===t.type)))}*documentEnd(t){"doc-mode"!==this.type&&(t.end?t.end.push(this.sourceToken):t.end=[this.sourceToken],"newline"===this.type&&(yield*this.pop()))}*lineEnd(t){switch(this.type){case"comma":case"doc-start":case"doc-end":case"flow-seq-end":case"flow-map-end":case"map-value-ind":yield*this.pop(),yield*this.step();break;case"newline":this.onKeyLine=!1;default:t.end?t.end.push(this.sourceToken):t.end=[this.sourceToken],"newline"===this.type&&(yield*this.pop())}}}function _o(t,e={}){const{lineCounter:n,prettyErrors:s}=function(t){const e=!1!==t.prettyErrors;return{lineCounter:t.lineCounter||e&&new go||null,prettyErrors:e}}(e),r=new ko(n?.addNewLine),o=new co(e);let i=null;for(const e of o.compose(r.parse(t),!0,t.length))if(i){if("silent"!==i.options.logLevel){i.errors.push(new Dr(e.range.slice(0,2),"MULTIPLE_DOCS","Source contains multiple documents; please use YAML.parseAllDocuments()"));break}}else i=e;return s&&n&&(i.errors.forEach(Qr(t,n)),i.warnings.forEach(Qr(t,n))),i}var So=Dt({displayName:"",steps:{pc_to_ram:{tts:"",text:""},ram_to_ir:{tts:"",text:""},ir_to_cu:{tts:"",text:""},cu_to_mux:{tts:"",text:""},cu_to_alu:{tts:"",text:""},acc_to_alu1:{tts:"",text:""},pc_increment:{tts:"",text:""},ir_to_alu2:{tts:"",text:""},ir_to_ram:{tts:"",text:""},memory_read:{tts:"",text:""},memory_fetch:{tts:"",text:""},memory_write:{tts:"",text:""},ram_to_alu2:{tts:"",text:""},ir_to_pc:{tts:"",text:""},execute:{tts:"",text:""},alu_to_sw:{tts:"",text:""},acc_to_ram:{tts:"",text:""},acc_stored_to_ram:{tts:"",text:""}},menu:{buttons:{settings:{title:""},save:{title:""},open:{title:""},help:{title:""}}},controls:{labels:{execution:"",step:"",instruction:"",speed:""},buttons:{reset:{title:""},play:{title:""},pause:{title:""},end:{title:""},play_step:{title:""},skip_step:{title:""},play_instruction:{title:""},skip_instruction:{title:""}},sliders:{speed:{title:""}},checkboxes:{binary:{text:""},animations:{text:""}}},message_feed:{buttons:{export_logs:{text:""},close_message:{title:""}}},settings:{title:"",language:{title:"",description:""},dispaly_labels:{title:"",description:""},display_step_text:{title:"",description:""},tts_enabled:{title:"",description:""},tts_speed:{title:"",description:""},tts_voice:{title:"",description:""}},errors:{program_parsing:{invalid_syntax:"",parsing_error:"",duplicate_label:""},instruction_parsing:{invalid_binary_input:"",invalid_symbolic_input:"",invalid_opcode:"",operand_not_allowed:"",operand_required:"",unknown_label:"",immediate_operand_not_allowed:"",invalid_immediate_operand:"",invalid_direct_operand:"",invalid_data:""},symbol_table:{label_already_exists:""},user_input:{invalid_file_name:""}}});function Ao(t){fetch("resources/i18n/".concat(t,".yaml")).then((function(t){return t.text()})).then((function(t){return function(t,e,n){let s;"function"==typeof e?s=e:void 0===n&&e&&"object"==typeof e&&(n=e);const r=_o(t,n);if(!r)return null;if(r.warnings.forEach((t=>ys(r.options.logLevel,t))),r.errors.length>0){if("silent"!==r.options.logLevel)throw r.errors[0];r.errors=[]}return r.toJS(Object.assign({reviver:s},n))}(t)})).then((function(t){return So.set(t)}))}Ao(l(Pe)),Pe.subscribe(Ao);var Eo=/^[01]{0,8}\s?[01]{1,8}?$/,No=/^-?[0-9]{1,5}$/,Io=/#-?[0-9]{1,3}/,To=/[A-Z_]{1,10}/,Co=/#[A-Z_]{1,10}/,Oo=new RegExp("^"+/[A-Z]{2,3}/.source+"( (("+Io.source+")|("+Co.source+")|("+/[0-9]{1,3}/.source+")|("+To.source+")))?$");function Lo(t,e){if(void 0===e&&(e=[]),Oo.test(t))return function(t,e){var n=t.split(" "),s=n[0],r=n[1],o=!!r,i=tn(s);if(!i)throw new on(l(So).errors.instruction_parsing.invalid_opcode,t);if(o){if(!i.takesOperand)throw new on(l(So).errors.instruction_parsing.operand_not_allowed,t);return Co.test(r)?function(t,e,n){var s=t.split(" "),r=s[0],o=s[1],i=o.slice(1);if(!n.includes(i))throw new on(l(So).errors.instruction_parsing.unknown_label,t);var c=nn(new yn(8,e.numeric),!0).signed(),a=n.indexOf(i);if(!e.takesImmediate)throw new on(l(So).errors.instruction_parsing.immediate_operand_not_allowed,t);if(!un(a,8))throw new on(l(So).errors.instruction_parsing.invalid_immediate_operand,t);return new wn(r,o,yn.fromBytesValues([c,a]))}(t,i,e):To.test(r)?function(t,e,n){var s=t.split(" "),r=s[0],o=s[1];if(!n.includes(o))throw new on(l(So).errors.instruction_parsing.unknown_label,t);var i=n.indexOf(o);return new wn(r,o,yn.fromBytesValues([e.numeric,i]))}(t,i,e):Io.test(r)?function(t,e){var n=t.split(" "),s=n[0],r=n[1],o=nn(new yn(8,e.numeric),!0).signed(),i=parseInt(r.slice(1));if(!e.takesImmediate)throw new on(l(So).errors.instruction_parsing.immediate_operand_not_allowed,t);if(!un(i,8))throw new on(l(So).errors.instruction_parsing.invalid_immediate_operand,t);return new wn(s,r,yn.fromBytesValues([o,i]))}(t,i):function(t,e){var n=t.split(" "),s=n[0],r=n[1],o=parseInt(r);if(!gn(o))throw new on(l(So).errors.instruction_parsing.invalid_direct_operand,t);return new wn(s,r,yn.fromBytesValues([e.numeric,o]))}(t,i)}if(i.takesOperand)throw new on(l(So).errors.instruction_parsing.operand_required,t);return new wn(s,"",yn.fromBytesValues([i.numeric,0]))}(t,e);if(No.test(t))return function(t){var e=parseInt(t);if(!un(e,16))throw new on(l(So).errors.instruction_parsing.invalid_data,t);var n=new yn(16,e),s=n.getByte(1),r=tn(sn(s)),o=en(s),i=!r||o&&!r.takesImmediate||o&&!r.takesOperand;return new wn(t,"",n,i)}(t);throw new on(l(So).errors.instruction_parsing.invalid_symbolic_input,t)}function Ro(t){if(Eo.test(t))return function(t){if(t.includes(" ")){var e=t.split(" ");t=e[0]+pn(e[1],8)}var n=new yn(16,t),s=n.getByte(1),r=n.getByte(2),o=en(s),i=tn(sn(s)),c=!1;i&&(i.takesOperand||0===r.unsigned())?o&&!i.takesImmediate?c=!0:o||gn(r.unsigned())||(c=!0):c=!0;var a=c?n.signed().toString():i.symbolic,l=o?"#"+r.signed():r.unsigned().toString();c&&(l="");return new wn(a,l,n,c)}(t);throw new on(l(So).errors.instruction_parsing.invalid_binary_input,t)}var Uo=Dt(Lo("NOP")),Do=Dt(new yn(8,0)),Po=Dt(new yn(8,2)),Qo=Dt(new yn(16,0)),Mo=Dt(new yn(16,0)),Bo=Dt(""),Fo=Dt(new yn(16,0)),jo=Dt(new yn(16,0)),Ko=Dt(!0),Wo=Dt(!1),qo=Dt(!1),Ho=Dt(!1);var Vo={instructionRegister:Uo,programCounter:Do,increment:Po,alu1:Qo,alu2:Mo,aluOperation:Bo,aluResult:Fo,accumulator:jo,zeroFlag:Ko,negativeFlag:Wo,isJumping:qo,isHalting:Ho,reset:function(){Uo.set(Lo("NOP")),Do.set(new yn(8,0)),Po.set(new yn(8,2)),Qo.set(new yn(16,0)),Mo.set(new yn(16,0)),Bo.set(""),Fo.set(new yn(16,0)),jo.set(new yn(16,0)),Ko.set(!0),Wo.set(!1),qo.set(!1),Ho.set(!1)}};function Go(t,e,n){return(1-n)*t+n*e}function Xo(t,e,n,s){return te(this,void 0,void 0,(function(){return ee(this,(function(r){return[2,new Promise((function(r,o){var i,c=0,a=function(o){if(i||(i=o),c>=1)return r(),void t.style.setProperty(e,"rgb(".concat(s.r,", ").concat(s.g,", ").concat(s.b,")"));var u=Math.round(Go(n.r,s.r,c)),f=Math.round(Go(n.g,s.g,c)),d=Math.round(Go(n.b,s.b,c));t.style.setProperty(e,"rgb(".concat(u,", ").concat(f,", ").concat(d,")")),c=(o-i)/(300/l(De)),requestAnimationFrame(a)};requestAnimationFrame(a)}))]}))}))}function Jo(t,e,n,s){return te(this,void 0,void 0,(function(){return ee(this,(function(r){return[2,Xo(t,e,n,s).then((function(){return Xo(t,e,s,n)}))]}))}))}function zo(t){let e,n,s,r,o,i,c,a,l,u=(t[1]?t[0].binaryOpcode():t[0].opcode.symbolic)+"";return n=new Ye({props:{text:"IR",top:"-25px",left:"10px"}}),{c(){e=L("div"),It(n.$$.fragment),s=D(),r=L("div"),o=U(u),i=D(),c=L("div"),a=U(t[4]),M(r,"class","flex items-center justify-center w-full h-full rounded-l-md"),M(c,"class","flex items-center justify-center w-full h-full rounded-r-md"),M(e,"class","absolute top-[100px] left-[110px] w-[200px] h-[30px] border border-black rounded-md bg-gray-100 shadow-component grid items-center grid-cols-2 ")},m(u,f){T(u,e,f),Tt(n,e,null),E(e,s),E(e,r),E(r,o),t[7](r),E(e,i),E(e,c),E(c,a),t[8](c),l=!0},p(t,[e]){(!l||3&e)&&u!==(u=(t[1]?t[0].binaryOpcode():t[0].opcode.symbolic)+"")&&F(o,u),(!l||16&e)&&F(a,t[4])},i(t){l||(xt(n.$$.fragment,t),l=!0)},o(t){kt(n.$$.fragment,t),l=!1},d(s){s&&C(e),Ct(n),t[7](null),t[8](null)}}}function Yo(t,e,n){let s,r;u(t,Uo,(t=>n(0,s=t))),u(t,Oe,(t=>n(1,r=t)));var o=this&&this.__awaiter||function(t,e,n,s){return new(n||(n=Promise))((function(r,o){function i(t){try{a(s.next(t))}catch(t){o(t)}}function c(t){try{a(s.throw(t))}catch(t){o(t)}}function a(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,c)}a((s=s.apply(t,e||[])).next())}))};let i,c,a;return t.$$.update=()=>{3&t.$$.dirty&&(r?n(4,a=s.binaryOperand()):s.opcode.takesOperand?s.immediateFlag()?n(4,a=`#${s.numericOperand()}`):n(4,a=`${s.numericOperand()}`):n(4,a=""))},[s,r,i,c,a,function(){return o(this,void 0,void 0,(function*(){return Jo(i,"background-color",{r:224,g:224,b:224},{r:0,g:255,b:0})}))},function(){return o(this,void 0,void 0,(function*(){return Jo(c,"background-color",{r:224,g:224,b:224},{r:0,g:255,b:0})}))},function(t){rt[t?"unshift":"push"]((()=>{i=t,n(2,i)}))},function(t){rt[t?"unshift":"push"]((()=>{c=t,n(3,c)}))}]}class Zo extends Rt{constructor(t){super(),Lt(this,t,Yo,zo,c,{flashOpcode:5,flashOperand:6})}get flashOpcode(){return this.$$.ctx[5]}get flashOperand(){return this.$$.ctx[6]}}function ti(e){let n,s,r;return s=new Ye({props:{text:"Control Unit / Decoder"}}),{c(){n=L("div"),It(s.$$.fragment),M(n,"class","absolute top-[230px] left-[100px] w-[120px] h-[60px] border border-black rounded-md bg-gray-100 shadow-component flex items-center justify-center text-center ")},m(t,o){T(t,n,o),Tt(s,n,null),e[2](n),r=!0},p:t,i(t){r||(xt(s.$$.fragment,t),r=!0)},o(t){kt(s.$$.fragment,t),r=!1},d(t){t&&C(n),Ct(s),e[2](null)}}}function ei(t,e,n){var s=this&&this.__awaiter||function(t,e,n,s){return new(n||(n=Promise))((function(r,o){function i(t){try{a(s.next(t))}catch(t){o(t)}}function c(t){try{a(s.throw(t))}catch(t){o(t)}}function a(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,c)}a((s=s.apply(t,e||[])).next())}))};let r;return[r,function(){return s(this,void 0,void 0,(function*(){return Jo(r,"background-color",{r:224,g:224,b:224},{r:0,g:255,b:0})}))},function(t){rt[t?"unshift":"push"]((()=>{r=t,n(0,r)}))}]}class ni extends Rt{constructor(t){super(),Lt(this,t,ei,ti,c,{flash:1})}get flash(){return this.$$.ctx[1]}}function si(t){let e,n,s,r,o,i=(t[1]?t[2].toBinaryString():t[2].signed())+"";return n=new Ye({props:{text:"ACC",top:"-25px",left:"0"}}),{c(){e=L("div"),It(n.$$.fragment),s=D(),r=U(i),M(e,"class","absolute top-[550px] left-[275px] w-[170px] h-[30px] border border-black rounded-md bg-gray-100 shadow-component flex items-center justify-center ")},m(i,c){T(i,e,c),Tt(n,e,null),E(e,s),E(e,r),t[4](e),o=!0},p(t,[e]){(!o||6&e)&&i!==(i=(t[1]?t[2].toBinaryString():t[2].signed())+"")&&F(r,i)},i(t){o||(xt(n.$$.fragment,t),o=!0)},o(t){kt(n.$$.fragment,t),o=!1},d(s){s&&C(e),Ct(n),t[4](null)}}}function ri(t,e,n){let s,r;u(t,Oe,(t=>n(1,s=t))),u(t,jo,(t=>n(2,r=t)));var o=this&&this.__awaiter||function(t,e,n,s){return new(n||(n=Promise))((function(r,o){function i(t){try{a(s.next(t))}catch(t){o(t)}}function c(t){try{a(s.throw(t))}catch(t){o(t)}}function a(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,c)}a((s=s.apply(t,e||[])).next())}))};let i;return[i,s,r,function(){return o(this,void 0,void 0,(function*(){return Jo(i,"background-color",{r:224,g:224,b:224},{r:0,g:255,b:0})}))},function(t){rt[t?"unshift":"push"]((()=>{i=t,n(0,i)}))}]}class oi extends Rt{constructor(t){super(),Lt(this,t,ri,si,c,{flash:3})}get flash(){return this.$$.ctx[3]}}function ii(t){let e,n,s,r,o,i,c,a,l,u,f,d,p,h,m,g,$,y=t[2]?"1":"0",w=t[3]?"1":"0";return n=new Ye({props:{text:"SW",top:"-25px",left:"0"}}),o=new Ye({props:{text:"Z",bottom:"-21px",left:"25%"}}),u=new Ye({props:{text:"N",bottom:"-21px",left:"25%"}}),{c(){e=L("div"),It(n.$$.fragment),s=D(),r=L("div"),It(o.$$.fragment),i=D(),c=U(y),a=D(),l=L("div"),It(u.$$.fragment),f=D(),d=U(w),p=D(),h=L("div"),h.textContent="------",m=D(),g=L("div"),M(r,"class","relative h-full flex items-center justify-center w-[19%] border border-r-black rounded-l-md"),M(l,"class","relative h-full flex items-center justify-center w-[19%]"),M(h,"class","relative h-full flex items-center justify-center w-[62%] border border-l-black rounded-r-md"),M(e,"class","absolute top-[550px] left-[540px] w-[120px] h-[30px] rounded-md bg-gray-100 shadow-component flex items-center justify-center "),M(g,"class","absolute top-[550px] left-[540px] w-[120px] h-[30px] rounded-md border border-black")},m(y,w){T(y,e,w),Tt(n,e,null),E(e,s),E(e,r),Tt(o,r,null),E(r,i),E(r,c),t[6](r),E(e,a),E(e,l),Tt(u,l,null),E(l,f),E(l,d),t[7](l),E(e,p),E(e,h),T(y,m,w),T(y,g,w),$=!0},p(t,[e]){(!$||4&e)&&y!==(y=t[2]?"1":"0")&&F(c,y),(!$||8&e)&&w!==(w=t[3]?"1":"0")&&F(d,w)},i(t){$||(xt(n.$$.fragment,t),xt(o.$$.fragment,t),xt(u.$$.fragment,t),$=!0)},o(t){kt(n.$$.fragment,t),kt(o.$$.fragment,t),kt(u.$$.fragment,t),$=!1},d(s){s&&C(e),Ct(n),Ct(o),t[6](null),Ct(u),t[7](null),s&&C(m),s&&C(g)}}}function ci(t,e,n){let s,r;u(t,Ko,(t=>n(2,s=t))),u(t,Wo,(t=>n(3,r=t)));var o=this&&this.__awaiter||function(t,e,n,s){return new(n||(n=Promise))((function(r,o){function i(t){try{a(s.next(t))}catch(t){o(t)}}function c(t){try{a(s.throw(t))}catch(t){o(t)}}function a(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,c)}a((s=s.apply(t,e||[])).next())}))};let i,c;return[i,c,s,r,function(){return o(this,void 0,void 0,(function*(){return Jo(i,"background-color",{r:224,g:224,b:224},{r:0,g:255,b:0})}))},function(){return o(this,void 0,void 0,(function*(){return Jo(c,"background-color",{r:224,g:224,b:224},{r:0,g:255,b:0})}))},function(t){rt[t?"unshift":"push"]((()=>{i=t,n(0,i)}))},function(t){rt[t?"unshift":"push"]((()=>{c=t,n(1,c)}))}]}class ai extends Rt{constructor(t){super(),Lt(this,t,ci,ii,c,{flashZeroFlag:4,flashNegativeFlag:5})}get flashZeroFlag(){return this.$$.ctx[4]}get flashNegativeFlag(){return this.$$.ctx[5]}}function li(t){let e,n,s,r,o,i,c,a,l,u=(t[2]?t[3].toBinaryString():t[3].unsigned())+"",f=(t[2]?t[4].toBinaryString():t[4].unsigned())+"";return n=new Ye({props:{text:"PC",top:"-25px",left:"0"}}),{c(){e=L("div"),It(n.$$.fragment),s=D(),r=U(u),o=D(),i=L("div"),c=U("+"),a=U(f),M(e,"class","absolute top-[70px] left-[570px] w-[100px] h-[30px] border border-black rounded-md bg-gray-100 shadow-component flex items-center justify-center "),M(i,"class","absolute top-[130px] left-[570px] w-[100px] h-[30px] border border-black rounded-md bg-gray-100 shadow-component flex items-center justify-center ")},m(u,f){T(u,e,f),Tt(n,e,null),E(e,s),E(e,r),t[7](e),T(u,o,f),T(u,i,f),E(i,c),E(i,a),t[8](i),l=!0},p(t,[e]){(!l||12&e)&&u!==(u=(t[2]?t[3].toBinaryString():t[3].unsigned())+"")&&F(r,u),(!l||20&e)&&f!==(f=(t[2]?t[4].toBinaryString():t[4].unsigned())+"")&&F(a,f)},i(t){l||(xt(n.$$.fragment,t),l=!0)},o(t){kt(n.$$.fragment,t),l=!1},d(s){s&&C(e),Ct(n),t[7](null),s&&C(o),s&&C(i),t[8](null)}}}function ui(t,e,n){let s,r,o;u(t,Oe,(t=>n(2,s=t))),u(t,Do,(t=>n(3,r=t))),u(t,Po,(t=>n(4,o=t)));var i=this&&this.__awaiter||function(t,e,n,s){return new(n||(n=Promise))((function(r,o){function i(t){try{a(s.next(t))}catch(t){o(t)}}function c(t){try{a(s.throw(t))}catch(t){o(t)}}function a(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,c)}a((s=s.apply(t,e||[])).next())}))};let c,a;return[c,a,s,r,o,function(){return i(this,void 0,void 0,(function*(){return Jo(c,"background-color",{r:224,g:224,b:224},{r:0,g:255,b:0})}))},function(){return i(this,void 0,void 0,(function*(){return Jo(a,"background-color",{r:224,g:224,b:224},{r:0,g:255,b:0})}))},function(t){rt[t?"unshift":"push"]((()=>{c=t,n(0,c)}))},function(t){rt[t?"unshift":"push"]((()=>{a=t,n(1,a)}))}]}class fi extends Rt{constructor(t){super(),Lt(this,t,ui,li,c,{flashPC:5,flashINC:6})}get flashPC(){return this.$$.ctx[5]}get flashINC(){return this.$$.ctx[6]}}function di(e){let n,s,r,o,i,c;return i=new Ye({props:{text:"MUX"}}),{c(){n=L("div"),s=R("svg"),r=R("path"),o=D(),It(i.$$.fragment),M(r,"d","M 0 0 L 100 0 L 80 40 L 20 40 Z"),M(s,"xmlns","http://www.w3.org/2000/svg"),M(s,"class","fill-gray-100 stroke-black drop-shadow-component h-full w-full"),M(s,"viewBox","-1 -1 102 42"),M(n,"class","absolute top-[240px] left-[400px] w-[100px] h-[40px] text-center flex items-center justify-center")},m(t,a){T(t,n,a),E(n,s),E(s,r),e[2](s),E(n,o),Tt(i,n,null),c=!0},p:t,i(t){c||(xt(i.$$.fragment,t),c=!0)},o(t){kt(i.$$.fragment,t),c=!1},d(t){t&&C(n),e[2](null),Ct(i)}}}function pi(t,e,n){var s=this&&this.__awaiter||function(t,e,n,s){return new(n||(n=Promise))((function(r,o){function i(t){try{a(s.next(t))}catch(t){o(t)}}function c(t){try{a(s.throw(t))}catch(t){o(t)}}function a(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,c)}a((s=s.apply(t,e||[])).next())}))};let r;return[r,function(){return s(this,void 0,void 0,(function*(){return Jo(r,"fill",{r:224,g:224,b:224},{r:0,g:255,b:0})}))},function(t){rt[t?"unshift":"push"]((()=>{r=t,n(0,r)}))}]}class hi extends Rt{constructor(t){super(),Lt(this,t,pi,di,c,{flash:1})}get flash(){return this.$$.ctx[1]}}function mi(t){let e,n,s,r,o,i,c,a,l,u,f,d,p,h,m,g,$,y=(t[3]?gi(t[4].toBinaryString()):t[4].signed())+"",w=(t[3]?gi(t[6].toBinaryString()):t[6].signed())+"";return o=new Ye({props:{text:"ALU",top:"-25px",left:"45%"}}),{c(){e=L("div"),n=R("svg"),s=R("path"),r=D(),It(o.$$.fragment),i=D(),c=L("div"),a=U(y),u=D(),f=L("div"),d=U(t[5]),p=D(),h=L("div"),m=U(w),M(s,"d","m 0 0 l 192 0 l 32 32 l 32 -32 l 192 0 l -96 160 l -256 0 z"),M(n,"xmlns","http://www.w3.org/2000/svg"),M(n,"class","stroke-black stroke-[1.6px] w-full h-full drop-shadow-component fill-gray-100"),M(n,"viewBox","-1 -1 450 162"),M(c,"class",l="absolute flex items-center justify-center top-[15%] left-[15%] w-[90px] "+(t[3]?"top-[15%] h-[50px]":"top-[20%] h-[30px]")+" text-center leading-tight rounded-lg"),M(f,"class","absolute flex items-center justify-center top-[50%] left-[50%] -translate-x-1/2 w-[30px] h-[30px] rounded-lg font-bold text-2xl leading-[30px] "),M(h,"class",g="absolute flex items-center justify-center top-[15%] right-[15%] w-[90px] "+(t[3]?"top-[15%] h-[50px]":"top-[20%] h-[30px]")+" text-center leading-tight rounded-lg"),M(e,"class","absolute top-[380px] left-[210px] w-[300px] h-fit")},m(l,g){T(l,e,g),E(e,n),E(n,s),E(e,r),Tt(o,e,null),E(e,i),E(e,c),E(c,a),t[10](c),E(e,u),E(e,f),E(f,d),t[11](f),E(e,p),E(e,h),E(h,m),t[12](h),$=!0},p(t,[e]){(!$||24&e)&&y!==(y=(t[3]?gi(t[4].toBinaryString()):t[4].signed())+"")&&F(a,y),(!$||8&e&&l!==(l="absolute flex items-center justify-center top-[15%] left-[15%] w-[90px] "+(t[3]?"top-[15%] h-[50px]":"top-[20%] h-[30px]")+" text-center leading-tight rounded-lg"))&&M(c,"class",l),(!$||32&e)&&F(d,t[5]),(!$||72&e)&&w!==(w=(t[3]?gi(t[6].toBinaryString()):t[6].signed())+"")&&F(m,w),(!$||8&e&&g!==(g="absolute flex items-center justify-center top-[15%] right-[15%] w-[90px] "+(t[3]?"top-[15%] h-[50px]":"top-[20%] h-[30px]")+" text-center leading-tight rounded-lg"))&&M(h,"class",g)},i(t){$||(xt(o.$$.fragment,t),$=!0)},o(t){kt(o.$$.fragment,t),$=!1},d(n){n&&C(e),Ct(o),t[10](null),t[11](null),t[12](null)}}}function gi(t){return[t.slice(0,8),t.slice(8)].join(" ")}function $i(t,e,n){let s,r,o,i;u(t,Oe,(t=>n(3,s=t))),u(t,Qo,(t=>n(4,r=t))),u(t,Bo,(t=>n(5,o=t))),u(t,Mo,(t=>n(6,i=t)));var c=this&&this.__awaiter||function(t,e,n,s){return new(n||(n=Promise))((function(r,o){function i(t){try{a(s.next(t))}catch(t){o(t)}}function c(t){try{a(s.throw(t))}catch(t){o(t)}}function a(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,c)}a((s=s.apply(t,e||[])).next())}))};let a,l,f;return[a,l,f,s,r,o,i,function(){return c(this,void 0,void 0,(function*(){return Jo(a,"background-color",{r:224,g:224,b:224},{r:0,g:255,b:0})}))},function(){return c(this,void 0,void 0,(function*(){return Jo(l,"background-color",{r:224,g:224,b:224},{r:0,g:255,b:0})}))},function(){return c(this,void 0,void 0,(function*(){return Jo(f,"background-color",{r:224,g:224,b:224},{r:0,g:255,b:0})}))},function(t){rt[t?"unshift":"push"]((()=>{a=t,n(0,a)}))},function(t){rt[t?"unshift":"push"]((()=>{f=t,n(2,f)}))},function(t){rt[t?"unshift":"push"]((()=>{l=t,n(1,l)}))}]}class yi extends Rt{constructor(t){super(),Lt(this,t,$i,mi,c,{flashFirstOperand:7,flashSecondOperand:8,flashOperator:9})}get flashFirstOperand(){return this.$$.ctx[7]}get flashSecondOperand(){return this.$$.ctx[8]}get flashOperator(){return this.$$.ctx[9]}}var wi=Dt([]),bi={subscribe:wi.subscribe,push:function(t){wi.update((function(e){return ne(ne([],e,!0),[t],!1)}))}},vi=Dt({showLogger:!1}),xi={subscribe:vi.subscribe,updateShowLogger:function(t){vi.update((function(e){return Zt(Zt({},e),{showLogger:t(e.showLogger)})}))}},ki=Date.now(),_i=["EXECUTION","USER_INPUT","DEBUG","UNCAUGHT"],Si=["UNCHECKED_ERROR","CHECKED_ERROR","INFO"];function Ai(){return Date.now()-ki}var Ei={error:function(t,e,n){void 0===n&&(n=!1),bi.push({logType:n?"CHECKED_ERROR":"UNCHECKED_ERROR",logGroup:e,timestamp:Ai(),message:n?t.message:t.stack})},info:function(t,e){bi.push({logType:"INFO",logGroup:e,timestamp:Ai(),message:t})}},Ni=function(){function t(){this._conditions=[],this._endsStep=!1,this._sideffects=[],this._conditions=[],this._waits_before=[],this._waits_after=[]}return t.prototype.condition=function(t){return this._conditions.push(t),this},t.prototype.endstep=function(){return this._endsStep=!0,this},t.prototype.sideffects=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this._sideffects).push.apply(t,e),this},t.prototype.waitFor=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this._waits_before).push.apply(t,e),this},t.prototype.thenWaitFor=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this._waits_after).push.apply(t,e),this},t.prototype.execute=function(){return te(this,void 0,void 0,(function(){return ee(this,(function(t){switch(t.label){case 0:return this._conditions.reduceRight((function(t,e){return t&&e()}),!0)?(Ei.info("Executing: ".concat(this.toString()),"EXECUTION"),[4,Promise.all(this._waits_before.map((function(t){return t()})))]):(Ei.info("Skipping: ".concat(this.toString()),"EXECUTION"),[2]);case 1:return t.sent(),[4,Promise.all(ne(ne([],this._sideffects.map((function(t){return t.execute()})),!0),[this.action()],!1))];case 2:return t.sent(),[2,Promise.all(this._waits_after.map((function(t){return t()})))]}}))}))},t.prototype.doesEndStep=function(){return this._endsStep},t.prototype.toString=function(){return"".concat(this.constructor.name)},t}();function Ii(){return l(Vo.zeroFlag)}function Ti(){return l(Vo.negativeFlag)}function Ci(){return l(Ue)}function Oi(){return l(Qe)}function Li(t){return function(){return!t()}}var Ri=function(t){function e(){var e=t.call(this)||this;return e.condition(Li(Ci)),e}return Yt(e,t),e}(Ni),Ui=function(t){function e(e){var n=t.call(this)||this;return n.component=e,n}return Yt(e,t),e.prototype.action=function(){return te(this,void 0,void 0,(function(){return ee(this,(function(t){return[2,l(Qt).flash(this.component)]}))}))},e.prototype.toString=function(){return"".concat(t.prototype.toString.call(this),", component: ").concat(this.component)},e}(Ri);function Di(t){let e,n,s,r,o,i,c,a,l,u,f,d,p,h,m,g,$,y,w;r=new Ye({props:{text:"CPU",fontSize:"LARGE",top:"-30px",left:"47%"}});i=new Zo({props:{}}),t[8](i);a=new ni({props:{}}),t[9](a);u=new fi({props:{}}),t[10](u);d=new hi({props:{}}),t[11](d);h=new yi({props:{}}),t[12](h);g=new ai({props:{}}),t[13](g);return y=new oi({props:{}}),t[14](y),{c(){e=L("div"),n=D(),s=L("div"),It(r.$$.fragment),o=D(),It(i.$$.fragment),c=D(),It(a.$$.fragment),l=D(),It(u.$$.fragment),f=D(),It(d.$$.fragment),p=D(),It(h.$$.fragment),m=D(),It(g.$$.fragment),$=D(),It(y.$$.fragment),M(e,"class","absolute left-[50px] top-[50px] w-[700px] h-[620px] z-[1] rounded-[30px] bg-gray-300 shadow-cpu"),M(s,"class","absolute left-[50px] top-[50px] w-[700px] h-[620px] z-[3] rounded-[30px] border border-black")},m(t,b){T(t,e,b),T(t,n,b),T(t,s,b),Tt(r,s,null),E(s,o),Tt(i,s,null),E(s,c),Tt(a,s,null),E(s,l),Tt(u,s,null),E(s,f),Tt(d,s,null),E(s,p),Tt(h,s,null),E(s,m),Tt(g,s,null),E(s,$),Tt(y,s,null),w=!0},p(t,[e]){i.$set({});a.$set({});u.$set({});d.$set({});h.$set({});g.$set({});y.$set({})},i(t){w||(xt(r.$$.fragment,t),xt(i.$$.fragment,t),xt(a.$$.fragment,t),xt(u.$$.fragment,t),xt(d.$$.fragment,t),xt(h.$$.fragment,t),xt(g.$$.fragment,t),xt(y.$$.fragment,t),w=!0)},o(t){kt(r.$$.fragment,t),kt(i.$$.fragment,t),kt(a.$$.fragment,t),kt(u.$$.fragment,t),kt(d.$$.fragment,t),kt(h.$$.fragment,t),kt(g.$$.fragment,t),kt(y.$$.fragment,t),w=!1},d(o){o&&C(e),o&&C(n),o&&C(s),Ct(r),t[8](null),Ct(i),t[9](null),Ct(a),t[10](null),Ct(u),t[11](null),Ct(d),t[12](null),Ct(h),t[13](null),Ct(g),t[14](null),Ct(y)}}}function Pi(t,e,n){var s=this&&this.__awaiter||function(t,e,n,s){return new(n||(n=Promise))((function(r,o){function i(t){try{a(s.next(t))}catch(t){o(t)}}function c(t){try{a(s.throw(t))}catch(t){o(t)}}function a(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,c)}a((s=s.apply(t,e||[])).next())}))};let r,o,i,c,a,l,u;return[r,o,i,c,a,l,u,function(t){return s(this,void 0,void 0,(function*(){switch(t){case"IR":return Promise.all([r.flashOpcode(),r.flashOperand()]);case"IR:OPC":return r.flashOpcode();case"IR:OPR":return r.flashOperand();case"PC":return i.flashPC();case"INC":return i.flashINC();case"MUX":return c.flash();case"CU":return o.flash();case"ALU:1":return a.flashFirstOperand();case"ALU:2":return a.flashSecondOperand();case"ALU:OPR":return a.flashOperator();case"ACC":return u.flash();case"SW:Z":return l.flashZeroFlag();case"SW:N":return l.flashNegativeFlag()}}))},function(t){rt[t?"unshift":"push"]((()=>{r=t,n(0,r)}))},function(t){rt[t?"unshift":"push"]((()=>{o=t,n(1,o)}))},function(t){rt[t?"unshift":"push"]((()=>{i=t,n(2,i)}))},function(t){rt[t?"unshift":"push"]((()=>{c=t,n(3,c)}))},function(t){rt[t?"unshift":"push"]((()=>{a=t,n(4,a)}))},function(t){rt[t?"unshift":"push"]((()=>{l=t,n(5,l)}))},function(t){rt[t?"unshift":"push"]((()=>{u=t,n(6,u)}))}]}class Qi extends Rt{constructor(t){super(),Lt(this,t,Pi,Di,c,{flash:7})}get flash(){return this.$$.ctx[7]}}var Mi=Dt([]),Bi=Mi.subscribe,Fi=Mi.set,ji=Mi.update,Ki=[];function Wi(t){ji(t),Ki=t(Ki)}function qi(t,e){if(!gn(t))throw new Error("Invalid address: "+t);var n=mn(t);Wi((function(t){return t.map((function(t,s){return n===s?e:t}))}))}function Hi(t){if(!gn(t))throw new Error("Invalid address: "+t);return Ki[mn(t)]}function Vi(){for(var t=mn(0);t<=mn(hn);t++)Ki[t]=Lo("NOP");var e;Fi(e=Ki),Ki=e}Vi();var Gi={subscribe:Bi,read:Hi,write:qi,clear:Vi,updateLabels:function(t,e){Wi((function(n){return n.map((function(n){return n.symbolicOperand===t?new wn(n.symbolicOpcode,e,n.value):n.symbolicOperand==="#"+t?new wn(n.symbolicOpcode,"#"+e,n.value):n}))}))},deleteLabel:function(t){Wi((function(e){return e.map((function(e){return e.symbolicOperand===t?new wn(e.symbolicOpcode,e.numericOperand().toString(),e.value):e.symbolicOperand==="#"+t?new wn(e.symbolicOpcode,"#"+e.numericOperand(),e.value):e}))}))},importInstructions:function(t){Vi();for(var e=0;e<=hn;e+=2)qi(e,t[e]||Lo("NOP"))},exportInstructions:function(){for(var t=[],e=0;e<=hn;e+=2)t[e]=Hi(e);return t},moveFirstHalfUpFromAddress:function(t){console.log("moveFirstHalfUpFromAddress "+t)},moveFirstHalfDownFromAddress:function(t){console.log("moveFirstHalfDownFromAddress "+t)},moveSecondHalfUpFromAddress:function(t){console.log("moveSecondHalfUpFromAddress "+t)},moveSecondHalfDownFromAddress:function(t){console.log("moveSecondHalfDownFromAddress "+t)}},Xi=Dt([]);function Ji(t){return l(Xi)[t]}function zi(t){if(""===t)return-1;var e=l(Xi).findIndex((function(e){return e===t}));return-1===e?-1:e}function Yi(t){return-1!==zi(t)}function Zi(){for(var t=[],e=0;e<=hn;e+=2)t[e]="";Xi.set(t)}Zi();var tc={subscribe:Xi.subscribe,getLabel:Ji,getAddress:zi,setLabel:function(t,e){var n=Ji(t);if(n!==e){if(Yi(e))throw new rn(l(So).errors.symbol_table.label_already_exists);Xi.update((function(n){return n[t]=e,n})),""!==n&&(""===e?Gi.deleteLabel(n):Gi.updateLabels(n,e))}},hasLabel:Yi,clear:Zi,importLabels:function(t){Xi.set(ne([],t,!0))},exportLabels:function(){return ne([],l(Xi),!0)}},ec={address:null,column:"CELL"},nc=Dt(ec),sc=nc.subscribe;nc.set;var rc=nc.update;function oc(t){rc(t),ec=t(ec)}var ic={subscribe:sc,selectUp:function(){oc((function(t){var e=t.address-=2;return Zt(Zt({},t),{address:e<0?hn:e})}))},selectDown:function(){oc((function(t){var e=t.address+=2;return Zt(Zt({},t),{address:e>hn?0:e})}))},selectLeft:function(){oc((function(t){return Zt(Zt({},t),{column:"LABEL"})}))},selectRight:function(){oc((function(t){return Zt(Zt({},t),{column:"CELL"})}))},select:function(t,e){if(void 0===e&&(e="CELL"),!gn(t))throw new Error("Invalid address");oc((function(n){return Zt(Zt({},n),{address:t,column:e})}))},deselect:function(){oc((function(t){return Zt(Zt({},t),{address:null})}))},noSelection:function(){return null===ec.address}};function cc(n){let s,r,o,c,a,l;return{c(){s=R("svg"),r=R("rect"),o=R("path"),M(r,"fill","none"),M(r,"height","24px"),M(r,"width","24px"),M(o,"d","M21,12l-4.37,6.16C16.26,18.68,15.65,19,15,19h-3l0-2h3l3.55-5L15,7H5v3H3V7c0-1.1,0.9-2,2-2h10c0.65,0,1.26,0.31,1.63,0.84 L21,12z M10,15H7v-3H5v3H2v2h3v3h2v-3h3V15z"),M(s,"xmlns","http://www.w3.org/2000/svg"),M(s,"viewBox","0 0 24 24"),M(s,"class","absolute right-0 fill-black/30 cursor-pointer w-6 h-6 transition-colors hover:fill-black")},m(t,e){T(t,s,e),E(s,r),E(s,o),a||(l=Q(s,"click",n[0]),a=!0)},p:t,i(r){c||lt((()=>{c=function(n,s,r){let o,c,a=s(n,r),l=!1,u=0;function f(){o&&z(n,o)}function d(){const{delay:s=0,duration:r=300,easing:i=e,tick:d=t,css:p}=a||_t;p&&(o=J(n,0,1,r,s,i,p,u++)),d(0,1);const h=x()+s,m=h+r;c&&c.abort(),l=!0,lt((()=>$t(n,!0,"start"))),c=A((t=>{if(l){if(t>=m)return d(1,0),$t(n,!0,"end"),f(),l=!1;if(t>=h){const e=i((t-h)/r);d(e,1-e)}}return l}))}let p=!1;return{start(){p||(p=!0,z(n),i(a)?(a=a(),gt().then(d)):d())},invalidate(){p=!1},end(){l&&(f(),l=!1)}}}(s,n[6],{delay:300}),c.start()}))},o:t,d(t){t&&C(s),a=!1,l()}}}function ac(t){let e,n,s,r,i;return{c(){e=L("input"),e.value=t[3],M(e,"class","absolute right-0 h-[28px] w-[150px] p-[10px] border border-black/40 border-r-0 outline-none bg-gray-500/50 text-black shadow-ramlabels rounded-l-md origin-right  svelte-154hxnx")},m(n,o){T(n,e,o),t[13](e),s=!0,r||(i=[Q(e,"input",uc),Q(e,"focus",t[0]),Q(e,"focusout",t[1])],r=!0)},p(t,n){(!s||8&n&&e.value!==t[3])&&(e.value=t[3])},i(r){s||(lt((()=>{n||(n=St(e,t[5],{},!0)),n.run(1)})),s=!0)},o(r){n||(n=St(e,t[5],{},!1)),n.run(0),s=!1},d(s){s&&C(e),t[13](null),s&&n&&n.end(),r=!1,o(i)}}}function lc(t){let e,n,s,r,o;const i=[ac,cc],c=[];function a(t,e){return t[4]?0:1}return n=a(t),s=c[n]=i[n](t),{c(){e=L("div"),s.c(),M(e,"class",r="relative h-[30px] flex items-center "+t[7].class+" svelte-154hxnx")},m(t,s){T(t,e,s),c[n].m(e,null),o=!0},p(t,[l]){let u=n;n=a(t),n===u?c[n].p(t,l):(bt(),kt(c[u],1,1,(()=>{c[u]=null})),vt(),s=c[n],s?s.p(t,l):(s=c[n]=i[n](t),s.c()),xt(s,1),s.m(e,null)),(!o||128&l&&r!==(r="relative h-[30px] flex items-center "+t[7].class+" svelte-154hxnx"))&&M(e,"class",r)},i(t){o||(xt(s),o=!0)},o(t){kt(s),o=!1},d(t){t&&C(e),c[n].d()}}}function uc({target:t}){t.value=t.value.toUpperCase().replaceAll(/[^A-Z_]/g,"").slice(0,10)}function fc(t,e,s){let r,o,i;const c=["address","selected","select","deselect","commitInput","getAddress"];let a,l,f,d=$(e,c);u(t,jt,(t=>s(15,a=t))),u(t,tc,(t=>s(12,l=t))),u(t,ic,(t=>s(16,f=t)));let p,{address:h}=e,{selected:m}=e;function y(){try{if(!p)return;Ei.info(`RamLabel input: "${p.value}"`,"USER_INPUT"),tc.setLabel(h,p.value),s(3,r=l[h])}catch(t){a.error(t.message),Ei.error(t,"USER_INPUT",t.isChecked)}}return t.$$set=t=>{e=n(n({},e),g(t)),s(7,d=$(e,c)),"address"in t&&s(8,h=t.address),"selected"in t&&s(9,m=t.selected)},t.$$.update=()=>{4352&t.$$.dirty&&s(3,r=l[h]),8&t.$$.dirty&&(o=!r),520&t.$$.dirty&&s(4,i=m||!!r),516&t.$$.dirty&&m&&p&&p.focus()},[function(){ic.select(h,"LABEL")},function(){y(),"LABEL"===f.column&&h===f.address&&ic.deselect()},p,r,i,function(t,{delay:e=0,duration:n=200}){return{delay:0,duration:o?n:0,css:t=>o?`transform: scaleX(${t})`:""}},function(t,{delay:e=0,duration:n=0}){return{delay:o?e:0,duration:n,css:t=>o?`filter: opacity(${t})`:""}},d,h,m,y,function(){return h},l,function(t){rt[t?"unshift":"push"]((()=>{p=t,s(2,p)}))}]}class dc extends Rt{constructor(t){super(),Lt(this,t,fc,lc,c,{address:8,selected:9,select:0,deselect:1,commitInput:10,getAddress:11})}get select(){return this.$$.ctx[0]}get deselect(){return this.$$.ctx[1]}get commitInput(){return this.$$.ctx[10]}get getAddress(){return this.$$.ctx[11]}}function pc(e){let n,s,r,o=(e[2]?new yn(8,e[0]).toBinaryString():e[0])+"";return{c(){n=L("div"),s=U(o),M(n,"class",r="h-[30px] w-[100px] flex items-center justify-center bg-[#FF8C00] border border-black border-t-0 "+e[3].class+" svelte-1v2acx4")},m(t,r){T(t,n,r),E(n,s),e[6](n)},p(t,[e]){5&e&&o!==(o=(t[2]?new yn(8,t[0]).toBinaryString():t[0])+"")&&F(s,o),8&e&&r!==(r="h-[30px] w-[100px] flex items-center justify-center bg-[#FF8C00] border border-black border-t-0 "+t[3].class+" svelte-1v2acx4")&&M(n,"class",r)},i:t,o:t,d(t){t&&C(n),e[6](null)}}}function hc(t,e,s){const r=["address","getAddress","flash"];let o,i=$(e,r);u(t,Oe,(t=>s(2,o=t)));var c=this&&this.__awaiter||function(t,e,n,s){return new(n||(n=Promise))((function(r,o){function i(t){try{a(s.next(t))}catch(t){o(t)}}function c(t){try{a(s.throw(t))}catch(t){o(t)}}function a(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,c)}a((s=s.apply(t,e||[])).next())}))};let a,{address:l}=e;return t.$$set=t=>{e=n(n({},e),g(t)),s(3,i=$(e,r)),"address"in t&&s(0,l=t.address)},[l,a,o,i,function(){return l},function(){return c(this,void 0,void 0,(function*(){return Jo(a,"background-color",{r:255,g:140,b:0},{r:0,g:255,b:0})}))},function(t){rt[t?"unshift":"push"]((()=>{a=t,s(1,a)}))}]}class mc extends Rt{constructor(t){super(),Lt(this,t,hc,pc,c,{address:0,getAddress:4,flash:5})}get getAddress(){return this.$$.ctx[4]}get flash(){return this.$$.ctx[5]}}function gc(t){let e,n,s,r,o=t[5]&&yc(t);return{c(){e=L("div"),n=U(t[6]),s=D(),o&&o.c(),r=P(),M(e,"class","h-[30px] w-[190px] flex items-center justify-start pl-[10px]")},m(t,i){T(t,e,i),E(e,n),T(t,s,i),o&&o.m(t,i),T(t,r,i)},p(t,e){64&e&&F(n,t[6]),t[5]?o?o.p(t,e):(o=yc(t),o.c(),o.m(r.parentNode,r)):o&&(o.d(1),o=null)},d(t){t&&C(e),t&&C(s),o&&o.d(t),t&&C(r)}}}function $c(t){let e,n,s,r;return{c(){e=L("input"),e.value=n=t[6]+(t[5]?" "+t[5]:""),M(e,"class","h-[30px] w-[190px] p-0 pl-[10px] border-0 col-span-1 outline-none bg-black text-gray-200 selection:bg-transparent  svelte-67wtpq")},m(n,o){T(n,e,o),t[16](e),s||(r=[b(t[7].call(null,e)),Q(e,"focusout",t[2]),Q(e,"input",bc)],s=!0)},p(t,s){96&s&&n!==(n=t[6]+(t[5]?" "+t[5]:""))&&e.value!==n&&(e.value=n)},d(n){n&&C(e),t[16](null),s=!1,o(r)}}}function yc(t){let e,n;return{c(){e=L("div"),n=U(t[5]),M(e,"class","h-[30px] w-[190px] flex items-center justify-start overflow-hidden")},m(t,s){T(t,e,s),E(e,n)},p(t,e){32&e&&F(n,t[5])},d(t){t&&C(e)}}}function wc(e){let n,s,r,o;function i(t,e){return t[0]?$c:gc}let c=i(e),a=c(e);return{c(){n=L("div"),a.c(),M(n,"class",s="h-[30px] w-[190px] grid grid-cols-2 items-center bg-gray-200 cursor-text border border-black border-t-0 border-l-0 "+e[8].class+" svelte-67wtpq")},m(t,s){T(t,n,s),a.m(n,null),e[17](n),r||(o=Q(n,"click",e[1]),r=!0)},p(t,[e]){c===(c=i(t))&&a?a.p(t,e):(a.d(1),a=c(t),a&&(a.c(),a.m(n,null))),256&e&&s!==(s="h-[30px] w-[190px] grid grid-cols-2 items-center bg-gray-200 cursor-text border border-black border-t-0 border-l-0 "+t[8].class+" svelte-67wtpq")&&M(n,"class",s)},i:t,o:t,d(t){t&&C(n),a.d(),e[17](null),r=!1,o()}}}function bc({target:t}){t.value=t.value.toUpperCase().replaceAll(/[^A-Z0-9 _\-#\(\)]*/g,"")}function vc(t,e,s){let r,o,i;const c=["address","selected","select","deselect","commitInput","flash","getAddress"];let a,l,f,d,p,h=$(e,c);u(t,jt,(t=>s(18,a=t))),u(t,tc,(t=>s(19,l=t))),u(t,Oe,(t=>s(14,f=t))),u(t,ic,(t=>s(20,d=t))),u(t,Gi,(t=>s(15,p=t)));var m=this&&this.__awaiter||function(t,e,n,s){return new(n||(n=Promise))((function(r,o){function i(t){try{a(s.next(t))}catch(t){o(t)}}function c(t){try{a(s.throw(t))}catch(t){o(t)}}function a(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,c)}a((s=s.apply(t,e||[])).next())}))};let y,w,{address:b}=e,{selected:v=!1}=e;function x(){try{w&&""!==w.value&&(Ei.info(`RamCell input: "${w.value}"`,"USER_INPUT"),f?Gi.write(b,Ro(w.value.trim())):Gi.write(b,Lo(w.value.trim(),l)))}catch(t){a.error(t.message),Ei.error(t,"USER_INPUT",t.isChecked)}}return t.$$set=t=>{e=n(n({},e),g(t)),s(8,h=$(e,c)),"address"in t&&s(9,b=t.address),"selected"in t&&s(0,v=t.selected)},t.$$.update=()=>{33280&t.$$.dirty&&s(13,r=p[mn(b)]),24576&t.$$.dirty&&s(6,o=f?r.binaryOpcode():r.symbolicOpcode),24576&t.$$.dirty&&s(5,i=f?r.binaryOperand():r.symbolicOperand)},[v,function(){ic.select(b,"CELL")},function(){x(),"CELL"===d.column&&b===d.address&&ic.deselect()},y,w,i,o,function(t){t.value=o+(i?` ${i}`:""),t.focus(),setTimeout((()=>t.select()))},h,b,x,function(){return m(this,void 0,void 0,(function*(){return Jo(y,"background-color",{r:211,g:211,b:211},{r:0,g:255,b:0})}))},function(){return b},r,f,p,function(t){rt[t?"unshift":"push"]((()=>{w=t,s(4,w)}))},function(t){rt[t?"unshift":"push"]((()=>{y=t,s(3,y)}))}]}class xc extends Rt{constructor(t){super(),Lt(this,t,vc,wc,c,{address:9,selected:0,select:1,deselect:2,commitInput:10,flash:11,getAddress:12})}get select(){return this.$$.ctx[1]}get deselect(){return this.$$.ctx[2]}get commitInput(){return this.$$.ctx[10]}get flash(){return this.$$.ctx[11]}get getAddress(){return this.$$.ctx[12]}}function kc(t,e,n){const s=t.slice();return s[25]=e[n],s[26]=e,s[27]=n,s}function _c(t,e,n){const s=t.slice();return s[25]=e[n],s[28]=e,s[27]=n,s}function Sc(t){let e,n,s=t[27];const r=()=>t[15](e,s),o=()=>t[15](null,s);let i={address:t[25],selected:t[6].address===t[25]&&"LABEL"===t[6].column,class:"\n\t\t\t\t\t"+(t[25]===t[0]?"first-label":"")+"\n\t\t\t\t\t"+(t[25]===t[1]?"last-label":"")+"\n\t\t\t\t"};return e=new dc({props:i}),r(),{c(){It(e.$$.fragment)},m(t,s){Tt(e,t,s),n=!0},p(t,n){s!==t[27]&&(o(),s=t[27],r());const i={};4&n&&(i.address=t[25]),68&n&&(i.selected=t[6].address===t[25]&&"LABEL"===t[6].column),7&n&&(i.class="\n\t\t\t\t\t"+(t[25]===t[0]?"first-label":"")+"\n\t\t\t\t\t"+(t[25]===t[1]?"last-label":"")+"\n\t\t\t\t"),e.$set(i)},i(t){n||(xt(e.$$.fragment,t),n=!0)},o(t){kt(e.$$.fragment,t),n=!1},d(t){o(),Ct(e,t)}}}function Ac(t){let e,n,s,r,o,i,c=t[27];const a=()=>t[16](n,c),l=()=>t[16](null,c);let u={address:t[25],class:"\n\t\t\t\t\t\t"+(t[25]===t[0]?"first-address":"")+"\n\t\t\t\t\t\t"+(t[25]===t[1]?"last-address":"")+"\n\t\t\t\t\t"};n=new mc({props:u}),a();const f=()=>t[17](r,c),d=()=>t[17](null,c);let p={address:t[25],selected:t[6].address===t[25]&&"CELL"===t[6].column,class:"\n\t\t\t\t\t\t"+(t[25]===t[0]?"first-cell":"")+"\n\t\t\t\t\t\t"+(t[25]===t[1]?"last-cell":"")+"\n\t\t\t\t\t"};return r=new xc({props:p}),f(),{c(){e=L("div"),It(n.$$.fragment),s=D(),It(r.$$.fragment),o=D(),M(e,"class","flex flex-nowrap")},m(t,c){T(t,e,c),Tt(n,e,null),E(e,s),Tt(r,e,null),E(e,o),i=!0},p(t,e){c!==t[27]&&(l(),c=t[27],a());const s={};4&e&&(s.address=t[25]),7&e&&(s.class="\n\t\t\t\t\t\t"+(t[25]===t[0]?"first-address":"")+"\n\t\t\t\t\t\t"+(t[25]===t[1]?"last-address":"")+"\n\t\t\t\t\t"),n.$set(s),c!==t[27]&&(d(),c=t[27],f());const o={};4&e&&(o.address=t[25]),68&e&&(o.selected=t[6].address===t[25]&&"CELL"===t[6].column),7&e&&(o.class="\n\t\t\t\t\t\t"+(t[25]===t[0]?"first-cell":"")+"\n\t\t\t\t\t\t"+(t[25]===t[1]?"last-cell":"")+"\n\t\t\t\t\t"),r.$set(o)},i(t){i||(xt(n.$$.fragment,t),xt(r.$$.fragment,t),i=!0)},o(t){kt(n.$$.fragment,t),kt(r.$$.fragment,t),i=!1},d(t){t&&C(e),l(),Ct(n),d(),Ct(r)}}}function Ec(t){let e,n,s,r,i,c,a,l,u;n=new Ye({props:{text:"RAM",fontSize:"LARGE",top:"-30px",right:"0"}});let f=t[2],d=[];for(let e=0;e<f.length;e+=1)d[e]=Sc(_c(t,f,e));const p=t=>kt(d[t],1,1,(()=>{d[t]=null}));let h=t[2],m=[];for(let e=0;e<h.length;e+=1)m[e]=Ac(kc(t,h,e));const g=t=>kt(m[t],1,1,(()=>{m[t]=null}));return{c(){e=L("div"),It(n.$$.fragment),s=D(),r=L("div");for(let t=0;t<d.length;t+=1)d[t].c();i=D(),c=L("div");for(let t=0;t<m.length;t+=1)m[t].c();M(r,"class","flex flex-col items-end justify-center"),M(c,"class","h-fit flex flex-col rounded-2xl shadow-cpu"),M(e,"class","absolute top-[115px] right-[50px] z-[3] flex")},m(o,f){T(o,e,f),Tt(n,e,null),E(e,s),E(e,r);for(let t=0;t<d.length;t+=1)d[t].m(r,null);E(e,i),E(e,c);for(let t=0;t<m.length;t+=1)m[t].m(c,null);a=!0,l||(u=[Q(e,"wheel",t[7]),b(t[8].call(null,e))],l=!0)},p(t,[e]){if(79&e){let n;for(f=t[2],n=0;n<f.length;n+=1){const s=_c(t,f,n);d[n]?(d[n].p(s,e),xt(d[n],1)):(d[n]=Sc(s),d[n].c(),xt(d[n],1),d[n].m(r,null))}for(bt(),n=f.length;n<d.length;n+=1)p(n);vt()}if(119&e){let n;for(h=t[2],n=0;n<h.length;n+=1){const s=kc(t,h,n);m[n]?(m[n].p(s,e),xt(m[n],1)):(m[n]=Ac(s),m[n].c(),xt(m[n],1),m[n].m(c,null))}for(bt(),n=h.length;n<m.length;n+=1)g(n);vt()}},i(t){if(!a){xt(n.$$.fragment,t);for(let t=0;t<f.length;t+=1)xt(d[t]);for(let t=0;t<h.length;t+=1)xt(m[t]);a=!0}},o(t){kt(n.$$.fragment,t),d=d.filter(Boolean);for(let t=0;t<d.length;t+=1)kt(d[t]);m=m.filter(Boolean);for(let t=0;t<m.length;t+=1)kt(m[t]);a=!1},d(t){t&&C(e),Ct(n),O(d,t),O(m,t),l=!1,o(u)}}}function Nc(t,e,n){let s;u(t,ic,(t=>n(6,s=t)));var r=this&&this.__awaiter||function(t,e,n,s){return new(n||(n=Promise))((function(r,o){function i(t){try{a(s.next(t))}catch(t){o(t)}}function c(t){try{a(s.throw(t))}catch(t){o(t)}}function a(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,c)}a((s=s.apply(t,e||[])).next())}))};let o,i,c=[],a=0;m();let l=[],f=[],d=[];var p;function h({deltaY:t}){let e=a+(t>0?2:-2);e<0&&(e=220),e>220&&(e=0),n(0,a=e),m()}function m(){n(1,o=a+34),n(2,i=[]);for(let t=a,e=0;t<=o;t+=2,e++)n(2,i[e]=t,i)}function g(){h({deltaY:-1})}function $(){h({deltaY:1})}function y(t){if(!gn(t))throw new Error("Invalid address");return t>=a&&t<=o}function w(t){return r(this,void 0,void 0,(function*(){if(!gn(t))throw new Error("Invalid address");if(y(t))return;let e=t,s=e+34;return s>hn&&(e-=s-hn),n(0,a=e),m(),new Promise(((t,e)=>{c.push(t)}))}))}return p=()=>{c.forEach((t=>t())),c=[]},Z().$$.after_update.push(p),[a,o,i,l,f,d,s,function({deltaY:t}){ic.deselect(),h({deltaY:t})},function(t){const e=t=>{switch(t.key){case"ArrowUp":!function(t){ic.noSelection()||(t.ctrlKey?Gi.moveSecondHalfUpFromAddress(s.address):t.shiftKey&&Gi.moveFirstHalfUpFromAddress(s.address),s.address===a&&g(),ic.selectUp())}(t);break;case"ArrowDown":!function(t){ic.noSelection()||(t.ctrlKey?Gi.moveSecondHalfDownFromAddress(s.address):t.shiftKey&&Gi.moveFirstHalfDownFromAddress(s.address),s.address===o&&$(),ic.selectDown())}(t);break;case"Enter":ic.noSelection()?ic.select(a):ic.deselect()}};return document.addEventListener("keydown",e),{destroy(){document.removeEventListener("keydown",e)}}},g,$,y,w,function(t){return r(this,void 0,void 0,(function*(){if(!gn(t))throw new Error("Invalid address");return w(t).then((()=>f.find((e=>e.getAddress()===t)).flash()))}))},function(t){return r(this,void 0,void 0,(function*(){if(!gn(t))throw new Error("Invalid address");return w(t).then((()=>d.find((e=>e.getAddress()===t)).flash()))}))},function(t,e){rt[t?"unshift":"push"]((()=>{l[e]=t,n(3,l)}))},function(t,e){rt[t?"unshift":"push"]((()=>{f[e]=t,n(4,f)}))},function(t,e){rt[t?"unshift":"push"]((()=>{d[e]=t,n(5,d)}))}]}class Ic extends Rt{constructor(t){super(),Lt(this,t,Nc,Ec,c,{scrollUp:9,scrollDown:10,addressIsVisible:11,showAddress:12,flashAddress:13,flashContent:14})}get scrollUp(){return this.$$.ctx[9]}get scrollDown(){return this.$$.ctx[10]}get addressIsVisible(){return this.$$.ctx[11]}get showAddress(){return this.$$.ctx[12]}get flashAddress(){return this.$$.ctx[13]}get flashContent(){return this.$$.ctx[14]}}function Tc(t){let e,n,s=t[0].name+"";return{c(){e=L("span"),n=U(s),M(e,"class","text-fuchsia-500")},m(t,s){T(t,e,s),E(e,n)},p(t,e){1&e&&s!==(s=t[0].name+"")&&F(n,s)},d(t){t&&C(e)}}}function Cc(t){let e,n,s,r,o,i,c,a=t[0].x+"",l=t[0].y+"";return{c(){e=L("span"),n=U("x: "),s=U(a),r=D(),o=L("span"),i=U("y: "),c=U(l),M(e,"class","text-blue-700"),M(o,"class","text-red-700")},m(t,a){T(t,e,a),E(e,n),E(e,s),T(t,r,a),T(t,o,a),E(o,i),E(o,c)},p(t,e){1&e&&a!==(a=t[0].x+"")&&F(s,a),1&e&&l!==(l=t[0].y+"")&&F(c,l)},d(t){t&&C(e),t&&C(r),t&&C(o)}}}function Oc(e){let n,s,r,o,i,c,a=e[1]&&Tc(e),l=e[2]&&Cc(e);return{c(){n=L("div"),s=L("div"),o=D(),i=L("div"),a&&a.c(),c=D(),l&&l.c(),M(s,"class","absolute top-0 left-0 w-2 h-2 -translate-x-1/2 -translate-y-1/2 rounded-full bg-white border border-fuchsia-500"),M(s,"title",r=`${e[0].name} x: ${e[0].x} y: ${e[0].y}`),M(i,"class","relative left-[7px] top-[-10px] bg-white font-bold"),M(n,"class","absolute z-10"),K(n,"top",e[0].y+"px"),K(n,"left",e[0].x+"px")},m(t,e){T(t,n,e),E(n,s),E(n,o),E(n,i),a&&a.m(i,null),E(i,c),l&&l.m(i,null)},p(t,[e]){1&e&&r!==(r=`${t[0].name} x: ${t[0].x} y: ${t[0].y}`)&&M(s,"title",r),t[1]?a?a.p(t,e):(a=Tc(t),a.c(),a.m(i,c)):a&&(a.d(1),a=null),t[2]?l?l.p(t,e):(l=Cc(t),l.c(),l.m(i,null)):l&&(l.d(1),l=null),1&e&&K(n,"top",t[0].y+"px"),1&e&&K(n,"left",t[0].x+"px")},i:t,o:t,d(t){t&&C(n),a&&a.d(),l&&l.d()}}}function Lc(t,e,n){let s,r;u(t,Xt,(t=>n(1,s=t))),u(t,Jt,(t=>n(2,r=t)));let{node:o}=e;return t.$$set=t=>{"node"in t&&n(0,o=t.node)},[o,s,r]}class Rc extends Rt{constructor(t){super(),Lt(this,t,Lc,Oc,c,{node:0})}}function Uc(t,e,n){const s=t.slice();return s[7]=e[n],s}function Dc(t){let e,n,s=he,r=[];for(let e=0;e<s.length;e+=1)r[e]=Pc(Uc(t,s,e));const o=t=>kt(r[t],1,1,(()=>{r[t]=null}));return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=P()},m(t,s){for(let e=0;e<r.length;e+=1)r[e].m(t,s);T(t,e,s),n=!0},p(t,n){if(0&n){let i;for(s=he,i=0;i<s.length;i+=1){const o=Uc(t,s,i);r[i]?(r[i].p(o,n),xt(r[i],1)):(r[i]=Pc(o),r[i].c(),xt(r[i],1),r[i].m(e.parentNode,e))}for(bt(),i=s.length;i<r.length;i+=1)o(i);vt()}},i(t){if(!n){for(let t=0;t<s.length;t+=1)xt(r[t]);n=!0}},o(t){r=r.filter(Boolean);for(let t=0;t<r.length;t+=1)kt(r[t]);n=!1},d(t){O(r,t),t&&C(e)}}}function Pc(e){let n,s;return n=new Rc({props:{node:e[7]}}),{c(){It(n.$$.fragment)},m(t,e){Tt(n,t,e),s=!0},p:t,i(t){s||(xt(n.$$.fragment,t),s=!0)},o(t){kt(n.$$.fragment,t),s=!1},d(t){Ct(n,t)}}}function Qc(t){let e,n,s,r,o,i,c,a;n=new Xe({props:{}}),t[4](n);r=new Qi({props:{}}),t[5](r);i=new Ic({props:{}}),t[6](i);let l=t[3]&&Dc(t);return{c(){e=L("div"),It(n.$$.fragment),s=D(),It(r.$$.fragment),o=D(),It(i.$$.fragment),c=D(),l&&l.c(),M(e,"class","absolute top-0 left-0 w-app h-app")},m(t,u){T(t,e,u),Tt(n,e,null),E(e,s),Tt(r,e,null),E(e,o),Tt(i,e,null),E(e,c),l&&l.m(e,null),a=!0},p(t,[s]){n.$set({});r.$set({});i.$set({}),t[3]?l?(l.p(t,s),8&s&&xt(l,1)):(l=Dc(t),l.c(),xt(l,1),l.m(e,null)):l&&(bt(),kt(l,1,1,(()=>{l=null})),vt())},i(t){a||(xt(n.$$.fragment,t),xt(r.$$.fragment,t),xt(i.$$.fragment,t),xt(l),a=!0)},o(t){kt(n.$$.fragment,t),kt(r.$$.fragment,t),kt(i.$$.fragment,t),kt(l),a=!1},d(s){s&&C(e),t[4](null),Ct(n),t[5](null),Ct(r),t[6](null),Ct(i),l&&l.d()}}}function Mc(t,e,n){let s,r,o,i;return u(t,Mt,(t=>n(0,s=t))),u(t,Qt,(t=>n(1,r=t))),u(t,Pt,(t=>n(2,o=t))),u(t,Gt,(t=>n(3,i=t))),[s,r,o,i,function(t){rt[t?"unshift":"push"]((()=>{s=t,Mt.set(s)}))},function(t){rt[t?"unshift":"push"]((()=>{r=t,Qt.set(r)}))},function(t){rt[t?"unshift":"push"]((()=>{o=t,Pt.set(o)}))}]}class Bc extends Rt{constructor(t){super(),Lt(this,t,Mc,Qc,c,{})}}var Fc,jc=null;Be.subscribe((function(t){return Fc=l(Fe).find((function(e){return e.name===t}))}));var Kc={read:function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];(jc=new SpeechSynthesisUtterance(t)).rate=l(Me),jc.voice=Fc,jc.onend=jc.onerror=function(){jc=null,e.forEach((function(t){return null==t?void 0:t()}))},speechSynthesis.speak(jc)},isUtteranceEnded:function(){return null===jc}},Wc=function(t){function e(e){var n=t.call(this)||this;return n.step=e,n.condition(Oi),n}return Yt(e,t),e.prototype.action=function(){return te(this,void 0,void 0,(function(){var t;return ee(this,(function(n){return e.utteranceEndedPromise=new Promise((function(e){return t=e})),Kc.read(l(So).steps[this.step].tts,(function(){return t()})),[2]}))}))},e.prototype.toString=function(){return"".concat(t.prototype.toString.call(this),", step: ").concat(this.step)},e}(Ni);function qc(){return te(this,void 0,void 0,(function(){return ee(this,(function(t){return[2,Wc.utteranceEndedPromise]}))}))}var Hc=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var s=t.call(this)||this;return s.subactions=ne([],e,!0),s}return Yt(e,t),e.prototype.toString=function(){return"".concat(t.prototype.toString.call(this)," [").concat(this.subactions.length,"]")},e}(Ni),Vc=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.apply(this,e)||this}return Yt(e,t),e.prototype.action=function(){return te(this,void 0,void 0,(function(){return ee(this,(function(t){return[2,Promise.all(this.subactions.map((function(t){return t.execute()})))]}))}))},e}(Hc),Gc=Dt(new yn(16,0)),Xc=Dt(new yn(16,0)),Jc=Dt(new yn(16,0)),zc=Dt(new yn(16,0)),Yc=Dt(new yn(16,0)),Zc=Dt(new yn(16,0)),ta=Dt(new yn(16,0)),ea=Dt(new yn(16,0)),na=Dt(new yn(16,0)),sa=Dt(new yn(16,0)),ra={main_data_bus:Gc,ir_cu_data_bus:Xc,alu_acc_data_bus:Jc,alu_sw_data_bus:zc,mux_alu_data_bus:Yc,cu_mux_ctrl_bus:Zc,cu_ram_ctrl_bus:ta,cu_alu_ctrl_bus:ea,main_address_bus:na,inc_pc_address_bus:sa},oa=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Yt(e,t),e}(Ni),ia=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Yt(e,t),e.prototype.action=function(){return te(this,void 0,void 0,(function(){return ee(this,(function(t){switch(t.label){case 0:return Qo.set(l(Gc)),[4,l(Qt).flash("ALU:1")];case 1:return t.sent(),[2]}}))}))},e}(oa),ca=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Yt(e,t),e.prototype.action=function(){return te(this,void 0,void 0,(function(){return ee(this,(function(t){switch(t.label){case 0:return Vo.instructionRegister.set(Ro(l(Gc).toBinaryString())),[4,l(Qt).flash("IR")];case 1:return t.sent(),[2]}}))}))},e}(oa),aa=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Yt(e,t),e.prototype.action=function(){return te(this,void 0,void 0,(function(){var t;return ee(this,(function(e){switch(e.label){case 0:return t=l(Vo.programCounter).unsigned()+l(sa).unsigned(),Vo.programCounter.set(new yn(8,t)),[4,l(Qt).flash("PC")];case 1:return e.sent(),[2]}}))}))},e}(oa),la=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Yt(e,t),e.prototype.action=function(){return te(this,void 0,void 0,(function(){return ee(this,(function(t){switch(t.label){case 0:return Vo.isJumping.set(!0),Vo.programCounter.set(l(na)),[4,l(Qt).flash("PC")];case 1:return t.sent(),[2]}}))}))},e}(oa),ua=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Yt(e,t),e.prototype.action=function(){return te(this,void 0,void 0,(function(){return ee(this,(function(t){switch(t.label){case 0:return Vo.alu2.set(l(Yc)),[4,l(Qt).flash("ALU:2")];case 1:return t.sent(),[2]}}))}))},e}(oa),fa=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Yt(e,t),e.prototype.action=function(){return te(this,void 0,void 0,(function(){var t;return ee(this,(function(e){switch(e.label){case 0:return t=l(Vo.instructionRegister).opcode.operator,Vo.aluOperation.set(t),[4,l(Qt).flash("ALU:OPR")];case 1:return e.sent(),[2]}}))}))},e}(oa),da=function(t){function e(e){var n=t.call(this)||this;return n.component=e,n}return Yt(e,t),e.prototype.action=function(){return te(this,void 0,void 0,(function(){return ee(this,(function(t){switch(this.component){case"ADDRESS":return[2,l(Pt).flashAddress(l(na).unsigned())];case"DATA":return[2,l(Pt).flashContent(l(na).unsigned())]}return[2]}))}))},e.prototype.toString=function(){return"".concat(t.prototype.toString.call(this),", component: ").concat(this.component)},e}(Ri),pa=function(t){function e(e,n){var s=t.call(this)||this;return s.from=e,s.to=n,s}return Yt(e,t),e.prototype.action=function(){return te(this,void 0,void 0,(function(){return ee(this,(function(t){return[2,l(Mt).flashWire(this.from,this.to)]}))}))},e.prototype.toString=function(){return"".concat(t.prototype.toString.call(this),", from: ").concat(this.from,", to: ").concat(this.to)},e}(Ri),ha=function(t){function e(e){var n=t.call(this)||this;return n.step=e,n}return Yt(e,t),e.prototype.action=function(){return te(this,void 0,void 0,(function(){return ee(this,(function(t){return l(qt).setText(l(So).steps[this.step].text),[2]}))}))},e.prototype.toString=function(){return"".concat(t.prototype.toString.call(this),", step: ").concat(this.step)},e}(Ni),ma=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Yt(e,t),e}(Ni),ga={RAM:"main_data_bus","IR:OPC":"ir_cu_data_bus","IR:OPR":"main_address_bus","ALU:RES":"alu_acc_data_bus",ACC:"main_data_bus",PC:"main_address_bus",INC:"inc_pc_address_bus"},$a=function(t){function e(e,n){void 0===n&&(n="default");var s=t.call(this)||this;return s.valueSource=e,s.bus="default"===n?ga[e]:n,s}return Yt(e,t),e.prototype.action=function(){return te(this,void 0,void 0,(function(){return ee(this,(function(t){return ra[this.bus].set(this.getValueFromSource()),[2]}))}))},e.prototype.getValueFromSource=function(){switch(this.valueSource){case"RAM":return Gi.read(l(na).unsigned()).value;case"IR:OPC":return l(Vo.instructionRegister).opcodeValue();case"IR:OPR":return l(Vo.instructionRegister).operandValue();case"ALU:RES":return l(Vo.aluResult);case"ACC":return l(Vo.accumulator);case"CU":throw new Error("CU value not implemented");case"PC":return l(Vo.programCounter);case"INC":return l(Vo.increment);default:throw new Error(this.valueSource+" value not implemented")}},e.prototype.toString=function(){return"".concat(t.prototype.toString.call(this)," valueSource: ").concat(this.valueSource," bus: ").concat(this.bus)},e}(ma),ya=[new Vc(new $a("PC"),new pa("PC:1","INC:2"),new Wc("pc_increment"),new ha("pc_increment")),new $a("INC"),new pa("INC:1","PC:2"),(new aa).thenWaitFor(qc).endstep()],wa=[new Vc(new Ui("PC"),new Wc("pc_to_ram"),new ha("pc_to_ram")),new Vc(new $a("PC"),new pa("PC:2","RAM:ADD")),new da("ADDRESS").thenWaitFor(qc).endstep(),new Vc(new pa("CU:3","RAM:CTRL"),new Wc("memory_fetch"),new ha("memory_fetch")).thenWaitFor(qc).endstep(),new Vc(new da("DATA"),new Wc("ram_to_ir"),new ha("ram_to_ir")),new Vc(new $a("RAM"),new pa("RAM:DATA","IR:1")),(new ca).thenWaitFor(qc).endstep(),new Vc(new Ui("IR:OPC"),new Wc("ir_to_cu"),new ha("ir_to_cu")),new Vc(new $a("IR:OPC"),new pa("IR:3","CU:1")),new Ui("CU").thenWaitFor(qc).endstep()],ba=[new Vc(new pa("CU:2","MUX:4"),new Wc("cu_to_mux"),new ha("cu_to_mux")),new Ui("MUX").thenWaitFor(qc).endstep()],va=[new Vc(new pa("CU:4","ALU:5"),new Wc("cu_to_alu"),new ha("cu_to_alu")),(new fa).thenWaitFor(qc).endstep()],xa=[new Vc(new Ui("ACC"),new Wc("acc_to_alu1"),new ha("acc_to_alu1")),new Vc(new $a("ACC"),new pa("ACC:1","ALU:1")),(new ia).thenWaitFor(qc).endstep()];function ka(t){return t?_a:Sa}var _a=[new Vc(new Ui("IR:OPR"),new Wc("ir_to_alu2"),new ha("ir_to_alu2")),new Vc(new $a("IR:OPR"),new pa("IR:2","MUX:1")),new Vc(new $a("IR:OPR","mux_alu_data_bus"),new pa("MUX:3","ALU:2")),(new ua).thenWaitFor(qc).endstep()],Sa=[new Vc(new Ui("IR:OPR"),new Wc("ir_to_ram"),new ha("ir_to_ram")),new Vc(new $a("IR:OPR"),new pa("IR:2","RAM:ADD")),new da("ADDRESS").thenWaitFor(qc).endstep(),new Vc(new Ui("CU"),new Wc("memory_read"),new ha("memory_read")),new Vc(new pa("CU:3","RAM:CTRL").thenWaitFor(qc).endstep()),new Vc(new da("DATA"),new Wc("ram_to_alu2"),new ha("ram_to_alu2")),new Vc(new $a("RAM"),new pa("RAM:DATA","MUX:2")),new Vc(new $a("RAM","mux_alu_data_bus"),new pa("MUX:3","ALU:2")),(new ua).thenWaitFor(qc).endstep()],Aa=[new Vc(new Ui("IR:OPR"),new Wc("ir_to_pc"),new ha("ir_to_pc")),new Vc(new $a("IR:OPR"),new pa("IR:2","PC:2")),(new la).thenWaitFor(qc).endstep()],Ea=[new Vc(new Ui("IR:OPR"),new Wc("ir_to_pc"),new ha("ir_to_pc")).condition(Ii),new Vc(new $a("IR:OPR"),new pa("IR:2","PC:2")).condition(Ii),(new la).condition(Ii).thenWaitFor(qc).endstep()],Na=[new Vc(new Ui("IR:OPR"),new Wc("ir_to_pc"),new ha("ir_to_pc")).condition(Li(Ii)),new Vc(new $a("IR:OPR"),new pa("IR:2","PC:2")).condition(Li(Ii)),(new la).condition(Li(Ii)).thenWaitFor(qc).endstep()],Ia=[new Vc(new Ui("IR:OPR"),new Wc("ir_to_pc"),new ha("ir_to_pc")).condition(Ti),new Vc(new $a("IR:OPR"),new pa("IR:2","PC:2")).condition(Ti),(new la).condition(Ti).thenWaitFor(qc).endstep()],Ta=[new Vc(new Ui("IR:OPR"),new Wc("ir_to_pc"),new ha("ir_to_pc")).condition(Li(Ti)),new Vc(new $a("IR:OPR"),new pa("IR:2","PC:2")).condition(Li(Ti)),(new la).condition(Li(Ti)).thenWaitFor(qc).endstep()],Ca=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Yt(e,t),e.prototype.action=function(){return te(this,void 0,void 0,(function(){var t,e,n,s;return ee(this,(function(r){switch(t=l(Vo.aluOperation),e=l(Vo.alu1).signed(),n=l(Vo.alu2).signed(),t){case"!":s=~n;break;case"&":s=e&n;break;case"*":s=e*n;break;case"+":s=e+n;break;case"-":s=e-n;break;case"/":if(0===n)throw new Error("Division by zero");s=e/n;break;case"=":s=n;break;default:throw new Error('Unexpected ALU operation: "'.concat(t,'"'))}return Vo.aluResult.set(new yn(16,s)),[2]}))}))},e}(oa),Oa=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Yt(e,t),e.prototype.action=function(){return te(this,void 0,void 0,(function(){var t,e,n,s,r;return ee(this,(function(o){switch(o.label){case 0:return t=l(Vo.accumulator).signed(),e=l(Vo.zeroFlag),n=l(Vo.negativeFlag),r=t<0,(s=0===t)===e||r===n?[3,2]:(Vo.zeroFlag.set(s),Vo.negativeFlag.set(r),[4,Promise.all([l(Qt).flash("SW:Z"),l(Qt).flash("SW:N")])]);case 1:return o.sent(),[3,6];case 2:return s===e?[3,4]:(Vo.zeroFlag.set(s),[4,l(Qt).flash("SW:Z")]);case 3:o.sent(),o.label=4;case 4:return r===n?[3,6]:(Vo.negativeFlag.set(r),[4,l(Qt).flash("SW:N")]);case 5:o.sent(),o.label=6;case 6:return[2]}}))}))},e}(oa),La=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Yt(e,t),e.prototype.action=function(){return te(this,void 0,void 0,(function(){return ee(this,(function(t){switch(t.label){case 0:return Vo.accumulator.set(l(Jc)),[4,l(Qt).flash("ACC")];case 1:return t.sent(),[2]}}))}))},e}(oa),Ra=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Yt(e,t),e.prototype.action=function(){return te(this,void 0,void 0,(function(){return ee(this,(function(t){return Vo.isHalting.set(!0),[2]}))}))},e}(oa),Ua=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Yt(e,t),e.prototype.action=function(){return te(this,void 0,void 0,(function(){var t,e,n,s,r,o;return ee(this,(function(i){switch(i.label){case 0:return t=l(Vo.alu1),e=l(Vo.alu2),n=l(Vo.zeroFlag),s=l(Vo.negativeFlag),o=e>t,(r=e===t)===n||o===s?[3,2]:(Vo.zeroFlag.set(r),Vo.negativeFlag.set(o),[4,Promise.all([l(Qt).flash("SW:Z"),l(Qt).flash("SW:N")])]);case 1:return i.sent(),[3,6];case 2:return r===n?[3,4]:(Vo.zeroFlag.set(r),[4,l(Qt).flash("SW:Z")]);case 3:i.sent(),i.label=4;case 4:return o===s?[3,6]:(Vo.negativeFlag.set(o),[4,l(Qt).flash("SW:N")]);case 5:i.sent(),i.label=6;case 6:return[2]}}))}))},e}(oa),Da=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Yt(e,t),e}(Ni),Pa=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Yt(e,t),e.prototype.action=function(){return te(this,void 0,void 0,(function(){var t,e;return ee(this,(function(n){switch(n.label){case 0:return t=l(na).unsigned(),e=Gi.read(t).symbolicOpcode,/^[A-Z]+$/.test(e)&&"NOP"!==e?Gi.write(t,Ro(l(Gc).toBinaryString())):Gi.write(t,Lo(l(Gc).signed().toString())),[4,l(Pt).flashContent(t)];case 1:return n.sent(),[2]}}))}))},e}(Da);var Qa=Dt(!1),Ma=!1,Ba=!1,Fa=!1,ja=!1,Ka="ENQUEUING_FETCH",Wa=[];function qa(){return te(this,void 0,void 0,(function(){var t;return ee(this,(function(e){switch(e.label){case 0:return Ja()||!Xa()?[3,2]:[4,(t=Wa.shift()).execute()];case 1:return e.sent(),Ba&&t.doesEndStep()&&Ya(!1),[3,0];case 2:return[2]}}))}))}function Ha(){za(!0),Ya(!1),Za(!1),Ei.info("Execution - START","EXECUTION")}function Va(){za(!1),Ya(!1),Za(!1),Ei.info("Execution - PAUSE","EXECUTION")}function Ga(){Va(),Vo.isHalting.set(!1),Vo.isJumping.set(!1),Ka="ENQUEUING_FETCH",Wa=[],Ei.info("Execution - RESET","EXECUTION")}function Xa(){return Ma||Ba||Fa}function Ja(){return 0===Wa.length}function za(t){Ma=t,Qa.set(Ma||Ba||Fa)}function Ya(t){Ba=t,Qa.set(Ma||Ba||Fa)}function Za(t){Fa=t,Qa.set(Ma||Ba||Fa)}setInterval((function(){return te(this,void 0,void 0,(function(){var t;return ee(this,(function(e){switch(e.label){case 0:if(ja||!Xa())return[2];ja=!0,e.label=1;case 1:switch(e.trys.push([1,12,13,14]),Ka){case"ENQUEUING_FETCH":return[3,2];case"EXECUTING_FETCH":return[3,3];case"ENQUEUING_INSTRUCTION":return[3,5];case"EXECUTING_INSTRUCTION":return[3,6];case"ENQUEUEING_PC_INCREMENT":return[3,8];case"EXECUTING_PC_INCREMENT":return[3,9]}return[3,11];case 2:return Wa.push.apply(Wa,wa),Ka="EXECUTING_FETCH",[3,11];case 3:return[4,qa()];case 4:return e.sent(),Ja()&&(Ka="ENQUEUING_INSTRUCTION"),[3,11];case 5:return Wa.push.apply(Wa,function(t){if(!t.opcode)throw new Error("Invalid opcode");var e=[];switch(t.opcode.symbolic){case"ADD":case"SUB":case"MUL":case"DIV":case"AND":case"NOT":e.push.apply(e,ne(ne(ne(ne(ne([],ba,!1),va,!1),xa,!1),ka(t.immediateFlag()),!1),[new Ca,new Vc(new $a("ALU:RES"),new pa("ALU:4","ACC:2"),new Wc("execute"),new ha("execute")),(new La).thenWaitFor(qc).endstep(),new Vc(new pa("ALU:3","SW:1"),new Wc("alu_to_sw"),new ha("alu_to_sw")),(new Oa).thenWaitFor(qc).endstep()],!1));break;case"NOT":e.push.apply(e,ne(ne(ne(ne([],ba,!1),va,!1),ka(t.immediateFlag()),!1),[new Ca,new Vc(new $a("ALU:RES"),new pa("ALU:4","ACC:2"),new Wc("execute"),new ha("execute")),(new La).thenWaitFor(qc).endstep(),new Vc(new pa("ALU:3","SW:1"),new Wc("alu_to_sw"),new ha("alu_to_sw")),(new Oa).thenWaitFor(qc).endstep()],!1));break;case"CMP":e.push.apply(e,ne(ne(ne(ne(ne([],ba,!1),va,!1),xa,!1),ka(t.immediateFlag()),!1),[new Vc(new pa("ALU:3","SW:1"),new Wc("alu_to_sw"),new ha("alu_to_sw")),(new Ua).thenWaitFor(qc).endstep()],!1));break;case"LOD":e.push.apply(e,ne(ne(ne(ne([],ba,!1),va,!1),ka(t.immediateFlag()),!1),[new Ca,new Vc(new $a("ALU:RES"),new pa("ALU:4","ACC:2"),new Wc("execute"),new ha("execute")),(new La).thenWaitFor(qc).endstep()],!1));break;case"STO":e.push(new Vc(new $a("IR:OPR"),new pa("IR:2","RAM:ADD"),new Wc("ir_to_ram"),new ha("ir_to_ram")),new da("ADDRESS").thenWaitFor(qc).endstep(),new Vc(new Ui("ACC"),new Wc("acc_to_ram"),new ha("acc_to_ram")),new Vc(new $a("ACC"),new pa("ACC:1","RAM:DATA")).thenWaitFor(qc).endstep(),new Vc(new pa("CU:3","RAM:CTRL"),new Wc("memory_write"),new ha("memory_write")).thenWaitFor(qc).endstep(),new Vc(new Pa,new Wc("acc_stored_to_ram"),new ha("acc_stored_to_ram")).thenWaitFor(qc).endstep());break;case"JMP":e.push.apply(e,Aa);break;case"JZ":e.push.apply(e,ne([new Ui("SW:Z")],Ea,!1));break;case"JNZ":e.push.apply(e,ne([new Ui("SW:Z")],Na,!1));break;case"JN":e.push.apply(e,ne([new Ui("SW:N")],Ia,!1));break;case"JNN":e.push.apply(e,ne([new Ui("SW:N")],Ta,!1));break;case"NOP":e.push();break;case"HLT":e.push(new Ra);break;default:throw new Error('Unrecognized opcode: "'.concat(t.opcode.symbolic,'"'))}return e}(l(Vo.instructionRegister))),Ei.info('Executing instruction "'.concat(l(Vo.instructionRegister).symbolic(),'"'),"EXECUTION"),Ka="EXECUTING_INSTRUCTION",[3,11];case 6:return[4,qa()];case 7:return e.sent(),Ja()&&(l(Vo.programCounter).unsigned()!==hn||l(Vo.isJumping)||Vo.isHalting.set(!0),l(Vo.isJumping)?(Vo.isJumping.set(!1),Ka="ENQUEUING_FETCH",Fa&&Za(!1)):Ka="ENQUEUEING_PC_INCREMENT"),[3,11];case 8:return Wa.push.apply(Wa,ya),Ka="EXECUTING_PC_INCREMENT",[3,11];case 9:return[4,qa()];case 10:return e.sent(),Fa&&(Za(!1),Vo.isHalting.set(!0)),Ja()&&(Ka="ENQUEUING_FETCH"),[3,11];case 11:return[3,14];case 12:return t=e.sent(),Vo.isHalting.set(!0),l(jt).error(t.message),Ei.error(t,"EXECUTION",t.isChecked),[3,14];case 13:return l(Vo.isHalting)&&Ga(),ja=!1,[7];case 14:return[2]}}))}))}),50);var tl={start:Ha,pause:Va,toggle:function(){l(Qa)?Va():Ha()},step:function(){za(!1),Ya(!0),Za(!1),Ei.info("Execution - STEP","EXECUTION")},instruction:function(){za(!1),Ya(!1),Za(!0),Ei.info("Execution - INSTRUCTION","EXECUTION")},reset:Ga};function el(t){let e,n,s,r,i;const c=t[3].default,a=f(c,t,t[2],null);return{c(){e=L("button"),a&&a.c(),M(e,"class",n="text-white border border-white px-2 rounded-md hover:text-black hover:bg-white transition-colors disabled:brightness-[.6] disabled:cursor-default active:brightness-90 "+t[1].class),e.disabled=t[0]},m(n,o){T(n,e,o),a&&a.m(e,null),s=!0,r||(i=[Q(e,"click",t[4]),Q(e,"focus",t[5]),Q(e,"focusout",t[6]),Q(e,"mouseenter",t[7]),Q(e,"mouseleave",t[8]),Q(e,"mouseover",t[9])],r=!0)},p(t,[r]){a&&a.p&&(!s||4&r)&&h(a,c,t,t[2],s?p(c,t[2],r,null):m(t[2]),null),(!s||2&r&&n!==(n="text-white border border-white px-2 rounded-md hover:text-black hover:bg-white transition-colors disabled:brightness-[.6] disabled:cursor-default active:brightness-90 "+t[1].class))&&M(e,"class",n),(!s||1&r)&&(e.disabled=t[0])},i(t){s||(xt(a,t),s=!0)},o(t){kt(a,t),s=!1},d(t){t&&C(e),a&&a.d(t),r=!1,o(i)}}}function nl(t,e,s){const r=["disabled"];let o=$(e,r),{$$slots:i={},$$scope:c}=e,{disabled:a=!1}=e;return t.$$set=t=>{e=n(n({},e),g(t)),s(1,o=$(e,r)),"disabled"in t&&s(0,a=t.disabled),"$$scope"in t&&s(2,c=t.$$scope)},[a,o,c,i,function(e){nt.call(this,t,e)},function(e){nt.call(this,t,e)},function(e){nt.call(this,t,e)},function(e){nt.call(this,t,e)},function(e){nt.call(this,t,e)},function(e){nt.call(this,t,e)}]}class sl extends Rt{constructor(t){super(),Lt(this,t,nl,el,c,{disabled:0})}}function rl(t){let e,n,s,r,i;const c=t[5].default,a=f(c,t,t[4],null);return{c(){e=L("button"),a&&a.c(),M(e,"class",n="text-white border border-white px-2 rounded-md transition-colors disabled:brightness-[.6] disabled:cursor-default active:brightness-90 "+(t[0]?"text-black bg-white":"")+" "+t[3].class),e.disabled=t[1]},m(n,o){T(n,e,o),a&&a.m(e,null),s=!0,r||(i=[Q(e,"click",t[2]),Q(e,"focus",t[6]),Q(e,"focusout",t[7]),Q(e,"mouseenter",t[8]),Q(e,"mouseleave",t[9]),Q(e,"mouseover",t[10])],r=!0)},p(t,[r]){a&&a.p&&(!s||16&r)&&h(a,c,t,t[4],s?p(c,t[4],r,null):m(t[4]),null),(!s||9&r&&n!==(n="text-white border border-white px-2 rounded-md transition-colors disabled:brightness-[.6] disabled:cursor-default active:brightness-90 "+(t[0]?"text-black bg-white":"")+" "+t[3].class))&&M(e,"class",n),(!s||2&r)&&(e.disabled=t[1])},i(t){s||(xt(a,t),s=!0)},o(t){kt(a,t),s=!1},d(t){t&&C(e),a&&a.d(t),r=!1,o(i)}}}function ol(t,e,s){const r=["disabled","checked"];let o=$(e,r),{$$slots:i={},$$scope:c}=e,{disabled:a=!1}=e,{checked:l=!1}=e;const u=et();return t.$$set=t=>{e=n(n({},e),g(t)),s(3,o=$(e,r)),"disabled"in t&&s(1,a=t.disabled),"checked"in t&&s(0,l=t.checked),"$$scope"in t&&s(4,c=t.$$scope)},[l,a,function(t){s(0,l=!l),u("click",t)},o,c,i,function(e){nt.call(this,t,e)},function(e){nt.call(this,t,e)},function(e){nt.call(this,t,e)},function(e){nt.call(this,t,e)},function(e){nt.call(this,t,e)}]}class il extends Rt{constructor(t){super(),Lt(this,t,ol,rl,c,{disabled:1,checked:0})}}function cl(e){let n,s,r,i;return{c(){n=L("input"),M(n,"class",s="bg-transparent border-2 border-white text-white rounded-md px-1 disabled:brightness-[.6] "+e[4].class),M(n,"type","text"),M(n,"placeholder",e[1]),n.disabled=e[2]},m(t,s){T(t,n,s),j(n,e[0]),r||(i=[Q(n,"input",e[6]),Q(n,"change",e[7]),Q(n,"focus",e[8]),Q(n,"focusout",e[9]),Q(n,"mouseenter",e[10]),Q(n,"mouseleave",e[11]),Q(n,"mouseover",e[12]),Q(n,"input",e[13]),b(e[3].call(null,n))],r=!0)},p(t,[e]){16&e&&s!==(s="bg-transparent border-2 border-white text-white rounded-md px-1 disabled:brightness-[.6] "+t[4].class)&&M(n,"class",s),2&e&&M(n,"placeholder",t[1]),4&e&&(n.disabled=t[2]),1&e&&n.value!==t[0]&&j(n,t[0])},i:t,o:t,d(t){t&&C(n),r=!1,o(i)}}}function al(t,e,s){const r=["value","placeholder","disabled","type"];let o=$(e,r),{value:i=""}=e,{placeholder:c=""}=e,{disabled:a=!1}=e,{type:l="text"}=e;return t.$$set=t=>{e=n(n({},e),g(t)),s(4,o=$(e,r)),"value"in t&&s(0,i=t.value),"placeholder"in t&&s(1,c=t.placeholder),"disabled"in t&&s(2,a=t.disabled),"type"in t&&s(5,l=t.type)},[i,c,a,function(t){t.type=l},o,l,function(e){nt.call(this,t,e)},function(e){nt.call(this,t,e)},function(e){nt.call(this,t,e)},function(e){nt.call(this,t,e)},function(e){nt.call(this,t,e)},function(e){nt.call(this,t,e)},function(e){nt.call(this,t,e)},function(){i=this.value,s(0,i)}]}class ll extends Rt{constructor(t){super(),Lt(this,t,al,cl,c,{value:0,placeholder:1,disabled:2,type:5})}}function ul(t,e,n){const s=t.slice();return s[13]=e[n],s}function fl(t){let e,n;return{c(){e=L("option"),n=U(t[1]),M(e,"class","text-black bg-white"),e.__value="",e.value=e.__value,e.selected=!0,e.disabled=!0},m(t,s){T(t,e,s),E(e,n)},p(t,e){2&e&&F(n,t[1])},d(t){t&&C(e)}}}function dl(t){let e,n,s,r=t[13]+"";return{c(){e=L("option"),n=U(r),M(e,"class","text-black bg-white"),e.__value=s=t[13],e.value=e.__value},m(t,s){T(t,e,s),E(e,n)},p(t,o){8&o&&r!==(r=t[13]+"")&&F(n,r),8&o&&s!==(s=t[13])&&(e.__value=s,e.value=e.__value)},d(t){t&&C(e)}}}function pl(e){let n,s,r,i,c,a=""!==e[1]&&fl(e),l=e[3],u=[];for(let t=0;t<l.length;t+=1)u[t]=dl(ul(e,l,t));return{c(){n=L("select"),a&&a.c(),s=P();for(let t=0;t<u.length;t+=1)u[t].c();M(n,"class",r="cursor-pointer bg-transparent border-2 border-white text-white rounded-md px-1 disabled:brightness-[.6] w-fit "+e[4].class),n.disabled=e[2],void 0===e[0]&&lt((()=>e[12].call(n)))},m(t,r){T(t,n,r),a&&a.m(n,null),E(n,s);for(let t=0;t<u.length;t+=1)u[t].m(n,null);W(n,e[0]),i||(c=[Q(n,"input",e[5]),Q(n,"change",e[6]),Q(n,"focus",e[7]),Q(n,"focusout",e[8]),Q(n,"mouseenter",e[9]),Q(n,"mouseleave",e[10]),Q(n,"mouseover",e[11]),Q(n,"change",e[12])],i=!0)},p(t,[e]){if(""!==t[1]?a?a.p(t,e):(a=fl(t),a.c(),a.m(n,s)):a&&(a.d(1),a=null),8&e){let s;for(l=t[3],s=0;s<l.length;s+=1){const r=ul(t,l,s);u[s]?u[s].p(r,e):(u[s]=dl(r),u[s].c(),u[s].m(n,null))}for(;s<u.length;s+=1)u[s].d(1);u.length=l.length}16&e&&r!==(r="cursor-pointer bg-transparent border-2 border-white text-white rounded-md px-1 disabled:brightness-[.6] w-fit "+t[4].class)&&M(n,"class",r),4&e&&(n.disabled=t[2]),9&e&&W(n,t[0])},i:t,o:t,d(t){t&&C(n),a&&a.d(),O(u,t),i=!1,o(c)}}}function hl(t,e,s){const r=["value","placeholder","disabled","options"];let o=$(e,r),{value:i=""}=e,{placeholder:c=""}=e,{disabled:a=!1}=e,{options:l=[]}=e;return t.$$set=t=>{e=n(n({},e),g(t)),s(4,o=$(e,r)),"value"in t&&s(0,i=t.value),"placeholder"in t&&s(1,c=t.placeholder),"disabled"in t&&s(2,a=t.disabled),"options"in t&&s(3,l=t.options)},[i,c,a,l,o,function(e){nt.call(this,t,e)},function(e){nt.call(this,t,e)},function(e){nt.call(this,t,e)},function(e){nt.call(this,t,e)},function(e){nt.call(this,t,e)},function(e){nt.call(this,t,e)},function(e){nt.call(this,t,e)},function(){i=q(this),s(0,i),s(3,l)}]}class ml extends Rt{constructor(t){super(),Lt(this,t,hl,pl,c,{value:0,placeholder:1,disabled:2,options:3})}}function gl(t){let e,n;return{c(){e=L("p"),n=U(t[4]),M(e,"class","text-red-500")},m(t,s){T(t,e,s),E(e,n)},p(t,e){16&e&&F(n,t[4])},d(t){t&&C(e)}}}function $l(t){let e;return{c(){e=U("#")},m(t,n){T(t,e,n)},d(t){t&&C(e)}}}function yl(t){let e,n,s,r,o,i,c,a,l,u,f,d,p=null!==t[4]&&gl(t);function h(e){t[6](e)}let m={options:Ze.map(wl)};function g(e){t[7](e)}void 0!==t[0]&&(m.value=t[0]),r=new ml({props:m}),rt.push((()=>Nt(r,"value",h)));let $={disabled:!t[3].takesOperand||!t[3].takesImmediate,$$slots:{default:[$l]},$$scope:{ctx:t}};function y(e){t[8](e)}void 0!==t[2]&&($.checked=t[2]),c=new il({props:$}),rt.push((()=>Nt(c,"checked",g)));let w={class:"w-20",type:"number",disabled:!t[3].takesOperand};return void 0!==t[1]&&(w.value=t[1]),u=new ll({props:w}),rt.push((()=>Nt(u,"value",y))),{c(){e=L("div"),p&&p.c(),n=D(),s=L("div"),It(r.$$.fragment),i=D(),It(c.$$.fragment),l=D(),It(u.$$.fragment),M(s,"class","flex items-center justify-center gap-1"),M(e,"class","flex flex-col items-center justify-center gap-1")},m(t,o){T(t,e,o),p&&p.m(e,null),E(e,n),E(e,s),Tt(r,s,null),E(s,i),Tt(c,s,null),E(s,l),Tt(u,s,null),d=!0},p(t,[s]){null!==t[4]?p?p.p(t,s):(p=gl(t),p.c(),p.m(e,n)):p&&(p.d(1),p=null);const i={};!o&&1&s&&(o=!0,i.value=t[0],ut((()=>o=!1))),r.$set(i);const l={};8&s&&(l.disabled=!t[3].takesOperand||!t[3].takesImmediate),512&s&&(l.$$scope={dirty:s,ctx:t}),!a&&4&s&&(a=!0,l.checked=t[2],ut((()=>a=!1))),c.$set(l);const d={};8&s&&(d.disabled=!t[3].takesOperand),!f&&2&s&&(f=!0,d.value=t[1],ut((()=>f=!1))),u.$set(d)},i(t){d||(xt(r.$$.fragment,t),xt(c.$$.fragment,t),xt(u.$$.fragment,t),d=!0)},o(t){kt(r.$$.fragment,t),kt(c.$$.fragment,t),kt(u.$$.fragment,t),d=!1},d(t){t&&C(e),p&&p.d(),Ct(r),Ct(c),Ct(u)}}}const wl=t=>t.symbolic;function bl(t,e,n){let s,{value:r=Lo("NOP")}=e,o="NOP",i=0,c=!1,a=null;return t.$$set=t=>{"value"in t&&n(5,r=t.value)},t.$$.update=()=>{if(1&t.$$.dirty&&n(3,s=tn(o)),15&t.$$.dirty){n(4,a=null);try{s.takesOperand?n(5,r=c&&s.takesImmediate?Lo(`${o} #${i}`):Lo(`${o} ${i}`)):n(5,r=Lo(o))}catch(t){n(4,a=t.message)}}},[o,i,c,s,a,r,function(t){o=t,n(0,o)},function(t){c=t,n(2,c)},function(t){i=t,n(1,i)}]}class vl extends Rt{constructor(t){super(),Lt(this,t,bl,yl,c,{value:5})}}const xl=t=>({}),kl=t=>({}),_l=t=>({}),Sl=t=>({});function Al(t){let e,n,s,r,o,i,c,a;const l=t[2].inputs,u=f(l,t,t[1],Sl),d=t[2].buttons,g=f(d,t,t[1],kl);return{c(){e=L("div"),n=L("h2"),s=U(t[0]),r=D(),o=L("div"),u&&u.c(),i=D(),c=L("div"),g&&g.c(),M(n,"class","text-lg mx-auto"),M(o,"class","w-full flex flex-col items-center gap-0.5"),M(c,"class","w-full flex flex-wrap justify-center gap-1"),M(e,"class","flex flex-col items-center gap-1.5 max-w-[250px]")},m(t,l){T(t,e,l),E(e,n),E(n,s),E(e,r),E(e,o),u&&u.m(o,null),E(e,i),E(e,c),g&&g.m(c,null),a=!0},p(t,[e]){(!a||1&e)&&F(s,t[0]),u&&u.p&&(!a||2&e)&&h(u,l,t,t[1],a?p(l,t[1],e,_l):m(t[1]),Sl),g&&g.p&&(!a||2&e)&&h(g,d,t,t[1],a?p(d,t[1],e,xl):m(t[1]),kl)},i(t){a||(xt(u,t),xt(g,t),a=!0)},o(t){kt(u,t),kt(g,t),a=!1},d(t){t&&C(e),u&&u.d(t),g&&g.d(t)}}}function El(t,e,n){let{$$slots:s={},$$scope:r}=e,{title:o=""}=e;return t.$$set=t=>{"title"in t&&n(0,o=t.title),"$$scope"in t&&n(1,r=t.$$scope)},[o,r,s]}class Nl extends Rt{constructor(t){super(),Lt(this,t,El,Al,c,{title:0})}}function Il(t){let e,n,s,r,o,i,c,a,l,u,f,d,p,h,m,g,$,y,w,b,v,x,k,_,S,A,N,I,O;return a=new Nl({props:{title:"Execution",$$slots:{buttons:[Pl]},$$scope:{ctx:t}}}),u=new Nl({props:{title:"CPU",$$slots:{buttons:[Xl],inputs:[Ml]},$$scope:{ctx:t}}}),d=new Nl({props:{title:"CPU ANIMATION",$$slots:{buttons:[Yl],inputs:[Jl]},$$scope:{ctx:t}}}),h=new Nl({props:{title:"RAM",$$slots:{buttons:[iu],inputs:[Zl]},$$scope:{ctx:t}}}),g=new Nl({props:{title:"MESSAGE",$$slots:{buttons:[pu],inputs:[cu]},$$scope:{ctx:t}}}),y=new Nl({props:{title:"WIRES",$$slots:{buttons:[gu],inputs:[hu]},$$scope:{ctx:t}}}),b=new Nl({props:{title:"NODES",$$slots:{buttons:[bu]},$$scope:{ctx:t}}}),x=new Nl({props:{title:"DISPLAY",$$slots:{buttons:[_u],inputs:[vu]},$$scope:{ctx:t}}}),_=new Nl({props:{title:"TTS",$$slots:{buttons:[Nu],inputs:[Su]},$$scope:{ctx:t}}}),A=new Nl({props:{title:"Local Storage",$$slots:{buttons:[Ou],inputs:[Iu]},$$scope:{ctx:t}}}),{c(){e=L("div"),n=L("div"),s=L("h1"),s.textContent="Debugger",r=D(),o=L("button"),o.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" class="h-7 w-7 fill-white"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>',i=D(),c=L("div"),It(a.$$.fragment),l=D(),It(u.$$.fragment),f=D(),It(d.$$.fragment),p=D(),It(h.$$.fragment),m=D(),It(g.$$.fragment),$=D(),It(y.$$.fragment),w=D(),It(b.$$.fragment),v=D(),It(x.$$.fragment),k=D(),It(_.$$.fragment),S=D(),It(A.$$.fragment),M(s,"class","text-xl"),M(o,"title","Close debugger"),M(n,"class","w-full flex flex-wrap items-center justify-between p-4"),M(c,"class","w-full overflow-y-auto p-5 flex flex-wrap gap-8"),M(e,"class","fixed top-0 left-0 w-screen h-screen bg-black/50 text-white")},m(C,L){T(C,e,L),E(e,n),E(n,s),E(n,r),E(n,o),E(e,i),E(e,c),Tt(a,c,null),E(c,l),Tt(u,c,null),E(c,f),Tt(d,c,null),E(c,p),Tt(h,c,null),E(c,m),Tt(g,c,null),E(c,$),Tt(y,c,null),E(c,w),Tt(b,c,null),E(c,v),Tt(x,c,null),E(c,k),Tt(_,c,null),E(c,S),Tt(A,c,null),N=!0,I||(O=Q(o,"click",t[27]),I=!0)},p(t,e){const n={};65536&e[2]&&(n.$$scope={dirty:e,ctx:t}),a.$set(n);const s={};15&e[0]|65536&e[2]&&(s.$$scope={dirty:e,ctx:t}),u.$set(s);const r={};16400&e[0]|65536&e[2]&&(r.$$scope={dirty:e,ctx:t}),d.$set(r);const o={};98400&e[0]|65536&e[2]&&(o.$$scope={dirty:e,ctx:t}),h.$set(o);const i={};131200&e[0]|65536&e[2]&&(i.$$scope={dirty:e,ctx:t}),g.$set(i);const c={};262912&e[0]|65536&e[2]&&(c.$$scope={dirty:e,ctx:t}),y.$set(c);const l={};3670016&e[0]|65536&e[2]&&(l.$$scope={dirty:e,ctx:t}),b.$set(l);const f={};29360128&e[0]|65536&e[2]&&(f.$$scope={dirty:e,ctx:t}),x.$set(f);const p={};33555456&e[0]|65536&e[2]&&(p.$$scope={dirty:e,ctx:t}),_.$set(p);const m={};6144&e[0]|65536&e[2]&&(m.$$scope={dirty:e,ctx:t}),A.$set(m)},i(t){N||(xt(a.$$.fragment,t),xt(u.$$.fragment,t),xt(d.$$.fragment,t),xt(h.$$.fragment,t),xt(g.$$.fragment,t),xt(y.$$.fragment,t),xt(b.$$.fragment,t),xt(x.$$.fragment,t),xt(_.$$.fragment,t),xt(A.$$.fragment,t),N=!0)},o(t){kt(a.$$.fragment,t),kt(u.$$.fragment,t),kt(d.$$.fragment,t),kt(h.$$.fragment,t),kt(g.$$.fragment,t),kt(y.$$.fragment,t),kt(b.$$.fragment,t),kt(x.$$.fragment,t),kt(_.$$.fragment,t),kt(A.$$.fragment,t),N=!1},d(t){t&&C(e),Ct(a),Ct(u),Ct(d),Ct(h),Ct(g),Ct(y),Ct(b),Ct(x),Ct(_),Ct(A),I=!1,O()}}}function Tl(t){let e;return{c(){e=U("Reset")},m(t,n){T(t,e,n)},d(t){t&&C(e)}}}function Cl(t){let e;return{c(){e=U("Play")},m(t,n){T(t,e,n)},d(t){t&&C(e)}}}function Ol(t){let e;return{c(){e=U("Pause")},m(t,n){T(t,e,n)},d(t){t&&C(e)}}}function Ll(t){let e;return{c(){e=U("Step")},m(t,n){T(t,e,n)},d(t){t&&C(e)}}}function Rl(t){let e;return{c(){e=U("Instruction")},m(t,n){T(t,e,n)},d(t){t&&C(e)}}}function Ul(t){let e;return{c(){e=U("Skip Step")},m(t,n){T(t,e,n)},d(t){t&&C(e)}}}function Dl(t){let e;return{c(){e=U("Skip Instruction")},m(t,n){T(t,e,n)},d(t){t&&C(e)}}}function Pl(t){let e,n,s,r,o,i,c,a,l,u,f,d,p,h;return e=new sl({props:{$$slots:{default:[Tl]},$$scope:{ctx:t}}}),e.$on("click",t[28]),s=new sl({props:{$$slots:{default:[Cl]},$$scope:{ctx:t}}}),s.$on("click",t[29]),o=new sl({props:{$$slots:{default:[Ol]},$$scope:{ctx:t}}}),o.$on("click",t[30]),c=new sl({props:{$$slots:{default:[Ll]},$$scope:{ctx:t}}}),c.$on("click",t[31]),l=new sl({props:{$$slots:{default:[Rl]},$$scope:{ctx:t}}}),l.$on("click",t[32]),f=new sl({props:{disabled:!0,$$slots:{default:[Ul]},$$scope:{ctx:t}}}),p=new sl({props:{disabled:!0,$$slots:{default:[Dl]},$$scope:{ctx:t}}}),{c(){It(e.$$.fragment),n=D(),It(s.$$.fragment),r=D(),It(o.$$.fragment),i=D(),It(c.$$.fragment),a=D(),It(l.$$.fragment),u=D(),It(f.$$.fragment),d=D(),It(p.$$.fragment)},m(t,m){Tt(e,t,m),T(t,n,m),Tt(s,t,m),T(t,r,m),Tt(o,t,m),T(t,i,m),Tt(c,t,m),T(t,a,m),Tt(l,t,m),T(t,u,m),Tt(f,t,m),T(t,d,m),Tt(p,t,m),h=!0},p(t,n){const r={};65536&n[2]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r);const i={};65536&n[2]&&(i.$$scope={dirty:n,ctx:t}),s.$set(i);const a={};65536&n[2]&&(a.$$scope={dirty:n,ctx:t}),o.$set(a);const u={};65536&n[2]&&(u.$$scope={dirty:n,ctx:t}),c.$set(u);const d={};65536&n[2]&&(d.$$scope={dirty:n,ctx:t}),l.$set(d);const h={};65536&n[2]&&(h.$$scope={dirty:n,ctx:t}),f.$set(h);const m={};65536&n[2]&&(m.$$scope={dirty:n,ctx:t}),p.$set(m)},i(t){h||(xt(e.$$.fragment,t),xt(s.$$.fragment,t),xt(o.$$.fragment,t),xt(c.$$.fragment,t),xt(l.$$.fragment,t),xt(f.$$.fragment,t),xt(p.$$.fragment,t),h=!0)},o(t){kt(e.$$.fragment,t),kt(s.$$.fragment,t),kt(o.$$.fragment,t),kt(c.$$.fragment,t),kt(l.$$.fragment,t),kt(f.$$.fragment,t),kt(p.$$.fragment,t),h=!1},d(t){Ct(e,t),t&&C(n),Ct(s,t),t&&C(r),Ct(o,t),t&&C(i),Ct(c,t),t&&C(a),Ct(l,t),t&&C(u),Ct(f,t),t&&C(d),Ct(p,t)}}}function Ql(t){let e;return{c(){e=U("Flag")},m(t,n){T(t,e,n)},d(t){t&&C(e)}}}function Ml(t){let e,n,s,r,o,i,c,a,l,u,f,d,p;function h(e){t[42](e)}let m={};function g(e){t[43](e)}void 0!==t[0]&&(m.value=t[0]),e=new vl({props:m}),rt.push((()=>Nt(e,"value",h)));let $={type:"number",placeholder:"Value"};function y(e){t[44](e)}void 0!==t[1]&&($.value=t[1]),r=new ll({props:$}),rt.push((()=>Nt(r,"value",g)));let w={placeholder:"Operation",options:["+","-","*","/",":","!","&","="]};function b(e){t[45](e)}void 0!==t[2]&&(w.value=t[2]),a=new ml({props:w}),rt.push((()=>Nt(a,"value",y)));let v={$$slots:{default:[Ql]},$$scope:{ctx:t}};return void 0!==t[3]&&(v.checked=t[3]),f=new il({props:v}),rt.push((()=>Nt(f,"checked",b))),{c(){It(e.$$.fragment),s=D(),It(r.$$.fragment),i=D(),c=L("div"),It(a.$$.fragment),u=D(),It(f.$$.fragment),M(c,"class","flex gap-1")},m(t,n){Tt(e,t,n),T(t,s,n),Tt(r,t,n),T(t,i,n),T(t,c,n),Tt(a,c,null),E(c,u),Tt(f,c,null),p=!0},p(t,s){const i={};!n&&1&s[0]&&(n=!0,i.value=t[0],ut((()=>n=!1))),e.$set(i);const c={};!o&&2&s[0]&&(o=!0,c.value=t[1],ut((()=>o=!1))),r.$set(c);const u={};!l&&4&s[0]&&(l=!0,u.value=t[2],ut((()=>l=!1))),a.$set(u);const p={};65536&s[2]&&(p.$$scope={dirty:s,ctx:t}),!d&&8&s[0]&&(d=!0,p.checked=t[3],ut((()=>d=!1))),f.$set(p)},i(t){p||(xt(e.$$.fragment,t),xt(r.$$.fragment,t),xt(a.$$.fragment,t),xt(f.$$.fragment,t),p=!0)},o(t){kt(e.$$.fragment,t),kt(r.$$.fragment,t),kt(a.$$.fragment,t),kt(f.$$.fragment,t),p=!1},d(t){Ct(e,t),t&&C(s),Ct(r,t),t&&C(i),t&&C(c),Ct(a),Ct(f)}}}function Bl(t){let e;return{c(){e=U("Reset")},m(t,n){T(t,e,n)},d(t){t&&C(e)}}}function Fl(t){let e;return{c(){e=U("Set IR")},m(t,n){T(t,e,n)},d(t){t&&C(e)}}}function jl(t){let e;return{c(){e=U("Set PC")},m(t,n){T(t,e,n)},d(t){t&&C(e)}}}function Kl(t){let e;return{c(){e=U("Set ALU:1")},m(t,n){T(t,e,n)},d(t){t&&C(e)}}}function Wl(t){let e;return{c(){e=U("Set ALU:2")},m(t,n){T(t,e,n)},d(t){t&&C(e)}}}function ql(t){let e;return{c(){e=U("Set ALU:OPR")},m(t,n){T(t,e,n)},d(t){t&&C(e)}}}function Hl(t){let e;return{c(){e=U("Set ACC")},m(t,n){T(t,e,n)},d(t){t&&C(e)}}}function Vl(t){let e;return{c(){e=U("Set SW:Z")},m(t,n){T(t,e,n)},d(t){t&&C(e)}}}function Gl(t){let e;return{c(){e=U("Set SW:N")},m(t,n){T(t,e,n)},d(t){t&&C(e)}}}function Xl(t){let e,n,s,r,o,i,c,a,l,u,f,d,p,h,m,g,$,y;return e=new sl({props:{$$slots:{default:[Bl]},$$scope:{ctx:t}}}),e.$on("click",t[33]),s=new sl({props:{$$slots:{default:[Fl]},$$scope:{ctx:t}}}),s.$on("click",t[34]),o=new sl({props:{$$slots:{default:[jl]},$$scope:{ctx:t}}}),o.$on("click",t[35]),c=new sl({props:{$$slots:{default:[Kl]},$$scope:{ctx:t}}}),c.$on("click",t[36]),l=new sl({props:{$$slots:{default:[Wl]},$$scope:{ctx:t}}}),l.$on("click",t[37]),f=new sl({props:{$$slots:{default:[ql]},$$scope:{ctx:t}}}),f.$on("click",t[38]),p=new sl({props:{$$slots:{default:[Hl]},$$scope:{ctx:t}}}),p.$on("click",t[39]),m=new sl({props:{$$slots:{default:[Vl]},$$scope:{ctx:t}}}),m.$on("click",t[40]),$=new sl({props:{$$slots:{default:[Gl]},$$scope:{ctx:t}}}),$.$on("click",t[41]),{c(){It(e.$$.fragment),n=D(),It(s.$$.fragment),r=D(),It(o.$$.fragment),i=D(),It(c.$$.fragment),a=D(),It(l.$$.fragment),u=D(),It(f.$$.fragment),d=D(),It(p.$$.fragment),h=D(),It(m.$$.fragment),g=D(),It($.$$.fragment)},m(t,w){Tt(e,t,w),T(t,n,w),Tt(s,t,w),T(t,r,w),Tt(o,t,w),T(t,i,w),Tt(c,t,w),T(t,a,w),Tt(l,t,w),T(t,u,w),Tt(f,t,w),T(t,d,w),Tt(p,t,w),T(t,h,w),Tt(m,t,w),T(t,g,w),Tt($,t,w),y=!0},p(t,n){const r={};65536&n[2]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r);const i={};65536&n[2]&&(i.$$scope={dirty:n,ctx:t}),s.$set(i);const a={};65536&n[2]&&(a.$$scope={dirty:n,ctx:t}),o.$set(a);const u={};65536&n[2]&&(u.$$scope={dirty:n,ctx:t}),c.$set(u);const d={};65536&n[2]&&(d.$$scope={dirty:n,ctx:t}),l.$set(d);const h={};65536&n[2]&&(h.$$scope={dirty:n,ctx:t}),f.$set(h);const g={};65536&n[2]&&(g.$$scope={dirty:n,ctx:t}),p.$set(g);const y={};65536&n[2]&&(y.$$scope={dirty:n,ctx:t}),m.$set(y);const w={};65536&n[2]&&(w.$$scope={dirty:n,ctx:t}),$.$set(w)},i(t){y||(xt(e.$$.fragment,t),xt(s.$$.fragment,t),xt(o.$$.fragment,t),xt(c.$$.fragment,t),xt(l.$$.fragment,t),xt(f.$$.fragment,t),xt(p.$$.fragment,t),xt(m.$$.fragment,t),xt($.$$.fragment,t),y=!0)},o(t){kt(e.$$.fragment,t),kt(s.$$.fragment,t),kt(o.$$.fragment,t),kt(c.$$.fragment,t),kt(l.$$.fragment,t),kt(f.$$.fragment,t),kt(p.$$.fragment,t),kt(m.$$.fragment,t),kt($.$$.fragment,t),y=!1},d(t){Ct(e,t),t&&C(n),Ct(s,t),t&&C(r),Ct(o,t),t&&C(i),Ct(c,t),t&&C(a),Ct(l,t),t&&C(u),Ct(f,t),t&&C(d),Ct(p,t),t&&C(h),Ct(m,t),t&&C(g),Ct($,t)}}}function Jl(t){let e,n,s;function r(e){t[47](e)}let o={placeholder:"Flashable component",options:t[26]};return void 0!==t[4]&&(o.value=t[4]),e=new ml({props:o}),rt.push((()=>Nt(e,"value",r))),{c(){It(e.$$.fragment)},m(t,n){Tt(e,t,n),s=!0},p(t,s){const r={};!n&&16&s[0]&&(n=!0,r.value=t[4],ut((()=>n=!1))),e.$set(r)},i(t){s||(xt(e.$$.fragment,t),s=!0)},o(t){kt(e.$$.fragment,t),s=!1},d(t){Ct(e,t)}}}function zl(t){let e;return{c(){e=U("Flash")},m(t,n){T(t,e,n)},d(t){t&&C(e)}}}function Yl(t){let e,n;return e=new sl({props:{$$slots:{default:[zl]},$$scope:{ctx:t}}}),e.$on("click",t[46]),{c(){It(e.$$.fragment)},m(t,s){Tt(e,t,s),n=!0},p(t,n){const s={};65536&n[2]&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){n||(xt(e.$$.fragment,t),n=!0)},o(t){kt(e.$$.fragment,t),n=!1},d(t){Ct(e,t)}}}function Zl(t){let e,n,s,r,o,i;function c(e){t[54](e)}let a={type:"number",placeholder:"Address"};function l(e){t[55](e)}void 0!==t[6]&&(a.value=t[6]),e=new ll({props:a}),rt.push((()=>Nt(e,"value",c)));let u={};return void 0!==t[5]&&(u.value=t[5]),r=new vl({props:u}),rt.push((()=>Nt(r,"value",l))),{c(){It(e.$$.fragment),s=D(),It(r.$$.fragment)},m(t,n){Tt(e,t,n),T(t,s,n),Tt(r,t,n),i=!0},p(t,s){const i={};!n&&64&s[0]&&(n=!0,i.value=t[6],ut((()=>n=!1))),e.$set(i);const c={};!o&&32&s[0]&&(o=!0,c.value=t[5],ut((()=>o=!1))),r.$set(c)},i(t){i||(xt(e.$$.fragment,t),xt(r.$$.fragment,t),i=!0)},o(t){kt(e.$$.fragment,t),kt(r.$$.fragment,t),i=!1},d(t){Ct(e,t),t&&C(s),Ct(r,t)}}}function tu(t){let e;return{c(){e=U("Flash address")},m(t,n){T(t,e,n)},d(t){t&&C(e)}}}function eu(t){let e;return{c(){e=U("Flash data")},m(t,n){T(t,e,n)},d(t){t&&C(e)}}}function nu(t){let e;return{c(){e=U("Show address")},m(t,n){T(t,e,n)},d(t){t&&C(e)}}}function su(t){let e;return{c(){e=U("Clear")},m(t,n){T(t,e,n)},d(t){t&&C(e)}}}function ru(t){let e;return{c(){e=U("Write")},m(t,n){T(t,e,n)},d(t){t&&C(e)}}}function ou(t){let e;return{c(){e=U("Dump")},m(t,n){T(t,e,n)},d(t){t&&C(e)}}}function iu(t){let e,n,s,r,o,i,c,a,l,u,f,d;return e=new sl({props:{$$slots:{default:[tu]},$$scope:{ctx:t}}}),e.$on("click",t[48]),s=new sl({props:{$$slots:{default:[eu]},$$scope:{ctx:t}}}),s.$on("click",t[49]),o=new sl({props:{$$slots:{default:[nu]},$$scope:{ctx:t}}}),o.$on("click",t[50]),c=new sl({props:{$$slots:{default:[su]},$$scope:{ctx:t}}}),c.$on("click",t[51]),l=new sl({props:{$$slots:{default:[ru]},$$scope:{ctx:t}}}),l.$on("click",t[52]),f=new sl({props:{$$slots:{default:[ou]},$$scope:{ctx:t}}}),f.$on("click",t[53]),{c(){It(e.$$.fragment),n=D(),It(s.$$.fragment),r=D(),It(o.$$.fragment),i=D(),It(c.$$.fragment),a=D(),It(l.$$.fragment),u=D(),It(f.$$.fragment)},m(t,p){Tt(e,t,p),T(t,n,p),Tt(s,t,p),T(t,r,p),Tt(o,t,p),T(t,i,p),Tt(c,t,p),T(t,a,p),Tt(l,t,p),T(t,u,p),Tt(f,t,p),d=!0},p(t,n){const r={};65536&n[2]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r);const i={};65536&n[2]&&(i.$$scope={dirty:n,ctx:t}),s.$set(i);const a={};65536&n[2]&&(a.$$scope={dirty:n,ctx:t}),o.$set(a);const u={};65536&n[2]&&(u.$$scope={dirty:n,ctx:t}),c.$set(u);const d={};65536&n[2]&&(d.$$scope={dirty:n,ctx:t}),l.$set(d);const p={};65536&n[2]&&(p.$$scope={dirty:n,ctx:t}),f.$set(p)},i(t){d||(xt(e.$$.fragment,t),xt(s.$$.fragment,t),xt(o.$$.fragment,t),xt(c.$$.fragment,t),xt(l.$$.fragment,t),xt(f.$$.fragment,t),d=!0)},o(t){kt(e.$$.fragment,t),kt(s.$$.fragment,t),kt(o.$$.fragment,t),kt(c.$$.fragment,t),kt(l.$$.fragment,t),kt(f.$$.fragment,t),d=!1},d(t){Ct(e,t),t&&C(n),Ct(s,t),t&&C(r),Ct(o,t),t&&C(i),Ct(c,t),t&&C(a),Ct(l,t),t&&C(u),Ct(f,t)}}}function cu(t){let e,n,s;function r(e){t[61](e)}let o={};return void 0!==t[7]&&(o.value=t[7]),e=new ll({props:o}),rt.push((()=>Nt(e,"value",r))),{c(){It(e.$$.fragment)},m(t,n){Tt(e,t,n),s=!0},p(t,s){const r={};!n&&128&s[0]&&(n=!0,r.value=t[7],ut((()=>n=!1))),e.$set(r)},i(t){s||(xt(e.$$.fragment,t),s=!0)},o(t){kt(e.$$.fragment,t),s=!1},d(t){Ct(e,t)}}}function au(t){let e;return{c(){e=U("Error")},m(t,n){T(t,e,n)},d(t){t&&C(e)}}}function lu(t){let e;return{c(){e=U("Warning")},m(t,n){T(t,e,n)},d(t){t&&C(e)}}}function uu(t){let e;return{c(){e=U("Success")},m(t,n){T(t,e,n)},d(t){t&&C(e)}}}function fu(t){let e;return{c(){e=U("Info")},m(t,n){T(t,e,n)},d(t){t&&C(e)}}}function du(t){let e;return{c(){e=U("Bug")},m(t,n){T(t,e,n)},d(t){t&&C(e)}}}function pu(t){let e,n,s,r,o,i,c,a,l,u;return e=new sl({props:{$$slots:{default:[au]},$$scope:{ctx:t}}}),e.$on("click",t[56]),s=new sl({props:{$$slots:{default:[lu]},$$scope:{ctx:t}}}),s.$on("click",t[57]),o=new sl({props:{$$slots:{default:[uu]},$$scope:{ctx:t}}}),o.$on("click",t[58]),c=new sl({props:{$$slots:{default:[fu]},$$scope:{ctx:t}}}),c.$on("click",t[59]),l=new sl({props:{$$slots:{default:[du]},$$scope:{ctx:t}}}),l.$on("click",t[60]),{c(){It(e.$$.fragment),n=D(),It(s.$$.fragment),r=D(),It(o.$$.fragment),i=D(),It(c.$$.fragment),a=D(),It(l.$$.fragment)},m(t,f){Tt(e,t,f),T(t,n,f),Tt(s,t,f),T(t,r,f),Tt(o,t,f),T(t,i,f),Tt(c,t,f),T(t,a,f),Tt(l,t,f),u=!0},p(t,n){const r={};65536&n[2]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r);const i={};65536&n[2]&&(i.$$scope={dirty:n,ctx:t}),s.$set(i);const a={};65536&n[2]&&(a.$$scope={dirty:n,ctx:t}),o.$set(a);const u={};65536&n[2]&&(u.$$scope={dirty:n,ctx:t}),c.$set(u);const f={};65536&n[2]&&(f.$$scope={dirty:n,ctx:t}),l.$set(f)},i(t){u||(xt(e.$$.fragment,t),xt(s.$$.fragment,t),xt(o.$$.fragment,t),xt(c.$$.fragment,t),xt(l.$$.fragment,t),u=!0)},o(t){kt(e.$$.fragment,t),kt(s.$$.fragment,t),kt(o.$$.fragment,t),kt(c.$$.fragment,t),kt(l.$$.fragment,t),u=!1},d(t){Ct(e,t),t&&C(n),Ct(s,t),t&&C(r),Ct(o,t),t&&C(i),Ct(c,t),t&&C(a),Ct(l,t)}}}function hu(t){let e,n,s,r,o,i;function c(e){t[63](e)}let a={placeholder:"From node",options:he.map(Ru)};function l(e){t[64](e)}void 0!==t[8]&&(a.value=t[8]),e=new ml({props:a}),rt.push((()=>Nt(e,"value",c)));let u={placeholder:"To node",options:he.map(Uu)};return void 0!==t[9]&&(u.value=t[9]),r=new ml({props:u}),rt.push((()=>Nt(r,"value",l))),{c(){It(e.$$.fragment),s=D(),It(r.$$.fragment)},m(t,n){Tt(e,t,n),T(t,s,n),Tt(r,t,n),i=!0},p(t,s){const i={};!n&&256&s[0]&&(n=!0,i.value=t[8],ut((()=>n=!1))),e.$set(i);const c={};!o&&512&s[0]&&(o=!0,c.value=t[9],ut((()=>o=!1))),r.$set(c)},i(t){i||(xt(e.$$.fragment,t),xt(r.$$.fragment,t),i=!0)},o(t){kt(e.$$.fragment,t),kt(r.$$.fragment,t),i=!1},d(t){Ct(e,t),t&&C(s),Ct(r,t)}}}function mu(t){let e;return{c(){e=U("Flash")},m(t,n){T(t,e,n)},d(t){t&&C(e)}}}function gu(t){let e,n;return e=new sl({props:{$$slots:{default:[mu]},$$scope:{ctx:t}}}),e.$on("click",t[62]),{c(){It(e.$$.fragment)},m(t,s){Tt(e,t,s),n=!0},p(t,n){const s={};65536&n[2]&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){n||(xt(e.$$.fragment,t),n=!0)},o(t){kt(e.$$.fragment,t),n=!1},d(t){Ct(e,t)}}}function $u(t){let e;return{c(){e=U("Show nodes")},m(t,n){T(t,e,n)},d(t){t&&C(e)}}}function yu(t){let e;return{c(){e=U("Show names")},m(t,n){T(t,e,n)},d(t){t&&C(e)}}}function wu(t){let e;return{c(){e=U("Show coordinates")},m(t,n){T(t,e,n)},d(t){t&&C(e)}}}function bu(t){let e,n,s,r,o,i,c,a,l;function u(e){t[65](e)}let f={$$slots:{default:[$u]},$$scope:{ctx:t}};function d(e){t[66](e)}void 0!==t[19]&&(f.checked=t[19]),e=new il({props:f}),rt.push((()=>Nt(e,"checked",u)));let p={disabled:!t[19],$$slots:{default:[yu]},$$scope:{ctx:t}};function h(e){t[67](e)}void 0!==t[20]&&(p.checked=t[20]),r=new il({props:p}),rt.push((()=>Nt(r,"checked",d)));let m={disabled:!t[19],$$slots:{default:[wu]},$$scope:{ctx:t}};return void 0!==t[21]&&(m.checked=t[21]),c=new il({props:m}),rt.push((()=>Nt(c,"checked",h))),{c(){It(e.$$.fragment),s=D(),It(r.$$.fragment),i=D(),It(c.$$.fragment)},m(t,n){Tt(e,t,n),T(t,s,n),Tt(r,t,n),T(t,i,n),Tt(c,t,n),l=!0},p(t,s){const i={};65536&s[2]&&(i.$$scope={dirty:s,ctx:t}),!n&&524288&s[0]&&(n=!0,i.checked=t[19],ut((()=>n=!1))),e.$set(i);const l={};524288&s[0]&&(l.disabled=!t[19]),65536&s[2]&&(l.$$scope={dirty:s,ctx:t}),!o&&1048576&s[0]&&(o=!0,l.checked=t[20],ut((()=>o=!1))),r.$set(l);const u={};524288&s[0]&&(u.disabled=!t[19]),65536&s[2]&&(u.$$scope={dirty:s,ctx:t}),!a&&2097152&s[0]&&(a=!0,u.checked=t[21],ut((()=>a=!1))),c.$set(u)},i(t){l||(xt(e.$$.fragment,t),xt(r.$$.fragment,t),xt(c.$$.fragment,t),l=!0)},o(t){kt(e.$$.fragment,t),kt(r.$$.fragment,t),kt(c.$$.fragment,t),l=!1},d(t){Ct(e,t),t&&C(s),Ct(r,t),t&&C(i),Ct(c,t)}}}function vu(t){let e,n,s;function r(e){t[70](e)}let o={options:[...Te]};return void 0!==t[24]&&(o.value=t[24]),e=new ml({props:o}),rt.push((()=>Nt(e,"value",r))),{c(){It(e.$$.fragment)},m(t,n){Tt(e,t,n),s=!0},p(t,s){const r={};!n&&16777216&s[0]&&(n=!0,r.value=t[24],ut((()=>n=!1))),e.$set(r)},i(t){s||(xt(e.$$.fragment,t),s=!0)},o(t){kt(e.$$.fragment,t),s=!1},d(t){Ct(e,t)}}}function xu(t){let e;return{c(){e=U("Binary")},m(t,n){T(t,e,n)},d(t){t&&C(e)}}}function ku(t){let e;return{c(){e=U("Labels")},m(t,n){T(t,e,n)},d(t){t&&C(e)}}}function _u(t){let e,n,s,r,o,i;function c(e){t[68](e)}let a={$$slots:{default:[xu]},$$scope:{ctx:t}};function l(e){t[69](e)}void 0!==t[22]&&(a.checked=t[22]),e=new il({props:a}),rt.push((()=>Nt(e,"checked",c)));let u={$$slots:{default:[ku]},$$scope:{ctx:t}};return void 0!==t[23]&&(u.checked=t[23]),r=new il({props:u}),rt.push((()=>Nt(r,"checked",l))),{c(){It(e.$$.fragment),s=D(),It(r.$$.fragment)},m(t,n){Tt(e,t,n),T(t,s,n),Tt(r,t,n),i=!0},p(t,s){const i={};65536&s[2]&&(i.$$scope={dirty:s,ctx:t}),!n&&4194304&s[0]&&(n=!0,i.checked=t[22],ut((()=>n=!1))),e.$set(i);const c={};65536&s[2]&&(c.$$scope={dirty:s,ctx:t}),!o&&8388608&s[0]&&(o=!0,c.checked=t[23],ut((()=>o=!1))),r.$set(c)},i(t){i||(xt(e.$$.fragment,t),xt(r.$$.fragment,t),i=!0)},o(t){kt(e.$$.fragment,t),kt(r.$$.fragment,t),i=!1},d(t){Ct(e,t),t&&C(s),Ct(r,t)}}}function Su(t){let e,n,s;function r(e){t[73](e)}let o={placeholder:"Utterance"};return void 0!==t[10]&&(o.value=t[10]),e=new ll({props:o}),rt.push((()=>Nt(e,"value",r))),{c(){It(e.$$.fragment)},m(t,n){Tt(e,t,n),s=!0},p(t,s){const r={};!n&&1024&s[0]&&(n=!0,r.value=t[10],ut((()=>n=!1))),e.$set(r)},i(t){s||(xt(e.$$.fragment,t),s=!0)},o(t){kt(e.$$.fragment,t),s=!1},d(t){Ct(e,t)}}}function Au(t){let e;return{c(){e=U("Speak")},m(t,n){T(t,e,n)},d(t){t&&C(e)}}}function Eu(t){let e;return{c(){e=U("TTS Enabled")},m(t,n){T(t,e,n)},d(t){t&&C(e)}}}function Nu(t){let e,n,s,r,o;function i(e){t[72](e)}e=new sl({props:{$$slots:{default:[Au]},$$scope:{ctx:t}}}),e.$on("click",t[71]);let c={$$slots:{default:[Eu]},$$scope:{ctx:t}};return void 0!==t[25]&&(c.checked=t[25]),s=new il({props:c}),rt.push((()=>Nt(s,"checked",i))),{c(){It(e.$$.fragment),n=D(),It(s.$$.fragment)},m(t,r){Tt(e,t,r),T(t,n,r),Tt(s,t,r),o=!0},p(t,n){const o={};65536&n[2]&&(o.$$scope={dirty:n,ctx:t}),e.$set(o);const i={};65536&n[2]&&(i.$$scope={dirty:n,ctx:t}),!r&&33554432&n[0]&&(r=!0,i.checked=t[25],ut((()=>r=!1))),s.$set(i)},i(t){o||(xt(e.$$.fragment,t),xt(s.$$.fragment,t),o=!0)},o(t){kt(e.$$.fragment,t),kt(s.$$.fragment,t),o=!1},d(t){Ct(e,t),t&&C(n),Ct(s,t)}}}function Iu(t){let e,n,s,r,o,i;function c(e){t[76](e)}let a={placeholder:"Key"};function l(e){t[77](e)}void 0!==t[11]&&(a.value=t[11]),e=new ll({props:a}),rt.push((()=>Nt(e,"value",c)));let u={placeholder:"Value"};return void 0!==t[12]&&(u.value=t[12]),r=new ll({props:u}),rt.push((()=>Nt(r,"value",l))),{c(){It(e.$$.fragment),s=D(),It(r.$$.fragment)},m(t,n){Tt(e,t,n),T(t,s,n),Tt(r,t,n),i=!0},p(t,s){const i={};!n&&2048&s[0]&&(n=!0,i.value=t[11],ut((()=>n=!1))),e.$set(i);const c={};!o&&4096&s[0]&&(o=!0,c.value=t[12],ut((()=>o=!1))),r.$set(c)},i(t){i||(xt(e.$$.fragment,t),xt(r.$$.fragment,t),i=!0)},o(t){kt(e.$$.fragment,t),kt(r.$$.fragment,t),i=!1},d(t){Ct(e,t),t&&C(s),Ct(r,t)}}}function Tu(t){let e;return{c(){e=U("Set")},m(t,n){T(t,e,n)},d(t){t&&C(e)}}}function Cu(t){let e;return{c(){e=U("Clear")},m(t,n){T(t,e,n)},d(t){t&&C(e)}}}function Ou(t){let e,n,s,r;return e=new sl({props:{$$slots:{default:[Tu]},$$scope:{ctx:t}}}),e.$on("click",t[74]),s=new sl({props:{$$slots:{default:[Cu]},$$scope:{ctx:t}}}),s.$on("click",t[75]),{c(){It(e.$$.fragment),n=D(),It(s.$$.fragment)},m(t,o){Tt(e,t,o),T(t,n,o),Tt(s,t,o),r=!0},p(t,n){const r={};65536&n[2]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r);const o={};65536&n[2]&&(o.$$scope={dirty:n,ctx:t}),s.$set(o)},i(t){r||(xt(e.$$.fragment,t),xt(s.$$.fragment,t),r=!0)},o(t){kt(e.$$.fragment,t),kt(s.$$.fragment,t),r=!1},d(t){Ct(e,t),t&&C(n),Ct(s,t)}}}function Lu(t){let e,n,s=t[13]&&Il(t);return{c(){s&&s.c(),e=U("\nS")},m(t,r){s&&s.m(t,r),T(t,e,r),n=!0},p(t,n){t[13]?s?(s.p(t,n),8192&n[0]&&xt(s,1)):(s=Il(t),s.c(),xt(s,1),s.m(e.parentNode,e)):s&&(bt(),kt(s,1,1,(()=>{s=null})),vt())},i(t){n||(xt(s),n=!0)},o(t){kt(s),n=!1},d(t){s&&s.d(t),t&&C(e)}}}const Ru=t=>t.name,Uu=t=>t.name;function Du(t,e,n){let s,r,o,i,c,a,l,f,d,p,h,m,g;u(t,Vt,(t=>n(13,s=t))),u(t,Qt,(t=>n(14,r=t))),u(t,Pt,(t=>n(15,o=t))),u(t,Gi,(t=>n(16,i=t))),u(t,jt,(t=>n(17,c=t))),u(t,Mt,(t=>n(18,a=t))),u(t,Gt,(t=>n(19,l=t))),u(t,Xt,(t=>n(20,f=t))),u(t,Jt,(t=>n(21,d=t))),u(t,Oe,(t=>n(22,p=t))),u(t,Le,(t=>n(23,h=t))),u(t,Pe,(t=>n(24,m=t))),u(t,Qe,(t=>n(25,g=t))),tt((()=>{const t=t=>{t.altKey&&"d"===t.key.toLowerCase()&&(t.preventDefault(),C())};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)}));let $,y,b,v,x,k,_,S,A,E,N,I,T=!1;function C(){w(Vt,s=!s,s)}return[$,y,b,T,v,x,k,_,S,A,E,N,I,s,r,o,i,c,a,l,f,d,p,h,m,g,["IR","IR:OPC","IR:OPR","PC","INC","MUX","CU","ALU:1","ALU:2","ALU:OPR","ACC","SW:Z","SW:N"],C,()=>tl.reset(),()=>tl.start(),()=>tl.pause(),()=>tl.step(),()=>tl.instruction(),()=>Vo.reset(),()=>Uo.set($),()=>Do.set(new yn(8,parseInt(y))),()=>Qo.set(new yn(16,parseInt(y))),()=>Mo.set(new yn(16,parseInt(y))),()=>Bo.set(b),()=>jo.set(new yn(16,parseInt(y))),()=>Ko.set(T),()=>Wo.set(T),function(t){$=t,n(0,$)},function(t){y=t,n(1,y)},function(t){b=t,n(2,b)},function(t){T=t,n(3,T)},()=>r.flash(v),function(t){v=t,n(4,v)},()=>o.flashAddress(parseInt(k)),()=>o.flashContent(parseInt(k)),()=>o.showAddress(parseInt(k)),()=>Gi.clear(),()=>Gi.write(parseInt(k),x),()=>{console.log("--- RAM CONTENT ----------------"),console.dir(i),console.log("--------------------------------")},function(t){k=t,n(6,k)},function(t){x=t,n(5,x)},()=>c.error(_),()=>c.warning(_),()=>c.success(_),()=>c.info(_),()=>c.bug(_),function(t){_=t,n(7,_)},()=>a.flashWire(S,A),function(t){S=t,n(8,S)},function(t){A=t,n(9,A)},function(t){l=t,Gt.set(l)},function(t){f=t,Xt.set(f)},function(t){d=t,Jt.set(d)},function(t){p=t,Oe.set(p)},function(t){h=t,Le.set(h)},function(t){m=t,Pe.set(m)},()=>Kc.read(E),function(t){g=t,Qe.set(g)},function(t){E=t,n(10,E)},()=>xe(N,I),()=>localStorage.clear(),function(t){N=t,n(11,N)},function(t){I=t,n(12,I)}]}class Pu extends Rt{constructor(t){super(),Lt(this,t,Du,Lu,c,{},null,[-1,-1,-1])}}function Qu(t){const e=t-1;return e*e*e+1}function Mu(t,{delay:n=0,duration:s=400,easing:r=e}={}){const o=+getComputedStyle(t).opacity;return{delay:n,duration:s,easing:r,css:t=>"opacity: "+t*o}}function Bu(t,{delay:e=0,duration:n=400,easing:s=Qu}={}){const r=getComputedStyle(t),o=+r.opacity,i=parseFloat(r.height),c=parseFloat(r.paddingTop),a=parseFloat(r.paddingBottom),l=parseFloat(r.marginTop),u=parseFloat(r.marginBottom),f=parseFloat(r.borderTopWidth),d=parseFloat(r.borderBottomWidth);return{delay:e,duration:n,easing:s,css:t=>`overflow: hidden;opacity: ${Math.min(20*t,1)*o};height: ${t*i}px;padding-top: ${t*c}px;padding-bottom: ${t*a}px;margin-top: ${t*l}px;margin-bottom: ${t*u}px;border-top-width: ${t*f}px;border-bottom-width: ${t*d}px;`}}function Fu(t,e){var n=document.createElement("a"),s=new Blob([t],{type:"text/plain"});n.href=URL.createObjectURL(s),n.download=e,n.click()}function ju(t){return te(this,void 0,void 0,(function(){return ee(this,(function(e){return[2,new Promise((function(e,n){var s=document.createElement("input");s.type="file",s.accept=t,s.click(),s.oninput=function(){return e(s.files)}}))]}))}))}function Ku(e){let n,s,r;return{c(){n=L("div"),s=L("div"),M(s,"class","h-full bg-white/60 rounded-r-sm"),K(s,"width",e[0]+"%"),M(n,"class",r="w-full h-1 bg-transparent "+e[1].class)},m(t,e){T(t,n,e),E(n,s)},p(t,[e]){1&e&&K(s,"width",t[0]+"%"),2&e&&r!==(r="w-full h-1 bg-transparent "+t[1].class)&&M(n,"class",r)},i:t,o:t,d(t){t&&C(n)}}}function Wu(t,e,s){let r;const o=["value","max"];let i=$(e,o),{value:c}=e,{max:a}=e;return t.$$set=t=>{e=n(n({},e),g(t)),s(1,i=$(e,o)),"value"in t&&s(2,c=t.value),"max"in t&&s(3,a=t.max)},t.$$.update=()=>{12&t.$$.dirty&&s(0,r=100/a*c)},[r,i,c,a]}class qu extends Rt{constructor(t){super(),Lt(this,t,Wu,Ku,c,{value:2,max:3})}}function Hu(t){let e,n;return e=new sl({props:{$$slots:{default:[Vu]},$$scope:{ctx:t}}}),e.$on("click",t[6]),{c(){It(e.$$.fragment)},m(t,s){Tt(e,t,s),n=!0},p(t,n){const s={};1028&n&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){n||(xt(e.$$.fragment,t),n=!0)},o(t){kt(e.$$.fragment,t),n=!1},d(t){Ct(e,t)}}}function Vu(t){let e,n=t[2].message_feed.buttons.export_logs.text+"";return{c(){e=U(n)},m(t,n){T(t,e,n)},p(t,s){4&s&&n!==(n=t[2].message_feed.buttons.export_logs.text+"")&&F(e,n)},d(t){t&&C(e)}}}function Gu(t){let e,n;return e=new qu({props:{class:"absolute left-0 bottom-0",value:t[1],max:Ju}}),{c(){It(e.$$.fragment)},m(t,s){Tt(e,t,s),n=!0},p(t,n){const s={};2&n&&(s.value=t[1]),e.$set(s)},i(t){n||(xt(e.$$.fragment,t),n=!0)},o(t){kt(e.$$.fragment,t),n=!1},d(t){Ct(e,t)}}}function Xu(t){let e,n,s,r,i,c,a,l,u,f,d,p,h,m,g,$,y=t[0].message+"",w="BUG"===t[0].type&&Hu(t),b=t[0].timer&&Gu(t);return{c(){e=L("div"),n=L("button"),s=R("svg"),r=R("path"),i=R("path"),a=D(),l=L("p"),u=U(y),f=D(),w&&w.c(),d=D(),b&&b.c(),M(r,"d","M0 0h24v24H0V0z"),M(r,"fill","none"),M(i,"d","M18.3 5.71c-.39-.39-1.02-.39-1.41 0L12 10.59 7.11 5.7c-.39-.39-1.02-.39-1.41 0-.39.39-.39 1.02 0 1.41L10.59 12 5.7 16.89c-.39.39-.39 1.02 0 1.41.39.39 1.02.39 1.41 0L12 13.41l4.89 4.89c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L13.41 12l4.89-4.89c.38-.38.38-1.02 0-1.4z"),M(s,"xmlns","http://www.w3.org/2000/svg"),M(s,"viewBox","0 0 24 24"),M(s,"fill","#FFFFFF"),M(s,"class","h-6 w-6 hover:scale-105"),M(n,"class","absolute bg-transparent text-white cursor-pointer font-bold right-8"),M(n,"title",c=t[2].message_feed.buttons.close_message.title),M(l,"class","w-3/4 text-center text-xl"),M(e,"class",p="relative w-full h-fit flex justify-center items-center p-5 origin-left text-white "+t[0].type+" svelte-1j9b8ca")},m(o,c){T(o,e,c),E(e,n),E(n,s),E(s,r),E(s,i),E(e,a),E(e,l),E(l,u),E(e,f),w&&w.m(e,null),E(e,d),b&&b.m(e,null),m=!0,g||($=[Q(n,"click",t[3]),Q(e,"mouseenter",t[4]),Q(e,"mouseleave",t[5])],g=!0)},p(t,[s]){(!m||4&s&&c!==(c=t[2].message_feed.buttons.close_message.title))&&M(n,"title",c),(!m||1&s)&&y!==(y=t[0].message+"")&&F(u,y),"BUG"===t[0].type?w?(w.p(t,s),1&s&&xt(w,1)):(w=Hu(t),w.c(),xt(w,1),w.m(e,d)):w&&(bt(),kt(w,1,1,(()=>{w=null})),vt()),t[0].timer?b?(b.p(t,s),1&s&&xt(b,1)):(b=Gu(t),b.c(),xt(b,1),b.m(e,null)):b&&(bt(),kt(b,1,1,(()=>{b=null})),vt()),(!m||1&s&&p!==(p="relative w-full h-fit flex justify-center items-center p-5 origin-left text-white "+t[0].type+" svelte-1j9b8ca"))&&M(e,"class",p)},i(t){m||(xt(w),xt(b),lt((()=>{h||(h=St(e,Bu,{},!0)),h.run(1)})),m=!0)},o(t){kt(w),kt(b),h||(h=St(e,Bu,{},!1)),h.run(0),m=!1},d(t){t&&C(e),w&&w.d(),b&&b.d(),t&&h&&h.end(),g=!1,o($)}}}const Ju=5;function zu(t,e,n){let s,r;u(t,bi,(t=>n(8,s=t))),u(t,So,(t=>n(2,r=t)));const o=et();let{message:i}=e,c=Ju,a=!1;function l(){o("closemessage",{messageId:i.id})}return tt((()=>{if(!i.timer)return;const t=setInterval((()=>{a||n(1,c--,c),0===c&&(clearInterval(t),l())}),1e3)})),t.$$set=t=>{"message"in t&&n(0,i=t.message)},[i,c,r,l,function(){n(1,c=Ju),a=!0},function(){a=!1},function(){Fu(JSON.stringify(s),`cpu-visual-simultor-logs-${(new Date).toDateString()}.json`)}]}class Yu extends Rt{constructor(t){super(),Lt(this,t,zu,Xu,c,{message:0})}}function Zu(t,e,n){const s=t.slice();return s[8]=e[n],s}function tf(t,e){let n,s,r;return s=new Yu({props:{message:e[8]}}),s.$on("closemessage",e[1]),{key:t,first:null,c(){n=P(),It(s.$$.fragment),this.first=n},m(t,e){T(t,n,e),Tt(s,t,e),r=!0},p(t,n){e=t;const r={};1&n&&(r.message=e[8]),s.$set(r)},i(t){r||(xt(s.$$.fragment,t),r=!0)},o(t){kt(s.$$.fragment,t),r=!1},d(t){t&&C(n),Ct(s,t)}}}function ef(t){let e,n,s=[],r=new Map,o=t[0];const i=t=>t[8].id;for(let e=0;e<o.length;e+=1){let n=Zu(t,o,e),c=i(n);r.set(c,s[e]=tf(c,n))}return{c(){e=L("div");for(let t=0;t<s.length;t+=1)s[t].c();M(e,"class","fixed top-0 left-0 w-screen h-fit flex flex-col")},m(t,r){T(t,e,r);for(let t=0;t<s.length;t+=1)s[t].m(e,null);n=!0},p(t,[n]){3&n&&(o=t[0],bt(),s=function(t,e,n,s,r,o,i,c,a,l,u,f){let d=t.length,p=o.length,h=d;const m={};for(;h--;)m[t[h].key]=h;const g=[],$=new Map,y=new Map;for(h=p;h--;){const t=f(r,o,h),c=n(t);let a=i.get(c);a?s&&a.p(t,e):(a=l(c,t),a.c()),$.set(c,g[h]=a),c in m&&y.set(c,Math.abs(h-m[c]))}const w=new Set,b=new Set;function v(t){xt(t,1),t.m(c,u),i.set(t.key,t),u=t.first,p--}for(;d&&p;){const e=g[p-1],n=t[d-1],s=e.key,r=n.key;e===n?(u=e.first,d--,p--):$.has(r)?!i.has(s)||w.has(s)?v(e):b.has(r)?d--:y.get(s)>y.get(r)?(b.add(s),v(e)):(w.add(r),d--):(a(n,i),d--)}for(;d--;){const e=t[d];$.has(e.key)||a(e,i)}for(;p;)v(g[p-1]);return g}(s,n,i,1,t,o,r,e,Et,tf,null,Zu),vt())},i(t){if(!n){for(let t=0;t<o.length;t+=1)xt(s[t]);n=!0}},o(t){for(let t=0;t<s.length;t+=1)kt(s[t]);n=!1},d(t){t&&C(e);for(let t=0;t<s.length;t+=1)s[t].d()}}}function nf(t,e,n){let s=[];function r(t){3===s.length&&s.shift(),n(0,s=[...s,t])}return[s,function(t){n(0,s=s.filter((e=>e.id!==t.detail.messageId)))},function(t){r({id:Math.random(),type:"ERROR",message:t,timer:!0})},function(t){r({id:Math.random(),type:"WARNING",message:t,timer:!0})},function(t){r({id:Math.random(),type:"SUCCESS",message:t,timer:!0})},function(t){r({id:Math.random(),type:"INFO",message:t,timer:!0})},function(t){r({id:Math.random(),type:"BUG",message:t,timer:!1})}]}class sf extends Rt{constructor(t){super(),Lt(this,t,nf,ef,c,{error:2,warning:3,success:4,info:5,bug:6})}get error(){return this.$$.ctx[2]}get warning(){return this.$$.ctx[3]}get success(){return this.$$.ctx[4]}get info(){return this.$$.ctx[5]}get bug(){return this.$$.ctx[6]}}function rf(t,e,n){const s=t.slice();return s[17]=e[n],s}function of(t,e,n){const s=t.slice();return s[20]=e[n],s}function cf(t,e,n){const s=t.slice();return s[23]=e[n],s}function af(t){let e,n,s,r,i,c,a,l,u,f,d,p,h,m,g,$,y,w,b,v,x,k,_,S,A,N,I,R,P,B,F,K,q,H,V,G,X=Si,J=[];for(let e=0;e<X.length;e+=1)J[e]=lf(cf(t,X,e));let z=_i,Y=[];for(let e=0;e<z.length;e+=1)Y[e]=uf(of(t,z,e));let Z=t[5],tt=[];for(let e=0;e<Z.length;e+=1)tt[e]=df(rf(t,Z,e));return{c(){e=L("div"),n=L("div"),s=L("h2"),s.textContent="Logs",r=D(),i=L("div"),c=L("label"),a=U("Keyword:\n\t\t\t\t\t"),l=L("input"),u=D(),f=L("label"),d=U("Type:\n\t\t\t\t\t"),p=L("select"),h=L("option"),h.textContent="ALL";for(let t=0;t<J.length;t+=1)J[t].c();m=D(),g=L("label"),$=U("Group:\n\t\t\t\t\t"),y=L("select"),w=L("option"),w.textContent="ALL";for(let t=0;t<Y.length;t+=1)Y[t].c();b=D(),v=L("div"),x=L("label"),k=U("Lock scroll to bottom\n\t\t\t\t\t"),_=L("input"),S=D(),A=L("label"),N=U("Show timestamp\n\t\t\t\t\t"),I=L("input"),R=D(),P=L("div"),B=L("button"),B.textContent="Export",F=D(),K=L("button"),K.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" class="h-7 w-7 fill-white"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>',q=D(),H=L("div");for(let t=0;t<tt.length;t+=1)tt[t].c();M(s,"class","text-2xl"),M(l,"type","text"),M(l,"class","text-black px-1 py-0.5"),M(c,"for","keyword"),h.__value="ALL",h.value=h.__value,M(p,"id","type"),M(p,"class","text-black px-1 py-0.5"),void 0===t[1]&&lt((()=>t[12].call(p))),M(f,"for","type"),w.__value="ALL",w.value=w.__value,M(y,"id","group"),M(y,"class","text-black px-1 py-0.5"),void 0===t[2]&&lt((()=>t[13].call(y))),M(g,"for","group"),M(i,"class","flex items-center flex-wrap gap-4 p-2"),M(_,"type","checkbox"),M(_,"id","lock-scroll-to-bottom"),M(x,"for","lock-scroll-to-bottom"),M(I,"type","checkbox"),M(I,"id","show-timestamp"),M(A,"for","show-timestamp"),M(v,"class","flex items-center flex-wrap gap-4 p-2"),M(B,"class","border px-1"),M(P,"class","flex items-center flex-wrap gap-4 p-2"),M(K,"title","Close logs"),M(n,"class","flex flex-wrap items-center justify-around gap-4 p-4"),M(H,"class","w-full h-[90%] overflow-y-auto"),M(e,"class","fixed top-0 left-0 w-screen h-screen z-[1000] bg-black/70 text-white")},m(o,C){T(o,e,C),E(e,n),E(n,s),E(n,r),E(n,i),E(i,c),E(c,a),E(c,l),j(l,t[3]),E(i,u),E(i,f),E(f,d),E(f,p),E(p,h);for(let t=0;t<J.length;t+=1)J[t].m(p,null);W(p,t[1]),E(i,m),E(i,g),E(g,$),E(g,y),E(y,w);for(let t=0;t<Y.length;t+=1)Y[t].m(y,null);W(y,t[2]),E(n,b),E(n,v),E(v,x),E(x,k),E(x,_),_.checked=t[4],E(v,S),E(v,A),E(A,N),E(A,I),I.checked=t[6],E(n,R),E(n,P),E(P,B),E(n,F),E(n,K),E(e,q),E(e,H);for(let t=0;t<tt.length;t+=1)tt[t].m(H,null);t[16](H),V||(G=[Q(l,"input",t[11]),Q(p,"change",t[12]),Q(y,"change",t[13]),Q(_,"change",t[14]),Q(I,"change",t[15]),Q(B,"click",t[9]),Q(K,"click",t[8])],V=!0)},p(t,e){if(8&e&&l.value!==t[3]&&j(l,t[3]),0&e){let n;for(X=Si,n=0;n<X.length;n+=1){const s=cf(t,X,n);J[n]?J[n].p(s,e):(J[n]=lf(s),J[n].c(),J[n].m(p,null))}for(;n<J.length;n+=1)J[n].d(1);J.length=X.length}if(2&e&&W(p,t[1]),0&e){let n;for(z=_i,n=0;n<z.length;n+=1){const s=of(t,z,n);Y[n]?Y[n].p(s,e):(Y[n]=uf(s),Y[n].c(),Y[n].m(y,null))}for(;n<Y.length;n+=1)Y[n].d(1);Y.length=z.length}if(4&e&&W(y,t[2]),16&e&&(_.checked=t[4]),64&e&&(I.checked=t[6]),96&e){let n;for(Z=t[5],n=0;n<Z.length;n+=1){const s=rf(t,Z,n);tt[n]?tt[n].p(s,e):(tt[n]=df(s),tt[n].c(),tt[n].m(H,null))}for(;n<tt.length;n+=1)tt[n].d(1);tt.length=Z.length}},d(n){n&&C(e),O(J,n),O(Y,n),O(tt,n),t[16](null),V=!1,o(G)}}}function lf(e){let n,s,r=e[23]+"";return{c(){n=L("option"),s=U(r),n.__value=e[23],n.value=n.__value},m(t,e){T(t,n,e),E(n,s)},p:t,d(t){t&&C(n)}}}function uf(e){let n,s,r=e[20]+"";return{c(){n=L("option"),s=U(r),n.__value=e[20],n.value=n.__value},m(t,e){T(t,n,e),E(n,s)},p:t,d(t){t&&C(n)}}}function ff(t){let e,n,s=t[17].timestamp+"";return{c(){e=U(s),n=U(" - ")},m(t,s){T(t,e,s),T(t,n,s)},p(t,n){32&n&&s!==(s=t[17].timestamp+"")&&F(e,s)},d(t){t&&C(e),t&&C(n)}}}function df(t){let e,n,s,r,o=t[17].message+"",i=t[6]&&ff(t);return{c(){e=L("p"),i&&i.c(),n=U(o),s=D(),M(e,"class",r="m-2 whitespace-pre-line "+t[17].logType+" svelte-7zjq9j")},m(t,r){T(t,e,r),i&&i.m(e,null),E(e,n),E(e,s)},p(t,s){t[6]?i?i.p(t,s):(i=ff(t),i.c(),i.m(e,n)):i&&(i.d(1),i=null),32&s&&o!==(o=t[17].message+"")&&F(n,o),32&s&&r!==(r="m-2 whitespace-pre-line "+t[17].logType+" svelte-7zjq9j")&&M(e,"class",r)},d(t){t&&C(e),i&&i.d()}}}function pf(e){let n,s=e[7].showLogger&&af(e);return{c(){s&&s.c(),n=P()},m(t,e){s&&s.m(t,e),T(t,n,e)},p(t,[e]){t[7].showLogger?s?s.p(t,e):(s=af(t),s.c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null)},i:t,o:t,d(t){s&&s.d(t),t&&C(n)}}}function hf(t,e,n){let s,r,o;u(t,bi,(t=>n(10,s=t))),u(t,xi,(t=>n(7,r=t)));let i=[],c="ALL",a="ALL",l="",f=!1,d=!0;function p(){xi.updateShowLogger((t=>!t))}return tt((()=>{const t=t=>{t.altKey&&t.shiftKey&&"l"===t.key.toLowerCase()&&p()};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)})),t.$$.update=()=>{1055&t.$$.dirty&&o&&(n(5,i=s.filter((t=>("ALL"===c||t.logType===c)&&("ALL"===a||t.logGroup===a)&&t.message.toLowerCase().includes(l)))),d&&n(0,o.scrollTop=o.scrollHeight,o))},[o,c,a,l,d,i,f,r,p,function(){Fu(JSON.stringify(s),`cpu-visual-simultor-logs-${(new Date).toDateString()}.json`)},s,function(){l=this.value,n(3,l)},function(){c=q(this),n(1,c)},function(){a=q(this),n(2,a)},function(){d=this.checked,n(4,d)},function(){f=this.checked,n(6,f)},function(t){rt[t?"unshift":"push"]((()=>{o=t,n(0,o),n(10,s),n(1,c),n(2,a),n(3,l),n(4,d)}))}]}class mf extends Rt{constructor(t){super(),Lt(this,t,hf,pf,c,{})}}function gf(t){let e,n,s;const r=t[2].default,o=f(r,t,t[1],null);return{c(){e=L("div"),o&&o.c(),M(e,"class",n="w-fit h-full bg-neutral-500 shadow-component px-5 rounded-[20px] border-2 border-neutral-800 flex items-center "+t[0].class)},m(t,n){T(t,e,n),o&&o.m(e,null),s=!0},p(t,[i]){o&&o.p&&(!s||2&i)&&h(o,r,t,t[1],s?p(r,t[1],i,null):m(t[1]),null),(!s||1&i&&n!==(n="w-fit h-full bg-neutral-500 shadow-component px-5 rounded-[20px] border-2 border-neutral-800 flex items-center "+t[0].class))&&M(e,"class",n)},i(t){s||(xt(o,t),s=!0)},o(t){kt(o,t),s=!1},d(t){t&&C(e),o&&o.d(t)}}}function $f(t,e,s){const r=[];let o=$(e,r),{$$slots:i={},$$scope:c}=e;return t.$$set=t=>{e=n(n({},e),g(t)),s(0,o=$(e,r)),"$$scope"in t&&s(1,c=t.$$scope)},[o,c,i]}class yf extends Rt{constructor(t){super(),Lt(this,t,$f,gf,c,{})}}function wf(e){let n,s,r,i,c,a,l;return{c(){n=L("button"),s=R("svg"),r=R("path"),M(r,"d",i=e[3][e[2]]),M(s,"xmlns","http://www.w3.org/2000/svg"),M(s,"viewBox","0 0 24 24"),M(s,"class","fill-black w-6 h-6 scale-[1.4]"),M(n,"class",c="flex items-center justify-center w-9 h-9 border border-black rounded-md bg-white disabled:brightness-[.6] disabled:cursor-default active:brightness-90 "+e[4].class),n.disabled=e[0],M(n,"title",e[1])},m(t,o){T(t,n,o),E(n,s),E(s,r),a||(l=[Q(n,"click",e[5]),Q(n,"focus",e[6]),Q(n,"focusout",e[7]),Q(n,"mouseenter",e[8]),Q(n,"mouseleave",e[9]),Q(n,"mouseover",e[10])],a=!0)},p(t,[e]){4&e&&i!==(i=t[3][t[2]])&&M(r,"d",i),16&e&&c!==(c="flex items-center justify-center w-9 h-9 border border-black rounded-md bg-white disabled:brightness-[.6] disabled:cursor-default active:brightness-90 "+t[4].class)&&M(n,"class",c),1&e&&(n.disabled=t[0]),2&e&&M(n,"title",t[1])},i:t,o:t,d(t){t&&C(n),a=!1,o(l)}}}function bf(t,e,s){const r=["disabled","title","icon"];let o=$(e,r),{disabled:i=!1}=e,{title:c=""}=e,{icon:a=""}=e;return t.$$set=t=>{e=n(n({},e),g(t)),s(4,o=$(e,r)),"disabled"in t&&s(0,i=t.disabled),"title"in t&&s(1,c=t.title),"icon"in t&&s(2,a=t.icon)},[i,c,a,{"":"",reset:"M7 6c.55 0 1 .45 1 1v10c0 .55-.45 1-1 1s-1-.45-1-1V7c0-.55.45-1 1-1zm3.66 6.82l5.77 4.07c.66.47 1.58-.01 1.58-.82V7.93c0-.81-.91-1.28-1.58-.82l-5.77 4.07c-.57.4-.57 1.24 0 1.64z",play:"M8 6.82v10.36c0 .79.87 1.27 1.54.84l8.14-5.18c.62-.39.62-1.29 0-1.69L9.54 5.98C8.87 5.55 8 6.03 8 6.82z",pause:"M8 19c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2s-2 .9-2 2v10c0 1.1.9 2 2 2zm6-12v10c0 1.1.9 2 2 2s2-.9 2-2V7c0-1.1-.9-2-2-2s-2 .9-2 2z",skip:"M7.58 16.89l5.77-4.07c.56-.4.56-1.24 0-1.63L7.58 7.11C6.91 6.65 6 7.12 6 7.93v8.14c0 .81.91 1.28 1.58.82zM16 7v10c0 .55.45 1 1 1s1-.45 1-1V7c0-.55-.45-1-1-1s-1 .45-1 1z"},o,function(e){nt.call(this,t,e)},function(e){nt.call(this,t,e)},function(e){nt.call(this,t,e)},function(e){nt.call(this,t,e)},function(e){nt.call(this,t,e)},function(e){nt.call(this,t,e)}]}class vf extends Rt{constructor(t){super(),Lt(this,t,bf,wf,c,{disabled:0,title:1,icon:2})}}function xf(t){let e,n,s,r,i,c,a,l,u;const d=t[5].default,g=f(d,t,t[4],null);return{c(){e=L("div"),n=L("div"),r=D(),i=L("div"),g&&g.c(),M(n,"class",s="w-4 h-4 border border-black rounded-md transition-colors "+(t[0]?"bg-[#0F0]":"")+" "+(t[1]?"brightness-[.6]":"")),M(i,"class","font-medium pb-[3px]"),M(e,"class",c="flex items-center justify-center gap-1 "+(t[1]?"cursor-default":"cursor-pointer")+" "+t[3].class),M(e,"disabled",t[1])},m(s,o){T(s,e,o),E(e,n),E(e,r),E(e,i),g&&g.m(i,null),a=!0,l||(u=[Q(e,"click",t[2]),Q(e,"focus",t[6]),Q(e,"focusout",t[7]),Q(e,"mouseenter",t[8]),Q(e,"mouseleave",t[9]),Q(e,"mouseover",t[10])],l=!0)},p(t,[r]){(!a||3&r&&s!==(s="w-4 h-4 border border-black rounded-md transition-colors "+(t[0]?"bg-[#0F0]":"")+" "+(t[1]?"brightness-[.6]":"")))&&M(n,"class",s),g&&g.p&&(!a||16&r)&&h(g,d,t,t[4],a?p(d,t[4],r,null):m(t[4]),null),(!a||10&r&&c!==(c="flex items-center justify-center gap-1 "+(t[1]?"cursor-default":"cursor-pointer")+" "+t[3].class))&&M(e,"class",c),(!a||2&r)&&M(e,"disabled",t[1])},i(t){a||(xt(g,t),a=!0)},o(t){kt(g,t),a=!1},d(t){t&&C(e),g&&g.d(t),l=!1,o(u)}}}function kf(t,e,s){const r=["disabled","checked"];let o=$(e,r),{$$slots:i={},$$scope:c}=e,{disabled:a=!1}=e,{checked:l=!1}=e;const u=et();return t.$$set=t=>{e=n(n({},e),g(t)),s(3,o=$(e,r)),"disabled"in t&&s(1,a=t.disabled),"checked"in t&&s(0,l=t.checked),"$$scope"in t&&s(4,c=t.$$scope)},[l,a,function(t){s(0,l=!l),u("click",t)},o,c,i,function(e){nt.call(this,t,e)},function(e){nt.call(this,t,e)},function(e){nt.call(this,t,e)},function(e){nt.call(this,t,e)},function(e){nt.call(this,t,e)}]}class _f extends Rt{constructor(t){super(),Lt(this,t,kf,xf,c,{disabled:1,checked:0})}}function Sf(e){let n,s,r,i;return{c(){n=L("input"),M(n,"type","range"),M(n,"class",s=y(e[6].class)+" svelte-dtr8pe"),M(n,"min",e[1]),M(n,"max",e[2]),M(n,"step",e[3]),n.disabled=e[4],M(n,"title",e[5])},m(t,s){T(t,n,s),j(n,e[0]),r||(i=[Q(n,"change",e[14]),Q(n,"input",e[14]),Q(n,"input",e[7]),Q(n,"change",e[8]),Q(n,"focus",e[9]),Q(n,"focusout",e[10]),Q(n,"mouseenter",e[11]),Q(n,"mouseleave",e[12]),Q(n,"mouseover",e[13])],r=!0)},p(t,[e]){64&e&&s!==(s=y(t[6].class)+" svelte-dtr8pe")&&M(n,"class",s),2&e&&M(n,"min",t[1]),4&e&&M(n,"max",t[2]),8&e&&M(n,"step",t[3]),16&e&&(n.disabled=t[4]),32&e&&M(n,"title",t[5]),1&e&&j(n,t[0])},i:t,o:t,d(t){t&&C(n),r=!1,o(i)}}}function Af(t,e,s){const r=["min","max","value","step","disabled","title"];let o=$(e,r),{min:i=0}=e,{max:c=1}=e,{value:a=c/2+i}=e,{step:l=.1}=e,{disabled:u=!1}=e,{title:f=""}=e;return t.$$set=t=>{e=n(n({},e),g(t)),s(6,o=$(e,r)),"min"in t&&s(1,i=t.min),"max"in t&&s(2,c=t.max),"value"in t&&s(0,a=t.value),"step"in t&&s(3,l=t.step),"disabled"in t&&s(4,u=t.disabled),"title"in t&&s(5,f=t.title)},[a,i,c,l,u,f,o,function(e){nt.call(this,t,e)},function(e){nt.call(this,t,e)},function(e){nt.call(this,t,e)},function(e){nt.call(this,t,e)},function(e){nt.call(this,t,e)},function(e){nt.call(this,t,e)},function(e){nt.call(this,t,e)},function(){a=B(this.value),s(0,a)}]}class Ef extends Rt{constructor(t){super(),Lt(this,t,Af,Sf,c,{min:1,max:2,value:0,step:3,disabled:4,title:5})}}function Nf(t){let e,n,s,r,o;const i=t[2].default,c=f(i,t,t[1],null);return{c(){e=L("div"),n=L("span"),s=U(t[0]),r=D(),c&&c.c(),M(n,"class","text-gray-200"),M(e,"class","h-full py-2 flex flex-col items-center justify-between")},m(t,i){T(t,e,i),E(e,n),E(n,s),E(e,r),c&&c.m(e,null),o=!0},p(t,[e]){(!o||1&e)&&F(s,t[0]),c&&c.p&&(!o||2&e)&&h(c,i,t,t[1],o?p(i,t[1],e,null):m(t[1]),null)},i(t){o||(xt(c,t),o=!0)},o(t){kt(c,t),o=!1},d(t){t&&C(e),c&&c.d(t)}}}function If(t,e,n){let{$$slots:s={},$$scope:r}=e,{label:o=""}=e;return t.$$set=t=>{"label"in t&&n(0,o=t.label),"$$scope"in t&&n(1,r=t.$$scope)},[o,r,s]}class Tf extends Rt{constructor(t){super(),Lt(this,t,If,Nf,c,{label:0})}}function Cf(t){let e,n;return e=new yf({props:{class:"justify-center",$$slots:{default:[Of]},$$scope:{ctx:t}}}),{c(){It(e.$$.fragment)},m(t,s){Tt(e,t,s),n=!0},p(t,n){const s={};9&n&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){n||(xt(e.$$.fragment,t),n=!0)},o(t){kt(e.$$.fragment,t),n=!1},d(t){Ct(e,t)}}}function Of(t){let e,n;return{c(){e=L("p"),n=U(t[0]),M(e,"class","w-[450px] text-gray-200 overflow-hidden text-center")},m(t,s){T(t,e,s),E(e,n)},p(t,e){1&e&&F(n,t[0])},d(t){t&&C(e)}}}function Lf(t){let e,n,s=t[1]&&Cf(t);return{c(){s&&s.c(),e=P()},m(t,r){s&&s.m(t,r),T(t,e,r),n=!0},p(t,[n]){t[1]?s?(s.p(t,n),2&n&&xt(s,1)):(s=Cf(t),s.c(),xt(s,1),s.m(e.parentNode,e)):s&&(bt(),kt(s,1,1,(()=>{s=null})),vt())},i(t){n||(xt(s),n=!0)},o(t){kt(s),n=!1},d(t){s&&s.d(t),t&&C(e)}}}function Rf(t,e,n){let s;u(t,Re,(t=>n(1,s=t)));let r="";function o(t){n(0,r=t)}return Pe.subscribe((()=>o(""))),[r,s,o]}class Uf extends Rt{constructor(t){super(),Lt(this,t,Rf,Lf,c,{setText:2})}get setText(){return this.$$.ctx[2]}}function Df(t){let e,n,s,r,o,i,c;return n=new vf({props:{icon:"reset",title:t[3].controls.buttons.reset.title}}),n.$on("click",t[6]),r=new vf({props:{icon:t[4]?"pause":"play",title:t[4]?t[3].controls.buttons.pause.title:t[3].controls.buttons.play.title}}),r.$on("click",t[7]),i=new vf({props:{icon:"skip",title:t[3].controls.buttons.end.title,disabled:!0}}),i.$on("click",t[8]),{c(){e=L("div"),It(n.$$.fragment),s=D(),It(r.$$.fragment),o=D(),It(i.$$.fragment),M(e,"class","flex items-center justify-center gap-1")},m(t,a){T(t,e,a),Tt(n,e,null),E(e,s),Tt(r,e,null),E(e,o),Tt(i,e,null),c=!0},p(t,e){const s={};8&e&&(s.title=t[3].controls.buttons.reset.title),n.$set(s);const o={};16&e&&(o.icon=t[4]?"pause":"play"),24&e&&(o.title=t[4]?t[3].controls.buttons.pause.title:t[3].controls.buttons.play.title),r.$set(o);const c={};8&e&&(c.title=t[3].controls.buttons.end.title),i.$set(c)},i(t){c||(xt(n.$$.fragment,t),xt(r.$$.fragment,t),xt(i.$$.fragment,t),c=!0)},o(t){kt(n.$$.fragment,t),kt(r.$$.fragment,t),kt(i.$$.fragment,t),c=!1},d(t){t&&C(e),Ct(n),Ct(r),Ct(i)}}}function Pf(t){let e,n,s,r,o;return n=new vf({props:{icon:"play",title:t[3].controls.buttons.play_step.title}}),n.$on("click",t[9]),r=new vf({props:{icon:"skip",title:t[3].controls.buttons.skip_step.title,disabled:!0}}),r.$on("click",t[10]),{c(){e=L("div"),It(n.$$.fragment),s=D(),It(r.$$.fragment),M(e,"class","flex items-center justify-center gap-1")},m(t,i){T(t,e,i),Tt(n,e,null),E(e,s),Tt(r,e,null),o=!0},p(t,e){const s={};8&e&&(s.title=t[3].controls.buttons.play_step.title),n.$set(s);const o={};8&e&&(o.title=t[3].controls.buttons.skip_step.title),r.$set(o)},i(t){o||(xt(n.$$.fragment,t),xt(r.$$.fragment,t),o=!0)},o(t){kt(n.$$.fragment,t),kt(r.$$.fragment,t),o=!1},d(t){t&&C(e),Ct(n),Ct(r)}}}function Qf(t){let e,n,s,r,o;return n=new vf({props:{icon:"play",title:t[3].controls.buttons.play_instruction.title}}),n.$on("click",t[11]),r=new vf({props:{icon:"skip",title:t[3].controls.buttons.skip_instruction.title,disabled:!0}}),r.$on("click",t[12]),{c(){e=L("div"),It(n.$$.fragment),s=D(),It(r.$$.fragment),M(e,"class","flex items-center justify-center gap-1")},m(t,i){T(t,e,i),Tt(n,e,null),E(e,s),Tt(r,e,null),o=!0},p(t,e){const s={};8&e&&(s.title=t[3].controls.buttons.play_instruction.title),n.$set(s);const o={};8&e&&(o.title=t[3].controls.buttons.skip_instruction.title),r.$set(o)},i(t){o||(xt(n.$$.fragment,t),xt(r.$$.fragment,t),o=!0)},o(t){kt(n.$$.fragment,t),kt(r.$$.fragment,t),o=!1},d(t){t&&C(e),Ct(n),Ct(r)}}}function Mf(t){let e,n,s;function r(e){t[16](e)}let o={min:.1,max:3,title:t[3].controls.sliders.speed.title};return void 0!==t[2]&&(o.value=t[2]),e=new Ef({props:o}),rt.push((()=>Nt(e,"value",r))),e.$on("change",t[13]),{c(){It(e.$$.fragment)},m(t,n){Tt(e,t,n),s=!0},p(t,s){const r={};8&s&&(r.title=t[3].controls.sliders.speed.title),!n&&4&s&&(n=!0,r.value=t[2],ut((()=>n=!1))),e.$set(r)},i(t){s||(xt(e.$$.fragment,t),s=!0)},o(t){kt(e.$$.fragment,t),s=!1},d(t){Ct(e,t)}}}function Bf(t){let e,n,s,r,o,i,c,a;return e=new Tf({props:{label:t[3].controls.labels.execution,$$slots:{default:[Df]},$$scope:{ctx:t}}}),s=new Tf({props:{label:t[3].controls.labels.step,$$slots:{default:[Pf]},$$scope:{ctx:t}}}),o=new Tf({props:{label:t[3].controls.labels.instruction,$$slots:{default:[Qf]},$$scope:{ctx:t}}}),c=new Tf({props:{label:t[3].controls.labels.speed,$$slots:{default:[Mf]},$$scope:{ctx:t}}}),{c(){It(e.$$.fragment),n=D(),It(s.$$.fragment),r=D(),It(o.$$.fragment),i=D(),It(c.$$.fragment)},m(t,l){Tt(e,t,l),T(t,n,l),Tt(s,t,l),T(t,r,l),Tt(o,t,l),T(t,i,l),Tt(c,t,l),a=!0},p(t,n){const r={};8&n&&(r.label=t[3].controls.labels.execution),524312&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r);const i={};8&n&&(i.label=t[3].controls.labels.step),524296&n&&(i.$$scope={dirty:n,ctx:t}),s.$set(i);const a={};8&n&&(a.label=t[3].controls.labels.instruction),524296&n&&(a.$$scope={dirty:n,ctx:t}),o.$set(a);const l={};8&n&&(l.label=t[3].controls.labels.speed),524300&n&&(l.$$scope={dirty:n,ctx:t}),c.$set(l)},i(t){a||(xt(e.$$.fragment,t),xt(s.$$.fragment,t),xt(o.$$.fragment,t),xt(c.$$.fragment,t),a=!0)},o(t){kt(e.$$.fragment,t),kt(s.$$.fragment,t),kt(o.$$.fragment,t),kt(c.$$.fragment,t),a=!1},d(t){Ct(e,t),t&&C(n),Ct(s,t),t&&C(r),Ct(o,t),t&&C(i),Ct(c,t)}}}function Ff(t){let e,n=t[3].controls.checkboxes.binary.text+"";return{c(){e=U(n)},m(t,n){T(t,e,n)},p(t,s){8&s&&n!==(n=t[3].controls.checkboxes.binary.text+"")&&F(e,n)},d(t){t&&C(e)}}}function jf(t){let e,n=t[3].controls.checkboxes.animations.text+"";return{c(){e=U(n)},m(t,n){T(t,e,n)},p(t,s){8&s&&n!==(n=t[3].controls.checkboxes.animations.text+"")&&F(e,n)},d(t){t&&C(e)}}}function Kf(t){let e,n,s,r,o;function i(e){t[17](e)}let c={$$slots:{default:[Ff]},$$scope:{ctx:t}};return void 0!==t[1]&&(c.checked=t[1]),e=new _f({props:c}),rt.push((()=>Nt(e,"checked",i))),e.$on("click",t[14]),r=new _f({props:{checked:!t[0],$$slots:{default:[jf]},$$scope:{ctx:t}}}),r.$on("click",t[15]),{c(){It(e.$$.fragment),s=D(),It(r.$$.fragment)},m(t,n){Tt(e,t,n),T(t,s,n),Tt(r,t,n),o=!0},p(t,s){const o={};524296&s&&(o.$$scope={dirty:s,ctx:t}),!n&&2&s&&(n=!0,o.checked=t[1],ut((()=>n=!1))),e.$set(o);const i={};1&s&&(i.checked=!t[0]),524296&s&&(i.$$scope={dirty:s,ctx:t}),r.$set(i)},i(t){o||(xt(e.$$.fragment,t),xt(r.$$.fragment,t),o=!0)},o(t){kt(e.$$.fragment,t),kt(r.$$.fragment,t),o=!1},d(t){Ct(e,t),t&&C(s),Ct(r,t)}}}function Wf(t){let e,n,s,r,o,i,c;n=new yf({props:{class:"gap-5",$$slots:{default:[Bf]},$$scope:{ctx:t}}}),r=new yf({props:{class:"flex-col items-baseline justify-center text-gray-200",$$slots:{default:[Kf]},$$scope:{ctx:t}}});return i=new Uf({props:{}}),t[18](i),{c(){e=L("div"),It(n.$$.fragment),s=D(),It(r.$$.fragment),o=D(),It(i.$$.fragment),M(e,"class","absolute top-[690px] left-0 z-[4] w-full h-[90px] flex items-center justify-center gap-3")},m(t,a){T(t,e,a),Tt(n,e,null),E(e,s),Tt(r,e,null),E(e,o),Tt(i,e,null),c=!0},p(t,[e]){const s={};524316&e&&(s.$$scope={dirty:e,ctx:t}),n.$set(s);const o={};524299&e&&(o.$$scope={dirty:e,ctx:t}),r.$set(o);i.$set({})},i(t){c||(xt(n.$$.fragment,t),xt(r.$$.fragment,t),xt(i.$$.fragment,t),c=!0)},o(t){kt(n.$$.fragment,t),kt(r.$$.fragment,t),kt(i.$$.fragment,t),c=!1},d(s){s&&C(e),Ct(n),Ct(r),t[18](null),Ct(i)}}}function qf(t,e,n){let s,r,o,i,c,a;return u(t,Ue,(t=>n(0,s=t))),u(t,Oe,(t=>n(1,r=t))),u(t,De,(t=>n(2,o=t))),u(t,So,(t=>n(3,i=t))),u(t,Qa,(t=>n(4,c=t))),u(t,qt,(t=>n(5,a=t))),[s,r,o,i,c,a,function(){Ei.info("Reset pressed","USER_INPUT"),tl.reset(),Vo.reset()},function(){Ei.info("Toggle execution pressed","USER_INPUT"),tl.toggle()},function(){Ei.info("Skip execution pressed","USER_INPUT")},function(){Ei.info("Play step pressed","USER_INPUT"),tl.step()},function(){Ei.info("Skip step pressed","USER_INPUT")},function(){Ei.info("Play instruction pressed","USER_INPUT"),tl.instruction()},function(){Ei.info("Skip instruction pressed","USER_INPUT")},function(){Ei.info(`Speed slider moved - ${o}`,"USER_INPUT")},function(){Ei.info(`Binary toggle pressed - ${r}`,"USER_INPUT")},function(){w(Ue,s=!s,s),Ei.info(`Animations toggle pressed - ${s}`,"USER_INPUT")},function(t){o=t,De.set(o)},function(t){r=t,Oe.set(r)},function(t){rt[t?"unshift":"push"]((()=>{a=t,qt.set(a)}))}]}class Hf extends Rt{constructor(t){super(),Lt(this,t,qf,Wf,c,{})}}var Vf=function(t){function e(e){return t.call(this,e)||this}return Yt(e,t),e}(rn);function Gf(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var s=t;return e.forEach((function(t,e){s=s.replace("{".concat(e,"}"),t.toString())})),s}var Xf=/;.*/g,Jf=new RegExp(":"+To.source),zf=new RegExp("^(".concat(Oo.source.replace(/\^|\$/g,""),"|").concat(No.source.replace(/\^|\$/g,""),")( ").concat(Jf.source,")?$"));function Yf(e){let n,s,r,i,c,a,l,u;return{c(){n=L("button"),s=R("svg"),r=R("path"),M(r,"d",i=e[3][e[2]]),M(s,"xmlns","http://www.w3.org/2000/svg"),M(s,"viewBox","0 0 48 48"),M(s,"class",c="fill-neutral-800 w-8 h-8 drop-shadow-component "+(e[0]?"":"hover:scale-105")),M(n,"class",a="flex items-center justify-center disabled:brightness-[.6] disabled:cursor-default active:brightness-90 "+e[4].class),n.disabled=e[0],M(n,"title",e[1])},m(t,o){T(t,n,o),E(n,s),E(s,r),l||(u=[Q(n,"click",e[5]),Q(n,"focus",e[6]),Q(n,"focusout",e[7]),Q(n,"mouseenter",e[8]),Q(n,"mouseleave",e[9]),Q(n,"mouseover",e[10])],l=!0)},p(t,[e]){4&e&&i!==(i=t[3][t[2]])&&M(r,"d",i),1&e&&c!==(c="fill-neutral-800 w-8 h-8 drop-shadow-component "+(t[0]?"":"hover:scale-105"))&&M(s,"class",c),16&e&&a!==(a="flex items-center justify-center disabled:brightness-[.6] disabled:cursor-default active:brightness-90 "+t[4].class)&&M(n,"class",a),1&e&&(n.disabled=t[0]),2&e&&M(n,"title",t[1])},i:t,o:t,d(t){t&&C(n),l=!1,o(u)}}}function Zf(t,e,s){const r=["disabled","title","icon"];let o=$(e,r),{disabled:i=!1}=e,{title:c=""}=e,{icon:a=""}=e;return t.$$set=t=>{e=n(n({},e),g(t)),s(4,o=$(e,r)),"disabled"in t&&s(0,i=t.disabled),"title"in t&&s(1,c=t.title),"icon"in t&&s(2,a=t.icon)},[i,c,a,{"":"",settings:"M27.3 44H20.7Q20.15 44 19.725 43.65Q19.3 43.3 19.2 42.75L18.4 37.7Q17.45 37.35 16.4 36.75Q15.35 36.15 14.55 35.5L9.9 37.65Q9.35 37.9 8.8 37.725Q8.25 37.55 7.95 37L4.65 31.15Q4.35 30.65 4.5 30.1Q4.65 29.55 5.1 29.2L9.4 26.05Q9.3 25.6 9.275 25.025Q9.25 24.45 9.25 24Q9.25 23.55 9.275 22.975Q9.3 22.4 9.4 21.95L5.1 18.8Q4.65 18.45 4.5 17.9Q4.35 17.35 4.65 16.85L7.95 11Q8.25 10.45 8.8 10.275Q9.35 10.1 9.9 10.35L14.55 12.5Q15.35 11.85 16.4 11.25Q17.45 10.65 18.4 10.35L19.2 5.25Q19.3 4.7 19.725 4.35Q20.15 4 20.7 4H27.3Q27.85 4 28.275 4.35Q28.7 4.7 28.8 5.25L29.6 10.3Q30.55 10.65 31.625 11.225Q32.7 11.8 33.45 12.5L38.1 10.35Q38.65 10.1 39.2 10.275Q39.75 10.45 40.05 11L43.35 16.8Q43.65 17.3 43.525 17.875Q43.4 18.45 42.9 18.8L38.6 21.85Q38.7 22.35 38.725 22.925Q38.75 23.5 38.75 24Q38.75 24.5 38.725 25.05Q38.7 25.6 38.6 26.1L42.9 29.2Q43.35 29.55 43.5 30.1Q43.65 30.65 43.35 31.15L40.05 37Q39.75 37.55 39.2 37.725Q38.65 37.9 38.1 37.65L33.45 35.5Q32.65 36.15 31.625 36.775Q30.6 37.4 29.6 37.7L28.8 42.75Q28.7 43.3 28.275 43.65Q27.85 44 27.3 44ZM24 30.5Q26.7 30.5 28.6 28.6Q30.5 26.7 30.5 24Q30.5 21.3 28.6 19.4Q26.7 17.5 24 17.5Q21.3 17.5 19.4 19.4Q17.5 21.3 17.5 24Q17.5 26.7 19.4 28.6Q21.3 30.5 24 30.5Z",save:"M9 42Q7.8 42 6.9 41.1Q6 40.2 6 39V9Q6 7.8 6.9 6.9Q7.8 6 9 6H32.9Q33.5 6 34.05 6.225Q34.6 6.45 35.05 6.9L41.1 12.95Q41.55 13.4 41.775 13.95Q42 14.5 42 15.1V39Q42 40.2 41.1 41.1Q40.2 42 39 42ZM24 35.75Q26.15 35.75 27.675 34.225Q29.2 32.7 29.2 30.55Q29.2 28.4 27.675 26.875Q26.15 25.35 24 25.35Q21.85 25.35 20.325 26.875Q18.8 28.4 18.8 30.55Q18.8 32.7 20.325 34.225Q21.85 35.75 24 35.75ZM13.15 18.8H28.05Q28.7 18.8 29.125 18.375Q29.55 17.95 29.55 17.3V13.15Q29.55 12.5 29.125 12.075Q28.7 11.65 28.05 11.65H13.15Q12.5 11.65 12.075 12.075Q11.65 12.5 11.65 13.15V17.3Q11.65 17.95 12.075 18.375Q12.5 18.8 13.15 18.8Z",open:"M7 40Q5.85 40 4.925 39.075Q4 38.15 4 37V11Q4 9.85 4.925 8.925Q5.85 8 7 8H19.8Q20.4 8 20.975 8.25Q21.55 8.5 21.95 8.9L24.05 11H41Q42.15 11 43.075 11.925Q44 12.85 44 14H10Q8.75 14 7.875 14.875Q7 15.75 7 17V37Q7 37 7 37Q7 37 7 37L11.5 19.25Q11.75 18.25 12.6 17.625Q13.45 17 14.45 17H43.1Q44.55 17 45.5 18.15Q46.45 19.3 46.05 20.75L41.65 37.7Q41.35 38.9 40.55 39.45Q39.75 40 38.5 40Z",language:"M24 44Q19.8 44 16.15 42.425Q12.5 40.85 9.8 38.15Q7.1 35.45 5.55 31.775Q4 28.1 4 23.9Q4 19.7 5.55 16.075Q7.1 12.45 9.8 9.75Q12.5 7.05 16.15 5.525Q19.8 4 24 4Q28.2 4 31.85 5.525Q35.5 7.05 38.2 9.75Q40.9 12.45 42.45 16.075Q44 19.7 44 23.9Q44 28.1 42.45 31.775Q40.9 35.45 38.2 38.15Q35.5 40.85 31.85 42.425Q28.2 44 24 44ZM31.9 16.5H39.4Q37.75 13.05 34.875 10.75Q32 8.45 28.25 7.5Q29.5 9.35 30.375 11.5Q31.25 13.65 31.9 16.5ZM19.2 16.5H28.9Q28.35 13.85 27.05 11.375Q25.75 8.9 24 7Q22.4 8.35 21.3 10.55Q20.2 12.75 19.2 16.5ZM7.6 28.45H15.55Q15.4 27.1 15.375 26.025Q15.35 24.95 15.35 23.9Q15.35 22.65 15.4 21.675Q15.45 20.7 15.6 19.5H7.6Q7.25 20.7 7.125 21.65Q7 22.6 7 23.9Q7 25.2 7.125 26.225Q7.25 27.25 7.6 28.45ZM19.75 40.5Q18.5 38.6 17.6 36.4Q16.7 34.2 16.1 31.45H8.6Q10.5 35 13 37.025Q15.5 39.05 19.75 40.5ZM8.6 16.5H16.15Q16.7 13.8 17.55 11.675Q18.4 9.55 19.7 7.55Q15.95 8.5 13.15 10.75Q10.35 13 8.6 16.5ZM24 41.1Q25.75 39.3 26.925 36.975Q28.1 34.65 28.85 31.45H19.2Q19.9 34.45 21.075 36.85Q22.25 39.25 24 41.1ZM18.65 28.45H29.4Q29.6 26.9 29.65 25.925Q29.7 24.95 29.7 23.9Q29.7 22.9 29.65 21.975Q29.6 21.05 29.4 19.5H18.65Q18.45 21.05 18.4 21.975Q18.35 22.9 18.35 23.9Q18.35 24.95 18.4 25.925Q18.45 26.9 18.65 28.45ZM28.3 40.45Q31.9 39.3 34.775 37Q37.65 34.7 39.4 31.45H31.95Q31.3 34.15 30.425 36.35Q29.55 38.55 28.3 40.45ZM32.4 28.45H40.4Q40.75 27.25 40.875 26.225Q41 25.2 41 23.9Q41 22.6 40.875 21.65Q40.75 20.7 40.4 19.5H32.45Q32.6 21.25 32.65 22.175Q32.7 23.1 32.7 23.9Q32.7 25 32.625 25.975Q32.55 26.95 32.4 28.45Z",help:"M24.05 31.5Q22.9 31.5 22.225 30.7Q21.55 29.9 21.7 28.75Q21.95 26.95 22.775 25.55Q23.6 24.15 25.3 22.65Q27.4 20.75 28.525 19.125Q29.65 17.5 29.65 15.65Q29.65 13.4 28.15 11.9Q26.65 10.4 23.95 10.4Q22.1 10.4 20.875 11.15Q19.65 11.9 18.9 13Q18.35 13.8 17.5 14.1Q16.65 14.4 15.85 14.05Q14.85 13.65 14.625 12.6Q14.4 11.55 14.95 10.7Q16.35 8.65 18.625 7.325Q20.9 6 23.95 6Q28.95 6 31.65 8.775Q34.35 11.55 34.35 15.45Q34.35 17.85 33.325 19.8Q32.3 21.75 30.05 23.9Q28.3 25.6 27.6 26.65Q26.9 27.7 26.7 29.05Q26.55 30.1 25.8 30.8Q25.05 31.5 24.05 31.5ZM23.95 44Q22.5 44 21.475 42.975Q20.45 41.95 20.45 40.5Q20.45 39.05 21.475 38.025Q22.5 37 23.95 37Q25.4 37 26.425 38.025Q27.45 39.05 27.45 40.5Q27.45 41.95 26.425 42.975Q25.4 44 23.95 44Z"},o,function(e){nt.call(this,t,e)},function(e){nt.call(this,t,e)},function(e){nt.call(this,t,e)},function(e){nt.call(this,t,e)},function(e){nt.call(this,t,e)},function(e){nt.call(this,t,e)}]}class td extends Rt{constructor(t){super(),Lt(this,t,Zf,Yf,c,{disabled:0,title:1,icon:2})}}function ed(t){let e,n,s,r,o,i,c,a,l;return n=new td({props:{icon:"settings",title:t[0].menu.buttons.settings.title}}),n.$on("click",t[1]),r=new td({props:{icon:"save",title:t[0].menu.buttons.save.title}}),r.$on("click",t[3]),i=new td({props:{icon:"open",title:t[0].menu.buttons.open.title}}),i.$on("click",t[2]),a=new td({props:{icon:"help",title:t[0].menu.buttons.help.title,disabled:!0}}),{c(){e=L("div"),It(n.$$.fragment),s=D(),It(r.$$.fragment),o=D(),It(i.$$.fragment),c=D(),It(a.$$.fragment),M(e,"class","absolute top-0 right-0 p-2 flex flex-row-reverse gap-1 z-[4]")},m(t,u){T(t,e,u),Tt(n,e,null),E(e,s),Tt(r,e,null),E(e,o),Tt(i,e,null),E(e,c),Tt(a,e,null),l=!0},p(t,[e]){const s={};1&e&&(s.title=t[0].menu.buttons.settings.title),n.$set(s);const o={};1&e&&(o.title=t[0].menu.buttons.save.title),r.$set(o);const c={};1&e&&(c.title=t[0].menu.buttons.open.title),i.$set(c);const l={};1&e&&(l.title=t[0].menu.buttons.help.title),a.$set(l)},i(t){l||(xt(n.$$.fragment,t),xt(r.$$.fragment,t),xt(i.$$.fragment,t),xt(a.$$.fragment,t),l=!0)},o(t){kt(n.$$.fragment,t),kt(r.$$.fragment,t),kt(i.$$.fragment,t),kt(a.$$.fragment,t),l=!1},d(t){t&&C(e),Ct(n),Ct(r),Ct(i),Ct(a)}}}function nd(t,e,n){let s,r,o;u(t,jt,(t=>n(4,s=t))),u(t,Ce,(t=>n(5,r=t))),u(t,So,(t=>n(0,o=t)));var i=this&&this.__awaiter||function(t,e,n,s){return new(n||(n=Promise))((function(r,o){function i(t){try{a(s.next(t))}catch(t){o(t)}}function c(t){try{a(s.throw(t))}catch(t){o(t)}}function a(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,c)}a((s=s.apply(t,e||[])).next())}))};return[o,function(){w(Ce,r=!0,r),Ei.info("Settings opened","USER_INPUT")},function(){return i(this,void 0,void 0,(function*(){try{const t=(yield ju(".cpuvs"))[0],e=function(t){var e=t.split(/\r\n|\r|\n/g),n=[],s=[],r=0;e.forEach((function(t,e){var o=e+1,i=t.replace(Xf,"").replace(/\s+/g," ").trim();if(""!==i){if(!zf.test(i)){var c=i.length>30?"".concat(i.slice(0,30),"..."):i;throw new Vf(Gf(l(So).errors.program_parsing.invalid_syntax,o,c))}var a=i.split(":").map((function(t){return t.trim()})),u=a[0],f=a[1];if(n.push({text:u,lineNumber:o,address:r}),f&&s.includes(f))throw new Vf(Gf(l(So).errors.program_parsing.duplicate_label,o,f));s[r]=f,r+=2}})),r=0;var o=[];return n.forEach((function(t){try{o[t.address]=Lo(t.text,s)}catch(e){throw new Vf(Gf(l(So).errors.program_parsing.parsing_error,t.lineNumber,e.message))}})),{instructions:o,labels:s}}(yield t.text());tc.importLabels(e.labels),Gi.importInstructions(e.instructions)}catch(t){Ei.error(t,"USER_INPUT",t.isChecked),s.error(t.message)}Ei.info("Program loaded from file","USER_INPUT")}))},function(){try{let t=prompt("File name");if(!t)throw new rn(l(So).errors.user_input.invalid_file_name);Fu(function(t,e){for(var n="",s="",r="",o=0;o<=hn;o+=2)s=t[o].symbolic(),n+="\t".concat(s),r=" ".repeat(20-s.length),e[o]&&(n+="".concat(r,":").concat(e[o])),n+="\n";return n.replace(/(\tNOP\n)*$/g,"").replace(/\n$/g,"")}(Gi.exportInstructions(),tc.exportLabels()),`${t}.cpuvs`)}catch(t){Ei.error(t,"USER_INPUT",t.isChecked),s.error(t.message)}Ei.info("Program saved to file","USER_INPUT")}]}class sd extends Rt{constructor(t){super(),Lt(this,t,nd,ed,c,{})}}function rd(e){let n,s,r,i,c,a,l,u;return{c(){n=L("button"),s=R("svg"),r=R("path"),i=R("path"),M(r,"d","M0 0h24v24H0V0z"),M(r,"fill","none"),M(i,"d","M18.3 5.71c-.39-.39-1.02-.39-1.41 0L12 10.59 7.11 5.7c-.39-.39-1.02-.39-1.41 0-.39.39-.39 1.02 0 1.41L10.59 12 5.7 16.89c-.39.39-.39 1.02 0 1.41.39.39 1.02.39 1.41 0L12 13.41l4.89 4.89c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L13.41 12l4.89-4.89c.38-.38.38-1.02 0-1.4z"),M(s,"xmlns","http://www.w3.org/2000/svg"),M(s,"viewBox","0 0 24 24"),M(s,"fill","#FFFFFF"),M(s,"class",c="h-10 w-10 "+(e[0]?"":"hover:scale-105")+" fill-black"),M(n,"class",a="disabled:brightness-[.6] disabled:cursor-default active:brightness-90 "+e[1].class),n.disabled=e[0]},m(t,o){T(t,n,o),E(n,s),E(s,r),E(s,i),l||(u=[Q(n,"click",e[2]),Q(n,"focus",e[3]),Q(n,"focusout",e[4]),Q(n,"mouseenter",e[5]),Q(n,"mouseleave",e[6]),Q(n,"mouseover",e[7])],l=!0)},p(t,[e]){1&e&&c!==(c="h-10 w-10 "+(t[0]?"":"hover:scale-105")+" fill-black")&&M(s,"class",c),2&e&&a!==(a="disabled:brightness-[.6] disabled:cursor-default active:brightness-90 "+t[1].class)&&M(n,"class",a),1&e&&(n.disabled=t[0])},i:t,o:t,d(t){t&&C(n),l=!1,o(u)}}}function od(t,e,s){const r=["disabled"];let o=$(e,r),{disabled:i=!1}=e;return t.$$set=t=>{e=n(n({},e),g(t)),s(1,o=$(e,r)),"disabled"in t&&s(0,i=t.disabled)},[i,o,function(e){nt.call(this,t,e)},function(e){nt.call(this,t,e)},function(e){nt.call(this,t,e)},function(e){nt.call(this,t,e)},function(e){nt.call(this,t,e)},function(e){nt.call(this,t,e)}]}class id extends Rt{constructor(t){super(),Lt(this,t,od,rd,c,{disabled:0})}}function cd(t){let e,n,s,r,o,i,c,a,l;const u=t[3].default,d=f(u,t,t[2],null);return{c(){e=L("div"),n=L("div"),s=L("h2"),r=U(t[0]),o=D(),i=L("p"),c=U(t[1]),a=D(),d&&d.c(),M(s,"class","text-2xl font-bold"),M(i,"class","text-sm text-neutral-500"),M(n,"class","flex flex-col"),M(e,"class","w-full flex flex-row items-center justify-between border-b border-neutral-500 p-3 pl-11 pr-24")},m(t,u){T(t,e,u),E(e,n),E(n,s),E(s,r),E(n,o),E(n,i),E(i,c),E(e,a),d&&d.m(e,null),l=!0},p(t,[e]){(!l||1&e)&&F(r,t[0]),(!l||2&e)&&F(c,t[1]),d&&d.p&&(!l||4&e)&&h(d,u,t,t[2],l?p(u,t[2],e,null):m(t[2]),null)},i(t){l||(xt(d,t),l=!0)},o(t){kt(d,t),l=!1},d(t){t&&C(e),d&&d.d(t)}}}function ad(t,e,n){let{$$slots:s={},$$scope:r}=e,{title:o=""}=e,{description:i=""}=e;return t.$$set=t=>{"title"in t&&n(0,o=t.title),"description"in t&&n(1,i=t.description),"$$scope"in t&&n(2,r=t.$$scope)},[o,i,r,s]}class ld extends Rt{constructor(t){super(),Lt(this,t,ad,cd,c,{title:0,description:1})}}function ud(e){let n,s,r,i,c,a;return{c(){n=L("div"),s=L("div"),M(s,"class",r="h-7 w-7 bg-neutral-100 rounded-2xl transition-transform shadow-lg "+(e[0]?"translate-x-full":"")),M(n,"class",i="w-14 h-7 rounded-2xl p-[2px] box-content flex items-center flex-shrink-0 "+(e[1]?"cursor-default":"cursor-pointer")+" "+(e[0]?"bg-green-500":"bg-neutral-500")+" "+(e[1]?"brightness-[.6]":"")+" "+e[3].class),M(n,"disabled",e[1])},m(t,r){T(t,n,r),E(n,s),c||(a=[Q(n,"click",e[2]),Q(n,"focus",e[4]),Q(n,"focusout",e[5]),Q(n,"mouseenter",e[6]),Q(n,"mouseleave",e[7]),Q(n,"mouseover",e[8])],c=!0)},p(t,[e]){1&e&&r!==(r="h-7 w-7 bg-neutral-100 rounded-2xl transition-transform shadow-lg "+(t[0]?"translate-x-full":""))&&M(s,"class",r),11&e&&i!==(i="w-14 h-7 rounded-2xl p-[2px] box-content flex items-center flex-shrink-0 "+(t[1]?"cursor-default":"cursor-pointer")+" "+(t[0]?"bg-green-500":"bg-neutral-500")+" "+(t[1]?"brightness-[.6]":"")+" "+t[3].class)&&M(n,"class",i),2&e&&M(n,"disabled",t[1])},i:t,o:t,d(t){t&&C(n),c=!1,o(a)}}}function fd(t,e,s){const r=["disabled","checked"];let o=$(e,r),{disabled:i=!1}=e,{checked:c=!1}=e;const a=et();return t.$$set=t=>{e=n(n({},e),g(t)),s(3,o=$(e,r)),"disabled"in t&&s(1,i=t.disabled),"checked"in t&&s(0,c=t.checked)},[c,i,function(t){s(0,c=!c),a("click",t)},o,function(e){nt.call(this,t,e)},function(e){nt.call(this,t,e)},function(e){nt.call(this,t,e)},function(e){nt.call(this,t,e)},function(e){nt.call(this,t,e)}]}class dd extends Rt{constructor(t){super(),Lt(this,t,fd,ud,c,{disabled:1,checked:0})}}function pd(t,e,n){const s=t.slice();return s[13]=e[n],s}function hd(t){let e,n;return{c(){e=L("option"),n=U(t[1]),M(e,"class","text-black bg-white"),e.__value="",e.value=e.__value,e.selected=!0,e.disabled=!0},m(t,s){T(t,e,s),E(e,n)},p(t,e){2&e&&F(n,t[1])},d(t){t&&C(e)}}}function md(t){let e,n,s,r=t[13]+"";return{c(){e=L("option"),n=U(r),M(e,"class","text-black bg-white"),e.__value=s=t[13],e.value=e.__value},m(t,s){T(t,e,s),E(e,n)},p(t,o){8&o&&r!==(r=t[13]+"")&&F(n,r),8&o&&s!==(s=t[13])&&(e.__value=s,e.value=e.__value)},d(t){t&&C(e)}}}function gd(e){let n,s,r,i,c,a=""!==e[1]&&hd(e),l=e[3],u=[];for(let t=0;t<l.length;t+=1)u[t]=md(pd(e,l,t));return{c(){n=L("select"),a&&a.c(),s=P();for(let t=0;t<u.length;t+=1)u[t].c();M(n,"class",r="cursor-pointer bg-transparent border-2 border-black text-black rounded-md px-1 disabled:brightness-[.6] w-fit "+e[4].class),n.disabled=e[2],void 0===e[0]&&lt((()=>e[12].call(n)))},m(t,r){T(t,n,r),a&&a.m(n,null),E(n,s);for(let t=0;t<u.length;t+=1)u[t].m(n,null);W(n,e[0]),i||(c=[Q(n,"input",e[5]),Q(n,"change",e[6]),Q(n,"focus",e[7]),Q(n,"focusout",e[8]),Q(n,"mouseenter",e[9]),Q(n,"mouseleave",e[10]),Q(n,"mouseover",e[11]),Q(n,"change",e[12])],i=!0)},p(t,[e]){if(""!==t[1]?a?a.p(t,e):(a=hd(t),a.c(),a.m(n,s)):a&&(a.d(1),a=null),8&e){let s;for(l=t[3],s=0;s<l.length;s+=1){const r=pd(t,l,s);u[s]?u[s].p(r,e):(u[s]=md(r),u[s].c(),u[s].m(n,null))}for(;s<u.length;s+=1)u[s].d(1);u.length=l.length}16&e&&r!==(r="cursor-pointer bg-transparent border-2 border-black text-black rounded-md px-1 disabled:brightness-[.6] w-fit "+t[4].class)&&M(n,"class",r),4&e&&(n.disabled=t[2]),9&e&&W(n,t[0])},i:t,o:t,d(t){t&&C(n),a&&a.d(),O(u,t),i=!1,o(c)}}}function $d(t,e,s){const r=["value","placeholder","disabled","options"];let o=$(e,r),{value:i=""}=e,{placeholder:c=""}=e,{disabled:a=!1}=e,{options:l=[]}=e;return t.$$set=t=>{e=n(n({},e),g(t)),s(4,o=$(e,r)),"value"in t&&s(0,i=t.value),"placeholder"in t&&s(1,c=t.placeholder),"disabled"in t&&s(2,a=t.disabled),"options"in t&&s(3,l=t.options)},[i,c,a,l,o,function(e){nt.call(this,t,e)},function(e){nt.call(this,t,e)},function(e){nt.call(this,t,e)},function(e){nt.call(this,t,e)},function(e){nt.call(this,t,e)},function(e){nt.call(this,t,e)},function(e){nt.call(this,t,e)},function(){i=q(this),s(0,i),s(3,l)}]}class yd extends Rt{constructor(t){super(),Lt(this,t,$d,gd,c,{value:0,placeholder:1,disabled:2,options:3})}}function wd(e){let n,s,r,i;return{c(){n=L("input"),M(n,"type","range"),M(n,"class",s=y(e[6].class)+" svelte-10k18fr"),M(n,"min",e[1]),M(n,"max",e[2]),M(n,"step",e[3]),n.disabled=e[4],M(n,"title",e[5])},m(t,s){T(t,n,s),j(n,e[0]),r||(i=[Q(n,"change",e[14]),Q(n,"input",e[14]),Q(n,"input",e[7]),Q(n,"change",e[8]),Q(n,"focus",e[9]),Q(n,"focusout",e[10]),Q(n,"mouseenter",e[11]),Q(n,"mouseleave",e[12]),Q(n,"mouseover",e[13])],r=!0)},p(t,[e]){64&e&&s!==(s=y(t[6].class)+" svelte-10k18fr")&&M(n,"class",s),2&e&&M(n,"min",t[1]),4&e&&M(n,"max",t[2]),8&e&&M(n,"step",t[3]),16&e&&(n.disabled=t[4]),32&e&&M(n,"title",t[5]),1&e&&j(n,t[0])},i:t,o:t,d(t){t&&C(n),r=!1,o(i)}}}function bd(t,e,s){const r=["min","max","value","step","disabled","title"];let o=$(e,r),{min:i=0}=e,{max:c=1}=e,{value:a=c/2+i}=e,{step:l=.1}=e,{disabled:u=!1}=e,{title:f=""}=e;return t.$$set=t=>{e=n(n({},e),g(t)),s(6,o=$(e,r)),"min"in t&&s(1,i=t.min),"max"in t&&s(2,c=t.max),"value"in t&&s(0,a=t.value),"step"in t&&s(3,l=t.step),"disabled"in t&&s(4,u=t.disabled),"title"in t&&s(5,f=t.title)},[a,i,c,l,u,f,o,function(e){nt.call(this,t,e)},function(e){nt.call(this,t,e)},function(e){nt.call(this,t,e)},function(e){nt.call(this,t,e)},function(e){nt.call(this,t,e)},function(e){nt.call(this,t,e)},function(e){nt.call(this,t,e)},function(){a=B(this.value),s(0,a)}]}class vd extends Rt{constructor(t){super(),Lt(this,t,bd,wd,c,{min:1,max:2,value:0,step:3,disabled:4,title:5})}}function xd(t){let e,n,s,r,o,i,c,a,l,u,f,d,p,h,m,g,$,y,w,b,v,x=t[1].settings.title+"";return i=new id({}),i.$on("click",t[9]),l=new ld({props:{title:t[1].settings.language.title,description:t[1].settings.language.description,$$slots:{default:[kd]},$$scope:{ctx:t}}}),f=new ld({props:{title:t[1].settings.dispaly_labels.title,description:t[1].settings.dispaly_labels.description,$$slots:{default:[_d]},$$scope:{ctx:t}}}),p=new ld({props:{title:t[1].settings.display_step_text.title,description:t[1].settings.display_step_text.description,$$slots:{default:[Sd]},$$scope:{ctx:t}}}),m=new ld({props:{title:t[1].settings.tts_enabled.title,description:t[1].settings.tts_enabled.description,$$slots:{default:[Ad]},$$scope:{ctx:t}}}),$=new ld({props:{title:t[1].settings.tts_speed.title,description:t[1].settings.tts_speed.description,$$slots:{default:[Ed]},$$scope:{ctx:t}}}),w=new ld({props:{title:t[1].settings.tts_voice.title,description:t[1].settings.tts_voice.description,$$slots:{default:[Nd]},$$scope:{ctx:t}}}),{c(){e=L("div"),n=L("div"),s=L("h1"),r=U(x),o=D(),It(i.$$.fragment),c=D(),a=L("div"),It(l.$$.fragment),u=D(),It(f.$$.fragment),d=D(),It(p.$$.fragment),h=D(),It(m.$$.fragment),g=D(),It($.$$.fragment),y=D(),It(w.$$.fragment),M(s,"class","text-[2.8rem] font-bold"),M(n,"class","w-full flex flex-row items-center justify-between pt-3 pb-5 px-9 border-b border-neutral-500"),M(a,"class","w-full flex flex-col"),M(e,"class","fixed w-screen h-screen top-0 left-0 bg-gray-100")},m(t,b){T(t,e,b),E(e,n),E(n,s),E(s,r),E(n,o),Tt(i,n,null),E(e,c),E(e,a),Tt(l,a,null),E(a,u),Tt(f,a,null),E(a,d),Tt(p,a,null),E(a,h),Tt(m,a,null),E(a,g),Tt($,a,null),E(a,y),Tt(w,a,null),v=!0},p(t,e){(!v||2&e)&&x!==(x=t[1].settings.title+"")&&F(r,x);const n={};2&e&&(n.title=t[1].settings.language.title),2&e&&(n.description=t[1].settings.language.description),65540&e&&(n.$$scope={dirty:e,ctx:t}),l.$set(n);const s={};2&e&&(s.title=t[1].settings.dispaly_labels.title),2&e&&(s.description=t[1].settings.dispaly_labels.description),65544&e&&(s.$$scope={dirty:e,ctx:t}),f.$set(s);const o={};2&e&&(o.title=t[1].settings.display_step_text.title),2&e&&(o.description=t[1].settings.display_step_text.description),65552&e&&(o.$$scope={dirty:e,ctx:t}),p.$set(o);const i={};2&e&&(i.title=t[1].settings.tts_enabled.title),2&e&&(i.description=t[1].settings.tts_enabled.description),65568&e&&(i.$$scope={dirty:e,ctx:t}),m.$set(i);const c={};2&e&&(c.title=t[1].settings.tts_speed.title),2&e&&(c.description=t[1].settings.tts_speed.description),65600&e&&(c.$$scope={dirty:e,ctx:t}),$.$set(c);const a={};2&e&&(a.title=t[1].settings.tts_voice.title),2&e&&(a.description=t[1].settings.tts_voice.description),65920&e&&(a.$$scope={dirty:e,ctx:t}),w.$set(a)},i(t){v||(xt(i.$$.fragment,t),xt(l.$$.fragment,t),xt(f.$$.fragment,t),xt(p.$$.fragment,t),xt(m.$$.fragment,t),xt($.$$.fragment,t),xt(w.$$.fragment,t),lt((()=>{b||(b=St(e,Mu,{duration:75},!0)),b.run(1)})),v=!0)},o(t){kt(i.$$.fragment,t),kt(l.$$.fragment,t),kt(f.$$.fragment,t),kt(p.$$.fragment,t),kt(m.$$.fragment,t),kt($.$$.fragment,t),kt(w.$$.fragment,t),b||(b=St(e,Mu,{duration:75},!1)),b.run(0),v=!1},d(t){t&&C(e),Ct(i),Ct(l),Ct(f),Ct(p),Ct(m),Ct($),Ct(w),t&&b&&b.end()}}}function kd(t){let e,n,s;function r(e){t[10](e)}let o={options:[...Te]};return void 0!==t[2]&&(o.value=t[2]),e=new yd({props:o}),rt.push((()=>Nt(e,"value",r))),{c(){It(e.$$.fragment)},m(t,n){Tt(e,t,n),s=!0},p(t,s){const r={};!n&&4&s&&(n=!0,r.value=t[2],ut((()=>n=!1))),e.$set(r)},i(t){s||(xt(e.$$.fragment,t),s=!0)},o(t){kt(e.$$.fragment,t),s=!1},d(t){Ct(e,t)}}}function _d(t){let e,n,s;function r(e){t[11](e)}let o={};return void 0!==t[3]&&(o.checked=t[3]),e=new dd({props:o}),rt.push((()=>Nt(e,"checked",r))),{c(){It(e.$$.fragment)},m(t,n){Tt(e,t,n),s=!0},p(t,s){const r={};!n&&8&s&&(n=!0,r.checked=t[3],ut((()=>n=!1))),e.$set(r)},i(t){s||(xt(e.$$.fragment,t),s=!0)},o(t){kt(e.$$.fragment,t),s=!1},d(t){Ct(e,t)}}}function Sd(t){let e,n,s;function r(e){t[12](e)}let o={};return void 0!==t[4]&&(o.checked=t[4]),e=new dd({props:o}),rt.push((()=>Nt(e,"checked",r))),{c(){It(e.$$.fragment)},m(t,n){Tt(e,t,n),s=!0},p(t,s){const r={};!n&&16&s&&(n=!0,r.checked=t[4],ut((()=>n=!1))),e.$set(r)},i(t){s||(xt(e.$$.fragment,t),s=!0)},o(t){kt(e.$$.fragment,t),s=!1},d(t){Ct(e,t)}}}function Ad(t){let e,n,s;function r(e){t[13](e)}let o={};return void 0!==t[5]&&(o.checked=t[5]),e=new dd({props:o}),rt.push((()=>Nt(e,"checked",r))),{c(){It(e.$$.fragment)},m(t,n){Tt(e,t,n),s=!0},p(t,s){const r={};!n&&32&s&&(n=!0,r.checked=t[5],ut((()=>n=!1))),e.$set(r)},i(t){s||(xt(e.$$.fragment,t),s=!0)},o(t){kt(e.$$.fragment,t),s=!1},d(t){Ct(e,t)}}}function Ed(t){let e,n,s,r,o,i,c;function a(e){t[14](e)}let l={min:.5,max:1.5};return void 0!==t[6]&&(l.value=t[6]),o=new vd({props:l}),rt.push((()=>Nt(o,"value",a))),{c(){e=L("div"),n=L("p"),s=U(t[6]),r=D(),It(o.$$.fragment),M(e,"class","w-36 flex flex-col items-center justify-center")},m(t,i){T(t,e,i),E(e,n),E(n,s),E(e,r),Tt(o,e,null),c=!0},p(t,e){(!c||64&e)&&F(s,t[6]);const n={};!i&&64&e&&(i=!0,n.value=t[6],ut((()=>i=!1))),o.$set(n)},i(t){c||(xt(o.$$.fragment,t),c=!0)},o(t){kt(o.$$.fragment,t),c=!1},d(t){t&&C(e),Ct(o)}}}function Nd(t){let e,n,s;function r(e){t[15](e)}let o={options:t[7].map(Td)};return void 0!==t[8]&&(o.value=t[8]),e=new yd({props:o}),rt.push((()=>Nt(e,"value",r))),{c(){It(e.$$.fragment)},m(t,n){Tt(e,t,n),s=!0},p(t,s){const r={};128&s&&(r.options=t[7].map(Td)),!n&&256&s&&(n=!0,r.value=t[8],ut((()=>n=!1))),e.$set(r)},i(t){s||(xt(e.$$.fragment,t),s=!0)},o(t){kt(e.$$.fragment,t),s=!1},d(t){Ct(e,t)}}}function Id(t){let e,n,s=t[0]&&xd(t);return{c(){s&&s.c(),e=P()},m(t,r){s&&s.m(t,r),T(t,e,r),n=!0},p(t,[n]){t[0]?s?(s.p(t,n),1&n&&xt(s,1)):(s=xd(t),s.c(),xt(s,1),s.m(e.parentNode,e)):s&&(bt(),kt(s,1,1,(()=>{s=null})),vt())},i(t){n||(xt(s),n=!0)},o(t){kt(s),n=!1},d(t){s&&s.d(t),t&&C(e)}}}const Td=t=>t.name;function Cd(t,e,n){let s,r,o,i,c,a,l,f,d;return u(t,Ce,(t=>n(0,s=t))),u(t,So,(t=>n(1,r=t))),u(t,Pe,(t=>n(2,o=t))),u(t,Le,(t=>n(3,i=t))),u(t,Re,(t=>n(4,c=t))),u(t,Qe,(t=>n(5,a=t))),u(t,Me,(t=>n(6,l=t))),u(t,Fe,(t=>n(7,f=t))),u(t,Be,(t=>n(8,d=t))),[s,r,o,i,c,a,l,f,d,function(){w(Ce,s=!1,s),Ei.info("Settings closed","USER_INPUT")},function(t){o=t,Pe.set(o)},function(t){i=t,Le.set(i)},function(t){c=t,Re.set(c)},function(t){a=t,Qe.set(a)},function(t){l=t,Me.set(l)},function(t){d=t,Be.set(d)}]}class Od extends Rt{constructor(t){super(),Lt(this,t,Cd,Id,c,{})}}const{window:Ld}=At;function Rd(t){let e,n,s,r,i,c,a,l,u,f,d,p,h,m,g,$,y;n=new Bc({});r=new Hf({props:{}}),t[9](r);c=new sd({props:{}}),t[10](c);l=new Pu({props:{}}),t[12](l);f=new mf({props:{}}),t[13](f);p=new sf({props:{}}),t[14](p);return m=new Od({props:{}}),t[15](m),{c(){e=L("div"),It(n.$$.fragment),s=D(),It(r.$$.fragment),i=D(),It(c.$$.fragment),a=D(),It(l.$$.fragment),u=D(),It(f.$$.fragment),d=D(),It(p.$$.fragment),h=D(),It(m.$$.fragment),M(e,"class","relative w-app h-app origin-top-left")},m(o,w){T(o,e,w),Tt(n,e,null),E(e,s),Tt(r,e,null),E(e,i),Tt(c,e,null),t[11](e),T(o,a,w),Tt(l,o,w),T(o,u,w),Tt(f,o,w),T(o,d,w),Tt(p,o,w),T(o,h,w),Tt(m,o,w),g=!0,$||(y=[Q(Ld,"resize",t[7]),Q(Ld,"error",t[8])],$=!0)},p(t,[e]){r.$set({});c.$set({});l.$set({});f.$set({});p.$set({});m.$set({})},i(t){g||(xt(n.$$.fragment,t),xt(r.$$.fragment,t),xt(c.$$.fragment,t),xt(l.$$.fragment,t),xt(f.$$.fragment,t),xt(p.$$.fragment,t),xt(m.$$.fragment,t),g=!0)},o(t){kt(n.$$.fragment,t),kt(r.$$.fragment,t),kt(c.$$.fragment,t),kt(l.$$.fragment,t),kt(f.$$.fragment,t),kt(p.$$.fragment,t),kt(m.$$.fragment,t),g=!1},d(s){s&&C(e),Ct(n),t[9](null),Ct(r),t[10](null),Ct(c),t[11](null),s&&C(a),t[12](null),Ct(l,s),s&&C(u),t[13](null),Ct(f,s),s&&C(d),t[14](null),Ct(p,s),s&&C(h),t[15](null),Ct(m,s),$=!1,o(y)}}}function Ud(t,e,n){let s,r,o,i,c,a,l;function f(){let t=window.innerWidth/1400,e=window.innerHeight/800,s=t<e?t:e;n(0,l.style.transform=`scale(${s})`,l)}return u(t,Bt,(t=>n(1,s=t))),u(t,Wt,(t=>n(2,r=t))),u(t,Ft,(t=>n(3,o=t))),u(t,Kt,(t=>n(4,i=t))),u(t,jt,(t=>n(5,c=t))),u(t,Ht,(t=>n(6,a=t))),tt(f),[l,s,r,o,i,c,a,f,function(t){t.preventDefault(),Ei.error(t.error,"UNCAUGHT")},function(t){rt[t?"unshift":"push"]((()=>{s=t,Bt.set(s)}))},function(t){rt[t?"unshift":"push"]((()=>{r=t,Wt.set(r)}))},function(t){rt[t?"unshift":"push"]((()=>{l=t,n(0,l)}))},function(t){rt[t?"unshift":"push"]((()=>{o=t,Ft.set(o)}))},function(t){rt[t?"unshift":"push"]((()=>{i=t,Kt.set(i)}))},function(t){rt[t?"unshift":"push"]((()=>{c=t,jt.set(c)}))},function(t){rt[t?"unshift":"push"]((()=>{a=t,Ht.set(a)}))}]}return new class extends Rt{constructor(t){super(),Lt(this,t,Ud,Rd,c,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
