var app=function(){"use strict";function t(){}const e=t=>t;function n(t){return t()}function r(){return Object.create(null)}function o(t){t.forEach(n)}function i(t){return"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function u(e,...n){if(null==e)return t;const r=e.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}function c(t){let e;return u(t,(t=>e=t))(),e}function a(t,e,n){t.$$.on_destroy.push(u(e,n))}function l(e){return e&&i(e.destroy)?e.destroy:t}const f="undefined"!=typeof window;let d=f?()=>window.performance.now():()=>Date.now(),h=f?t=>requestAnimationFrame(t):t;const p=new Set;function g(t){p.forEach((e=>{e.c(t)||(p.delete(e),e.f())})),0!==p.size&&h(g)}function m(t){let e;return 0===p.size&&h(g),{promise:new Promise((n=>{p.add(e={c:t,f:n})})),abort(){p.delete(e)}}}function w(t,e){t.appendChild(e)}function v(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function b(t){const e=A("style");return function(t,e){w(t.head||t,e)}(v(t),e),e.sheet}function y(t,e,n){t.insertBefore(e,n||null)}function x(t){t.parentNode.removeChild(t)}function $(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function A(t){return document.createElement(t)}function C(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function L(t){return document.createTextNode(t)}function R(){return L(" ")}function k(){return L("")}function N(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function I(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function S(t){return""===t?null:+t}function U(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function E(t,e){t.value=null==e?"":e}function T(t,e,n,r){null===n?t.style.removeProperty(e):t.style.setProperty(e,n,r?"important":"")}function O(t,e){for(let n=0;n<t.options.length;n+=1){const r=t.options[n];if(r.__value===e)return void(r.selected=!0)}t.selectedIndex=-1}function D(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}function _(t,e,{bubbles:n=!1,cancelable:r=!1}={}){const o=document.createEvent("CustomEvent");return o.initCustomEvent(t,n,r,e),o}const P=new Map;let M,F=0;function z(t,e,n,r,o,i,s,u=0){const c=16.666/r;let a="{\n";for(let t=0;t<=1;t+=c){const r=e+(n-e)*i(t);a+=100*t+`%{${s(r,1-r)}}\n`}const l=a+`100% {${s(n,1-n)}}\n}`,f=`__svelte_${function(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(l)}_${u}`,d=v(t),{stylesheet:h,rules:p}=P.get(d)||function(t,e){const n={stylesheet:b(e),rules:{}};return P.set(t,n),n}(d,t);p[f]||(p[f]=!0,h.insertRule(`@keyframes ${f} ${l}`,h.cssRules.length));const g=t.style.animation||"";return t.style.animation=`${g?`${g}, `:""}${f} ${r}ms linear ${o}ms 1 both`,F+=1,f}function B(t,e){const n=(t.style.animation||"").split(", "),r=n.filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")),o=n.length-r.length;o&&(t.style.animation=r.join(", "),F-=o,F||h((()=>{F||(P.forEach((t=>{const{stylesheet:e}=t;let n=e.cssRules.length;for(;n--;)e.deleteRule(n);t.rules={}})),P.clear())})))}function H(t){M=t}function W(){if(!M)throw new Error("Function called outside component initialization");return M}function j(t){W().$$.on_mount.push(t)}const X=[],Z=[],V=[],G=[],J=Promise.resolve();let q=!1;function K(t){V.push(t)}const Q=new Set;let Y,tt=0;function et(){const t=M;do{for(;tt<X.length;){const t=X[tt];tt++,H(t),nt(t.$$)}for(H(null),X.length=0,tt=0;Z.length;)Z.pop()();for(let t=0;t<V.length;t+=1){const e=V[t];Q.has(e)||(Q.add(e),e())}V.length=0}while(X.length);for(;G.length;)G.pop()();q=!1,Q.clear(),H(t)}function nt(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(K)}}function rt(){return Y||(Y=Promise.resolve(),Y.then((()=>{Y=null}))),Y}function ot(t,e,n){t.dispatchEvent(_(`${e?"intro":"outro"}${n}`))}const it=new Set;let st;function ut(){st={r:0,c:[],p:st}}function ct(){st.r||o(st.c),st=st.p}function at(t,e){t&&t.i&&(it.delete(t),t.i(e))}function lt(t,e,n,r){if(t&&t.o){if(it.has(t))return;it.add(t),st.c.push((()=>{it.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}}const ft={duration:0};function dt(n,r,s,u){let c=r(n,s),a=u?0:1,l=null,f=null,h=null;function p(){h&&B(n,h)}function g(t,e){const n=t.b-a;return e*=Math.abs(n),{a:a,b:t.b,d:n,duration:e,start:t.start,end:t.start+e,group:t.group}}function w(r){const{delay:i=0,duration:s=300,easing:u=e,tick:w=t,css:v}=c||ft,b={start:d()+i,b:r};r||(b.group=st,st.r+=1),l||f?f=b:(v&&(p(),h=z(n,a,r,s,i,u,v)),r&&w(0,1),l=g(b,s),K((()=>ot(n,r,"start"))),m((t=>{if(f&&t>f.start&&(l=g(f,s),f=null,ot(n,l.b,"start"),v&&(p(),h=z(n,a,l.b,l.duration,0,u,c.css))),l)if(t>=l.end)w(a=l.b,1-a),ot(n,l.b,"end"),f||(l.b?p():--l.group.r||o(l.group.c)),l=null;else if(t>=l.start){const e=t-l.start;a=l.a+l.d*u(e/l.duration),w(a,1-a)}return!(!l&&!f)})))}return{run(t){i(c)?rt().then((()=>{c=c(),w(t)})):w(t)},end(){p(),l=f=null}}}const ht="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function pt(t,e){lt(t,1,1,(()=>{e.delete(t.key)}))}function gt(t){t&&t.c()}function mt(t,e,r,s){const{fragment:u,on_mount:c,on_destroy:a,after_update:l}=t.$$;u&&u.m(e,r),s||K((()=>{const e=c.map(n).filter(i);a?a.push(...e):o(e),t.$$.on_mount=[]})),l.forEach(K)}function wt(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function vt(t,e){-1===t.$$.dirty[0]&&(X.push(t),q||(q=!0,J.then(et)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function bt(e,n,i,s,u,c,a,l=[-1]){const f=M;H(e);const d=e.$$={fragment:null,ctx:null,props:c,update:t,not_equal:u,bound:r(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(f?f.$$.context:[])),callbacks:r(),dirty:l,skip_bound:!1,root:n.target||f.$$.root};a&&a(d.root);let h=!1;if(d.ctx=i?i(e,n.props||{},((t,n,...r)=>{const o=r.length?r[0]:n;return d.ctx&&u(d.ctx[t],d.ctx[t]=o)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](o),h&&vt(e,t)),n})):[],d.update(),h=!0,o(d.before_update),d.fragment=!!s&&s(d.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);d.fragment&&d.fragment.l(t),t.forEach(x)}else d.fragment&&d.fragment.c();n.intro&&at(e.$$.fragment),mt(e,n.target,n.anchor,n.customElement),et()}H(f)}class yt{$destroy(){wt(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const xt=[];function $t(e,n=t){let r;const o=new Set;function i(t){if(s(e,t)&&(e=t,r)){const t=!xt.length;for(const t of o)t[1](),xt.push(t,e);if(t){for(let t=0;t<xt.length;t+=2)xt[t][0](xt[t+1]);xt.length=0}}}return{set:i,update:function(t){i(t(e))},subscribe:function(s,u=t){const c=[s,u];return o.add(c),1===o.size&&(r=n(i)||t),s(e),()=>{o.delete(c),0===o.size&&(r(),r=null)}}}}var At=$t(),Ct=$t(),Lt=$t(),Rt=$t(),kt=$t(),Nt=$t(),It=$t(),St={ram:At,cpu:Ct,wires:Lt,controlBar:Rt,debug:kt,messageFeed:Nt},Ut=function(t,e){return Ut=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},Ut(t,e)};function Et(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}Ut(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Tt=function(){return Tt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Tt.apply(this,arguments)};function Ot(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function u(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,u)}c((r=r.apply(t,e||[])).next())}))}function Dt(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}}function _t(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))}var Pt=$t({showDegugger:!1,showNodes:!1,showNodeNames:!1,showNodesCoordinates:!1}),Mt=Pt.subscribe;Pt.set;var Ft=Pt.update;var zt={subscribe:Mt,setShowDebugger:function(t){Ft((function(e){return Tt(Tt({},e),{showDegugger:t})}))},updateShowDebugger:function(t){Ft((function(e){return Tt(Tt({},e),{showDegugger:t(e.showDegugger)})}))},setShowNodes:function(t){Ft((function(e){return Tt(Tt({},e),{showNodes:t})}))},updateShowNodes:function(t){Ft((function(e){return Tt(Tt({},e),{showNodes:t(e.showNodes)})}))},setShowNodeNames:function(t){Ft((function(e){return Tt(Tt({},e),{showNodeNames:t})}))},updateShowNodeNames:function(t){Ft((function(e){return Tt(Tt({},e),{showNodeNames:t(e.showNodeNames)})}))},setShowNodeCoordinates:function(t){Ft((function(e){return Tt(Tt({},e),{showNodesCoordinates:t})}))},updateShowNodeCoordinates:function(t){Ft((function(e){return Tt(Tt({},e),{showNodesCoordinates:t(e.showNodesCoordinates)})}))}},Bt=function(){function t(t,e,n){this.x=e,this.y=n,this.name=t,this.neighbours=[]}return t.prototype.isAlignedTo=function(t){return this.x===t.x||this.y===t.y},t.prototype.isConnectedTo=function(t){return this.neighbours.some((function(e){return e===t}))},t.prototype.connectTo=function(t,e){if(!this.isAlignedTo(t))throw new Error("Cannot connect 2 nodes that are not aligned (nodeA: "+this.name+" nodeB: "+t.name+")");if(this.isConnectedTo(t))throw new Error("This node is already connected to "+t.name);this.neighbours.push(t),t.neighbours.push(this)},t.distance=function(t,e){return Math.hypot(t.x-e.x,t.y-e.y)},t.direction=function(t,e){return t.x>e.x?{x:-1,y:0}:t.x<e.x?{x:1,y:0}:t.y>e.y?{x:0,y:-1}:{x:0,y:1}},t}(),Ht=[new Bt("RAM:DATA",1250,115),new Bt("DATA:1",1250,85),new Bt("DATA:2",751,85),new Bt("DATA:3",527,85),new Bt("DATA:4",262,85),new Bt("DATA:5",95,85),new Bt("DATA:6",95,390),new Bt("DATA:7",95,617),new Bt("DATA:8",320,390),new Bt("DATA:9",312,250),new Bt("DATA:10",477,250),new Bt("DATA:11",652,490),new Bt("IR:1",262,151),new Bt("IR:2",312,182),new Bt("IR:3",212,182),new Bt("MUX:1",477,292),new Bt("MUX:2",527,292),new Bt("MUX:3",502,332),new Bt("ACC:1",327,617),new Bt("ACC:2",412,601),new Bt("ALU:1",320,432),new Bt("ALU:2",502,432),new Bt("ALU:3",526,490),new Bt("ALU:4",412,538),new Bt("SW:1",652,601)],Wt=[new Bt("RAM:ADD",1058,250),new Bt("ADD:1",751,250),new Bt("ADD:2",670,250),new Bt("ADD:3",590,250),new Bt("ADD:4",590,137),new Bt("ADD:5",535,250),new Bt("ADD:6",519,250),new Bt("INC:1",670,212),new Bt("INC:2",670,182),new Bt("PC:1",670,152),new Bt("PC:2",622,137)],jt=[new Bt("RAM:CTRL",1058,370),new Bt("CTRL:1",751,370),new Bt("CTRL:2",507,370),new Bt("CTRL:3",494,370),new Bt("CTRL:4",240,370),new Bt("CTRL:5",185,382),new Bt("CTRL:6",185,398),new Bt("CTRL:7",185,490),new Bt("CU:1",212,281),new Bt("CU:2",272,313),new Bt("CU:3",240,342),new Bt("CU:4",185,342),new Bt("MUX:4",464,313),new Bt("ALU:5",297,490)],Xt=_t(_t(_t([],Ht,!0),Wt,!0),jt,!0);function Zt(t){return Xt.find((function(e){return e.name===t}))}var Vt=function(){function t(t,e,n,r){void 0===r&&(r=!0),this.a=t,this.b=e,this.type=n,this.a.connectTo(e,this),this.linecap=r}return t.prototype.isConnecting=function(t,e){return this.a===t&&this.b===e||this.a===e&&this.b===t},t.WIDTH=5,t}(),Gt={name:"DATA_INT",color:"cyan",animationColor:"darkgreen"},Jt={name:"DATA_EXT",color:"blue",animationColor:"lime"},qt={name:"CONTROL_INT",color:"#ff7a90",animationColor:"lime"},Kt={name:"CONTROL_EXT",color:"red",animationColor:"lime"},Qt={name:"ADDRESS_INT",color:"yellow",animationColor:"darkgreen"},Yt={name:"ADDRESS_EXT",color:"darkorange",animationColor:"lime"},te={name:"INVISIBLE",color:"transparent",animationColor:"transparent"},ee=[new Vt(Zt("RAM:DATA"),Zt("DATA:1"),Jt),new Vt(Zt("DATA:1"),Zt("DATA:2"),Jt,!1),new Vt(Zt("DATA:2"),Zt("DATA:3"),Gt,!1),new Vt(Zt("DATA:3"),Zt("DATA:4"),Gt),new Vt(Zt("DATA:4"),Zt("DATA:5"),Gt),new Vt(Zt("DATA:5"),Zt("DATA:6"),Gt),new Vt(Zt("DATA:6"),Zt("DATA:7"),Gt),new Vt(Zt("DATA:6"),Zt("DATA:8"),Gt),new Vt(Zt("DATA:8"),Zt("ALU:1"),Gt),new Vt(Zt("DATA:7"),Zt("ACC:1"),Gt),new Vt(Zt("MUX:3"),Zt("ALU:2"),Gt),new Vt(Zt("ALU:4"),Zt("ACC:2"),Gt),new Vt(Zt("ALU:3"),Zt("DATA:11"),Gt),new Vt(Zt("DATA:11"),Zt("SW:1"),Gt),new Vt(Zt("DATA:4"),Zt("IR:1"),Gt),new Vt(Zt("IR:3"),Zt("CU:1"),Gt),new Vt(Zt("IR:2"),Zt("DATA:9"),Gt),new Vt(Zt("DATA:9"),Zt("DATA:10"),Gt),new Vt(Zt("DATA:10"),Zt("MUX:1"),Gt),new Vt(Zt("DATA:3"),Zt("MUX:2"),Gt)],ne=[new Vt(Zt("RAM:ADD"),Zt("ADD:1"),Yt,!1),new Vt(Zt("ADD:1"),Zt("ADD:2"),Qt,!1),new Vt(Zt("ADD:2"),Zt("INC:1"),Qt),new Vt(Zt("INC:2"),Zt("PC:1"),Qt),new Vt(Zt("PC:2"),Zt("ADD:4"),Qt),new Vt(Zt("ADD:2"),Zt("ADD:3"),Qt),new Vt(Zt("ADD:3"),Zt("ADD:4"),Qt),new Vt(Zt("ADD:3"),Zt("ADD:5"),Qt),new Vt(Zt("ADD:5"),Zt("ADD:6"),te),new Vt(Zt("ADD:6"),Zt("DATA:10"),Qt)],re=[new Vt(Zt("CU:2"),Zt("MUX:4"),qt),new Vt(Zt("RAM:CTRL"),Zt("CTRL:1"),Kt,!1),new Vt(Zt("CTRL:1"),Zt("CTRL:2"),qt,!1),new Vt(Zt("CTRL:2"),Zt("CTRL:3"),te),new Vt(Zt("CTRL:3"),Zt("CTRL:4"),qt),new Vt(Zt("CTRL:4"),Zt("CU:3"),qt),new Vt(Zt("CU:4"),Zt("CTRL:5"),qt),new Vt(Zt("CTRL:5"),Zt("CTRL:6"),te),new Vt(Zt("CTRL:6"),Zt("CTRL:7"),qt),new Vt(Zt("CTRL:7"),Zt("ALU:5"),qt)],oe=_t(_t(_t([],ee,!0),ne,!0),re,!0);function ie(t){return oe.find((function(e){return e.a.name+"-"+e.b.name===t||e.b.name+"-"+e.a.name===t}))}var se=$t({animationSpeedMultiplier:1,animate:!0}),ue=se.subscribe;se.set;var ce=se.update;var ae,le,fe={subscribe:ue,setAnimationSpeedMultiplier:function(t){ce((function(e){return Tt(Tt({},e),{animationSpeedMultiplier:t})}))},updateAnimationSpeedMultiplier:function(t){ce((function(e){return Tt(Tt({},e),{animationSpeedMultiplier:t(e.animationSpeedMultiplier)})}))},setAnimate:function(t){ce((function(e){return Tt(Tt({},e),{animate:t})}))},updateAnimate:function(t){ce((function(e){return Tt(Tt({},e),{animate:t(e.animate)})}))}},de=function(){function t(t,e){this.pos={x:0,y:0},this.path=_t([],t,!0),this.wires=_t([],e,!0),this.reset()}return t.prototype.play=function(){return Ot(this,void 0,void 0,(function(){return Dt(this,(function(t){return[2,new Promise(this._play.bind(this))]}))}))},t.prototype._play=function(t,e){this.resolve=t,requestAnimationFrame(this.startAnimation.bind(this))},t.prototype.startAnimation=function(t){this.previousTimestamp=t,this.animate(t)},t.prototype.animate=function(t){this.deltatime=(t-this.previousTimestamp)/1e3;var e=Math.floor(400*this.deltatime*c(fe).animationSpeedMultiplier);if(this.draw(e),this.pos.x===this.path[this.path.length-1].x&&this.pos.y===this.path[this.path.length-1].y)return pe(0),this.reset(),void this.resolve();this.previousTimestamp=t,requestAnimationFrame(this.animate.bind(this))},t.prototype.draw=function(t){for(le.beginPath(),le.moveTo(this.pos.x,this.pos.y);t>0;){for(this.nextNode=ge(this.pos,this.path[this.nextNodeIndex],t),le.strokeStyle=this.wires[this.nextNodeIndex-1].type.animationColor;(this.pos.x!==this.nextNode.node.x||this.pos.y!==this.nextNode.node.y)&&t>0;)this.incrementedX=this.pos.x+this.nextNode.direction.x,this.incrementedY=this.pos.y+this.nextNode.direction.y,le.lineTo(this.incrementedX,this.incrementedY),le.stroke(),this.pos.x=this.incrementedX,this.pos.y=this.incrementedY,t--;he(.05),this.pos.x===this.path[this.nextNodeIndex].x&&this.pos.y===this.path[this.nextNodeIndex].y&&(this.nextNodeIndex++,this.nextNodeIndex===this.path.length&&(t=0))}le.closePath()},t.prototype.reset=function(){this.pos.x=this.path[0].x,this.pos.y=this.path[0].y,this.nextNodeIndex=1},t}();function he(t){le.save(),le.globalAlpha=t,le.globalCompositeOperation="destination-out",le.fillStyle="#FFF",le.fillRect(0,0,ae.width,ae.height),le.restore()}function pe(t){he(.1),40!==++t?requestAnimationFrame((function(){return pe(t)})):le.clearRect(0,0,ae.width,ae.height)}function ge(t,e,n){var r=Bt.direction(t,e),o=Bt.distance(t,e),i=e;return o>n&&(o=n,i=function(t,e,n){return{x:t.x+e*n.x,y:t.y+e*n.y}}(t,n,r)),{distance:o,direction:r,node:i}}function me(e){let n,r,o;return{c(){n=A("canvas"),r=R(),o=A("canvas"),I(n,"class","absolute z-[2] top-0 left-0 w-app h-app"),I(o,"class","absolute z-[2] top-0 left-0 w-app h-app")},m(t,i){y(t,n,i),e[4](n),y(t,r,i),y(t,o,i),e[5](o)},p:t,i:t,o:t,d(t){t&&x(n),e[4](null),t&&x(r),t&&x(o),e[5](null)}}}function we(t,e,n){var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function u(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,u)}c((r=r.apply(t,e||[])).next())}))};const o=new Map;let i,s;function u(){const t=i.getContext("2d");t.lineWidth=Vt.WIDTH,t.clearRect(0,0,s.width,s.height);for(const e of oe)t.lineCap=e.linecap?"square":"butt",t.strokeStyle=e.type.color,t.beginPath(),t.moveTo(e.a.x,e.a.y),t.lineTo(e.b.x,e.b.y),t.stroke()}return j((()=>r(void 0,void 0,void 0,(function*(){n(0,i.width=n(1,s.width=1400,s),i),n(0,i.height=n(1,s.height=800,s),i),u(),(le=(ae=s).getContext("2d")).lineCap="round",le.lineWidth=Vt.WIDTH})))),[i,s,function(t,e){return r(this,void 0,void 0,(function*(){const n=Zt(t),r=Zt(e);if(!n)throw new Error("Node "+t+" is undefined");if(!r)throw new Error("Node "+e+" is undefined");let i;if(i=o.get(t+e))i.reset();else{const s=function(t,e){for(var n=[t],r=new Set,o={},i=0;i<n.length;)for(var s=n[i++],u=0,c=s.neighbours;u<c.length;u++){var a=c[u];if(!r.has(a)){if(r.add(a),a===e){for(var l=[a];s!==t;)l.push(s),s=o[s.name];return l.push(s),l.reverse(),l}o[a.name]=s,n.push(a)}}throw new Error("No path connecting "+t.name+" to "+e.name)}(n,r),u=function(t){for(var e=[],n=0;n<t.length-1;n++)e.push(ie("".concat(t[n].name,"-").concat(t[n+1].name)));return e}(s);i=new de(s,u),o.set(t+e,i)}yield i.play()}))},u,function(t){Z[t?"unshift":"push"]((()=>{i=t,n(0,i)}))},function(t){Z[t?"unshift":"push"]((()=>{s=t,n(1,s)}))}]}class ve extends yt{constructor(t){super(),bt(this,t,we,me,s,{flashWire:2,drawStaticWires:3})}get flashWire(){return this.$$.ctx[2]}get drawStaticWires(){return this.$$.ctx[3]}}var be=$t({binary:!1,showLabels:!0}),ye=be.subscribe;be.set;var xe=be.update;var $e={subscribe:ye,setBinary:function(t){xe((function(e){return Tt(Tt({},e),{binary:t})}))},updateBinary:function(t){xe((function(e){return Tt(Tt({},e),{binary:t(e.binary)})}))},setShowLabels:function(t){xe((function(e){return Tt(Tt({},e),{showLabels:t})}))},updateShowLabels:function(t){xe((function(e){return Tt(Tt({},e),{showLabels:t(e.showLabels)})}))}};function Ae(e){let n,r,o,i=(e[6].showLabels?e[0]:"")+"";return{c(){n=A("div"),r=L(i),I(n,"class",o="absolute w-fit font-bold cursor-default "+e[7][e[5]]+" leading-tight"),T(n,"top",e[1]),T(n,"left",e[2]),T(n,"bottom",e[4]),T(n,"right",e[3]),T(n,"font-size",e[7][e[5]])},m(t,e){y(t,n,e),w(n,r)},p(t,[e]){65&e&&i!==(i=(t[6].showLabels?t[0]:"")+"")&&U(r,i),32&e&&o!==(o="absolute w-fit font-bold cursor-default "+t[7][t[5]]+" leading-tight")&&I(n,"class",o),2&e&&T(n,"top",t[1]),4&e&&T(n,"left",t[2]),16&e&&T(n,"bottom",t[4]),8&e&&T(n,"right",t[3]),32&e&&T(n,"font-size",t[7][t[5]])},i:t,o:t,d(t){t&&x(n)}}}function Ce(t,e,n){let r;a(t,$e,(t=>n(6,r=t)));let{text:o=""}=e,{top:i="auto"}=e,{left:s="auto"}=e,{right:u="auto"}=e,{bottom:c="auto"}=e,{fontSize:l="MEDIUM"}=e;return t.$$set=t=>{"text"in t&&n(0,o=t.text),"top"in t&&n(1,i=t.top),"left"in t&&n(2,s=t.left),"right"in t&&n(3,u=t.right),"bottom"in t&&n(4,c=t.bottom),"fontSize"in t&&n(5,l=t.fontSize)},[o,i,s,u,c,l,r,{SMALL:"text-xs",MEDIUM:"text-base",LARGE:"text-2xl"}]}class Le extends yt{constructor(t){super(),bt(this,t,Ce,Ae,s,{text:0,top:1,left:2,right:3,bottom:4,fontSize:5})}}var Re=function(t){function e(e){var n=t.call(this,e)||this;return n.isChecked=!0,n}return Et(e,t),e}(Error),ke=function(t){function e(e,n){return t.call(this,"Value ".concat(e," out of ").concat(n,"-bit valid range"))||this}return Et(e,t),e}(Re);function Ne(t,e){if(Math.abs(t)>e)throw new Error("Position ".concat(t," out of range +/-").concat(e));if(0===t)throw new Error("Positions start from 1");return t<0?this.value.length+t:t-1}function Ie(t){if(t<1||t>32)throw new Error("Binary numbers must be between ".concat(1," and ").concat(32," bits"))}function Se(t,e){return t<=function(t){return Ie(t),Math.pow(2,t)}(e)&&t>=Ee(e)}function Ue(t,e){return t<=function(t){return Ie(t),Math.pow(2,t-1)-1}(e)&&t>=Ee(e)}function Ee(t){return Ie(t),-Math.pow(2,t-1)}function Te(t,e){return Ie(e),Oe((t>>>0).toString(2),e)}function Oe(t,e){return("00000000000000000000000000000000"+t).slice(-e)}var De,_e=function(){function t(t,e){if("string"==typeof e){if(!function(t,e){return Ie(e),new RegExp("^[01]{1,".concat(e,"}$")).test(t)}(e,t))throw new ke(e,t);this.value=Oe(e,t)}else if("number"==typeof e){if(!Se(e,t))throw new ke(e,t);this.value=Te(e,t)}else this.value=Te(e.signed(),t)}return t.prototype.signed=function(){return this.value.startsWith("0")?parseInt(this.value,2):~~parseInt(("11111111111111111111111111111111"+this.value).slice(-32),2)},t.prototype.unsigned=function(){return parseInt(this.value,2)},t.prototype.toBinaryString=function(){return this.value},t.prototype.bits=function(){return this.value.length},t.prototype.bytes=function(){return this.bits()/8},t.prototype.getByte=function(e){var n=8*Ne(e,this.bytes());return new t(8,this.value.substring(n,n+8))},t.prototype.getBytes=function(){for(var t=[],e=1;e<=this.bytes();e++)t.push(this.getByte(e));return t},t.prototype.isBitSet=function(t){return"1"===this.value.charAt(Ne(t,this.bits()))},t.prototype.setBit=function(e,n){return new t(this.bits(),function(t,e,n){if(!/^[10]*$/.test(t))throw new Error("Invalid binary string");var r=t.split("");return r[Ne(e,t.length)]=n?"1":"0",r.join("")}(this.value,e,n))},t.fromBytesValues=function(e){return Ie(8*e.length),"number"==typeof e[0]?t.fromBytesValues(e.map((function(e){return new t(8,e)}))):"string"==typeof e[0]?new t(8*e.length,e.join("")):new t(8*e.length,e.map((function(t){return t.toBinaryString()})).join(""))},t}(),Pe=254;function Me(t){if(!Fe(t))throw new Error("Invalid address: "+t);return t/2}function Fe(t){return t%2==0&&t>=0&&t<=Pe}var ze=$t(),Be=ze.subscribe,He=ze.set,We=ze.update;function je(t){We(t),De=t(De)}function Xe(){var t;t={instructionRegister:null,programCounter:new _e(8,0),increment:new _e(8,2),alu1:null,alu2:null,operation:"",accumulator:new _e(16,0),zeroFlag:!0,negativeFlag:!1,isJumping:!1,isHalting:!1},He(t),De=t}Xe();var Ze={subscribe:Be,reset:Xe,clear:function(){je((function(t){return Tt(Tt({},t),{instructionRegister:null,alu1:null,alu2:null,operation:"",isJumping:!1,isHalting:!1})}))},setIR:function(t){if(t&&!t.opcode)throw new Error("Invalid opcode");je((function(e){return Tt(Tt({},e),{instructionRegister:t})}))},setPC:function(t){if("number"==typeof t&&(t=new _e(8,t)),!Fe(t.unsigned()))throw new Error("Invalid address");je((function(e){return Tt(Tt({},e),{programCounter:t})}))},setALU1:function(t){"number"==typeof t&&(t=new _e(16,t)),je((function(e){return Tt(Tt({},e),{alu1:null===t?null:t})}))},setALU2:function(t){"number"==typeof t&&(t=new _e(16,t)),je((function(e){return Tt(Tt({},e),{alu2:null===t?null:t})}))},setOperation:function(t){je((function(e){return Tt(Tt({},e),{operation:t})}))},setACC:function(t){"number"==typeof t&&(t=new _e(16,t)),je((function(e){return Tt(Tt({},e),{accumulator:t})}))},setZeroFlag:function(t){je((function(e){return Tt(Tt({},e),{zeroFlag:t})}))},setNegativeFlag:function(t){je((function(e){return Tt(Tt({},e),{negativeFlag:t})}))},setIsJumping:function(t){je((function(e){return Tt(Tt({},e),{isJumping:t})}))},setIsHalting:function(t){je((function(e){return Tt(Tt({},e),{isHalting:t})}))}};function Ve(t,e,n){return(1-n)*t+n*e}function Ge(t,e,n,r){return Ot(this,void 0,void 0,(function(){return Dt(this,(function(o){return[2,new Promise((function(o,i){var s,u=0,a=function(i){if(s||(s=i),u>=1)return o(),void t.style.setProperty(e,"rgb(".concat(r.r,", ").concat(r.g,", ").concat(r.b,")"));var l=Math.round(Ve(n.r,r.r,u)),f=Math.round(Ve(n.g,r.g,u)),d=Math.round(Ve(n.b,r.b,u));t.style.setProperty(e,"rgb(".concat(l,", ").concat(f,", ").concat(d,")")),u=(i-s)/(300*c(fe).animationSpeedMultiplier),requestAnimationFrame(a)};requestAnimationFrame(a)}))]}))}))}function Je(t,e,n,r){return Ot(this,void 0,void 0,(function(){return Dt(this,(function(o){return[2,Ge(t,e,n,r).then((function(){return Ge(t,e,r,n)}))]}))}))}function qe(t){let e,n,r,o,i,s,u,c,a;return n=new Le({props:{text:"IR",top:"-25px",left:"10px"}}),{c(){e=A("div"),gt(n.$$.fragment),r=R(),o=A("div"),i=L(t[2]),s=R(),u=A("div"),c=L(t[3]),I(o,"class","flex items-center justify-center w-full h-full rounded-l-md"),I(u,"class","flex items-center justify-center w-full h-full rounded-r-md"),I(e,"class","absolute top-[100px] left-[110px] w-[200px] h-[30px] border border-black rounded-md bg-gray-100 shadow-component grid items-center grid-cols-2 ")},m(l,f){y(l,e,f),mt(n,e,null),w(e,r),w(e,o),w(o,i),t[8](o),w(e,s),w(e,u),w(u,c),t[9](u),a=!0},p(t,[e]){(!a||4&e)&&U(i,t[2]),(!a||8&e)&&U(c,t[3])},i(t){a||(at(n.$$.fragment,t),a=!0)},o(t){lt(n.$$.fragment,t),a=!1},d(r){r&&x(e),wt(n),t[8](null),t[9](null)}}}function Ke(t,e,n){let r,o;a(t,Ze,(t=>n(6,r=t))),a(t,$e,(t=>n(7,o=t)));var i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function u(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,u)}c((r=r.apply(t,e||[])).next())}))};let s,u,c,l;return t.$$.update=()=>{192&t.$$.dirty&&(o.binary?(n(2,c=r.instructionRegister?r.instructionRegister.binaryOpcode():""),n(3,l=r.instructionRegister?r.instructionRegister.binaryOperand():"")):(n(2,c=r.instructionRegister?r.instructionRegister.opcode.symbolic:""),r.instructionRegister&&r.instructionRegister.opcode.takesOperand?r.instructionRegister.immediateFlag()?n(3,l=`#${r.instructionRegister.numericOperand()}`):n(3,l=`${r.instructionRegister.numericOperand()}`):n(3,l="")))},[s,u,c,l,function(){return i(this,void 0,void 0,(function*(){return Je(s,"background-color",{r:224,g:224,b:224},{r:0,g:255,b:0})}))},function(){return i(this,void 0,void 0,(function*(){return Je(u,"background-color",{r:224,g:224,b:224},{r:0,g:255,b:0})}))},r,o,function(t){Z[t?"unshift":"push"]((()=>{s=t,n(0,s)}))},function(t){Z[t?"unshift":"push"]((()=>{u=t,n(1,u)}))}]}class Qe extends yt{constructor(t){super(),bt(this,t,Ke,qe,s,{flashOpcode:4,flashOperand:5})}get flashOpcode(){return this.$$.ctx[4]}get flashOperand(){return this.$$.ctx[5]}}function Ye(e){let n,r,o;return r=new Le({props:{text:"Control Unit / Decoder"}}),{c(){n=A("div"),gt(r.$$.fragment),I(n,"class","absolute top-[230px] left-[100px] w-[120px] h-[60px] border border-black rounded-md bg-gray-100 shadow-component flex items-center justify-center text-center ")},m(t,i){y(t,n,i),mt(r,n,null),e[2](n),o=!0},p:t,i(t){o||(at(r.$$.fragment,t),o=!0)},o(t){lt(r.$$.fragment,t),o=!1},d(t){t&&x(n),wt(r),e[2](null)}}}function tn(t,e,n){var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function u(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,u)}c((r=r.apply(t,e||[])).next())}))};let o;return[o,function(){return r(this,void 0,void 0,(function*(){return Je(o,"background-color",{r:224,g:224,b:224},{r:0,g:255,b:0})}))},function(t){Z[t?"unshift":"push"]((()=>{o=t,n(0,o)}))}]}class en extends yt{constructor(t){super(),bt(this,t,tn,Ye,s,{flash:1})}get flash(){return this.$$.ctx[1]}}function nn(t){let e,n,r,o,i,s=(t[1].binary?t[2].accumulator.toBinaryString():t[2].accumulator.signed())+"";return n=new Le({props:{text:"ACC",top:"-25px",left:"0"}}),{c(){e=A("div"),gt(n.$$.fragment),r=R(),o=L(s),I(e,"class","absolute top-[550px] left-[275px] w-[170px] h-[30px] border border-black rounded-md bg-gray-100 shadow-component flex items-center justify-center ")},m(s,u){y(s,e,u),mt(n,e,null),w(e,r),w(e,o),t[4](e),i=!0},p(t,[e]){(!i||6&e)&&s!==(s=(t[1].binary?t[2].accumulator.toBinaryString():t[2].accumulator.signed())+"")&&U(o,s)},i(t){i||(at(n.$$.fragment,t),i=!0)},o(t){lt(n.$$.fragment,t),i=!1},d(r){r&&x(e),wt(n),t[4](null)}}}function rn(t,e,n){let r,o;a(t,$e,(t=>n(1,r=t))),a(t,Ze,(t=>n(2,o=t)));var i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function u(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,u)}c((r=r.apply(t,e||[])).next())}))};let s;return[s,r,o,function(){return i(this,void 0,void 0,(function*(){return Je(s,"background-color",{r:224,g:224,b:224},{r:0,g:255,b:0})}))},function(t){Z[t?"unshift":"push"]((()=>{s=t,n(0,s)}))}]}class on extends yt{constructor(t){super(),bt(this,t,rn,nn,s,{flash:3})}get flash(){return this.$$.ctx[3]}}function sn(t){let e,n,r,o,i,s,u,c,a,l,f,d,h,p,g,m,v,b=t[2].zeroFlag?"1":"0",$=t[2].negativeFlag?"1":"0";return n=new Le({props:{text:"SW",top:"-25px",left:"0"}}),i=new Le({props:{text:"Z",bottom:"-21px",left:"25%"}}),l=new Le({props:{text:"N",bottom:"-21px",left:"25%"}}),{c(){e=A("div"),gt(n.$$.fragment),r=R(),o=A("div"),gt(i.$$.fragment),s=R(),u=L(b),c=R(),a=A("div"),gt(l.$$.fragment),f=R(),d=L($),h=R(),p=A("div"),p.textContent="------",g=R(),m=A("div"),I(o,"class","relative h-full flex items-center justify-center w-[19%] border border-r-black rounded-l-md"),I(a,"class","relative h-full flex items-center justify-center w-[19%]"),I(p,"class","relative h-full flex items-center justify-center w-[62%] border border-l-black rounded-r-md"),I(e,"class","absolute top-[550px] left-[540px] w-[120px] h-[30px] rounded-md bg-gray-100 shadow-component flex items-center justify-center "),I(m,"class","absolute top-[550px] left-[540px] w-[120px] h-[30px] rounded-md border border-black")},m(b,x){y(b,e,x),mt(n,e,null),w(e,r),w(e,o),mt(i,o,null),w(o,s),w(o,u),t[5](o),w(e,c),w(e,a),mt(l,a,null),w(a,f),w(a,d),t[6](a),w(e,h),w(e,p),y(b,g,x),y(b,m,x),v=!0},p(t,[e]){(!v||4&e)&&b!==(b=t[2].zeroFlag?"1":"0")&&U(u,b),(!v||4&e)&&$!==($=t[2].negativeFlag?"1":"0")&&U(d,$)},i(t){v||(at(n.$$.fragment,t),at(i.$$.fragment,t),at(l.$$.fragment,t),v=!0)},o(t){lt(n.$$.fragment,t),lt(i.$$.fragment,t),lt(l.$$.fragment,t),v=!1},d(r){r&&x(e),wt(n),wt(i),t[5](null),wt(l),t[6](null),r&&x(g),r&&x(m)}}}function un(t,e,n){let r;a(t,Ze,(t=>n(2,r=t)));var o=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function u(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,u)}c((r=r.apply(t,e||[])).next())}))};let i,s;return[i,s,r,function(){return o(this,void 0,void 0,(function*(){return Je(i,"background-color",{r:224,g:224,b:224},{r:0,g:255,b:0})}))},function(){return o(this,void 0,void 0,(function*(){return Je(s,"background-color",{r:224,g:224,b:224},{r:0,g:255,b:0})}))},function(t){Z[t?"unshift":"push"]((()=>{i=t,n(0,i)}))},function(t){Z[t?"unshift":"push"]((()=>{s=t,n(1,s)}))}]}class cn extends yt{constructor(t){super(),bt(this,t,un,sn,s,{flashZeroFlag:3,flashNegativeFlag:4})}get flashZeroFlag(){return this.$$.ctx[3]}get flashNegativeFlag(){return this.$$.ctx[4]}}function an(t){let e,n,r,o,i,s,u,c,a,l=(t[2].binary?t[3].programCounter.toBinaryString():t[3].programCounter.unsigned())+"",f=(t[2].binary?t[3].increment.toBinaryString():t[3].increment.unsigned())+"";return n=new Le({props:{text:"PC",top:"-25px",left:"0"}}),{c(){e=A("div"),gt(n.$$.fragment),r=R(),o=L(l),i=R(),s=A("div"),u=L("+"),c=L(f),I(e,"class","absolute top-[70px] left-[570px] w-[100px] h-[30px] border border-black rounded-md bg-gray-100 shadow-component flex items-center justify-center "),I(s,"class","absolute top-[130px] left-[570px] w-[100px] h-[30px] border border-black rounded-md bg-gray-100 shadow-component flex items-center justify-center ")},m(l,f){y(l,e,f),mt(n,e,null),w(e,r),w(e,o),t[6](e),y(l,i,f),y(l,s,f),w(s,u),w(s,c),t[7](s),a=!0},p(t,[e]){(!a||12&e)&&l!==(l=(t[2].binary?t[3].programCounter.toBinaryString():t[3].programCounter.unsigned())+"")&&U(o,l),(!a||12&e)&&f!==(f=(t[2].binary?t[3].increment.toBinaryString():t[3].increment.unsigned())+"")&&U(c,f)},i(t){a||(at(n.$$.fragment,t),a=!0)},o(t){lt(n.$$.fragment,t),a=!1},d(r){r&&x(e),wt(n),t[6](null),r&&x(i),r&&x(s),t[7](null)}}}function ln(t,e,n){let r,o;a(t,$e,(t=>n(2,r=t))),a(t,Ze,(t=>n(3,o=t)));var i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function u(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,u)}c((r=r.apply(t,e||[])).next())}))};let s,u;return[s,u,r,o,function(){return i(this,void 0,void 0,(function*(){return Je(s,"background-color",{r:224,g:224,b:224},{r:0,g:255,b:0})}))},function(){return i(this,void 0,void 0,(function*(){return Je(u,"background-color",{r:224,g:224,b:224},{r:0,g:255,b:0})}))},function(t){Z[t?"unshift":"push"]((()=>{s=t,n(0,s)}))},function(t){Z[t?"unshift":"push"]((()=>{u=t,n(1,u)}))}]}class fn extends yt{constructor(t){super(),bt(this,t,ln,an,s,{flashPC:4,flashINC:5})}get flashPC(){return this.$$.ctx[4]}get flashINC(){return this.$$.ctx[5]}}function dn(e){let n,r,o,i,s,u;return s=new Le({props:{text:"MUX"}}),{c(){n=A("div"),r=C("svg"),o=C("path"),i=R(),gt(s.$$.fragment),I(o,"d","M 0 0 L 100 0 L 80 40 L 20 40 Z"),I(r,"xmlns","http://www.w3.org/2000/svg"),I(r,"class","fill-gray-100 stroke-black drop-shadow-component h-full w-full"),I(r,"viewBox","-1 -1 102 42"),I(n,"class","absolute top-[240px] left-[400px] w-[100px] h-[40px] text-center flex items-center justify-center")},m(t,c){y(t,n,c),w(n,r),w(r,o),e[2](r),w(n,i),mt(s,n,null),u=!0},p:t,i(t){u||(at(s.$$.fragment,t),u=!0)},o(t){lt(s.$$.fragment,t),u=!1},d(t){t&&x(n),e[2](null),wt(s)}}}function hn(t,e,n){var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function u(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,u)}c((r=r.apply(t,e||[])).next())}))};let o;return[o,function(){return r(this,void 0,void 0,(function*(){return Je(o,"fill",{r:224,g:224,b:224},{r:0,g:255,b:0})}))},function(t){Z[t?"unshift":"push"]((()=>{o=t,n(0,o)}))}]}class pn extends yt{constructor(t){super(),bt(this,t,hn,dn,s,{flash:1})}get flash(){return this.$$.ctx[1]}}function gn(t){let e,n,r,o,i,s,u,c,a,l,f,d,h,p,g,m,v,b=t[0].operation+"";return i=new Le({props:{text:"ALU",top:"-25px",left:"45%"}}),{c(){e=A("div"),n=C("svg"),r=C("path"),o=R(),gt(i.$$.fragment),s=R(),u=A("div"),c=L(t[5]),l=R(),f=A("div"),d=L(b),h=R(),p=A("div"),g=L(t[6]),I(r,"d","m 0 0 l 192 0 l 32 32 l 32 -32 l 192 0 l -96 160 l -256 0 z"),I(n,"xmlns","http://www.w3.org/2000/svg"),I(n,"class","stroke-black stroke-[1.6px] w-full h-full drop-shadow-component fill-gray-100"),I(n,"viewBox","-1 -1 450 162"),I(u,"class",a="absolute flex items-center justify-center top-[15%] left-[15%] w-[90px] "+(t[1].binary?"top-[15%] h-[50px]":"top-[20%] h-[30px]")+" text-center leading-tight rounded-lg"),I(f,"class","absolute flex items-center justify-center top-[50%] left-[50%] -translate-x-1/2 w-[30px] h-[30px] rounded-lg font-bold text-2xl leading-[30px] "),I(p,"class",m="absolute flex items-center justify-center top-[15%] right-[15%] w-[90px] "+(t[1].binary?"top-[15%] h-[50px]":"top-[20%] h-[30px]")+" text-center leading-tight rounded-lg"),I(e,"class","absolute top-[380px] left-[210px] w-[300px] h-fit")},m(a,m){y(a,e,m),w(e,n),w(n,r),w(e,o),mt(i,e,null),w(e,s),w(e,u),w(u,c),t[10](u),w(e,l),w(e,f),w(f,d),t[11](f),w(e,h),w(e,p),w(p,g),t[12](p),v=!0},p(t,[e]){(!v||32&e)&&U(c,t[5]),(!v||2&e&&a!==(a="absolute flex items-center justify-center top-[15%] left-[15%] w-[90px] "+(t[1].binary?"top-[15%] h-[50px]":"top-[20%] h-[30px]")+" text-center leading-tight rounded-lg"))&&I(u,"class",a),(!v||1&e)&&b!==(b=t[0].operation+"")&&U(d,b),(!v||64&e)&&U(g,t[6]),(!v||2&e&&m!==(m="absolute flex items-center justify-center top-[15%] right-[15%] w-[90px] "+(t[1].binary?"top-[15%] h-[50px]":"top-[20%] h-[30px]")+" text-center leading-tight rounded-lg"))&&I(p,"class",m)},i(t){v||(at(i.$$.fragment,t),v=!0)},o(t){lt(i.$$.fragment,t),v=!1},d(n){n&&x(e),wt(i),t[10](null),t[11](null),t[12](null)}}}function mn(t){return[t.slice(0,8),t.slice(8)].join(" ")}function wn(t,e,n){let r,o;a(t,Ze,(t=>n(0,r=t))),a(t,$e,(t=>n(1,o=t)));var i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function u(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,u)}c((r=r.apply(t,e||[])).next())}))};let s,u,c,l="",f="";return t.$$.update=()=>{3&t.$$.dirty&&(o.binary?(n(5,l=null!==r.alu1?mn(r.alu1.toBinaryString()):""),n(6,f=null!==r.alu2?mn(r.alu2.toBinaryString()):"")):(n(5,l=null!==r.alu1?""+r.alu1.signed():""),n(6,f=null!==r.alu2?""+r.alu2.signed():"")))},[r,o,s,u,c,l,f,function(){return i(this,void 0,void 0,(function*(){return Je(s,"background-color",{r:224,g:224,b:224},{r:0,g:255,b:0})}))},function(){return i(this,void 0,void 0,(function*(){return Je(u,"background-color",{r:224,g:224,b:224},{r:0,g:255,b:0})}))},function(){return i(this,void 0,void 0,(function*(){return Je(c,"background-color",{r:224,g:224,b:224},{r:0,g:255,b:0})}))},function(t){Z[t?"unshift":"push"]((()=>{s=t,n(2,s)}))},function(t){Z[t?"unshift":"push"]((()=>{c=t,n(4,c)}))},function(t){Z[t?"unshift":"push"]((()=>{u=t,n(3,u)}))}]}class vn extends yt{constructor(t){super(),bt(this,t,wn,gn,s,{flashFirstOperand:7,flashSecondOperand:8,flashOperator:9})}get flashFirstOperand(){return this.$$.ctx[7]}get flashSecondOperand(){return this.$$.ctx[8]}get flashOperator(){return this.$$.ctx[9]}}var bn=$t([]),yn={subscribe:bn.subscribe,push:function(t){bn.update((function(e){return _t(_t([],e,!0),[t],!1)}))}},xn=$t({showLogger:!1}),$n={subscribe:xn.subscribe,updateShowLogger:function(t){xn.update((function(e){return Tt(Tt({},e),{showLogger:t(e.showLogger)})}))}},An=Date.now(),Cn=["EXECUTION","USER_INPUT","DEBUG","UNCAUGHT"],Ln=["UNCHECKED_ERROR","CHECKED_ERROR","INFO"];function Rn(){return Date.now()-An}var kn={error:function(t,e,n){void 0===n&&(n=!1),yn.push({logType:n?"CHECKED_ERROR":"UNCHECKED_ERROR",logGroup:e,timestamp:Rn(),message:n?t.message:t.stack})},info:function(t,e){yn.push({logType:"INFO",logGroup:e,timestamp:Rn(),message:t})}},Nn=function(){function t(){this._conditions=[],this._endsStep=!1,this._sideffects=[],this._conditions=[]}return t.prototype.condition=function(t){return this._conditions.push(t),this},t.prototype.endstep=function(){return this._endsStep=!0,this},t.prototype.sideffects=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this._sideffects).push.apply(t,e),this},t.prototype.execute=function(t){return Ot(this,void 0,void 0,(function(){var e;return Dt(this,(function(n){return this._conditions.reduceRight((function(e,n){return e&&n(t)}),!0)?(kn.info("Executing: ".concat(this.toString()),"EXECUTION"),e=_t(_t([],this._sideffects.map((function(e){return e.execute(t)})),!0),[this.action(t)],!1),[2,Promise.all(e)]):[2]}))}))},t.prototype.doesEndStep=function(){return this._endsStep},t.prototype.toString=function(){return"".concat(this.constructor.name," endStep:").concat(this._endsStep,", sideffects:[").concat(this._sideffects.length,"]")},t}(),In=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Et(e,t),e.prototype.action=function(t){return Ot(this,void 0,void 0,(function(){return Dt(this,(function(e){return c(fe).animate?[2,this._animate(t)]:[2]}))}))},e}(Nn),Sn=function(t){function e(e){var n=t.call(this)||this;return n.component=e,n}return Et(e,t),e.prototype._animate=function(t){return Ot(this,void 0,void 0,(function(){return Dt(this,(function(t){return[2,c(St.cpu).flash(this.component)]}))}))},e.prototype.toString=function(){return"".concat(t.prototype.toString.call(this),", component: ").concat(this.component)},e}(In);function Un(t){let e,n,r,o,i,s,u,c,a,l,f,d,h,p,g,m,v,b,$;o=new Le({props:{text:"CPU",fontSize:"LARGE",top:"-30px",left:"47%"}});s=new Qe({props:{}}),t[8](s);c=new en({props:{}}),t[9](c);l=new fn({props:{}}),t[10](l);d=new pn({props:{}}),t[11](d);p=new vn({props:{}}),t[12](p);m=new cn({props:{}}),t[13](m);return b=new on({props:{}}),t[14](b),{c(){e=A("div"),n=R(),r=A("div"),gt(o.$$.fragment),i=R(),gt(s.$$.fragment),u=R(),gt(c.$$.fragment),a=R(),gt(l.$$.fragment),f=R(),gt(d.$$.fragment),h=R(),gt(p.$$.fragment),g=R(),gt(m.$$.fragment),v=R(),gt(b.$$.fragment),I(e,"class","absolute left-[50px] top-[50px] w-[700px] h-[620px] z-[1] rounded-[30px] bg-gray-300 shadow-cpu"),I(r,"class","absolute left-[50px] top-[50px] w-[700px] h-[620px] z-[3] rounded-[30px] border border-black")},m(t,x){y(t,e,x),y(t,n,x),y(t,r,x),mt(o,r,null),w(r,i),mt(s,r,null),w(r,u),mt(c,r,null),w(r,a),mt(l,r,null),w(r,f),mt(d,r,null),w(r,h),mt(p,r,null),w(r,g),mt(m,r,null),w(r,v),mt(b,r,null),$=!0},p(t,[e]){s.$set({});c.$set({});l.$set({});d.$set({});p.$set({});m.$set({});b.$set({})},i(t){$||(at(o.$$.fragment,t),at(s.$$.fragment,t),at(c.$$.fragment,t),at(l.$$.fragment,t),at(d.$$.fragment,t),at(p.$$.fragment,t),at(m.$$.fragment,t),at(b.$$.fragment,t),$=!0)},o(t){lt(o.$$.fragment,t),lt(s.$$.fragment,t),lt(c.$$.fragment,t),lt(l.$$.fragment,t),lt(d.$$.fragment,t),lt(p.$$.fragment,t),lt(m.$$.fragment,t),lt(b.$$.fragment,t),$=!1},d(i){i&&x(e),i&&x(n),i&&x(r),wt(o),t[8](null),wt(s),t[9](null),wt(c),t[10](null),wt(l),t[11](null),wt(d),t[12](null),wt(p),t[13](null),wt(m),t[14](null),wt(b)}}}function En(t,e,n){var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function u(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,u)}c((r=r.apply(t,e||[])).next())}))};let o,i,s,u,c,a,l;return[o,i,s,u,c,a,l,function(t){return r(this,void 0,void 0,(function*(){switch(t){case"IR":return Promise.all([o.flashOpcode(),o.flashOperand()]);case"IR:OPC":return o.flashOpcode();case"IR:OPR":return o.flashOperand();case"PC":return s.flashPC();case"INC":return s.flashINC();case"MUX":return u.flash();case"CU":return i.flash();case"ALU:1":return c.flashFirstOperand();case"ALU:2":return c.flashSecondOperand();case"ALU:OPR":return c.flashOperator();case"ACC":return l.flash();case"SW:Z":return a.flashZeroFlag();case"SW:N":return a.flashNegativeFlag()}}))},function(t){Z[t?"unshift":"push"]((()=>{o=t,n(0,o)}))},function(t){Z[t?"unshift":"push"]((()=>{i=t,n(1,i)}))},function(t){Z[t?"unshift":"push"]((()=>{s=t,n(2,s)}))},function(t){Z[t?"unshift":"push"]((()=>{u=t,n(3,u)}))},function(t){Z[t?"unshift":"push"]((()=>{c=t,n(4,c)}))},function(t){Z[t?"unshift":"push"]((()=>{a=t,n(5,a)}))},function(t){Z[t?"unshift":"push"]((()=>{l=t,n(6,l)}))}]}class Tn extends yt{constructor(t){super(),bt(this,t,En,Un,s,{flash:7})}get flash(){return this.$$.ctx[7]}}function On(t){const e=t-1;return e*e*e+1}function Dn(t,{delay:e=0,duration:n=400,easing:r=On}={}){const o=getComputedStyle(t),i=+o.opacity,s=parseFloat(o.height),u=parseFloat(o.paddingTop),c=parseFloat(o.paddingBottom),a=parseFloat(o.marginTop),l=parseFloat(o.marginBottom),f=parseFloat(o.borderTopWidth),d=parseFloat(o.borderBottomWidth);return{delay:e,duration:n,easing:r,css:t=>`overflow: hidden;opacity: ${Math.min(20*t,1)*i};height: ${t*s}px;padding-top: ${t*u}px;padding-bottom: ${t*c}px;margin-top: ${t*a}px;margin-bottom: ${t*l}px;border-top-width: ${t*f}px;border-bottom-width: ${t*d}px;`}}var _n=[{symbolic:"NOP",numeric:0,takesOperand:!1,takesImmediate:!1,operator:""},{symbolic:"HLT",numeric:1,takesOperand:!1,takesImmediate:!1,operator:""},{symbolic:"JMP",numeric:2,takesOperand:!0,takesImmediate:!1,operator:""},{symbolic:"JZ",numeric:3,takesOperand:!0,takesImmediate:!1,operator:""},{symbolic:"JNZ",numeric:4,takesOperand:!0,takesImmediate:!1,operator:""},{symbolic:"JN",numeric:5,takesOperand:!0,takesImmediate:!1,operator:""},{symbolic:"JNN",numeric:6,takesOperand:!0,takesImmediate:!1,operator:""},{symbolic:"LOD",numeric:7,takesOperand:!0,takesImmediate:!0,operator:"="},{symbolic:"STO",numeric:8,takesOperand:!0,takesImmediate:!1,operator:""},{symbolic:"ADD",numeric:9,takesOperand:!0,takesImmediate:!0,operator:"+"},{symbolic:"SUB",numeric:10,takesOperand:!0,takesImmediate:!0,operator:"-"},{symbolic:"MUL",numeric:11,takesOperand:!0,takesImmediate:!0,operator:"*"},{symbolic:"DIV",numeric:12,takesOperand:!0,takesImmediate:!0,operator:"/"},{symbolic:"AND",numeric:13,takesOperand:!0,takesImmediate:!0,operator:"&"},{symbolic:"CMP",numeric:14,takesOperand:!0,takesImmediate:!0,operator:":"},{symbolic:"NOT",numeric:15,takesOperand:!0,takesImmediate:!0,operator:"!"}];function Pn(t){return"string"==typeof t?_n.find((function(e){return e.symbolic===t})):_n.find((function(e){return e.numeric===t.getByte(1).unsigned()}))}function Mn(t){return t.isBitSet(1)}function Fn(t,e){return t.setBit(1,e)}function zn(t){return Fn(t,!1)}var Bn=function(){function t(t,e,n,r){if(void 0===r&&(r=!1),16!==n.bits())throw new Error("Value must be 16 bit");this.opcode=Pn(zn(n)),this.symbolicOpcode=t,this.symbolicOperand=e,this.value=n,r&&(this.opcode=void 0)}return t.prototype.immediateFlag=function(){return Mn(this.value)},t.prototype.opcodeValue=function(){return this.value.getByte(1)},t.prototype.operandValue=function(){return this.value.getByte(2)},t.prototype.numericOpcode=function(){return this.value.getByte(1).signed()},t.prototype.numericOperand=function(){return this.immediateFlag()?this.value.getByte(2).signed():this.value.getByte(2).unsigned()},t.prototype.binaryOpcode=function(){return this.value.getByte(1).toBinaryString()},t.prototype.binaryOperand=function(){return this.value.getByte(2).toBinaryString()},t}(),Hn=function(t){function e(e,n){var r=t.call(this,e)||this;return r.inputString=n,r}return Et(e,t),e}(Re),Wn=/^[01]{0,8}\s?[01]{1,8}?$/,jn=/^-?[0-9]{1,5}$/,Xn=/#-?[0-9]{1,3}/,Zn=/[A-Z_]{1,10}/,Vn=/#[A-Z_]{1,10}/,Gn=new RegExp("^"+/[A-Z]{2,3}/.source+"( (("+Xn.source+")|("+Vn.source+")|("+/[0-9]{1,3}/.source+")|("+Zn.source+")))?$");function Jn(t,e){var n=Wn.test(t),r=Gn.test(t),o=jn.test(t);if(e&&!n)throw new Hn("Invalid binary input",t);if(!e&&!o&&!r)throw new Hn("Invalid input",t);return r?function(t){var e=t.split(" "),n=e[0],r=e[1],o=!!r,i=Pn(n);if(!i)throw new Hn("Invalid opcode",t);if(o){if(!i.takesOperand)throw new Hn("Opcode doesn't allow operand",t);return Vn.test(r)?function(t,e){var n=t.split(" "),r=n[0],o=n[1],i=o.slice(1);if(!hr.hasLabel(i))throw new Hn("Unknown label",t);var s=Fn(new _e(8,e.numeric),!0).signed(),u=hr.getAddress(i);if(!e.takesImmediate)throw new Hn("Opcode doesn't allow immediate operand",t);if(!Ue(u,8))throw new Hn("Operand is not a valid 8 bit signed value",t);return new Bn(r,o,_e.fromBytesValues([s,u]))}(t,i):Zn.test(r)?function(t,e){var n=t.split(" "),r=n[0],o=n[1];if(!hr.hasLabel(o))throw new Hn("Unknown label",t);var i=hr.getAddress(o);return new Bn(r,o,_e.fromBytesValues([e.numeric,i]))}(t,i):Xn.test(r)?function(t,e){var n=t.split(" "),r=n[0],o=n[1],i=Fn(new _e(8,e.numeric),!0).signed(),s=parseInt(o.slice(1));if(!e.takesImmediate)throw new Hn("Opcode doesn't allow immediate operand",t);if(!Ue(s,8))throw new Hn("Operand is not a valid 8 bit signed value",t);return new Bn(r,o,_e.fromBytesValues([i,s]))}(t,i):function(t,e){var n=t.split(" "),r=n[0],o=n[1],i=parseInt(o);if(!Fe(i))throw new Hn("Operand is not a valid address",t);return new Bn(r,o,_e.fromBytesValues([e.numeric,i]))}(t,i)}if(i.takesOperand)throw new Hn("Opcode requires operand",t);return new Bn(n,"",_e.fromBytesValues([i.numeric,0]))}(t):n&&e?function(t){if(t.includes(" ")){var e=t.split(" ");t=e[0]+Oe(e[1],8)}var n=new _e(16,t),r=n.getByte(1),o=n.getByte(2),i=Mn(r),s=Pn(zn(r)),u=!1;s&&s.takesOperand?i&&!s.takesImmediate?u=!0:i||Fe(o.unsigned())||(u=!0):u=!0;var c=u?n.signed().toString():s.symbolic,a=i?"#"+o.signed():o.unsigned().toString();u&&(a="");return new Bn(c,a,n,u)}(t):function(t){var e=parseInt(t);if(!Ue(e,16))throw new Hn("Input is not a valid 16 bit signed value",t);var n=new _e(16,e),r=n.getByte(1),o=Pn(zn(r)),i=Mn(r),s=!o||i&&!o.takesImmediate||i&&!o.takesOperand;return new Bn(t,"",n,s)}(t)}var qn=$t(new Array),Kn=qn.subscribe,Qn=qn.set,Yn=qn.update,tr=[];function er(t){Yn(t),tr=t(tr)}function nr(){for(var t=Me(0);t<=Me(Pe);t++)tr[t]=Jn("NOP",!1);var e;Qn(e=tr),tr=e}nr();var rr={subscribe:Kn,read:function(t){if(!Fe(t))throw new Error("Invalid address: "+t);return tr[Me(t)]},write:function(t,e){if(!Fe(t))throw new Error("Invalid address: "+t);var n=Me(t);er((function(t){return t.map((function(t,r){return n===r?e:t}))}))},clear:nr,updateLabels:function(t,e){er((function(n){return n.map((function(n){return n.symbolicOperand===t?new Bn(n.symbolicOpcode,e,n.value):n.symbolicOperand==="#"+t?new Bn(n.symbolicOpcode,"#"+e,n.value):n}))}))},deleteLabel:function(t){er((function(e){return e.map((function(e){return e.symbolicOperand===t?new Bn(e.symbolicOpcode,e.numericOperand().toString(),e.value):e.symbolicOperand==="#"+t?new Bn(e.symbolicOpcode,"#"+e.numericOperand(),e.value):e}))}))},moveFirstHalfUpFromAddress:function(t){console.log("moveFirstHalfUpFromAddress "+t)},moveFirstHalfDownFromAddress:function(t){console.log("moveFirstHalfDownFromAddress "+t)},moveSecondHalfUpFromAddress:function(t){console.log("moveSecondHalfUpFromAddress "+t)},moveSecondHalfDownFromAddress:function(t){console.log("moveSecondHalfDownFromAddress "+t)}},or=$t([]),ir=or.subscribe,sr=or.set,ur=or.update,cr=[];function ar(t){return cr[Me(t)]}function lr(t){if(""===t)return-1;var e=cr.findIndex((function(e){return e===t}));return-1===e?-1:function(t){var e=2*t;if(!Fe(e))throw new Error("Invalid index: "+t);return e}(e)}function fr(t){return-1!==lr(t)}function dr(){for(var t=Me(0);t<=Me(Pe);t++)cr[t]="";sr(cr)}dr();var hr={subscribe:ir,getLabel:ar,getAddress:lr,setLabel:function(t,e){var n=ar(t);if(n!==e){if(fr(e))throw new Re("Label already exists");var r,o=Me(t);ur(r=function(t){return t.map((function(t,n){return n===o?e:t}))}),cr=r(cr),""!==n&&(""===e?rr.deleteLabel(n):rr.updateLabels(n,e))}},hasLabel:fr,clear:dr},pr={address:null,column:"CELL"},gr=$t(pr),mr=gr.subscribe;gr.set;var wr=gr.update;function vr(t){wr(t),pr=t(pr)}var br={subscribe:mr,selectUp:function(){vr((function(t){var e=t.address-=2;return Tt(Tt({},t),{address:e<0?Pe:e})}))},selectDown:function(){vr((function(t){var e=t.address+=2;return Tt(Tt({},t),{address:e>Pe?0:e})}))},selectLeft:function(){vr((function(t){return Tt(Tt({},t),{column:"LABEL"})}))},selectRight:function(){vr((function(t){return Tt(Tt({},t),{column:"CELL"})}))},select:function(t,e){if(void 0===e&&(e="CELL"),!Fe(t))throw new Error("Invalid address");vr((function(n){return Tt(Tt({},n),{address:t,column:e})}))},deselect:function(){vr((function(t){return Tt(Tt({},t),{address:null})}))},noSelection:function(){return null===pr.address}};function yr(n){let r,o,s,u,c,a;return{c(){r=C("svg"),o=C("rect"),s=C("path"),I(o,"fill","none"),I(o,"height","24px"),I(o,"width","24px"),I(s,"d","M21,12l-4.37,6.16C16.26,18.68,15.65,19,15,19h-3l0-2h3l3.55-5L15,7H5v3H3V7c0-1.1,0.9-2,2-2h10c0.65,0,1.26,0.31,1.63,0.84 L21,12z M10,15H7v-3H5v3H2v2h3v3h2v-3h3V15z"),I(r,"xmlns","http://www.w3.org/2000/svg"),I(r,"viewBox","0 0 24 24"),I(r,"class","svelte-17eshqc")},m(t,e){y(t,r,e),w(r,o),w(r,s),c||(a=N(r,"click",n[0]),c=!0)},p:t,i(o){u||K((()=>{u=function(n,r,o){let s,u,c=r(n,o),a=!1,l=0;function f(){s&&B(n,s)}function h(){const{delay:r=0,duration:o=300,easing:i=e,tick:h=t,css:p}=c||ft;p&&(s=z(n,0,1,o,r,i,p,l++)),h(0,1);const g=d()+r,w=g+o;u&&u.abort(),a=!0,K((()=>ot(n,!0,"start"))),u=m((t=>{if(a){if(t>=w)return h(1,0),ot(n,!0,"end"),f(),a=!1;if(t>=g){const e=i((t-g)/o);h(e,1-e)}}return a}))}let p=!1;return{start(){p||(p=!0,B(n),i(c)?(c=c(),rt().then(h)):h())},invalidate(){p=!1},end(){a&&(f(),a=!1)}}}(r,n[6],{delay:300}),u.start()}))},o:t,d(t){t&&x(r),c=!1,a()}}}function xr(t){let e,n,r,i,s;return{c(){e=A("input"),e.value=t[3],I(e,"class","svelte-17eshqc")},m(n,o){y(n,e,o),t[12](e),r=!0,i||(s=[N(e,"input",Ar),N(e,"focus",t[0]),N(e,"focusout",t[1])],i=!0)},p(t,n){(!r||8&n&&e.value!==t[3])&&(e.value=t[3])},i(o){r||(K((()=>{n||(n=dt(e,t[5],{},!0)),n.run(1)})),r=!0)},o(o){n||(n=dt(e,t[5],{},!1)),n.run(0),r=!1},d(r){r&&x(e),t[12](null),r&&n&&n.end(),i=!1,o(s)}}}function $r(t){let e,n,r,o;const i=[xr,yr],s=[];function u(t,e){return t[4]?0:1}return n=u(t),r=s[n]=i[n](t),{c(){e=A("div"),r.c(),I(e,"class","label svelte-17eshqc")},m(t,r){y(t,e,r),s[n].m(e,null),o=!0},p(t,[o]){let c=n;n=u(t),n===c?s[n].p(t,o):(ut(),lt(s[c],1,1,(()=>{s[c]=null})),ct(),r=s[n],r?r.p(t,o):(r=s[n]=i[n](t),r.c()),at(r,1),r.m(e,null))},i(t){o||(at(r),o=!0)},o(t){lt(r),o=!1},d(t){t&&x(e),s[n].d()}}}function Ar({target:t}){t.value=t.value.toUpperCase().replaceAll(/[^A-Z_]/g,"").slice(0,10)}function Cr(t,e,n){let r,o,i,s,u,c;a(t,Nt,(t=>n(14,s=t))),a(t,hr,(t=>n(11,u=t))),a(t,br,(t=>n(15,c=t))),function(){const t=W()}();let l,{address:f}=e,{selected:d}=e;function h(){try{if(!l)return;kn.info(`RamLabel input: "${l.value}"`,"USER_INPUT"),hr.setLabel(f,l.value),n(3,r=u[Me(f)])}catch(t){s.message("ERROR",t.message),kn.error(t,"USER_INPUT",t.isChecked)}}return t.$$set=t=>{"address"in t&&n(7,f=t.address),"selected"in t&&n(8,d=t.selected)},t.$$.update=()=>{2176&t.$$.dirty&&n(3,r=u[Me(f)]),8&t.$$.dirty&&(o=!r),264&t.$$.dirty&&n(4,i=d||!!r),260&t.$$.dirty&&d&&l&&l.focus()},[function(){br.select(f,"LABEL")},function(){h(),"LABEL"===c.column&&f===c.address&&br.deselect()},l,r,i,function(t,{delay:e=0,duration:n=200}){return{delay:0,duration:o?n:0,css:t=>o?`transform: scaleX(${t})`:""}},function(t,{delay:e=0,duration:n=0}){return{delay:o?e:0,duration:n,css:t=>o?`filter: opacity(${t})`:""}},f,d,h,function(){return f},u,function(t){Z[t?"unshift":"push"]((()=>{l=t,n(2,l)}))}]}class Lr extends yt{constructor(t){super(),bt(this,t,Cr,$r,s,{address:7,selected:8,select:0,deselect:1,commitInput:9,getAddress:10})}get select(){return this.$$.ctx[0]}get deselect(){return this.$$.ctx[1]}get commitInput(){return this.$$.ctx[9]}get getAddress(){return this.$$.ctx[10]}}function Rr(e){let n,r,o=(e[2].binary?new _e(8,e[0]).toBinaryString():e[0])+"";return{c(){n=A("div"),r=L(o),I(n,"class","address svelte-dn79ne")},m(t,o){y(t,n,o),w(n,r),e[5](n)},p(t,[e]){5&e&&o!==(o=(t[2].binary?new _e(8,t[0]).toBinaryString():t[0])+"")&&U(r,o)},i:t,o:t,d(t){t&&x(n),e[5](null)}}}function kr(t,e,n){let r;a(t,$e,(t=>n(2,r=t)));let o,{address:i}=e;return t.$$set=t=>{"address"in t&&n(0,i=t.address)},[i,o,r,function(){return i},function(){return Je(o,"background-color",{r:255,g:140,b:0},{r:0,g:255,b:0})},function(t){Z[t?"unshift":"push"]((()=>{o=t,n(1,o)}))}]}class Nr extends yt{constructor(t){super(),bt(this,t,kr,Rr,s,{address:0,getAddress:3,flash:4})}get getAddress(){return this.$$.ctx[3]}get flash(){return this.$$.ctx[4]}}function Ir(t){let e,n,r,o,i=t[5]&&Ur(t);return{c(){e=A("div"),n=L(t[6]),r=R(),i&&i.c(),o=k(),I(e,"class","opcode svelte-1j7xnvh")},m(t,s){y(t,e,s),w(e,n),y(t,r,s),i&&i.m(t,s),y(t,o,s)},p(t,e){64&e&&U(n,t[6]),t[5]?i?i.p(t,e):(i=Ur(t),i.c(),i.m(o.parentNode,o)):i&&(i.d(1),i=null)},d(t){t&&x(e),t&&x(r),i&&i.d(t),t&&x(o)}}}function Sr(t){let e,n,r,i;return{c(){e=A("input"),e.value=n=t[6]+(t[5]?" "+t[5]:""),I(e,"class","svelte-1j7xnvh")},m(n,o){y(n,e,o),t[15](e),r||(i=[l(t[7].call(null,e)),N(e,"focusout",t[2]),N(e,"input",Tr)],r=!0)},p(t,r){96&r&&n!==(n=t[6]+(t[5]?" "+t[5]:""))&&e.value!==n&&(e.value=n)},d(n){n&&x(e),t[15](null),r=!1,o(i)}}}function Ur(t){let e,n;return{c(){e=A("div"),n=L(t[5]),I(e,"class","operand svelte-1j7xnvh")},m(t,r){y(t,e,r),w(e,n)},p(t,e){32&e&&U(n,t[5])},d(t){t&&x(e)}}}function Er(e){let n,r,o;function i(t,e){return t[0]?Sr:Ir}let s=i(e),u=s(e);return{c(){n=A("div"),u.c(),I(n,"class","cell svelte-1j7xnvh")},m(t,i){y(t,n,i),u.m(n,null),e[16](n),r||(o=N(n,"click",e[1]),r=!0)},p(t,[e]){s===(s=i(t))&&u?u.p(t,e):(u.d(1),u=s(t),u&&(u.c(),u.m(n,null)))},i:t,o:t,d(t){t&&x(n),u.d(),e[16](null),r=!1,o()}}}function Tr({target:t}){t.value=t.value.toUpperCase().replaceAll(/[^A-Z0-9 _\-#\(\)]*/g,"")}function Or(t,e,n){let r,o,i,s,u,c,l;a(t,Nt,(t=>n(17,s=t))),a(t,$e,(t=>n(13,u=t))),a(t,br,(t=>n(18,c=t))),a(t,rr,(t=>n(14,l=t)));let f,d,{address:h}=e,{selected:p=!1}=e;function g(){try{d&&""!==d.value&&(kn.info(`RamCell input: "${d.value}"`,"USER_INPUT"),rr.write(h,Jn(d.value.trim(),u.binary)))}catch(t){s.message("ERROR",t.message),kn.error(t,"USER_INPUT",t.isChecked)}}return t.$$set=t=>{"address"in t&&n(8,h=t.address),"selected"in t&&n(0,p=t.selected)},t.$$.update=()=>{16640&t.$$.dirty&&n(12,r=l[Me(h)]),12288&t.$$.dirty&&n(6,o=u.binary?r.binaryOpcode():r.symbolicOpcode),12288&t.$$.dirty&&n(5,i=u.binary?r.binaryOperand():r.symbolicOperand)},[p,function(){br.select(h,"CELL")},function(){g(),"CELL"===c.column&&h===c.address&&br.deselect()},f,d,i,o,function(t){t.value=o+(i?` ${i}`:""),t.focus(),setTimeout((()=>t.select()))},h,g,function(){return Je(f,"background-color",{r:211,g:211,b:211},{r:0,g:255,b:0})},function(){return h},r,u,l,function(t){Z[t?"unshift":"push"]((()=>{d=t,n(4,d)}))},function(t){Z[t?"unshift":"push"]((()=>{f=t,n(3,f)}))}]}class Dr extends yt{constructor(t){super(),bt(this,t,Or,Er,s,{address:8,selected:0,select:1,deselect:2,commitInput:9,flash:10,getAddress:11})}get select(){return this.$$.ctx[1]}get deselect(){return this.$$.ctx[2]}get commitInput(){return this.$$.ctx[9]}get flash(){return this.$$.ctx[10]}get getAddress(){return this.$$.ctx[11]}}function _r(t,e,n){const r=t.slice();return r[25]=e[n],r[26]=e,r[27]=n,r}function Pr(t,e,n){const r=t.slice();return r[25]=e[n],r[28]=e,r[27]=n,r}function Mr(t){let e,n,r=t[27];const o=()=>t[15](e,r),i=()=>t[15](null,r);let s={address:t[25],selected:t[4].address===t[25]&&"LABEL"===t[4].column};return e=new Lr({props:s}),o(),{c(){gt(e.$$.fragment)},m(t,r){mt(e,t,r),n=!0},p(t,n){r!==t[27]&&(i(),r=t[27],o());const s={};1&n&&(s.address=t[25]),17&n&&(s.selected=t[4].address===t[25]&&"LABEL"===t[4].column),e.$set(s)},i(t){n||(at(e.$$.fragment,t),n=!0)},o(t){lt(e.$$.fragment,t),n=!1},d(t){i(),wt(e,t)}}}function Fr(t){let e,n,r,o,i,s,u=t[27];const c=()=>t[16](n,u),a=()=>t[16](null,u);let l={address:t[25]};n=new Nr({props:l}),c();const f=()=>t[17](o,u),d=()=>t[17](null,u);let h={address:t[25],selected:t[4].address===t[25]&&"CELL"===t[4].column};return o=new Dr({props:h}),f(),{c(){e=A("div"),gt(n.$$.fragment),r=R(),gt(o.$$.fragment),i=R(),I(e,"class","row svelte-1gpgw8f")},m(t,u){y(t,e,u),mt(n,e,null),w(e,r),mt(o,e,null),w(e,i),s=!0},p(t,e){u!==t[27]&&(a(),u=t[27],c());const r={};1&e&&(r.address=t[25]),n.$set(r),u!==t[27]&&(d(),u=t[27],f());const i={};1&e&&(i.address=t[25]),17&e&&(i.selected=t[4].address===t[25]&&"CELL"===t[4].column),o.$set(i)},i(t){s||(at(n.$$.fragment,t),at(o.$$.fragment,t),s=!0)},o(t){lt(n.$$.fragment,t),lt(o.$$.fragment,t),s=!1},d(t){t&&x(e),a(),wt(n),d(),wt(o)}}}function zr(t){let e,n,r,i,s,u,c,a,f;n=new Le({props:{text:"RAM",fontSize:"LARGE",top:"-30px",right:"0"}});let d=t[0],h=[];for(let e=0;e<d.length;e+=1)h[e]=Mr(Pr(t,d,e));const p=t=>lt(h[t],1,1,(()=>{h[t]=null}));let g=t[0],m=[];for(let e=0;e<g.length;e+=1)m[e]=Fr(_r(t,g,e));const v=t=>lt(m[t],1,1,(()=>{m[t]=null}));return{c(){e=A("div"),gt(n.$$.fragment),r=R(),i=A("div");for(let t=0;t<h.length;t+=1)h[t].c();s=R(),u=A("div");for(let t=0;t<m.length;t+=1)m[t].c();I(i,"class","labels svelte-1gpgw8f"),I(u,"class","ram svelte-1gpgw8f"),I(e,"class","ram-wrapper svelte-1gpgw8f")},m(o,d){y(o,e,d),mt(n,e,null),w(e,r),w(e,i);for(let t=0;t<h.length;t+=1)h[t].m(i,null);w(e,s),w(e,u);for(let t=0;t<m.length;t+=1)m[t].m(u,null);c=!0,a||(f=[N(e,"wheel",t[5]),l(t[6].call(null,e))],a=!0)},p(t,[e]){if(19&e){let n;for(d=t[0],n=0;n<d.length;n+=1){const r=Pr(t,d,n);h[n]?(h[n].p(r,e),at(h[n],1)):(h[n]=Mr(r),h[n].c(),at(h[n],1),h[n].m(i,null))}for(ut(),n=d.length;n<h.length;n+=1)p(n);ct()}if(29&e){let n;for(g=t[0],n=0;n<g.length;n+=1){const r=_r(t,g,n);m[n]?(m[n].p(r,e),at(m[n],1)):(m[n]=Fr(r),m[n].c(),at(m[n],1),m[n].m(u,null))}for(ut(),n=g.length;n<m.length;n+=1)v(n);ct()}},i(t){if(!c){at(n.$$.fragment,t);for(let t=0;t<d.length;t+=1)at(h[t]);for(let t=0;t<g.length;t+=1)at(m[t]);c=!0}},o(t){lt(n.$$.fragment,t),h=h.filter(Boolean);for(let t=0;t<h.length;t+=1)lt(h[t]);m=m.filter(Boolean);for(let t=0;t<m.length;t+=1)lt(m[t]);c=!1},d(t){t&&x(e),wt(n),$(h,t),$(m,t),a=!1,o(f)}}}function Br(t,e,n){let r,o;a(t,br,(t=>n(4,o=t)));var i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function u(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,u)}c((r=r.apply(t,e||[])).next())}))};let s=0,u=[],c=[],l=[],f=[];function d({deltaY:t}){let e=s+(t>0?2:-2);e<0&&(e=220),e>220&&(e=0),n(13,s=e)}function h(){d({deltaY:-1})}function p(){d({deltaY:1})}function g(t){if(!Fe(t))throw new Error("Invalid address");return t>=s&&t<=r}function m(t){if(!Fe(t))throw new Error("Invalid address");if(g(t))return;let e=t,r=e+34;r>Pe&&(e-=r-Pe),n(13,s=e)}return t.$$.update=()=>{if(8192&t.$$.dirty&&n(14,r=s+34),24576&t.$$.dirty){n(0,u=[]);for(let t=s,e=0;t<=r;t+=2,e++)n(0,u[e]=t,u)}},[u,c,l,f,o,function({deltaY:t}){br.deselect(),d({deltaY:t})},function(t){const e=t=>{switch(t.key){case"ArrowUp":!function(t){br.noSelection()||(t.ctrlKey?rr.moveSecondHalfUpFromAddress(o.address):t.shiftKey&&rr.moveFirstHalfUpFromAddress(o.address),o.address===s&&h(),br.selectUp())}(t);break;case"ArrowDown":!function(t){br.noSelection()||(t.ctrlKey?rr.moveSecondHalfDownFromAddress(o.address):t.shiftKey&&rr.moveFirstHalfDownFromAddress(o.address),o.address===r&&p(),br.selectDown())}(t);break;case"ArrowLeft":br.noSelection()||br.selectLeft();break;case"ArrowRight":br.noSelection()||br.selectRight();break;case"Enter":br.noSelection()?br.select(s):br.deselect()}};return document.addEventListener("keydown",e),{destroy(){document.removeEventListener("keydown",e)}}},h,p,g,m,function(t){return i(this,void 0,void 0,(function*(){if(!Fe(t))throw new Error("Invalid address");return m(t),l.find((e=>e.getAddress()===t)).flash()}))},function(t){return i(this,void 0,void 0,(function*(){if(!Fe(t))throw new Error("Invalid address");return m(t),f.find((e=>e.getAddress()===t)).flash()}))},s,r,function(t,e){Z[t?"unshift":"push"]((()=>{c[e]=t,n(1,c)}))},function(t,e){Z[t?"unshift":"push"]((()=>{l[e]=t,n(2,l)}))},function(t,e){Z[t?"unshift":"push"]((()=>{f[e]=t,n(3,f)}))}]}class Hr extends yt{constructor(t){super(),bt(this,t,Br,zr,s,{scrollUp:7,scrollDown:8,addressIsVisible:9,showAddress:10,flashAddress:11,flashContent:12})}get scrollUp(){return this.$$.ctx[7]}get scrollDown(){return this.$$.ctx[8]}get addressIsVisible(){return this.$$.ctx[9]}get showAddress(){return this.$$.ctx[10]}get flashAddress(){return this.$$.ctx[11]}get flashContent(){return this.$$.ctx[12]}}function Wr(t){let e,n,r=t[0].name+"";return{c(){e=A("span"),n=L(r),I(e,"class","text-fuchsia-500")},m(t,r){y(t,e,r),w(e,n)},p(t,e){1&e&&r!==(r=t[0].name+"")&&U(n,r)},d(t){t&&x(e)}}}function jr(t){let e,n,r,o,i,s,u,c=t[0].x+"",a=t[0].y+"";return{c(){e=A("span"),n=L("x: "),r=L(c),o=R(),i=A("span"),s=L("y: "),u=L(a),I(e,"class","text-blue-700"),I(i,"class","text-red-700")},m(t,c){y(t,e,c),w(e,n),w(e,r),y(t,o,c),y(t,i,c),w(i,s),w(i,u)},p(t,e){1&e&&c!==(c=t[0].x+"")&&U(r,c),1&e&&a!==(a=t[0].y+"")&&U(u,a)},d(t){t&&x(e),t&&x(o),t&&x(i)}}}function Xr(e){let n,r,o,i,s,u,c=e[1].showNodeNames&&Wr(e),a=e[1].showNodesCoordinates&&jr(e);return{c(){n=A("div"),r=A("div"),i=R(),s=A("div"),c&&c.c(),u=R(),a&&a.c(),I(r,"class","absolute top-0 left-0 w-2 h-2 -translate-x-1/2 -translate-y-1/2 rounded-full bg-white border border-fuchsia-500"),I(r,"title",o=`${e[0].name} x: ${e[0].x} y: ${e[0].y}`),I(s,"class","relative left-[7px] top-[-10px] bg-white font-bold"),I(n,"class","absolute z-10"),T(n,"top",e[0].y+"px"),T(n,"left",e[0].x+"px")},m(t,e){y(t,n,e),w(n,r),w(n,i),w(n,s),c&&c.m(s,null),w(s,u),a&&a.m(s,null)},p(t,[e]){1&e&&o!==(o=`${t[0].name} x: ${t[0].x} y: ${t[0].y}`)&&I(r,"title",o),t[1].showNodeNames?c?c.p(t,e):(c=Wr(t),c.c(),c.m(s,u)):c&&(c.d(1),c=null),t[1].showNodesCoordinates?a?a.p(t,e):(a=jr(t),a.c(),a.m(s,null)):a&&(a.d(1),a=null),1&e&&T(n,"top",t[0].y+"px"),1&e&&T(n,"left",t[0].x+"px")},i:t,o:t,d(t){t&&x(n),c&&c.d(),a&&a.d()}}}function Zr(t,e,n){let r;a(t,zt,(t=>n(1,r=t)));let{node:o}=e;return t.$$set=t=>{"node"in t&&n(0,o=t.node)},[o,r]}class Vr extends yt{constructor(t){super(),bt(this,t,Zr,Xr,s,{node:0})}}function Gr(t,e,n){const r=t.slice();return r[7]=e[n],r}function Jr(t){let e,n,r=Xt,o=[];for(let e=0;e<r.length;e+=1)o[e]=qr(Gr(t,r,e));const i=t=>lt(o[t],1,1,(()=>{o[t]=null}));return{c(){for(let t=0;t<o.length;t+=1)o[t].c();e=k()},m(t,r){for(let e=0;e<o.length;e+=1)o[e].m(t,r);y(t,e,r),n=!0},p(t,n){if(0&n){let s;for(r=Xt,s=0;s<r.length;s+=1){const i=Gr(t,r,s);o[s]?(o[s].p(i,n),at(o[s],1)):(o[s]=qr(i),o[s].c(),at(o[s],1),o[s].m(e.parentNode,e))}for(ut(),s=r.length;s<o.length;s+=1)i(s);ct()}},i(t){if(!n){for(let t=0;t<r.length;t+=1)at(o[t]);n=!0}},o(t){o=o.filter(Boolean);for(let t=0;t<o.length;t+=1)lt(o[t]);n=!1},d(t){$(o,t),t&&x(e)}}}function qr(e){let n,r;return n=new Vr({props:{node:e[7]}}),{c(){gt(n.$$.fragment)},m(t,e){mt(n,t,e),r=!0},p:t,i(t){r||(at(n.$$.fragment,t),r=!0)},o(t){lt(n.$$.fragment,t),r=!1},d(t){wt(n,t)}}}function Kr(t){let e,n,r,o,i,s,u,c;n=new ve({props:{}}),t[4](n);o=new Tn({props:{}}),t[5](o);s=new Hr({props:{}}),t[6](s);let a=t[3].showNodes&&Jr(t);return{c(){e=A("div"),gt(n.$$.fragment),r=R(),gt(o.$$.fragment),i=R(),gt(s.$$.fragment),u=R(),a&&a.c(),I(e,"class","absolute top-0 left-0 w-app h-app")},m(t,l){y(t,e,l),mt(n,e,null),w(e,r),mt(o,e,null),w(e,i),mt(s,e,null),w(e,u),a&&a.m(e,null),c=!0},p(t,[r]){n.$set({});o.$set({});s.$set({}),t[3].showNodes?a?(a.p(t,r),8&r&&at(a,1)):(a=Jr(t),a.c(),at(a,1),a.m(e,null)):a&&(ut(),lt(a,1,1,(()=>{a=null})),ct())},i(t){c||(at(n.$$.fragment,t),at(o.$$.fragment,t),at(s.$$.fragment,t),at(a),c=!0)},o(t){lt(n.$$.fragment,t),lt(o.$$.fragment,t),lt(s.$$.fragment,t),lt(a),c=!1},d(r){r&&x(e),t[4](null),wt(n),t[5](null),wt(o),t[6](null),wt(s),a&&a.d()}}}function Qr(t,e,n){let r,o,i,s;return a(t,Lt,(t=>n(0,r=t))),a(t,Ct,(t=>n(1,o=t))),a(t,At,(t=>n(2,i=t))),a(t,zt,(t=>n(3,s=t))),[r,o,i,s,function(t){Z[t?"unshift":"push"]((()=>{r=t,Lt.set(r)}))},function(t){Z[t?"unshift":"push"]((()=>{o=t,Ct.set(o)}))},function(t){Z[t?"unshift":"push"]((()=>{i=t,At.set(i)}))}]}class Yr extends yt{constructor(t){super(),bt(this,t,Qr,Kr,s,{})}}var to=function(t){function e(e,n){var r=t.call(this)||this;return r.component=e,r.address=n,r}return Et(e,t),e.prototype._animate=function(t){return Ot(this,void 0,void 0,(function(){var e,n;return Dt(this,(function(r){if(e=c(St.ram),"number"!=typeof(n="number"==typeof this.address?this.address:t[this.address]))throw new Error(this.address+" is not a number");switch(this.component){case"ADDRESS":return[2,e.flashAddress(n)];case"DATA":return[2,e.flashContent(n)]}return[2]}))}))},e.prototype.toString=function(){return"".concat(t.prototype.toString.call(this),", component: ").concat(this.component,", address: ").concat(this.address)},e}(In),eo=function(t){function e(e,n){var r=t.call(this)||this;return r.from=e,r.to=n,r}return Et(e,t),e.prototype._animate=function(t){return Ot(this,void 0,void 0,(function(){return Dt(this,(function(t){return[2,c(St.wires).flashWire(this.from,this.to)]}))}))},e.prototype.toString=function(){return"".concat(t.prototype.toString.call(this),", from: ").concat(this.from,", to: ").concat(this.to)},e}(In),no=function(t){function e(e){var n=t.call(this)||this;return n.key=e,n}return Et(e,t),e.prototype.toString=function(){return"".concat(t.prototype.toString.call(this),", key: ").concat(this.key)},e}(Nn),ro=function(t){function e(e){var n=t.call(this,e)||this;if("RAM"===e)throw new Error("CacheCpuValue cannot cache RAM value");return n}return Et(e,t),e.prototype.action=function(t){return Ot(this,void 0,void 0,(function(){var e;return Dt(this,(function(n){switch(e=c(Ze),this.key){case"ACC":t.ACC=e.accumulator.signed();break;case"ALU:1":t["ALU:1"]=e.alu1.signed();break;case"ALU:2":t["ALU:2"]=e.alu2.signed();break;case"ALU:OPR":t["ALU:OPR"]=e.operation;break;case"IR":t.IR=e.instructionRegister,t["IR:OPC"]=e.instructionRegister.numericOpcode(),t["IR:OPR"]=e.instructionRegister.numericOperand();break;case"PC":t.PC=e.programCounter.unsigned();break;case"INC":t.INC=e.increment.unsigned();break;case"SW:Z":t["SW:Z"]=e.zeroFlag;break;case"SW:N":t["SW:N"]=e.negativeFlag;break;default:throw new Error('Unexpected cacheable key "'.concat(this.key,'"'))}return[2]}))}))},e}(no),oo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Et(e,t),e}(Nn),io=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Et(e,t),e.prototype.action=function(t){return Ot(this,void 0,void 0,(function(){var e,n;return Dt(this,(function(r){switch(r.label){case 0:return e=t["ALU:2"]===t["ALU:1"],n=t["ALU:2"]>t["ALU:1"],e===c(Ze).zeroFlag||n===c(Ze).negativeFlag?[3,2]:(Ze.setZeroFlag(e),Ze.setNegativeFlag(n),[4,Promise.all([c(Ct).flash("SW:Z"),c(Ct).flash("SW:N")])]);case 1:return r.sent(),[3,6];case 2:return e===c(Ze).zeroFlag?[3,4]:(Ze.setZeroFlag(e),[4,c(Ct).flash("SW:Z")]);case 3:r.sent(),r.label=4;case 4:return n===c(Ze).negativeFlag?[3,6]:(Ze.setNegativeFlag(n),[4,c(Ct).flash("SW:N")]);case 5:r.sent(),r.label=6;case 6:return t["SW:Z"]=e,t["SW:N"]=n,[2]}}))}))},e}(oo),so=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Et(e,t),e.prototype.action=function(t){return Ot(this,void 0,void 0,(function(){var e;return Dt(this,(function(n){switch(n.label){case 0:switch(t["ALU:OPR"]){case"!":e=~t["ALU:2"];break;case"&":e=t["ALU:1"]&t["ALU:2"];break;case"*":e=t["ALU:1"]*t["ALU:2"];break;case"+":e=t["ALU:1"]+t["ALU:2"];break;case"-":e=t["ALU:1"]-t["ALU:2"];break;case"/":if(0===t["ALU:2"])throw new Error("Division by zero");e=t["ALU:1"]/t["ALU:2"];break;case"=":e=t["ALU:2"];break;default:throw new Error('Operator "'.concat(t["ALU:OP"],"\" doesn't set the Accumulator"))}return Ze.setACC(e),[4,c(Ct).flash("ACC")];case 1:return n.sent(),t.ACC=e,[2]}}))}))},e}(oo),uo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Et(e,t),e.prototype.action=function(t){return Ot(this,void 0,void 0,(function(){var e,n;return Dt(this,(function(r){switch(r.label){case 0:return e=0===t.ACC,n=t.ACC<0,e===c(Ze).zeroFlag||n===c(Ze).negativeFlag?[3,2]:(Ze.setZeroFlag(e),Ze.setNegativeFlag(n),[4,Promise.all([c(Ct).flash("SW:Z"),c(Ct).flash("SW:N")])]);case 1:return r.sent(),[3,6];case 2:return e===c(Ze).zeroFlag?[3,4]:(Ze.setZeroFlag(e),[4,c(Ct).flash("SW:Z")]);case 3:r.sent(),r.label=4;case 4:return n===c(Ze).negativeFlag?[3,6]:(Ze.setNegativeFlag(n),[4,c(Ct).flash("SW:N")]);case 5:r.sent(),r.label=6;case 6:return t["SW:Z"]=e,t["SW:N"]=n,[2]}}))}))},e}(oo),co=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Et(e,t),e}(Nn),ao=function(t){function e(e){var n=t.call(this)||this;return n.address=e,n}return Et(e,t),e.prototype.action=function(t){return Ot(this,void 0,void 0,(function(){var e,n;return Dt(this,(function(r){switch(r.label){case 0:if("number"!=typeof(e="number"==typeof this.address?this.address:t[this.address]))throw new Error("Address is not a number");return n=rr.read(e).symbolicOpcode,/^[A-Z]+$/.test(n)&&"NOP"!==n?rr.write(e,Jn(new _e(16,t.ACC).toBinaryString(),!0)):rr.write(e,Jn(t.ACC.toString(),!1)),[4,c(At).flashContent(e)];case 1:return r.sent(),[2]}}))}))},e}(co),lo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Et(e,t),e.prototype.action=function(t){return Ot(this,void 0,void 0,(function(){return Dt(this,(function(t){return Ze.setIsHalting(!0),[2]}))}))},e}(oo),fo=function(t){function e(e){var n=t.call(this,"RAM")||this;return n.address=e,n}return Et(e,t),e.prototype.action=function(t){return Ot(this,void 0,void 0,(function(){var e;return Dt(this,(function(n){if("number"!=typeof(e="number"==typeof this.address?this.address:t[this.address]))throw new Error("Address is not a number");return t.RAM={address:e,data:rr.read(e)},[2]}))}))},e}(no),ho=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Et(e,t),e.prototype.action=function(t){return Ot(this,void 0,void 0,(function(){return Dt(this,(function(e){switch(e.label){case 0:return Ze.setALU1(t.ACC),[4,c(Ct).flash("ALU:1")];case 1:return e.sent(),t["ALU:1"]=t.ACC,[2]}}))}))},e}(oo),po=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Et(e,t),e.prototype.action=function(t){return Ot(this,void 0,void 0,(function(){return Dt(this,(function(e){switch(e.label){case 0:return Ze.setIR(t.RAM.data),[4,c(Ct).flash("IR")];case 1:return e.sent(),t.IR=t.RAM.data,t["IR:OPC"]=t.IR.numericOpcode(),t["IR:OPR"]=t.IR.numericOperand(),[2]}}))}))},e}(oo),go=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Et(e,t),e.prototype.action=function(t){return Ot(this,void 0,void 0,(function(){var e;return Dt(this,(function(n){switch(n.label){case 0:return e=t.PC+t.INC,Ze.setPC(e),[4,c(Ct).flash("PC")];case 1:return n.sent(),t.PC=e,[2]}}))}))},e}(oo),mo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Et(e,t),e.prototype.action=function(t){return Ot(this,void 0,void 0,(function(){return Dt(this,(function(e){switch(e.label){case 0:return Ze.setIsJumping(!0),Ze.setPC(t["IR:OPR"]),[4,c(Ct).flash("PC")];case 1:return e.sent(),t.PC=t["IR:OPR"],[2]}}))}))},e}(oo),wo=function(t){function e(e){var n=t.call(this)||this;return n.value=e,n}return Et(e,t),e.prototype.action=function(t){return Ot(this,void 0,void 0,(function(){return Dt(this,(function(e){switch(e.label){case 0:switch(this.value){case"IR:OPR":Ze.setALU2(t.IR.numericOperand()),t["ALU:2"]=t.IR.numericOperand();break;case"RAM":Ze.setALU2(t.RAM.data.value.signed()),t["ALU:2"]=t.RAM.data.value.signed();break;default:throw new Error('Unexpected value "'.concat(this.value,'"'))}return[4,c(Ct).flash("ALU:2")];case 1:return e.sent(),[2]}}))}))},e}(oo),vo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Et(e,t),e.prototype.action=function(t){return Ot(this,void 0,void 0,(function(){return Dt(this,(function(e){switch(e.label){case 0:return Ze.setOperation(t.IR.opcode.operator),[4,c(Ct).flash("ALU:OPR")];case 1:return e.sent(),t["ALU:OPR"]=t.IR.opcode.operator,[2]}}))}))},e}(oo);function bo(t){return t["SW:Z"]}function yo(t){return!t["SW:Z"]}function xo(t){return t["SW:N"]}function $o(t){return!t["SW:N"]}var Ao=[new ro("INC").sideffects(new eo("PC:1","INC:2")),new eo("INC:1","PC:2"),new go],Co=[new ro("PC").sideffects(new Sn("PC")),new eo("PC:2","RAM:ADD"),new to("ADDRESS","PC"),new eo("CU:3","RAM:CTRL"),new fo("PC").sideffects(new to("DATA","PC")),new eo("RAM:DATA","IR:1"),new po],Lo=[new Sn("IR:OPC"),new eo("IR:3","CU:1"),new Sn("CU")],Ro=[new eo("CU:2","MUX:4"),new Sn("MUX")],ko=[new eo("CU:4","ALU:5"),new vo],No=[new ro("ACC").sideffects(new Sn("ACC")),new eo("ACC:1","ALU:1"),new ho];function Io(t){return t?So:Uo}var So=[new Sn("IR:OPR"),new eo("IR:2","MUX:1"),new eo("MUX:3","ALU:2"),new wo("IR:OPR")],Uo=[new Sn("IR:OPR"),new eo("IR:2","RAM:ADD"),new to("ADDRESS","IR:OPR"),new Sn("CU"),new eo("CU:3","RAM:CTRL"),new fo("IR:OPR").sideffects(new to("DATA","IR:OPR")),new eo("RAM:DATA","MUX:2"),new eo("MUX:3","ALU:2"),new wo("RAM")],Eo=[new Sn("IR:OPR"),new eo("IR:2","PC:2"),new mo],To=[new Sn("IR:OPR").condition(bo),new eo("IR:2","PC:2").condition(bo),(new mo).condition(bo)],Oo=[new Sn("IR:OPR").condition(yo),new eo("IR:2","PC:2").condition(yo),(new mo).condition(yo)],Do=[new Sn("IR:OPR").condition(xo),new eo("IR:2","PC:2").condition(xo),(new mo).condition(xo)],_o=[new Sn("IR:OPR").condition($o),new eo("IR:2","PC:2").condition($o),(new mo).condition($o)];var Po=Tt(Tt({},$t(!1)),{update:function(){return Po.set(Fo||zo||Bo)}}),Mo={subscribe:Po.subscribe},Fo=!1,zo=!1,Bo=!1,Ho=!1,Wo="ENQUEUING_FETCH",jo=[],Xo={IR:null,"IR:OPC":null,"IR:OPR":null,PC:null,INC:null,"ALU:1":null,"ALU:2":null,"ALU:OPR":"",ACC:null,"SW:Z":!0,"SW:N":!1,RAM:null};function Zo(){return Ot(this,void 0,void 0,(function(){var t;return Dt(this,(function(e){switch(e.label){case 0:return Ko()||!qo()?[3,2]:[4,(t=jo.shift()).execute(Xo)];case 1:return e.sent(),zo&&t.doesEndStep()&&Yo(!1),[3,0];case 2:return[2]}}))}))}function Vo(){Qo(!0),Yo(!1),ti(!1),kn.info("Execution - START","EXECUTION")}function Go(){Qo(!1),Yo(!1),ti(!1),kn.info("Execution - PAUSE","EXECUTION")}function Jo(){Go(),Wo="ENQUEUING_FETCH",jo=[],kn.info("Execution - RESET","EXECUTION")}function qo(){return Fo||zo||Bo}function Ko(){return 0===jo.length}function Qo(t){Fo=t,Po.update()}function Yo(t){zo=t,Po.update()}function ti(t){Bo=t,Po.update()}setInterval((function(){return Ot(this,void 0,void 0,(function(){var t;return Dt(this,(function(e){switch(e.label){case 0:if(Ho||!qo())return[2];Ho=!0,e.label=1;case 1:switch(e.trys.push([1,12,13,14]),Wo){case"ENQUEUING_FETCH":return[3,2];case"EXECUTING_FETCH":return[3,3];case"ENQUEUING_INSTRUCTION":return[3,5];case"EXECUTING_INSTRUCTION":return[3,6];case"ENQUEUEING_PC_INCREMENT":return[3,8];case"EXECUTING_PC_INCREMENT":return[3,9]}return[3,11];case 2:return jo.push.apply(jo,Co),Ze.clear(),Wo="EXECUTING_FETCH",[3,11];case 3:return[4,Zo()];case 4:return e.sent(),Ko()&&(Wo="ENQUEUING_INSTRUCTION"),[3,11];case 5:return jo.push.apply(jo,function(t){if(!t.opcode)throw new Error("Invalid opcode");var e=[];switch(t.opcode.symbolic){case"ADD":case"SUB":case"MUL":case"DIV":case"AND":e.push.apply(e,_t(_t(_t(_t(_t(_t([],Lo,!1),Ro,!1),ko,!1),No,!1),Io(t.immediateFlag()),!1),[new eo("ALU:4","ACC:2"),new so,new eo("ALU:3","SW:1"),new uo],!1));break;case"NOT":e.push.apply(e,_t(_t(_t(_t(_t([],Lo,!1),Ro,!1),ko,!1),Io(t.immediateFlag()),!1),[new eo("ALU:4","ACC:2"),new so,new eo("ALU:3","SW:1"),new uo],!1));break;case"CMP":e.push.apply(e,_t(_t(_t(_t(_t(_t([],Lo,!1),Ro,!1),ko,!1),No,!1),Io(t.immediateFlag()),!1),[new eo("ALU:3","SW:1"),new io],!1));break;case"LOD":e.push.apply(e,_t(_t(_t(_t(_t([],Lo,!1),Ro,!1),ko,!1),Io(t.immediateFlag()),!1),[new eo("ALU:4","ACC:2"),new so],!1));break;case"STO":e.push.apply(e,_t(_t([],Lo,!1),[new eo("IR:2","RAM:ADD"),new to("ADDRESS","IR:OPR"),new ro("ACC").sideffects(new Sn("ACC")),new eo("ACC:1","RAM:DATA"),new eo("CU:3","RAM:CTRL"),new ao("IR:OPR")],!1));break;case"JMP":e.push.apply(e,_t(_t([],Lo,!1),Eo,!1));break;case"JZ":e.push.apply(e,_t(_t(_t([],Lo,!1),[new Sn("SW:Z")],!1),To,!1));break;case"JNZ":e.push.apply(e,_t(_t(_t([],Lo,!1),[new Sn("SW:Z")],!1),Oo,!1));break;case"JN":e.push.apply(e,_t(_t(_t([],Lo,!1),[new Sn("SW:N")],!1),Do,!1));break;case"JNN":e.push.apply(e,_t(_t(_t([],Lo,!1),[new Sn("SW:N")],!1),_o,!1));break;case"NOP":e.push.apply(e,Lo);break;case"HLT":e.push.apply(e,_t(_t([],Lo,!1),[new lo],!1));break;default:throw new Error('Unrecognized opcode: "'.concat(t.opcode.symbolic,'"'))}return e}(Xo.IR)),Wo="EXECUTING_INSTRUCTION",[3,11];case 6:return[4,Zo()];case 7:return e.sent(),Ko()&&(c(Ze).programCounter.unsigned()!==Pe||c(Ze).isJumping||Ze.setIsHalting(!0),c(Ze).isJumping?(Wo="ENQUEUING_FETCH",Bo&&ti(!1)):Wo="ENQUEUEING_PC_INCREMENT"),[3,11];case 8:return jo.push.apply(jo,Ao),Wo="EXECUTING_PC_INCREMENT",[3,11];case 9:return[4,Zo()];case 10:return e.sent(),Bo&&(ti(!1),Ze.setIsHalting(!0)),Ko()&&(Wo="ENQUEUING_FETCH"),[3,11];case 11:return[3,14];case 12:return t=e.sent(),Ze.setIsHalting(!0),c(Nt).message("ERROR",t.message),kn.error(t,"EXECUTION",t.isChecked),[3,14];case 13:return c(Ze).isHalting&&Jo(),Ho=!1,[7];case 14:return[2]}}))}))}),50);var ei={start:Vo,pause:Go,toggle:function(){c(Po)?Go():Vo()},step:function(){Qo(!1),Yo(!0),ti(!1),kn.info("Execution - STEP","EXECUTION")},instruction:function(){Qo(!1),Yo(!1),ti(!0),kn.info("Execution - INSTRUCTION","EXECUTION")},reset:Jo};function ni(t){let e,n;return{c(){e=C("svg"),n=C("path"),I(n,"d","M8 6.82v10.36c0 .79.87 1.27 1.54.84l8.14-5.18c.62-.39.62-1.29 0-1.69L9.54 5.98C8.87 5.55 8 6.03 8 6.82z"),I(e,"xmlns","http://www.w3.org/2000/svg"),I(e,"height","24px"),I(e,"viewBox","0 0 24 24"),I(e,"width","24px"),I(e,"fill","#000000"),I(e,"class","svelte-1x4uvz4")},m(t,r){y(t,e,r),w(e,n)},d(t){t&&x(e)}}}function ri(t){let e,n;return{c(){e=C("svg"),n=C("path"),I(n,"d","M8 19c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2s-2 .9-2 2v10c0 1.1.9 2 2 2zm6-12v10c0 1.1.9 2 2 2s2-.9 2-2V7c0-1.1-.9-2-2-2s-2 .9-2 2z"),I(e,"xmlns","http://www.w3.org/2000/svg"),I(e,"height","24px"),I(e,"viewBox","0 0 24 24"),I(e,"width","24px"),I(e,"fill","#000000"),I(e,"class","svelte-1x4uvz4")},m(t,r){y(t,e,r),w(e,n)},d(t){t&&x(e)}}}function oi(e){let n,r,i,s,u,c,a,l,f,d,h,p,g,m,v,b,$,C,k,S,E,T,O,D,_,P,M,F,z,B,H,W,j,X,Z,V,G,J,q,K,Q,Y=e[2].binary?"Symbolic":"Binary";function tt(t,e){return t[0]?ri:ni}let et=tt(e),nt=et(e);return{c(){n=A("div"),r=A("div"),i=A("fieldset"),s=A("legend"),s.textContent="Execution",u=R(),c=A("button"),c.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#000000" class="svelte-1x4uvz4"><path d="M7 6c.55 0 1 .45 1 1v10c0 .55-.45 1-1 1s-1-.45-1-1V7c0-.55.45-1 1-1zm3.66 6.82l5.77 4.07c.66.47 1.58-.01 1.58-.82V7.93c0-.81-.91-1.28-1.58-.82l-5.77 4.07c-.57.4-.57 1.24 0 1.64z"></path></svg>',a=R(),l=A("button"),nt.c(),f=R(),d=A("button"),d.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#000000" class="svelte-1x4uvz4"><path d="M7.58 16.89l5.77-4.07c.56-.4.56-1.24 0-1.63L7.58 7.11C6.91 6.65 6 7.12 6 7.93v8.14c0 .81.91 1.28 1.58.82zM16 7v10c0 .55.45 1 1 1s1-.45 1-1V7c0-.55-.45-1-1-1s-1 .45-1 1z"></path></svg>',h=R(),p=A("fieldset"),g=A("legend"),g.textContent="Step",m=R(),v=A("button"),v.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#000000" class="svelte-1x4uvz4"><path d="M8 6.82v10.36c0 .79.87 1.27 1.54.84l8.14-5.18c.62-.39.62-1.29 0-1.69L9.54 5.98C8.87 5.55 8 6.03 8 6.82z"></path></svg>',b=R(),$=A("button"),$.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#000000" class="svelte-1x4uvz4"><path d="M7.58 16.89l5.77-4.07c.56-.4.56-1.24 0-1.63L7.58 7.11C6.91 6.65 6 7.12 6 7.93v8.14c0 .81.91 1.28 1.58.82zM16 7v10c0 .55.45 1 1 1s1-.45 1-1V7c0-.55-.45-1-1-1s-1 .45-1 1z"></path></svg>',C=R(),k=A("fieldset"),S=A("legend"),S.textContent="Instruction",E=R(),T=A("button"),T.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#000000" class="svelte-1x4uvz4"><path d="M8 6.82v10.36c0 .79.87 1.27 1.54.84l8.14-5.18c.62-.39.62-1.29 0-1.69L9.54 5.98C8.87 5.55 8 6.03 8 6.82z"></path></svg>',O=R(),D=A("button"),D.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#000000" class="svelte-1x4uvz4"><path d="M7.58 16.89l5.77-4.07c.56-.4.56-1.24 0-1.63L7.58 7.11C6.91 6.65 6 7.12 6 7.93v8.14c0 .81.91 1.28 1.58.82zM16 7v10c0 .55.45 1 1 1s1-.45 1-1V7c0-.55-.45-1-1-1s-1 .45-1 1z"></path></svg>',_=R(),P=A("div"),M=A("fieldset"),M.innerHTML='<legend class="svelte-1x4uvz4">Animation speed</legend> \n\t\t\t<input type="range" disabled=""/>',F=R(),z=A("fieldset"),B=A("legend"),B.textContent="Animation",H=R(),W=A("input"),j=R(),X=A("div"),Z=A("fieldset"),V=A("legend"),V.textContent="Dispaly",G=R(),J=A("button"),q=L(Y),I(s,"class","svelte-1x4uvz4"),I(c,"title","Reset"),c.disabled=!0,I(c,"class","svelte-1x4uvz4"),I(l,"title","Play"),I(l,"class","svelte-1x4uvz4"),I(d,"title","Skip to end"),d.disabled=!0,I(d,"class","svelte-1x4uvz4"),I(i,"class","svelte-1x4uvz4"),I(g,"class","svelte-1x4uvz4"),I(v,"title","Play step"),v.disabled=!0,I(v,"class","svelte-1x4uvz4"),I($,"title","Skip step"),$.disabled=!0,I($,"class","svelte-1x4uvz4"),I(p,"class","svelte-1x4uvz4"),I(S,"class","svelte-1x4uvz4"),I(T,"class","svelte-1x4uvz4"),D.disabled=!0,I(D,"class","svelte-1x4uvz4"),I(k,"class","svelte-1x4uvz4"),I(r,"class","execution-buttons svelte-1x4uvz4"),I(M,"class","svelte-1x4uvz4"),I(B,"class","svelte-1x4uvz4"),I(W,"type","checkbox"),I(z,"class","svelte-1x4uvz4"),I(P,"class","animation svelte-1x4uvz4"),I(V,"class","svelte-1x4uvz4"),I(Z,"class","svelte-1x4uvz4"),I(X,"class","display svelte-1x4uvz4"),I(n,"class","control-bar svelte-1x4uvz4")},m(t,o){y(t,n,o),w(n,r),w(r,i),w(i,s),w(i,u),w(i,c),w(i,a),w(i,l),nt.m(l,null),w(i,f),w(i,d),w(r,h),w(r,p),w(p,g),w(p,m),w(p,v),w(p,b),w(p,$),w(r,C),w(r,k),w(k,S),w(k,E),w(k,T),w(k,O),w(k,D),w(n,_),w(n,P),w(P,M),w(P,F),w(P,z),w(z,B),w(z,H),w(z,W),W.checked=e[1].animate,w(n,j),w(n,X),w(X,Z),w(Z,V),w(Z,G),w(Z,J),w(J,q),K||(Q=[N(c,"click",e[3]),N(l,"click",e[4]),N(d,"click",ii),N(v,"click",e[5]),N($,"click",si),N(T,"click",e[6]),N(D,"click",ui),N(W,"change",e[8]),N(J,"click",e[7])],K=!0)},p(t,[e]){et!==(et=tt(t))&&(nt.d(1),nt=et(t),nt&&(nt.c(),nt.m(l,null))),2&e&&(W.checked=t[1].animate),4&e&&Y!==(Y=t[2].binary?"Symbolic":"Binary")&&U(q,Y)},i:t,o:t,d(t){t&&x(n),nt.d(),K=!1,o(Q)}}}function ii(){}function si(){}function ui(){}function ci(t,e,n){let r,o,i;return a(t,Mo,(t=>n(0,r=t))),a(t,fe,(t=>n(1,o=t))),a(t,$e,(t=>n(2,i=t))),[r,o,i,function(){ei.reset()},function(){ei.toggle()},function(){ei.step()},function(){ei.instruction()},function(){$e.updateBinary((t=>!t))},function(){o.animate=this.checked,fe.set(o)}]}class ai extends yt{constructor(t){super(),bt(this,t,ci,oi,s,{})}}function li(t,e,n){const r=t.slice();return r[0]=e[n],r}function fi(t,e){let n,r,o,i,s,u,c,a,l,f,d,h=e[0].message+"";function p(){return e[3](e[0])}return{key:t,first:null,c(){n=A("div"),r=A("button"),r.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#FFFFFF" class="hover:scale-105"><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M18.3 5.71c-.39-.39-1.02-.39-1.41 0L12 10.59 7.11 5.7c-.39-.39-1.02-.39-1.41 0-.39.39-.39 1.02 0 1.41L10.59 12 5.7 16.89c-.39.39-.39 1.02 0 1.41.39.39 1.02.39 1.41 0L12 13.41l4.89 4.89c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L13.41 12l4.89-4.89c.38-.38.38-1.02 0-1.4z"></path></svg>',o=R(),i=A("p"),s=L(h),u=R(),I(r,"class","absolute bg-transparent text-white cursor-pointer font-bold right-8"),I(i,"class","w-3/4 text-center text-xl"),I(n,"class",c="relative w-full h-fit flex justify-center items-center p-5 origin-left border text-white "+e[0].type+" svelte-tz4rgo"),this.first=n},m(t,e){y(t,n,e),w(n,r),w(n,o),w(n,i),w(i,s),w(n,u),l=!0,f||(d=N(r,"click",p),f=!0)},p(t,r){e=t,(!l||2&r)&&h!==(h=e[0].message+"")&&U(s,h),(!l||2&r&&c!==(c="relative w-full h-fit flex justify-center items-center p-5 origin-left border text-white "+e[0].type+" svelte-tz4rgo"))&&I(n,"class",c)},i(t){l||(K((()=>{a||(a=dt(n,Dn,{},!0)),a.run(1)})),l=!0)},o(t){a||(a=dt(n,Dn,{},!1)),a.run(0),l=!1},d(t){t&&x(n),t&&a&&a.end(),f=!1,d()}}}function di(t){let e,n,r=[],o=new Map,i=t[1];const s=t=>t[0].id;for(let e=0;e<i.length;e+=1){let n=li(t,i,e),u=s(n);o.set(u,r[e]=fi(u,n))}return{c(){e=A("div");for(let t=0;t<r.length;t+=1)r[t].c();I(e,"class","fixed top-0 left-0 w-screen h-fit flex flex-col")},m(t,o){y(t,e,o);for(let t=0;t<r.length;t+=1)r[t].m(e,null);n=!0},p(t,[n]){6&n&&(i=t[1],ut(),r=function(t,e,n,r,o,i,s,u,c,a,l,f){let d=t.length,h=i.length,p=d;const g={};for(;p--;)g[t[p].key]=p;const m=[],w=new Map,v=new Map;for(p=h;p--;){const t=f(o,i,p),u=n(t);let c=s.get(u);c?r&&c.p(t,e):(c=a(u,t),c.c()),w.set(u,m[p]=c),u in g&&v.set(u,Math.abs(p-g[u]))}const b=new Set,y=new Set;function x(t){at(t,1),t.m(u,l),s.set(t.key,t),l=t.first,h--}for(;d&&h;){const e=m[h-1],n=t[d-1],r=e.key,o=n.key;e===n?(l=e.first,d--,h--):w.has(o)?!s.has(r)||b.has(r)?x(e):y.has(o)?d--:v.get(r)>v.get(o)?(y.add(r),x(e)):(b.add(o),d--):(c(n,s),d--)}for(;d--;){const e=t[d];w.has(e.key)||c(e,s)}for(;h;)x(m[h-1]);return m}(r,n,s,1,t,i,o,e,pt,fi,null,li),ct())},i(t){if(!n){for(let t=0;t<i.length;t+=1)at(r[t]);n=!0}},o(t){for(let t=0;t<r.length;t+=1)lt(r[t]);n=!1},d(t){t&&x(e);for(let t=0;t<r.length;t+=1)r[t].d()}}}function hi(t,e,n){let r=[];function o(t){n(1,r=r.filter((e=>e.id!==t)))}return[function(t,e){3===r.length&&r.shift(),n(1,r=[...r,{id:Math.random(),type:t,message:e}])},r,o,t=>o(t.id)]}class pi extends yt{constructor(t){super(),bt(this,t,hi,di,s,{message:0})}get message(){return this.$$.ctx[0]}}function gi(t,e,n){const r=t.slice();return r[48]=e[n],r}function mi(t,e,n){const r=t.slice();return r[51]=e[n],r}function wi(t,e,n){const r=t.slice();return r[51]=e[n],r}function vi(t,e,n){const r=t.slice();return r[56]=e[n],r}function bi(t){let e,n,r,s,u,c,a,l,f,d,h,p,g,m,v,b,C,k,T,D,_,P,M,F,z,B,H,W,j,X,Z,V,G,J,q,Q,Y,tt,et,nt,rt,ot,it,st,ut,ct,at,lt,ft,dt,ht,pt,gt,mt,wt,vt,bt,yt,xt,$t,At,Ct,Lt,Rt,kt,Nt,It,St,Ut,Et,Tt,Ot,Dt,_t,Pt,Mt,Ft,zt,Bt,Ht,Wt,jt,Zt,Vt,Gt,Jt,qt,Kt,Qt,Yt,te,ee,ne,re,oe,ie,se,ue,ce,ae,le,fe,de,he,pe,ge,me,we,ve,be,ye,xe,$e,Ae,Ce,Le,Re,ke,Ne,Ie,Se,Ue,Ee=t[9].binary?"Symbolic":"Binary",Te=t[9].showLabels?"No-Labels":"Labels",Oe=t[8].showNodes?"Hide":"Show",De=t[8].showNodeNames?"No-Names":"Names",_e=t[8].showNodesCoordinates?"No-Coordinates":"Coordinates",Pe=["IR","IR:OPC","IR:OPR","PC","INC","MUX","CU","ALU:1","ALU:2","ALU:OPR","ACC","SW:Z","SW:N"],Me=[];for(let e=0;e<13;e+=1)Me[e]=yi(vi(t,Pe,e));let Fe=Xt,ze=[];for(let e=0;e<Fe.length;e+=1)ze[e]=xi(wi(t,Fe,e));let Be=Xt,He=[];for(let e=0;e<Be.length;e+=1)He[e]=$i(mi(t,Be,e));let We=["ERROR","WARNING","SUCCESS","INFO"],je=[];for(let e=0;e<4;e+=1)je[e]=Ai(gi(t,We,e));return{c(){e=A("div"),n=A("h2"),n.textContent="Debugger",r=R(),s=A("button"),s.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#FFFFFF"><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M18.3 5.71c-.39-.39-1.02-.39-1.41 0L12 10.59 7.11 5.7c-.39-.39-1.02-.39-1.41 0-.39.39-.39 1.02 0 1.41L10.59 12 5.7 16.89c-.39.39-.39 1.02 0 1.41.39.39 1.02.39 1.41 0L12 13.41l4.89 4.89c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L13.41 12l4.89-4.89c.38-.38.38-1.02 0-1.4z"></path></svg>',u=R(),c=A("fieldset"),a=A("legend"),a.textContent="Input",l=R(),f=A("input"),d=R(),h=A("input"),p=R(),g=A("fieldset"),m=A("legend"),m.textContent="Execution",v=R(),b=A("button"),b.textContent="Start",C=R(),k=A("button"),k.textContent="Pause",T=R(),D=A("button"),D.textContent="Step",_=R(),P=A("button"),P.textContent="Instruction",M=R(),F=A("button"),F.textContent="Reset",z=R(),B=A("fieldset"),H=A("legend"),H.textContent="RAM",W=R(),j=A("button"),j.textContent="Clear",X=R(),Z=A("button"),Z.textContent="Dump",V=R(),G=A("fieldset"),J=A("legend"),J.textContent="RAM Animation",q=R(),Q=A("button"),Q.textContent="Show address",Y=R(),tt=A("button"),tt.textContent="Flash address",et=R(),nt=A("button"),nt.textContent="Flash data",rt=R(),ot=A("button"),ot.textContent="Scroll Up",it=R(),st=A("button"),st.textContent="Scroll Down",ut=R(),ct=A("fieldset"),at=A("legend"),at.textContent="CPU",lt=R(),ft=A("button"),ft.textContent="Set ACC",dt=R(),ht=A("button"),ht.textContent="Set PC",pt=R(),gt=A("button"),gt.textContent="Set IR",mt=R(),wt=A("button"),wt.textContent="Set ALU1",vt=R(),bt=A("button"),bt.textContent="Set ALU2",yt=R(),xt=A("button"),xt.textContent="Set ALU op",$t=R(),At=A("button"),At.textContent="Set SWZ",Ct=R(),Lt=A("button"),Lt.textContent="Set SWN",Rt=R(),kt=A("fieldset"),Nt=A("legend"),Nt.textContent="CPU Animation",It=R(),St=A("select");for(let t=0;t<13;t+=1)Me[t].c();Ut=R(),Et=A("button"),Et.textContent="Flash component",Tt=R(),Ot=A("fieldset"),Dt=A("legend"),Dt.textContent="Dispaly",_t=R(),Pt=A("button"),Mt=L(Ee),Ft=R(),zt=A("button"),Bt=L(Te),Ht=R(),Wt=A("fieldset"),jt=A("legend"),jt.textContent="Nodes",Zt=R(),Vt=A("button"),Gt=L(Oe),Jt=R(),qt=A("button"),Kt=L(De),Yt=R(),te=A("button"),ee=L(_e),re=R(),oe=A("fieldset"),ie=A("legend"),ie.textContent="Wires",se=R(),ue=A("select");for(let t=0;t<ze.length;t+=1)ze[t].c();ce=R(),ae=A("select");for(let t=0;t<He.length;t+=1)He[t].c();le=R(),fe=A("button"),fe.textContent="Flash",de=R(),he=A("fieldset"),pe=A("legend"),pe.textContent="Message",ge=R(),me=A("select");for(let t=0;t<4;t+=1)je[t].c();we=R(),ve=A("button"),ve.textContent="Show",be=R(),ye=A("fieldset"),xe=A("legend"),xe.textContent="Position",$e=R(),Ae=A("button"),Ae.textContent="Left",Ce=R(),Le=A("button"),Le.textContent="Top",Re=R(),ke=A("button"),ke.textContent="Bottom",Ne=R(),Ie=A("button"),Ie.textContent="Right",I(n,"class","svelte-foehai"),I(s,"class","close-debugger svelte-foehai"),I(s,"title","Close"),I(f,"type","number"),I(f,"placeholder","Number input"),I(f,"class","svelte-foehai"),I(h,"type","text"),I(h,"placeholder","String input"),I(h,"class","svelte-foehai"),I(c,"class","svelte-foehai"),I(b,"class","svelte-foehai"),I(k,"class","svelte-foehai"),I(D,"class","svelte-foehai"),I(P,"class","svelte-foehai"),I(F,"class","svelte-foehai"),I(g,"class","svelte-foehai"),I(j,"class","svelte-foehai"),I(Z,"class","svelte-foehai"),I(B,"class","svelte-foehai"),I(Q,"class","svelte-foehai"),I(tt,"class","svelte-foehai"),I(nt,"class","svelte-foehai"),I(ot,"class","svelte-foehai"),I(st,"class","svelte-foehai"),I(G,"class","svelte-foehai"),I(ft,"class","svelte-foehai"),I(ht,"class","svelte-foehai"),I(gt,"class","svelte-foehai"),I(wt,"class","svelte-foehai"),I(bt,"class","svelte-foehai"),I(xt,"class","svelte-foehai"),I(At,"class","svelte-foehai"),I(Lt,"class","svelte-foehai"),I(ct,"class","svelte-foehai"),void 0===t[6]&&K((()=>t[35].call(St))),I(Et,"class","svelte-foehai"),I(kt,"class","svelte-foehai"),I(Pt,"class","svelte-foehai"),I(zt,"class","svelte-foehai"),I(Ot,"class","svelte-foehai"),I(Vt,"class","svelte-foehai"),qt.disabled=Qt=!t[8].showNodes,I(qt,"class","svelte-foehai"),te.disabled=ne=!t[8].showNodes,I(te,"class","svelte-foehai"),I(Wt,"class","svelte-foehai"),void 0===t[3]&&K((()=>t[36].call(ue))),void 0===t[4]&&K((()=>t[37].call(ae))),I(fe,"class","svelte-foehai"),I(oe,"class","svelte-foehai"),void 0===t[5]&&K((()=>t[38].call(me))),I(ve,"class","svelte-foehai"),I(he,"class","svelte-foehai"),I(Ae,"class","svelte-foehai"),I(Le,"class","svelte-foehai"),I(ke,"class","svelte-foehai"),I(Ie,"class","svelte-foehai"),I(ye,"class","svelte-foehai"),I(e,"class","debug svelte-foehai")},m(o,x){y(o,e,x),w(e,n),w(e,r),w(e,s),w(e,u),w(e,c),w(c,a),w(c,l),w(c,f),E(f,t[0]),w(c,d),w(c,h),E(h,t[2]),w(e,p),w(e,g),w(g,m),w(g,v),w(g,b),w(g,C),w(g,k),w(g,T),w(g,D),w(g,_),w(g,P),w(g,M),w(g,F),w(e,z),w(e,B),w(B,H),w(B,W),w(B,j),w(B,X),w(B,Z),w(e,V),w(e,G),w(G,J),w(G,q),w(G,Q),w(G,Y),w(G,tt),w(G,et),w(G,nt),w(G,rt),w(G,ot),w(G,it),w(G,st),w(e,ut),w(e,ct),w(ct,at),w(ct,lt),w(ct,ft),w(ct,dt),w(ct,ht),w(ct,pt),w(ct,gt),w(ct,mt),w(ct,wt),w(ct,vt),w(ct,bt),w(ct,yt),w(ct,xt),w(ct,$t),w(ct,At),w(ct,Ct),w(ct,Lt),w(e,Rt),w(e,kt),w(kt,Nt),w(kt,It),w(kt,St);for(let t=0;t<13;t+=1)Me[t].m(St,null);O(St,t[6]),w(kt,Ut),w(kt,Et),w(e,Tt),w(e,Ot),w(Ot,Dt),w(Ot,_t),w(Ot,Pt),w(Pt,Mt),w(Ot,Ft),w(Ot,zt),w(zt,Bt),w(e,Ht),w(e,Wt),w(Wt,jt),w(Wt,Zt),w(Wt,Vt),w(Vt,Gt),w(Wt,Jt),w(Wt,qt),w(qt,Kt),w(Wt,Yt),w(Wt,te),w(te,ee),w(e,re),w(e,oe),w(oe,ie),w(oe,se),w(oe,ue);for(let t=0;t<ze.length;t+=1)ze[t].m(ue,null);O(ue,t[3]),w(oe,ce),w(oe,ae);for(let t=0;t<He.length;t+=1)He[t].m(ae,null);O(ae,t[4]),w(oe,le),w(oe,fe),w(e,de),w(e,he),w(he,pe),w(he,ge),w(he,me);for(let t=0;t<4;t+=1)je[t].m(me,null);O(me,t[5]),w(he,we),w(he,ve),w(e,be),w(e,ye),w(ye,xe),w(ye,$e),w(ye,Ae),w(ye,Ce),w(ye,Le),w(ye,Re),w(ye,ke),w(ye,Ne),w(ye,Ie),t[43](e),Se||(Ue=[N(s,"click",t[10]),N(f,"input",t[33]),N(h,"input",t[34]),N(b,"click",ei.start),N(k,"click",ei.pause),N(D,"click",ei.step),N(P,"click",ei.instruction),N(F,"click",ei.reset),N(j,"click",t[20]),N(Z,"click",t[21]),N(Q,"click",t[17]),N(tt,"click",t[18]),N(nt,"click",t[19]),N(ot,"click",(function(){i(t[7].scrollUp)&&t[7].scrollUp.apply(this,arguments)})),N(st,"click",(function(){i(t[7].scrollDown)&&t[7].scrollDown.apply(this,arguments)})),N(ft,"click",t[22]),N(ht,"click",t[23]),N(gt,"click",t[24]),N(wt,"click",t[25]),N(bt,"click",t[26]),N(xt,"click",t[27]),N(At,"click",t[28]),N(Lt,"click",t[29]),N(St,"change",t[35]),N(Et,"click",t[30]),N(Pt,"click",t[12]),N(zt,"click",t[13]),N(Vt,"click",t[14]),N(qt,"click",t[15]),N(te,"click",t[16]),N(ue,"change",t[36]),N(ae,"change",t[37]),N(fe,"click",t[31]),N(me,"change",t[38]),N(ve,"click",t[32]),N(Ae,"click",t[39]),N(Le,"click",t[40]),N(ke,"click",t[41]),N(Ie,"click",t[42])],Se=!0)},p(e,n){if(t=e,1&n[0]&&S(f.value)!==t[0]&&E(f,t[0]),4&n[0]&&h.value!==t[2]&&E(h,t[2]),64&n[0]&&O(St,t[6]),512&n[0]&&Ee!==(Ee=t[9].binary?"Symbolic":"Binary")&&U(Mt,Ee),512&n[0]&&Te!==(Te=t[9].showLabels?"No-Labels":"Labels")&&U(Bt,Te),256&n[0]&&Oe!==(Oe=t[8].showNodes?"Hide":"Show")&&U(Gt,Oe),256&n[0]&&De!==(De=t[8].showNodeNames?"No-Names":"Names")&&U(Kt,De),256&n[0]&&Qt!==(Qt=!t[8].showNodes)&&(qt.disabled=Qt),256&n[0]&&_e!==(_e=t[8].showNodesCoordinates?"No-Coordinates":"Coordinates")&&U(ee,_e),256&n[0]&&ne!==(ne=!t[8].showNodes)&&(te.disabled=ne),0&n){let e;for(Fe=Xt,e=0;e<Fe.length;e+=1){const r=wi(t,Fe,e);ze[e]?ze[e].p(r,n):(ze[e]=xi(r),ze[e].c(),ze[e].m(ue,null))}for(;e<ze.length;e+=1)ze[e].d(1);ze.length=Fe.length}if(8&n[0]&&O(ue,t[3]),0&n){let e;for(Be=Xt,e=0;e<Be.length;e+=1){const r=mi(t,Be,e);He[e]?He[e].p(r,n):(He[e]=$i(r),He[e].c(),He[e].m(ae,null))}for(;e<He.length;e+=1)He[e].d(1);He.length=Be.length}16&n[0]&&O(ae,t[4]),32&n[0]&&O(me,t[5])},d(n){n&&x(e),$(Me,n),$(ze,n),$(He,n),$(je,n),t[43](null),Se=!1,o(Ue)}}}function yi(e){let n,r,o;return{c(){n=A("option"),r=L(e[56]),n.__value=o=e[56],n.value=n.__value},m(t,e){y(t,n,e),w(n,r)},p:t,d(t){t&&x(n)}}}function xi(e){let n,r,o,i=e[51].name+"";return{c(){n=A("option"),r=L(i),n.__value=o=e[51].name,n.value=n.__value},m(t,e){y(t,n,e),w(n,r)},p:t,d(t){t&&x(n)}}}function $i(e){let n,r,o,i=e[51].name+"";return{c(){n=A("option"),r=L(i),n.__value=o=e[51].name,n.value=n.__value},m(t,e){y(t,n,e),w(n,r)},p:t,d(t){t&&x(n)}}}function Ai(e){let n,r,o;return{c(){n=A("option"),r=L(e[48]),n.__value=o=e[48],n.value=n.__value},m(t,e){y(t,n,e),w(n,r)},p:t,d(t){t&&x(n)}}}function Ci(e){let n,r=e[8].showDegugger&&bi(e);return{c(){r&&r.c(),n=k()},m(t,e){r&&r.m(t,e),y(t,n,e)},p(t,e){t[8].showDegugger?r?r.p(t,e):(r=bi(t),r.c(),r.m(n.parentNode,n)):r&&(r.d(1),r=null)},i:t,o:t,d(t){r&&r.d(t),t&&x(n)}}}function Li(t,e,n){let r,o,i,s,u,l,f,d;a(t,Nt,(t=>n(45,o=t))),a(t,Ct,(t=>n(46,i=t))),a(t,rr,(t=>n(47,s=t))),a(t,At,(t=>n(7,u=t))),a(t,zt,(t=>n(8,l=t))),a(t,$e,(t=>n(9,f=t)));let h,p,g,m,w="",v="";function b(t){switch(t){case"top":n(1,d.style.top="0",d),n(1,d.style.bottom="auto",d);break;case"right":n(1,d.style.right="0",d),n(1,d.style.left="auto",d);break;case"bottom":n(1,d.style.bottom="0",d),n(1,d.style.top="auto",d);break;case"left":n(1,d.style.left="0",d),n(1,d.style.right="auto",d)}}j((()=>{const t=t=>{t.shiftKey&&"d"===t.key.toLowerCase()&&zt.updateShowDebugger((t=>!t))};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)}));return t.$$.update=()=>{1&t.$$.dirty[0]&&(r=parseInt(w))},[w,d,v,h,p,g,m,u,l,f,function(){zt.setShowDebugger(!1)},b,function(){$e.updateBinary((t=>!t))},function(){$e.updateShowLabels((t=>!t))},function(){zt.updateShowNodes((t=>!t))},function(){zt.updateShowNodeNames((t=>!t))},function(){zt.updateShowNodeCoordinates((t=>!t))},function(){Fe(r)&&u.showAddress(r)},function(){Fe(r)&&u.flashAddress(r)},function(){Fe(r)&&u.flashContent(r)},function(){rr.clear(),hr.clear()},function(){console.log("--- RAM CONTENT ----------------"),console.dir(s),console.log("--------------------------------")},function(){Ze.setACC(r)},function(){Ze.setPC(r)},function(){Ze.setIR(Jn(v,!1))},function(){Ze.setALU1(r)},function(){Ze.setALU2(r)},function(){["+","-","*","/",":","!","&","=",""].includes(v)&&Ze.setOperation(v)},function(){Ze.setZeroFlag(!!w)},function(){Ze.setNegativeFlag(!!w)},function(){i.flash(m)},function(){Zt(h)&&Zt(p)&&c(St.wires).flashWire(h,p)},function(){o.message(g,v)},function(){w=S(this.value),n(0,w)},function(){v=this.value,n(2,v)},function(){m=D(this),n(6,m)},function(){h=D(this),n(3,h)},function(){p=D(this),n(4,p)},function(){g=D(this),n(5,g)},()=>b("left"),()=>b("top"),()=>b("bottom"),()=>b("right"),function(t){Z[t?"unshift":"push"]((()=>{d=t,n(1,d)}))}]}class Ri extends yt{constructor(t){super(),bt(this,t,Li,Ci,s,{},null,[-1,-1])}}function ki(t,e,n){const r=t.slice();return r[17]=e[n],r}function Ni(t,e,n){const r=t.slice();return r[20]=e[n],r}function Ii(t,e,n){const r=t.slice();return r[23]=e[n],r}function Si(t){let e,n,r,i,s,u,c,a,l,f,d,h,p,g,m,v,b,C,k,S,U,T,D,_,P,M,F,z,B,H,W,j,X,Z,V,G,J=Ln,q=[];for(let e=0;e<J.length;e+=1)q[e]=Ui(Ii(t,J,e));let Q=Cn,Y=[];for(let e=0;e<Q.length;e+=1)Y[e]=Ei(Ni(t,Q,e));let tt=t[5],et=[];for(let e=0;e<tt.length;e+=1)et[e]=Oi(ki(t,tt,e));return{c(){e=A("div"),n=A("div"),r=A("h2"),r.textContent="Logs",i=R(),s=A("div"),u=A("label"),c=L("Keyword:\n\t\t\t\t\t"),a=A("input"),l=R(),f=A("label"),d=L("Type:\n\t\t\t\t\t"),h=A("select"),p=A("option"),p.textContent="ALL";for(let t=0;t<q.length;t+=1)q[t].c();g=R(),m=A("label"),v=L("Group:\n\t\t\t\t\t"),b=A("select"),C=A("option"),C.textContent="ALL";for(let t=0;t<Y.length;t+=1)Y[t].c();k=R(),S=A("div"),U=A("label"),T=L("Lock scroll to bottom\n\t\t\t\t\t"),D=A("input"),_=R(),P=A("label"),M=L("Show timestamp\n\t\t\t\t\t"),F=A("input"),z=R(),B=A("div"),H=A("button"),H.textContent="Export",W=R(),j=A("button"),j.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" class="h-7 w-7 fill-white"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>',X=R(),Z=A("div");for(let t=0;t<et.length;t+=1)et[t].c();I(r,"class","text-2xl"),I(a,"type","text"),I(a,"class","text-black px-1 py-0.5"),I(u,"for","keyword"),p.__value="ALL",p.value=p.__value,I(h,"id","type"),I(h,"class","text-black px-1 py-0.5"),void 0===t[1]&&K((()=>t[12].call(h))),I(f,"for","type"),C.__value="ALL",C.value=C.__value,I(b,"id","group"),I(b,"class","text-black px-1 py-0.5"),void 0===t[2]&&K((()=>t[13].call(b))),I(m,"for","group"),I(s,"class","flex items-center flex-wrap gap-4 p-2"),I(D,"type","checkbox"),I(D,"id","lock-scroll-to-bottom"),I(U,"for","lock-scroll-to-bottom"),I(F,"type","checkbox"),I(F,"id","show-timestamp"),I(P,"for","show-timestamp"),I(S,"class","flex items-center flex-wrap gap-4 p-2"),I(H,"class","border px-1"),I(B,"class","flex items-center flex-wrap gap-4 p-2"),I(j,"title","Close logs"),I(n,"class","flex flex-wrap items-center justify-around gap-4 p-4"),I(Z,"class","w-full h-[90%] overflow-y-auto"),I(e,"class","fixed top-0 left-0 w-screen h-screen z-[1000] bg-black/70 text-white")},m(o,x){y(o,e,x),w(e,n),w(n,r),w(n,i),w(n,s),w(s,u),w(u,c),w(u,a),E(a,t[3]),w(s,l),w(s,f),w(f,d),w(f,h),w(h,p);for(let t=0;t<q.length;t+=1)q[t].m(h,null);O(h,t[1]),w(s,g),w(s,m),w(m,v),w(m,b),w(b,C);for(let t=0;t<Y.length;t+=1)Y[t].m(b,null);O(b,t[2]),w(n,k),w(n,S),w(S,U),w(U,T),w(U,D),D.checked=t[4],w(S,_),w(S,P),w(P,M),w(P,F),F.checked=t[6],w(n,z),w(n,B),w(B,H),w(n,W),w(n,j),w(e,X),w(e,Z);for(let t=0;t<et.length;t+=1)et[t].m(Z,null);t[16](Z),V||(G=[N(a,"input",t[11]),N(h,"change",t[12]),N(b,"change",t[13]),N(D,"change",t[14]),N(F,"change",t[15]),N(H,"click",t[9]),N(j,"click",t[8])],V=!0)},p(t,e){if(8&e&&a.value!==t[3]&&E(a,t[3]),0&e){let n;for(J=Ln,n=0;n<J.length;n+=1){const r=Ii(t,J,n);q[n]?q[n].p(r,e):(q[n]=Ui(r),q[n].c(),q[n].m(h,null))}for(;n<q.length;n+=1)q[n].d(1);q.length=J.length}if(2&e&&O(h,t[1]),0&e){let n;for(Q=Cn,n=0;n<Q.length;n+=1){const r=Ni(t,Q,n);Y[n]?Y[n].p(r,e):(Y[n]=Ei(r),Y[n].c(),Y[n].m(b,null))}for(;n<Y.length;n+=1)Y[n].d(1);Y.length=Q.length}if(4&e&&O(b,t[2]),16&e&&(D.checked=t[4]),64&e&&(F.checked=t[6]),96&e){let n;for(tt=t[5],n=0;n<tt.length;n+=1){const r=ki(t,tt,n);et[n]?et[n].p(r,e):(et[n]=Oi(r),et[n].c(),et[n].m(Z,null))}for(;n<et.length;n+=1)et[n].d(1);et.length=tt.length}},d(n){n&&x(e),$(q,n),$(Y,n),$(et,n),t[16](null),V=!1,o(G)}}}function Ui(e){let n,r,o,i=e[23]+"";return{c(){n=A("option"),r=L(i),n.__value=o=e[23],n.value=n.__value},m(t,e){y(t,n,e),w(n,r)},p:t,d(t){t&&x(n)}}}function Ei(e){let n,r,o,i=e[20]+"";return{c(){n=A("option"),r=L(i),n.__value=o=e[20],n.value=n.__value},m(t,e){y(t,n,e),w(n,r)},p:t,d(t){t&&x(n)}}}function Ti(t){let e,n,r=t[17].timestamp+"";return{c(){e=L(r),n=L(" - ")},m(t,r){y(t,e,r),y(t,n,r)},p(t,n){32&n&&r!==(r=t[17].timestamp+"")&&U(e,r)},d(t){t&&x(e),t&&x(n)}}}function Oi(t){let e,n,r,o,i=t[17].message+"",s=t[6]&&Ti(t);return{c(){e=A("p"),s&&s.c(),n=L(i),r=R(),I(e,"class",o="m-2 whitespace-pre-line "+t[17].logType+" svelte-7zjq9j")},m(t,o){y(t,e,o),s&&s.m(e,null),w(e,n),w(e,r)},p(t,r){t[6]?s?s.p(t,r):(s=Ti(t),s.c(),s.m(e,n)):s&&(s.d(1),s=null),32&r&&i!==(i=t[17].message+"")&&U(n,i),32&r&&o!==(o="m-2 whitespace-pre-line "+t[17].logType+" svelte-7zjq9j")&&I(e,"class",o)},d(t){t&&x(e),s&&s.d()}}}function Di(e){let n,r=e[7].showLogger&&Si(e);return{c(){r&&r.c(),n=k()},m(t,e){r&&r.m(t,e),y(t,n,e)},p(t,[e]){t[7].showLogger?r?r.p(t,e):(r=Si(t),r.c(),r.m(n.parentNode,n)):r&&(r.d(1),r=null)},i:t,o:t,d(t){r&&r.d(t),t&&x(n)}}}function _i(t,e,n){let r,o,i;a(t,yn,(t=>n(10,r=t))),a(t,$n,(t=>n(7,o=t)));let s=[],u="ALL",c="ALL",l="",f=!1,d=!0;function h(){$n.updateShowLogger((t=>!t))}return j((()=>{const t=t=>{t.altKey&&t.shiftKey&&"l"===t.key.toLowerCase()&&h()};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)})),t.$$.update=()=>{1055&t.$$.dirty&&i&&(n(5,s=r.filter((t=>("ALL"===u||t.logType===u)&&("ALL"===c||t.logGroup===c)&&t.message.toLowerCase().includes(l)))),d&&n(0,i.scrollTop=i.scrollHeight,i))},[i,u,c,l,d,s,f,o,h,function(){var t,e,n,o;t=JSON.stringify(r),e=`cpu-visual-simultor-logs-${(new Date).toDateString()}.json`,n=document.createElement("a"),o=new Blob([t],{type:"text/plain"}),n.href=URL.createObjectURL(o),n.download=e,n.click()},r,function(){l=this.value,n(3,l)},function(){u=D(this),n(1,u)},function(){c=D(this),n(2,c)},function(){d=this.checked,n(4,d)},function(){f=this.checked,n(6,f)},function(t){Z[t?"unshift":"push"]((()=>{i=t,n(0,i),n(10,r),n(1,u),n(2,c),n(3,l),n(4,d)}))}]}class Pi extends yt{constructor(t){super(),bt(this,t,_i,Di,s,{})}}const{window:Mi}=ht;function Fi(t){let e,n,r,i,s,u,c,a,l,f,d,h,p;n=new Yr({});i=new ai({props:{}}),t[7](i);u=new Ri({props:{}}),t[9](u);a=new Pi({props:{}}),t[10](a);return f=new pi({props:{}}),t[11](f),{c(){e=A("div"),gt(n.$$.fragment),r=R(),gt(i.$$.fragment),s=R(),gt(u.$$.fragment),c=R(),gt(a.$$.fragment),l=R(),gt(f.$$.fragment),I(e,"class","relative w-app h-app origin-top-left")},m(o,g){y(o,e,g),mt(n,e,null),w(e,r),mt(i,e,null),t[8](e),y(o,s,g),mt(u,o,g),y(o,c,g),mt(a,o,g),y(o,l,g),mt(f,o,g),d=!0,h||(p=[N(Mi,"resize",t[5]),N(Mi,"error",t[6])],h=!0)},p(t,[e]){i.$set({});u.$set({});a.$set({});f.$set({})},i(t){d||(at(n.$$.fragment,t),at(i.$$.fragment,t),at(u.$$.fragment,t),at(a.$$.fragment,t),at(f.$$.fragment,t),d=!0)},o(t){lt(n.$$.fragment,t),lt(i.$$.fragment,t),lt(u.$$.fragment,t),lt(a.$$.fragment,t),lt(f.$$.fragment,t),d=!1},d(r){r&&x(e),wt(n),t[7](null),wt(i),t[8](null),r&&x(s),t[9](null),wt(u,r),r&&x(c),t[10](null),wt(a,r),r&&x(l),t[11](null),wt(f,r),h=!1,o(p)}}}function zi(t,e,n){let r,o,i,s,u;function c(){let t=window.innerWidth/1400,e=window.innerHeight/800,r=t<e?t:e;n(0,u.style.transform=`scale(${r})`,u)}return a(t,Rt,(t=>n(1,r=t))),a(t,kt,(t=>n(2,o=t))),a(t,It,(t=>n(3,i=t))),a(t,Nt,(t=>n(4,s=t))),j(c),[u,r,o,i,s,c,function(t){t.preventDefault(),kn.error(t.error,"UNCAUGHT")},function(t){Z[t?"unshift":"push"]((()=>{r=t,Rt.set(r)}))},function(t){Z[t?"unshift":"push"]((()=>{u=t,n(0,u)}))},function(t){Z[t?"unshift":"push"]((()=>{o=t,kt.set(o)}))},function(t){Z[t?"unshift":"push"]((()=>{i=t,It.set(i)}))},function(t){Z[t?"unshift":"push"]((()=>{s=t,Nt.set(s)}))}]}return new class extends yt{constructor(t){super(),bt(this,t,zi,Fi,s,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
