var app=function(){"use strict";function t(){}const e=t=>t;function n(t,e){for(const n in e)t[n]=e[n];return t}function r(t){return t()}function o(){return Object.create(null)}function s(t){t.forEach(r)}function i(t){return"function"==typeof t}function c(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function u(e,...n){if(null==e)return t;const r=e.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}function l(t){let e;return u(t,(t=>e=t))(),e}function a(t,e,n){t.$$.on_destroy.push(u(e,n))}function f(t,e,n,r){if(t){const o=d(t,e,n,r);return t[0](o)}}function d(t,e,r,o){return t[1]&&o?n(r.ctx.slice(),t[1](o(e))):r.ctx}function p(t,e,n,r){if(t[2]&&r){const o=t[2](r(n));if(void 0===e.dirty)return o;if("object"==typeof o){const t=[],n=Math.max(e.dirty.length,o.length);for(let r=0;r<n;r+=1)t[r]=e.dirty[r]|o[r];return t}return e.dirty|o}return e.dirty}function h(t,e,n,r,o,s){if(o){const i=d(e,n,r,s);t.p(i,o)}}function $(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let t=0;t<n;t++)e[t]=-1;return e}return-1}function g(t){const e={};for(const n in t)"$"!==n[0]&&(e[n]=t[n]);return e}function m(t,e){const n={};e=new Set(e);for(const r in t)e.has(r)||"$"===r[0]||(n[r]=t[r]);return n}function w(t,e,n){return t.set(n),e}function v(e){return e&&i(e.destroy)?e.destroy:t}const x="undefined"!=typeof window;let b=x?()=>window.performance.now():()=>Date.now(),y=x?t=>requestAnimationFrame(t):t;const A=new Set;function C(t){A.forEach((e=>{e.c(t)||(A.delete(e),e.f())})),0!==A.size&&y(C)}function k(t){let e;return 0===A.size&&y(C),{promise:new Promise((n=>{A.add(e={c:t,f:n})})),abort(){A.delete(e)}}}function R(t,e){t.appendChild(e)}function L(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function I(t){const e=T("style");return function(t,e){R(t.head||t,e)}(L(t),e),e.sheet}function E(t,e,n){t.insertBefore(e,n||null)}function U(t){t.parentNode.removeChild(t)}function S(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function T(t){return document.createElement(t)}function O(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function N(t){return document.createTextNode(t)}function D(){return N(" ")}function _(){return N("")}function P(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function M(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function F(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function z(t,e){t.value=null==e?"":e}function B(t,e,n,r){null===n?t.style.removeProperty(e):t.style.setProperty(e,n,r?"important":"")}function H(t,e){for(let n=0;n<t.options.length;n+=1){const r=t.options[n];if(r.__value===e)return void(r.selected=!0)}t.selectedIndex=-1}function W(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}function j(t,e,{bubbles:n=!1,cancelable:r=!1}={}){const o=document.createEvent("CustomEvent");return o.initCustomEvent(t,n,r,e),o}const X=new Map;let Z,G=0;function V(t,e,n,r,o,s,i,c=0){const u=16.666/r;let l="{\n";for(let t=0;t<=1;t+=u){const r=e+(n-e)*s(t);l+=100*t+`%{${i(r,1-r)}}\n`}const a=l+`100% {${i(n,1-n)}}\n}`,f=`__svelte_${function(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(a)}_${c}`,d=L(t),{stylesheet:p,rules:h}=X.get(d)||function(t,e){const n={stylesheet:I(e),rules:{}};return X.set(t,n),n}(d,t);h[f]||(h[f]=!0,p.insertRule(`@keyframes ${f} ${a}`,p.cssRules.length));const $=t.style.animation||"";return t.style.animation=`${$?`${$}, `:""}${f} ${r}ms linear ${o}ms 1 both`,G+=1,f}function J(t,e){const n=(t.style.animation||"").split(", "),r=n.filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")),o=n.length-r.length;o&&(t.style.animation=r.join(", "),G-=o,G||y((()=>{G||(X.forEach((t=>{const{stylesheet:e}=t;let n=e.cssRules.length;for(;n--;)e.deleteRule(n);t.rules={}})),X.clear())})))}function q(t){Z=t}function K(){if(!Z)throw new Error("Function called outside component initialization");return Z}function Q(t){K().$$.on_mount.push(t)}function Y(){const t=K();return(e,n,{cancelable:r=!1}={})=>{const o=t.$$.callbacks[e];if(o){const s=j(e,n,{cancelable:r});return o.slice().forEach((e=>{e.call(t,s)})),!s.defaultPrevented}return!0}}function tt(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach((t=>t.call(this,e)))}const et=[],nt=[],rt=[],ot=[],st=Promise.resolve();let it=!1;function ct(t){rt.push(t)}function ut(t){ot.push(t)}const lt=new Set;let at,ft=0;function dt(){const t=Z;do{for(;ft<et.length;){const t=et[ft];ft++,q(t),pt(t.$$)}for(q(null),et.length=0,ft=0;nt.length;)nt.pop()();for(let t=0;t<rt.length;t+=1){const e=rt[t];lt.has(e)||(lt.add(e),e())}rt.length=0}while(et.length);for(;ot.length;)ot.pop()();it=!1,lt.clear(),q(t)}function pt(t){if(null!==t.fragment){t.update(),s(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(ct)}}function ht(){return at||(at=Promise.resolve(),at.then((()=>{at=null}))),at}function $t(t,e,n){t.dispatchEvent(j(`${e?"intro":"outro"}${n}`))}const gt=new Set;let mt;function wt(){mt={r:0,c:[],p:mt}}function vt(){mt.r||s(mt.c),mt=mt.p}function xt(t,e){t&&t.i&&(gt.delete(t),t.i(e))}function bt(t,e,n,r){if(t&&t.o){if(gt.has(t))return;gt.add(t),mt.c.push((()=>{gt.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}}const yt={duration:0};function At(n,r,o,c){let u=r(n,o),l=c?0:1,a=null,f=null,d=null;function p(){d&&J(n,d)}function h(t,e){const n=t.b-l;return e*=Math.abs(n),{a:l,b:t.b,d:n,duration:e,start:t.start,end:t.start+e,group:t.group}}function $(r){const{delay:o=0,duration:i=300,easing:c=e,tick:$=t,css:g}=u||yt,m={start:b()+o,b:r};r||(m.group=mt,mt.r+=1),a||f?f=m:(g&&(p(),d=V(n,l,r,i,o,c,g)),r&&$(0,1),a=h(m,i),ct((()=>$t(n,r,"start"))),k((t=>{if(f&&t>f.start&&(a=h(f,i),f=null,$t(n,a.b,"start"),g&&(p(),d=V(n,l,a.b,a.duration,0,c,u.css))),a)if(t>=a.end)$(l=a.b,1-l),$t(n,a.b,"end"),f||(a.b?p():--a.group.r||s(a.group.c)),a=null;else if(t>=a.start){const e=t-a.start;l=a.a+a.d*c(e/a.duration),$(l,1-l)}return!(!a&&!f)})))}return{run(t){i(u)?ht().then((()=>{u=u(),$(t)})):$(t)},end(){p(),a=f=null}}}const Ct="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function kt(t,e){bt(t,1,1,(()=>{e.delete(t.key)}))}function Rt(t,e,n){const r=t.$$.props[e];void 0!==r&&(t.$$.bound[r]=n,n(t.$$.ctx[r]))}function Lt(t){t&&t.c()}function It(t,e,n,o){const{fragment:c,on_mount:u,on_destroy:l,after_update:a}=t.$$;c&&c.m(e,n),o||ct((()=>{const e=u.map(r).filter(i);l?l.push(...e):s(e),t.$$.on_mount=[]})),a.forEach(ct)}function Et(t,e){const n=t.$$;null!==n.fragment&&(s(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Ut(t,e){-1===t.$$.dirty[0]&&(et.push(t),it||(it=!0,st.then(dt)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function St(e,n,r,i,c,u,l,a=[-1]){const f=Z;q(e);const d=e.$$={fragment:null,ctx:null,props:u,update:t,not_equal:c,bound:o(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(f?f.$$.context:[])),callbacks:o(),dirty:a,skip_bound:!1,root:n.target||f.$$.root};l&&l(d.root);let p=!1;if(d.ctx=r?r(e,n.props||{},((t,n,...r)=>{const o=r.length?r[0]:n;return d.ctx&&c(d.ctx[t],d.ctx[t]=o)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](o),p&&Ut(e,t)),n})):[],d.update(),p=!0,s(d.before_update),d.fragment=!!i&&i(d.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);d.fragment&&d.fragment.l(t),t.forEach(U)}else d.fragment&&d.fragment.c();n.intro&&xt(e.$$.fragment),It(e,n.target,n.anchor,n.customElement),dt()}q(f)}class Tt{$destroy(){Et(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Ot=[];function Nt(e,n=t){let r;const o=new Set;function s(t){if(c(e,t)&&(e=t,r)){const t=!Ot.length;for(const t of o)t[1](),Ot.push(t,e);if(t){for(let t=0;t<Ot.length;t+=2)Ot[t][0](Ot[t+1]);Ot.length=0}}}return{set:s,update:function(t){s(t(e))},subscribe:function(i,c=t){const u=[i,c];return o.add(u),1===o.size&&(r=n(s)||t),i(e),()=>{o.delete(u),0===o.size&&(r(),r=null)}}}}var Dt=Nt(),_t=Nt(),Pt=Nt(),Mt=Nt(),Ft=Nt(),zt=Nt(),Bt=Nt(),Ht={ram:Dt,cpu:_t,wires:Pt,controlBar:Mt,debug:Ft,messageFeed:zt},Wt=Nt(!1),jt=Nt(!1),Xt=Nt(!1),Zt=Nt(!1),Gt=function(t,e){return Gt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},Gt(t,e)};function Vt(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}Gt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Jt=function(){return Jt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Jt.apply(this,arguments)};function qt(t,e,n,r){return new(n||(n=Promise))((function(o,s){function i(t){try{u(r.next(t))}catch(t){s(t)}}function c(t){try{u(r.throw(t))}catch(t){s(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,c)}u((r=r.apply(t,e||[])).next())}))}function Kt(t,e){var n,r,o,s,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function c(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=e.call(t,i)}catch(t){s=[6,t],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}function Qt(t,e,n){if(n||2===arguments.length)for(var r,o=0,s=e.length;o<s;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))}var Yt=function(){function t(t,e,n){this.x=e,this.y=n,this.name=t,this.neighbours=[]}return t.prototype.isAlignedTo=function(t){return this.x===t.x||this.y===t.y},t.prototype.isConnectedTo=function(t){return this.neighbours.some((function(e){return e===t}))},t.prototype.connectTo=function(t,e){if(!this.isAlignedTo(t))throw new Error("Cannot connect 2 nodes that are not aligned (nodeA: "+this.name+" nodeB: "+t.name+")");if(this.isConnectedTo(t))throw new Error("This node is already connected to "+t.name);this.neighbours.push(t),t.neighbours.push(this)},t.distance=function(t,e){return Math.hypot(t.x-e.x,t.y-e.y)},t.direction=function(t,e){return t.x>e.x?{x:-1,y:0}:t.x<e.x?{x:1,y:0}:t.y>e.y?{x:0,y:-1}:{x:0,y:1}},t}(),te=[new Yt("RAM:DATA",1250,115),new Yt("DATA:1",1250,85),new Yt("DATA:2",751,85),new Yt("DATA:3",527,85),new Yt("DATA:4",262,85),new Yt("DATA:5",95,85),new Yt("DATA:6",95,390),new Yt("DATA:7",95,617),new Yt("DATA:8",320,390),new Yt("DATA:9",312,250),new Yt("DATA:10",477,250),new Yt("DATA:11",652,490),new Yt("IR:1",262,151),new Yt("IR:2",312,182),new Yt("IR:3",212,182),new Yt("MUX:1",477,292),new Yt("MUX:2",527,292),new Yt("MUX:3",502,332),new Yt("ACC:1",327,617),new Yt("ACC:2",412,601),new Yt("ALU:1",320,432),new Yt("ALU:2",502,432),new Yt("ALU:3",526,490),new Yt("ALU:4",412,538),new Yt("SW:1",652,601)],ee=[new Yt("RAM:ADD",1058,250),new Yt("ADD:1",751,250),new Yt("ADD:2",670,250),new Yt("ADD:3",590,250),new Yt("ADD:4",590,137),new Yt("ADD:5",535,250),new Yt("ADD:6",519,250),new Yt("INC:1",670,212),new Yt("INC:2",670,182),new Yt("PC:1",670,152),new Yt("PC:2",622,137)],ne=[new Yt("RAM:CTRL",1058,370),new Yt("CTRL:1",751,370),new Yt("CTRL:2",507,370),new Yt("CTRL:3",494,370),new Yt("CTRL:4",240,370),new Yt("CTRL:5",185,382),new Yt("CTRL:6",185,398),new Yt("CTRL:7",185,490),new Yt("CU:1",212,281),new Yt("CU:2",272,313),new Yt("CU:3",240,342),new Yt("CU:4",185,342),new Yt("MUX:4",464,313),new Yt("ALU:5",297,490)],re=Qt(Qt(Qt([],te,!0),ee,!0),ne,!0);function oe(t){return re.find((function(e){return e.name===t}))}var se=function(){function t(t,e,n,r){void 0===r&&(r=!0),this.a=t,this.b=e,this.type=n,this.a.connectTo(e,this),this.linecap=r}return t.prototype.isConnecting=function(t,e){return this.a===t&&this.b===e||this.a===e&&this.b===t},t.WIDTH=5,t}(),ie={name:"DATA_INT",color:"cyan",animationColor:"darkgreen"},ce={name:"DATA_EXT",color:"blue",animationColor:"lime"},ue={name:"CONTROL_INT",color:"#ff7a90",animationColor:"lime"},le={name:"CONTROL_EXT",color:"red",animationColor:"lime"},ae={name:"ADDRESS_INT",color:"yellow",animationColor:"darkgreen"},fe={name:"ADDRESS_EXT",color:"darkorange",animationColor:"lime"},de={name:"INVISIBLE",color:"transparent",animationColor:"transparent"},pe=[new se(oe("RAM:DATA"),oe("DATA:1"),ce),new se(oe("DATA:1"),oe("DATA:2"),ce,!1),new se(oe("DATA:2"),oe("DATA:3"),ie,!1),new se(oe("DATA:3"),oe("DATA:4"),ie),new se(oe("DATA:4"),oe("DATA:5"),ie),new se(oe("DATA:5"),oe("DATA:6"),ie),new se(oe("DATA:6"),oe("DATA:7"),ie),new se(oe("DATA:6"),oe("DATA:8"),ie),new se(oe("DATA:8"),oe("ALU:1"),ie),new se(oe("DATA:7"),oe("ACC:1"),ie),new se(oe("MUX:3"),oe("ALU:2"),ie),new se(oe("ALU:4"),oe("ACC:2"),ie),new se(oe("ALU:3"),oe("DATA:11"),ie),new se(oe("DATA:11"),oe("SW:1"),ie),new se(oe("DATA:4"),oe("IR:1"),ie),new se(oe("IR:3"),oe("CU:1"),ie),new se(oe("IR:2"),oe("DATA:9"),ie),new se(oe("DATA:9"),oe("DATA:10"),ie),new se(oe("DATA:10"),oe("MUX:1"),ie),new se(oe("DATA:3"),oe("MUX:2"),ie)],he=[new se(oe("RAM:ADD"),oe("ADD:1"),fe,!1),new se(oe("ADD:1"),oe("ADD:2"),ae,!1),new se(oe("ADD:2"),oe("INC:1"),ae),new se(oe("INC:2"),oe("PC:1"),ae),new se(oe("PC:2"),oe("ADD:4"),ae),new se(oe("ADD:2"),oe("ADD:3"),ae),new se(oe("ADD:3"),oe("ADD:4"),ae),new se(oe("ADD:3"),oe("ADD:5"),ae),new se(oe("ADD:5"),oe("ADD:6"),de),new se(oe("ADD:6"),oe("DATA:10"),ae)],$e=[new se(oe("CU:2"),oe("MUX:4"),ue),new se(oe("RAM:CTRL"),oe("CTRL:1"),le,!1),new se(oe("CTRL:1"),oe("CTRL:2"),ue,!1),new se(oe("CTRL:2"),oe("CTRL:3"),de),new se(oe("CTRL:3"),oe("CTRL:4"),ue),new se(oe("CTRL:4"),oe("CU:3"),ue),new se(oe("CU:4"),oe("CTRL:5"),ue),new se(oe("CTRL:5"),oe("CTRL:6"),de),new se(oe("CTRL:6"),oe("CTRL:7"),ue),new se(oe("CTRL:7"),oe("ALU:5"),ue)],ge=Qt(Qt(Qt([],pe,!0),he,!0),$e,!0);function me(t){return ge.find((function(e){return e.a.name+"-"+e.b.name===t||e.b.name+"-"+e.a.name===t}))}var we=["en"];var ve,xe,be,ye=Nt(!1),Ae=Nt(!0),Ce=Nt(!0),ke=Nt(1),Re=Nt((ve=(ve=void 0!==navigator.languages?navigator.languages[0]:navigator.language).split("-")[0],we.includes(ve)?ve:"en")),Le=function(){function t(t,e){this.pos={x:0,y:0},this.path=Qt([],t,!0),this.wires=Qt([],e,!0),this.reset()}return t.prototype.play=function(){return qt(this,void 0,void 0,(function(){return Kt(this,(function(t){return[2,new Promise(this._play.bind(this))]}))}))},t.prototype._play=function(t,e){this.resolve=t,requestAnimationFrame(this.startAnimation.bind(this))},t.prototype.startAnimation=function(t){this.previousTimestamp=t,this.animate(t)},t.prototype.animate=function(t){this.deltatime=(t-this.previousTimestamp)/1e3;var e=Math.floor(400*this.deltatime*l(ke));if(this.draw(e),this.pos.x===this.path[this.path.length-1].x&&this.pos.y===this.path[this.path.length-1].y)return Ee(0),this.reset(),void this.resolve();this.previousTimestamp=t,requestAnimationFrame(this.animate.bind(this))},t.prototype.draw=function(t){for(be.beginPath(),be.moveTo(this.pos.x,this.pos.y);t>0;){for(this.nextNode=Ue(this.pos,this.path[this.nextNodeIndex],t),be.strokeStyle=this.wires[this.nextNodeIndex-1].type.animationColor;(this.pos.x!==this.nextNode.node.x||this.pos.y!==this.nextNode.node.y)&&t>0;)this.incrementedX=this.pos.x+this.nextNode.direction.x,this.incrementedY=this.pos.y+this.nextNode.direction.y,be.lineTo(this.incrementedX,this.incrementedY),be.stroke(),this.pos.x=this.incrementedX,this.pos.y=this.incrementedY,t--;Ie(.05),this.pos.x===this.path[this.nextNodeIndex].x&&this.pos.y===this.path[this.nextNodeIndex].y&&(this.nextNodeIndex++,this.nextNodeIndex===this.path.length&&(t=0))}be.closePath()},t.prototype.reset=function(){this.pos.x=this.path[0].x,this.pos.y=this.path[0].y,this.nextNodeIndex=1},t}();function Ie(t){be.save(),be.globalAlpha=t,be.globalCompositeOperation="destination-out",be.fillStyle="#FFF",be.fillRect(0,0,xe.width,xe.height),be.restore()}function Ee(t){Ie(.1),40!==++t?requestAnimationFrame((function(){return Ee(t)})):be.clearRect(0,0,xe.width,xe.height)}function Ue(t,e,n){var r=Yt.direction(t,e),o=Yt.distance(t,e),s=e;return o>n&&(o=n,s=function(t,e,n){return{x:t.x+e*n.x,y:t.y+e*n.y}}(t,n,r)),{distance:o,direction:r,node:s}}function Se(e){let n,r,o;return{c(){n=T("canvas"),r=D(),o=T("canvas"),M(n,"class","absolute z-[2] top-0 left-0 w-app h-app"),M(o,"class","absolute z-[2] top-0 left-0 w-app h-app")},m(t,s){E(t,n,s),e[4](n),E(t,r,s),E(t,o,s),e[5](o)},p:t,i:t,o:t,d(t){t&&U(n),e[4](null),t&&U(r),t&&U(o),e[5](null)}}}function Te(t,e,n){var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,s){function i(t){try{u(r.next(t))}catch(t){s(t)}}function c(t){try{u(r.throw(t))}catch(t){s(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,c)}u((r=r.apply(t,e||[])).next())}))};const o=new Map;let s,i;function c(){const t=s.getContext("2d");t.lineWidth=se.WIDTH,t.clearRect(0,0,i.width,i.height);for(const e of ge)t.lineCap=e.linecap?"square":"butt",t.strokeStyle=e.type.color,t.beginPath(),t.moveTo(e.a.x,e.a.y),t.lineTo(e.b.x,e.b.y),t.stroke()}return Q((()=>r(void 0,void 0,void 0,(function*(){n(0,s.width=n(1,i.width=1400,i),s),n(0,s.height=n(1,i.height=800,i),s),c(),(be=(xe=i).getContext("2d")).lineCap="round",be.lineWidth=se.WIDTH})))),[s,i,function(t,e){return r(this,void 0,void 0,(function*(){const n=oe(t),r=oe(e);if(!n)throw new Error("Node "+t+" is undefined");if(!r)throw new Error("Node "+e+" is undefined");let s;if(s=o.get(t+e))s.reset();else{const i=function(t,e){for(var n=[t],r=new Set,o={},s=0;s<n.length;)for(var i=n[s++],c=0,u=i.neighbours;c<u.length;c++){var l=u[c];if(!r.has(l)){if(r.add(l),l===e){for(var a=[l];i!==t;)a.push(i),i=o[i.name];return a.push(i),a.reverse(),a}o[l.name]=i,n.push(l)}}throw new Error("No path connecting "+t.name+" to "+e.name)}(n,r),c=function(t){for(var e=[],n=0;n<t.length-1;n++)e.push(me("".concat(t[n].name,"-").concat(t[n+1].name)));return e}(i);s=new Le(i,c),o.set(t+e,s)}yield s.play()}))},c,function(t){nt[t?"unshift":"push"]((()=>{s=t,n(0,s)}))},function(t){nt[t?"unshift":"push"]((()=>{i=t,n(1,i)}))}]}class Oe extends Tt{constructor(t){super(),St(this,t,Te,Se,c,{flashWire:2,drawStaticWires:3})}get flashWire(){return this.$$.ctx[2]}get drawStaticWires(){return this.$$.ctx[3]}}function Ne(e){let n,r,o,s=(e[6]?e[0]:"")+"";return{c(){n=T("div"),r=N(s),M(n,"class",o="absolute w-fit font-bold cursor-default "+e[7][e[5]]+" leading-tight"),B(n,"top",e[1]),B(n,"left",e[2]),B(n,"bottom",e[4]),B(n,"right",e[3]),B(n,"font-size",e[7][e[5]])},m(t,e){E(t,n,e),R(n,r)},p(t,[e]){65&e&&s!==(s=(t[6]?t[0]:"")+"")&&F(r,s),32&e&&o!==(o="absolute w-fit font-bold cursor-default "+t[7][t[5]]+" leading-tight")&&M(n,"class",o),2&e&&B(n,"top",t[1]),4&e&&B(n,"left",t[2]),16&e&&B(n,"bottom",t[4]),8&e&&B(n,"right",t[3]),32&e&&B(n,"font-size",t[7][t[5]])},i:t,o:t,d(t){t&&U(n)}}}function De(t,e,n){let r;a(t,Ae,(t=>n(6,r=t)));let{text:o=""}=e,{top:s="auto"}=e,{left:i="auto"}=e,{right:c="auto"}=e,{bottom:u="auto"}=e,{fontSize:l="MEDIUM"}=e;return t.$$set=t=>{"text"in t&&n(0,o=t.text),"top"in t&&n(1,s=t.top),"left"in t&&n(2,i=t.left),"right"in t&&n(3,c=t.right),"bottom"in t&&n(4,u=t.bottom),"fontSize"in t&&n(5,l=t.fontSize)},[o,s,i,c,u,l,r,{SMALL:"text-xs",MEDIUM:"text-base",LARGE:"text-2xl"}]}class _e extends Tt{constructor(t){super(),St(this,t,De,Ne,c,{text:0,top:1,left:2,right:3,bottom:4,fontSize:5})}}var Pe=function(t){function e(e){var n=t.call(this,e)||this;return n.isChecked=!0,n}return Vt(e,t),e}(Error),Me=function(t){function e(e,n){return t.call(this,"Value ".concat(e," out of ").concat(n,"-bit valid range"))||this}return Vt(e,t),e}(Pe);function Fe(t,e){if(Math.abs(t)>e)throw new Error("Position ".concat(t," out of range +/-").concat(e));if(0===t)throw new Error("Positions start from 1");return t<0?this.value.length+t:t-1}function ze(t){if(t<1||t>32)throw new Error("Binary numbers must be between ".concat(1," and ").concat(32," bits"))}function Be(t,e){return t<=function(t){return ze(t),Math.pow(2,t)}(e)&&t>=We(e)}function He(t,e){return t<=function(t){return ze(t),Math.pow(2,t-1)-1}(e)&&t>=We(e)}function We(t){return ze(t),-Math.pow(2,t-1)}function je(t,e){return ze(e),Xe((t>>>0).toString(2),e)}function Xe(t,e){return("00000000000000000000000000000000"+t).slice(-e)}var Ze,Ge=function(){function t(t,e){if("string"==typeof e){if(!function(t,e){return ze(e),new RegExp("^[01]{1,".concat(e,"}$")).test(t)}(e,t))throw new Me(e,t);this.value=Xe(e,t)}else if("number"==typeof e){if(!Be(e,t))throw new Me(e,t);this.value=je(e,t)}else this.value=je(e.signed(),t)}return t.prototype.signed=function(){return this.value.startsWith("0")?parseInt(this.value,2):~~parseInt(("11111111111111111111111111111111"+this.value).slice(-32),2)},t.prototype.unsigned=function(){return parseInt(this.value,2)},t.prototype.toBinaryString=function(){return this.value},t.prototype.bits=function(){return this.value.length},t.prototype.bytes=function(){return this.bits()/8},t.prototype.getByte=function(e){var n=8*Fe(e,this.bytes());return new t(8,this.value.substring(n,n+8))},t.prototype.getBytes=function(){for(var t=[],e=1;e<=this.bytes();e++)t.push(this.getByte(e));return t},t.prototype.isBitSet=function(t){return"1"===this.value.charAt(Fe(t,this.bits()))},t.prototype.setBit=function(e,n){return new t(this.bits(),function(t,e,n){if(!/^[10]*$/.test(t))throw new Error("Invalid binary string");var r=t.split("");return r[Fe(e,t.length)]=n?"1":"0",r.join("")}(this.value,e,n))},t.fromBytesValues=function(e){return ze(8*e.length),"number"==typeof e[0]?t.fromBytesValues(e.map((function(e){return new t(8,e)}))):"string"==typeof e[0]?new t(8*e.length,e.join("")):new t(8*e.length,e.map((function(t){return t.toBinaryString()})).join(""))},t}(),Ve=254;function Je(t){if(!qe(t))throw new Error("Invalid address: "+t);return t/2}function qe(t){return t%2==0&&t>=0&&t<=Ve}var Ke=Nt(),Qe=Ke.subscribe,Ye=Ke.set,tn=Ke.update;function en(t){tn(t),Ze=t(Ze)}function nn(){var t;t={instructionRegister:null,programCounter:new Ge(8,0),increment:new Ge(8,2),alu1:null,alu2:null,operation:"",accumulator:new Ge(16,0),zeroFlag:!0,negativeFlag:!1,isJumping:!1,isHalting:!1},Ye(t),Ze=t}nn();var rn={subscribe:Qe,reset:nn,clear:function(){en((function(t){return Jt(Jt({},t),{instructionRegister:null,alu1:null,alu2:null,operation:"",isJumping:!1,isHalting:!1})}))},setIR:function(t){if(t&&!t.opcode)throw new Error("Invalid opcode");en((function(e){return Jt(Jt({},e),{instructionRegister:t})}))},setPC:function(t){if("number"==typeof t&&(t=new Ge(8,t)),!qe(t.unsigned()))throw new Error("Invalid address");en((function(e){return Jt(Jt({},e),{programCounter:t})}))},setALU1:function(t){"number"==typeof t&&(t=new Ge(16,t)),en((function(e){return Jt(Jt({},e),{alu1:null===t?null:t})}))},setALU2:function(t){"number"==typeof t&&(t=new Ge(16,t)),en((function(e){return Jt(Jt({},e),{alu2:null===t?null:t})}))},setOperation:function(t){en((function(e){return Jt(Jt({},e),{operation:t})}))},setACC:function(t){"number"==typeof t&&(t=new Ge(16,t)),en((function(e){return Jt(Jt({},e),{accumulator:t})}))},setZeroFlag:function(t){en((function(e){return Jt(Jt({},e),{zeroFlag:t})}))},setNegativeFlag:function(t){en((function(e){return Jt(Jt({},e),{negativeFlag:t})}))},setIsJumping:function(t){en((function(e){return Jt(Jt({},e),{isJumping:t})}))},setIsHalting:function(t){en((function(e){return Jt(Jt({},e),{isHalting:t})}))}};function on(t,e,n){return(1-n)*t+n*e}function sn(t,e,n,r){return qt(this,void 0,void 0,(function(){return Kt(this,(function(o){return[2,new Promise((function(o,s){var i,c=0,u=function(s){if(i||(i=s),c>=1)return o(),void t.style.setProperty(e,"rgb(".concat(r.r,", ").concat(r.g,", ").concat(r.b,")"));var a=Math.round(on(n.r,r.r,c)),f=Math.round(on(n.g,r.g,c)),d=Math.round(on(n.b,r.b,c));t.style.setProperty(e,"rgb(".concat(a,", ").concat(f,", ").concat(d,")")),c=(s-i)/(300*l(ke)),requestAnimationFrame(u)};requestAnimationFrame(u)}))]}))}))}function cn(t,e,n,r){return qt(this,void 0,void 0,(function(){return Kt(this,(function(o){return[2,sn(t,e,n,r).then((function(){return sn(t,e,r,n)}))]}))}))}function un(t){let e,n,r,o,s,i,c,u,l;return n=new _e({props:{text:"IR",top:"-25px",left:"10px"}}),{c(){e=T("div"),Lt(n.$$.fragment),r=D(),o=T("div"),s=N(t[2]),i=D(),c=T("div"),u=N(t[3]),M(o,"class","flex items-center justify-center w-full h-full rounded-l-md"),M(c,"class","flex items-center justify-center w-full h-full rounded-r-md"),M(e,"class","absolute top-[100px] left-[110px] w-[200px] h-[30px] border border-black rounded-md bg-gray-100 shadow-component grid items-center grid-cols-2 ")},m(a,f){E(a,e,f),It(n,e,null),R(e,r),R(e,o),R(o,s),t[8](o),R(e,i),R(e,c),R(c,u),t[9](c),l=!0},p(t,[e]){(!l||4&e)&&F(s,t[2]),(!l||8&e)&&F(u,t[3])},i(t){l||(xt(n.$$.fragment,t),l=!0)},o(t){bt(n.$$.fragment,t),l=!1},d(r){r&&U(e),Et(n),t[8](null),t[9](null)}}}function ln(t,e,n){let r,o;a(t,rn,(t=>n(6,r=t))),a(t,ye,(t=>n(7,o=t)));var s=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,s){function i(t){try{u(r.next(t))}catch(t){s(t)}}function c(t){try{u(r.throw(t))}catch(t){s(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,c)}u((r=r.apply(t,e||[])).next())}))};let i,c,u,l;return t.$$.update=()=>{192&t.$$.dirty&&(o?(n(2,u=r.instructionRegister?r.instructionRegister.binaryOpcode():""),n(3,l=r.instructionRegister?r.instructionRegister.binaryOperand():"")):(n(2,u=r.instructionRegister?r.instructionRegister.opcode.symbolic:""),r.instructionRegister&&r.instructionRegister.opcode.takesOperand?r.instructionRegister.immediateFlag()?n(3,l=`#${r.instructionRegister.numericOperand()}`):n(3,l=`${r.instructionRegister.numericOperand()}`):n(3,l="")))},[i,c,u,l,function(){return s(this,void 0,void 0,(function*(){return cn(i,"background-color",{r:224,g:224,b:224},{r:0,g:255,b:0})}))},function(){return s(this,void 0,void 0,(function*(){return cn(c,"background-color",{r:224,g:224,b:224},{r:0,g:255,b:0})}))},r,o,function(t){nt[t?"unshift":"push"]((()=>{i=t,n(0,i)}))},function(t){nt[t?"unshift":"push"]((()=>{c=t,n(1,c)}))}]}class an extends Tt{constructor(t){super(),St(this,t,ln,un,c,{flashOpcode:4,flashOperand:5})}get flashOpcode(){return this.$$.ctx[4]}get flashOperand(){return this.$$.ctx[5]}}function fn(e){let n,r,o;return r=new _e({props:{text:"Control Unit / Decoder"}}),{c(){n=T("div"),Lt(r.$$.fragment),M(n,"class","absolute top-[230px] left-[100px] w-[120px] h-[60px] border border-black rounded-md bg-gray-100 shadow-component flex items-center justify-center text-center ")},m(t,s){E(t,n,s),It(r,n,null),e[2](n),o=!0},p:t,i(t){o||(xt(r.$$.fragment,t),o=!0)},o(t){bt(r.$$.fragment,t),o=!1},d(t){t&&U(n),Et(r),e[2](null)}}}function dn(t,e,n){var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,s){function i(t){try{u(r.next(t))}catch(t){s(t)}}function c(t){try{u(r.throw(t))}catch(t){s(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,c)}u((r=r.apply(t,e||[])).next())}))};let o;return[o,function(){return r(this,void 0,void 0,(function*(){return cn(o,"background-color",{r:224,g:224,b:224},{r:0,g:255,b:0})}))},function(t){nt[t?"unshift":"push"]((()=>{o=t,n(0,o)}))}]}class pn extends Tt{constructor(t){super(),St(this,t,dn,fn,c,{flash:1})}get flash(){return this.$$.ctx[1]}}function hn(t){let e,n,r,o,s,i=(t[1]?t[2].accumulator.toBinaryString():t[2].accumulator.signed())+"";return n=new _e({props:{text:"ACC",top:"-25px",left:"0"}}),{c(){e=T("div"),Lt(n.$$.fragment),r=D(),o=N(i),M(e,"class","absolute top-[550px] left-[275px] w-[170px] h-[30px] border border-black rounded-md bg-gray-100 shadow-component flex items-center justify-center ")},m(i,c){E(i,e,c),It(n,e,null),R(e,r),R(e,o),t[4](e),s=!0},p(t,[e]){(!s||6&e)&&i!==(i=(t[1]?t[2].accumulator.toBinaryString():t[2].accumulator.signed())+"")&&F(o,i)},i(t){s||(xt(n.$$.fragment,t),s=!0)},o(t){bt(n.$$.fragment,t),s=!1},d(r){r&&U(e),Et(n),t[4](null)}}}function $n(t,e,n){let r,o;a(t,ye,(t=>n(1,r=t))),a(t,rn,(t=>n(2,o=t)));var s=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,s){function i(t){try{u(r.next(t))}catch(t){s(t)}}function c(t){try{u(r.throw(t))}catch(t){s(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,c)}u((r=r.apply(t,e||[])).next())}))};let i;return[i,r,o,function(){return s(this,void 0,void 0,(function*(){return cn(i,"background-color",{r:224,g:224,b:224},{r:0,g:255,b:0})}))},function(t){nt[t?"unshift":"push"]((()=>{i=t,n(0,i)}))}]}class gn extends Tt{constructor(t){super(),St(this,t,$n,hn,c,{flash:3})}get flash(){return this.$$.ctx[3]}}function mn(t){let e,n,r,o,s,i,c,u,l,a,f,d,p,h,$,g,m,w=t[2].zeroFlag?"1":"0",v=t[2].negativeFlag?"1":"0";return n=new _e({props:{text:"SW",top:"-25px",left:"0"}}),s=new _e({props:{text:"Z",bottom:"-21px",left:"25%"}}),a=new _e({props:{text:"N",bottom:"-21px",left:"25%"}}),{c(){e=T("div"),Lt(n.$$.fragment),r=D(),o=T("div"),Lt(s.$$.fragment),i=D(),c=N(w),u=D(),l=T("div"),Lt(a.$$.fragment),f=D(),d=N(v),p=D(),h=T("div"),h.textContent="------",$=D(),g=T("div"),M(o,"class","relative h-full flex items-center justify-center w-[19%] border border-r-black rounded-l-md"),M(l,"class","relative h-full flex items-center justify-center w-[19%]"),M(h,"class","relative h-full flex items-center justify-center w-[62%] border border-l-black rounded-r-md"),M(e,"class","absolute top-[550px] left-[540px] w-[120px] h-[30px] rounded-md bg-gray-100 shadow-component flex items-center justify-center "),M(g,"class","absolute top-[550px] left-[540px] w-[120px] h-[30px] rounded-md border border-black")},m(w,v){E(w,e,v),It(n,e,null),R(e,r),R(e,o),It(s,o,null),R(o,i),R(o,c),t[5](o),R(e,u),R(e,l),It(a,l,null),R(l,f),R(l,d),t[6](l),R(e,p),R(e,h),E(w,$,v),E(w,g,v),m=!0},p(t,[e]){(!m||4&e)&&w!==(w=t[2].zeroFlag?"1":"0")&&F(c,w),(!m||4&e)&&v!==(v=t[2].negativeFlag?"1":"0")&&F(d,v)},i(t){m||(xt(n.$$.fragment,t),xt(s.$$.fragment,t),xt(a.$$.fragment,t),m=!0)},o(t){bt(n.$$.fragment,t),bt(s.$$.fragment,t),bt(a.$$.fragment,t),m=!1},d(r){r&&U(e),Et(n),Et(s),t[5](null),Et(a),t[6](null),r&&U($),r&&U(g)}}}function wn(t,e,n){let r;a(t,rn,(t=>n(2,r=t)));var o=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,s){function i(t){try{u(r.next(t))}catch(t){s(t)}}function c(t){try{u(r.throw(t))}catch(t){s(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,c)}u((r=r.apply(t,e||[])).next())}))};let s,i;return[s,i,r,function(){return o(this,void 0,void 0,(function*(){return cn(s,"background-color",{r:224,g:224,b:224},{r:0,g:255,b:0})}))},function(){return o(this,void 0,void 0,(function*(){return cn(i,"background-color",{r:224,g:224,b:224},{r:0,g:255,b:0})}))},function(t){nt[t?"unshift":"push"]((()=>{s=t,n(0,s)}))},function(t){nt[t?"unshift":"push"]((()=>{i=t,n(1,i)}))}]}class vn extends Tt{constructor(t){super(),St(this,t,wn,mn,c,{flashZeroFlag:3,flashNegativeFlag:4})}get flashZeroFlag(){return this.$$.ctx[3]}get flashNegativeFlag(){return this.$$.ctx[4]}}function xn(t){let e,n,r,o,s,i,c,u,l,a=(t[2]?t[3].programCounter.toBinaryString():t[3].programCounter.unsigned())+"",f=(t[2]?t[3].increment.toBinaryString():t[3].increment.unsigned())+"";return n=new _e({props:{text:"PC",top:"-25px",left:"0"}}),{c(){e=T("div"),Lt(n.$$.fragment),r=D(),o=N(a),s=D(),i=T("div"),c=N("+"),u=N(f),M(e,"class","absolute top-[70px] left-[570px] w-[100px] h-[30px] border border-black rounded-md bg-gray-100 shadow-component flex items-center justify-center "),M(i,"class","absolute top-[130px] left-[570px] w-[100px] h-[30px] border border-black rounded-md bg-gray-100 shadow-component flex items-center justify-center ")},m(a,f){E(a,e,f),It(n,e,null),R(e,r),R(e,o),t[6](e),E(a,s,f),E(a,i,f),R(i,c),R(i,u),t[7](i),l=!0},p(t,[e]){(!l||12&e)&&a!==(a=(t[2]?t[3].programCounter.toBinaryString():t[3].programCounter.unsigned())+"")&&F(o,a),(!l||12&e)&&f!==(f=(t[2]?t[3].increment.toBinaryString():t[3].increment.unsigned())+"")&&F(u,f)},i(t){l||(xt(n.$$.fragment,t),l=!0)},o(t){bt(n.$$.fragment,t),l=!1},d(r){r&&U(e),Et(n),t[6](null),r&&U(s),r&&U(i),t[7](null)}}}function bn(t,e,n){let r,o;a(t,ye,(t=>n(2,r=t))),a(t,rn,(t=>n(3,o=t)));var s=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,s){function i(t){try{u(r.next(t))}catch(t){s(t)}}function c(t){try{u(r.throw(t))}catch(t){s(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,c)}u((r=r.apply(t,e||[])).next())}))};let i,c;return[i,c,r,o,function(){return s(this,void 0,void 0,(function*(){return cn(i,"background-color",{r:224,g:224,b:224},{r:0,g:255,b:0})}))},function(){return s(this,void 0,void 0,(function*(){return cn(c,"background-color",{r:224,g:224,b:224},{r:0,g:255,b:0})}))},function(t){nt[t?"unshift":"push"]((()=>{i=t,n(0,i)}))},function(t){nt[t?"unshift":"push"]((()=>{c=t,n(1,c)}))}]}class yn extends Tt{constructor(t){super(),St(this,t,bn,xn,c,{flashPC:4,flashINC:5})}get flashPC(){return this.$$.ctx[4]}get flashINC(){return this.$$.ctx[5]}}function An(e){let n,r,o,s,i,c;return i=new _e({props:{text:"MUX"}}),{c(){n=T("div"),r=O("svg"),o=O("path"),s=D(),Lt(i.$$.fragment),M(o,"d","M 0 0 L 100 0 L 80 40 L 20 40 Z"),M(r,"xmlns","http://www.w3.org/2000/svg"),M(r,"class","fill-gray-100 stroke-black drop-shadow-component h-full w-full"),M(r,"viewBox","-1 -1 102 42"),M(n,"class","absolute top-[240px] left-[400px] w-[100px] h-[40px] text-center flex items-center justify-center")},m(t,u){E(t,n,u),R(n,r),R(r,o),e[2](r),R(n,s),It(i,n,null),c=!0},p:t,i(t){c||(xt(i.$$.fragment,t),c=!0)},o(t){bt(i.$$.fragment,t),c=!1},d(t){t&&U(n),e[2](null),Et(i)}}}function Cn(t,e,n){var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,s){function i(t){try{u(r.next(t))}catch(t){s(t)}}function c(t){try{u(r.throw(t))}catch(t){s(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,c)}u((r=r.apply(t,e||[])).next())}))};let o;return[o,function(){return r(this,void 0,void 0,(function*(){return cn(o,"fill",{r:224,g:224,b:224},{r:0,g:255,b:0})}))},function(t){nt[t?"unshift":"push"]((()=>{o=t,n(0,o)}))}]}class kn extends Tt{constructor(t){super(),St(this,t,Cn,An,c,{flash:1})}get flash(){return this.$$.ctx[1]}}function Rn(t){let e,n,r,o,s,i,c,u,l,a,f,d,p,h,$,g,m,w=t[0].operation+"";return s=new _e({props:{text:"ALU",top:"-25px",left:"45%"}}),{c(){e=T("div"),n=O("svg"),r=O("path"),o=D(),Lt(s.$$.fragment),i=D(),c=T("div"),u=N(t[5]),a=D(),f=T("div"),d=N(w),p=D(),h=T("div"),$=N(t[6]),M(r,"d","m 0 0 l 192 0 l 32 32 l 32 -32 l 192 0 l -96 160 l -256 0 z"),M(n,"xmlns","http://www.w3.org/2000/svg"),M(n,"class","stroke-black stroke-[1.6px] w-full h-full drop-shadow-component fill-gray-100"),M(n,"viewBox","-1 -1 450 162"),M(c,"class",l="absolute flex items-center justify-center top-[15%] left-[15%] w-[90px] "+(t[1]?"top-[15%] h-[50px]":"top-[20%] h-[30px]")+" text-center leading-tight rounded-lg"),M(f,"class","absolute flex items-center justify-center top-[50%] left-[50%] -translate-x-1/2 w-[30px] h-[30px] rounded-lg font-bold text-2xl leading-[30px] "),M(h,"class",g="absolute flex items-center justify-center top-[15%] right-[15%] w-[90px] "+(t[1]?"top-[15%] h-[50px]":"top-[20%] h-[30px]")+" text-center leading-tight rounded-lg"),M(e,"class","absolute top-[380px] left-[210px] w-[300px] h-fit")},m(l,g){E(l,e,g),R(e,n),R(n,r),R(e,o),It(s,e,null),R(e,i),R(e,c),R(c,u),t[10](c),R(e,a),R(e,f),R(f,d),t[11](f),R(e,p),R(e,h),R(h,$),t[12](h),m=!0},p(t,[e]){(!m||32&e)&&F(u,t[5]),(!m||2&e&&l!==(l="absolute flex items-center justify-center top-[15%] left-[15%] w-[90px] "+(t[1]?"top-[15%] h-[50px]":"top-[20%] h-[30px]")+" text-center leading-tight rounded-lg"))&&M(c,"class",l),(!m||1&e)&&w!==(w=t[0].operation+"")&&F(d,w),(!m||64&e)&&F($,t[6]),(!m||2&e&&g!==(g="absolute flex items-center justify-center top-[15%] right-[15%] w-[90px] "+(t[1]?"top-[15%] h-[50px]":"top-[20%] h-[30px]")+" text-center leading-tight rounded-lg"))&&M(h,"class",g)},i(t){m||(xt(s.$$.fragment,t),m=!0)},o(t){bt(s.$$.fragment,t),m=!1},d(n){n&&U(e),Et(s),t[10](null),t[11](null),t[12](null)}}}function Ln(t){return[t.slice(0,8),t.slice(8)].join(" ")}function In(t,e,n){let r,o;a(t,rn,(t=>n(0,r=t))),a(t,ye,(t=>n(1,o=t)));var s=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,s){function i(t){try{u(r.next(t))}catch(t){s(t)}}function c(t){try{u(r.throw(t))}catch(t){s(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,c)}u((r=r.apply(t,e||[])).next())}))};let i,c,u,l="",f="";return t.$$.update=()=>{3&t.$$.dirty&&(o?(n(5,l=null!==r.alu1?Ln(r.alu1.toBinaryString()):""),n(6,f=null!==r.alu2?Ln(r.alu2.toBinaryString()):"")):(n(5,l=null!==r.alu1?""+r.alu1.signed():""),n(6,f=null!==r.alu2?""+r.alu2.signed():"")))},[r,o,i,c,u,l,f,function(){return s(this,void 0,void 0,(function*(){return cn(i,"background-color",{r:224,g:224,b:224},{r:0,g:255,b:0})}))},function(){return s(this,void 0,void 0,(function*(){return cn(c,"background-color",{r:224,g:224,b:224},{r:0,g:255,b:0})}))},function(){return s(this,void 0,void 0,(function*(){return cn(u,"background-color",{r:224,g:224,b:224},{r:0,g:255,b:0})}))},function(t){nt[t?"unshift":"push"]((()=>{i=t,n(2,i)}))},function(t){nt[t?"unshift":"push"]((()=>{u=t,n(4,u)}))},function(t){nt[t?"unshift":"push"]((()=>{c=t,n(3,c)}))}]}class En extends Tt{constructor(t){super(),St(this,t,In,Rn,c,{flashFirstOperand:7,flashSecondOperand:8,flashOperator:9})}get flashFirstOperand(){return this.$$.ctx[7]}get flashSecondOperand(){return this.$$.ctx[8]}get flashOperator(){return this.$$.ctx[9]}}var Un=Nt([]),Sn={subscribe:Un.subscribe,push:function(t){Un.update((function(e){return Qt(Qt([],e,!0),[t],!1)}))}},Tn=Nt({showLogger:!1}),On={subscribe:Tn.subscribe,updateShowLogger:function(t){Tn.update((function(e){return Jt(Jt({},e),{showLogger:t(e.showLogger)})}))}},Nn=Date.now(),Dn=["EXECUTION","USER_INPUT","DEBUG","UNCAUGHT"],_n=["UNCHECKED_ERROR","CHECKED_ERROR","INFO"];function Pn(){return Date.now()-Nn}var Mn={error:function(t,e,n){void 0===n&&(n=!1),Sn.push({logType:n?"CHECKED_ERROR":"UNCHECKED_ERROR",logGroup:e,timestamp:Pn(),message:n?t.message:t.stack})},info:function(t,e){Sn.push({logType:"INFO",logGroup:e,timestamp:Pn(),message:t})}},Fn=function(){function t(){this._conditions=[],this._endsStep=!1,this._sideffects=[],this._conditions=[]}return t.prototype.condition=function(t){return this._conditions.push(t),this},t.prototype.endstep=function(){return this._endsStep=!0,this},t.prototype.sideffects=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this._sideffects).push.apply(t,e),this},t.prototype.execute=function(t){return qt(this,void 0,void 0,(function(){var e;return Kt(this,(function(n){return this._conditions.reduceRight((function(e,n){return e&&n(t)}),!0)?(Mn.info("Executing: ".concat(this.toString()),"EXECUTION"),e=Qt(Qt([],this._sideffects.map((function(e){return e.execute(t)})),!0),[this.action(t)],!1),[2,Promise.all(e)]):[2]}))}))},t.prototype.doesEndStep=function(){return this._endsStep},t.prototype.toString=function(){return"".concat(this.constructor.name," endStep:").concat(this._endsStep,", sideffects:[").concat(this._sideffects.length,"]")},t}();function zn(t){return t["SW:Z"]}function Bn(t){return!t["SW:Z"]}function Hn(t){return t["SW:N"]}function Wn(t){return!t["SW:N"]}function jn(t){return l(Ce)}var Xn=function(t){function e(){var e=t.call(this)||this;return e.condition(jn),e}return Vt(e,t),e}(Fn),Zn=function(t){function e(e){var n=t.call(this)||this;return n.component=e,n}return Vt(e,t),e.prototype.action=function(t){return qt(this,void 0,void 0,(function(){return Kt(this,(function(t){return[2,l(Ht.cpu).flash(this.component)]}))}))},e.prototype.toString=function(){return"".concat(t.prototype.toString.call(this),", component: ").concat(this.component)},e}(Xn);function Gn(t){let e,n,r,o,s,i,c,u,l,a,f,d,p,h,$,g,m,w,v;o=new _e({props:{text:"CPU",fontSize:"LARGE",top:"-30px",left:"47%"}});i=new an({props:{}}),t[8](i);u=new pn({props:{}}),t[9](u);a=new yn({props:{}}),t[10](a);d=new kn({props:{}}),t[11](d);h=new En({props:{}}),t[12](h);g=new vn({props:{}}),t[13](g);return w=new gn({props:{}}),t[14](w),{c(){e=T("div"),n=D(),r=T("div"),Lt(o.$$.fragment),s=D(),Lt(i.$$.fragment),c=D(),Lt(u.$$.fragment),l=D(),Lt(a.$$.fragment),f=D(),Lt(d.$$.fragment),p=D(),Lt(h.$$.fragment),$=D(),Lt(g.$$.fragment),m=D(),Lt(w.$$.fragment),M(e,"class","absolute left-[50px] top-[50px] w-[700px] h-[620px] z-[1] rounded-[30px] bg-gray-300 shadow-cpu"),M(r,"class","absolute left-[50px] top-[50px] w-[700px] h-[620px] z-[3] rounded-[30px] border border-black")},m(t,x){E(t,e,x),E(t,n,x),E(t,r,x),It(o,r,null),R(r,s),It(i,r,null),R(r,c),It(u,r,null),R(r,l),It(a,r,null),R(r,f),It(d,r,null),R(r,p),It(h,r,null),R(r,$),It(g,r,null),R(r,m),It(w,r,null),v=!0},p(t,[e]){i.$set({});u.$set({});a.$set({});d.$set({});h.$set({});g.$set({});w.$set({})},i(t){v||(xt(o.$$.fragment,t),xt(i.$$.fragment,t),xt(u.$$.fragment,t),xt(a.$$.fragment,t),xt(d.$$.fragment,t),xt(h.$$.fragment,t),xt(g.$$.fragment,t),xt(w.$$.fragment,t),v=!0)},o(t){bt(o.$$.fragment,t),bt(i.$$.fragment,t),bt(u.$$.fragment,t),bt(a.$$.fragment,t),bt(d.$$.fragment,t),bt(h.$$.fragment,t),bt(g.$$.fragment,t),bt(w.$$.fragment,t),v=!1},d(s){s&&U(e),s&&U(n),s&&U(r),Et(o),t[8](null),Et(i),t[9](null),Et(u),t[10](null),Et(a),t[11](null),Et(d),t[12](null),Et(h),t[13](null),Et(g),t[14](null),Et(w)}}}function Vn(t,e,n){var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,s){function i(t){try{u(r.next(t))}catch(t){s(t)}}function c(t){try{u(r.throw(t))}catch(t){s(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,c)}u((r=r.apply(t,e||[])).next())}))};let o,s,i,c,u,l,a;return[o,s,i,c,u,l,a,function(t){return r(this,void 0,void 0,(function*(){switch(t){case"IR":return Promise.all([o.flashOpcode(),o.flashOperand()]);case"IR:OPC":return o.flashOpcode();case"IR:OPR":return o.flashOperand();case"PC":return i.flashPC();case"INC":return i.flashINC();case"MUX":return c.flash();case"CU":return s.flash();case"ALU:1":return u.flashFirstOperand();case"ALU:2":return u.flashSecondOperand();case"ALU:OPR":return u.flashOperator();case"ACC":return a.flash();case"SW:Z":return l.flashZeroFlag();case"SW:N":return l.flashNegativeFlag()}}))},function(t){nt[t?"unshift":"push"]((()=>{o=t,n(0,o)}))},function(t){nt[t?"unshift":"push"]((()=>{s=t,n(1,s)}))},function(t){nt[t?"unshift":"push"]((()=>{i=t,n(2,i)}))},function(t){nt[t?"unshift":"push"]((()=>{c=t,n(3,c)}))},function(t){nt[t?"unshift":"push"]((()=>{u=t,n(4,u)}))},function(t){nt[t?"unshift":"push"]((()=>{l=t,n(5,l)}))},function(t){nt[t?"unshift":"push"]((()=>{a=t,n(6,a)}))}]}class Jn extends Tt{constructor(t){super(),St(this,t,Vn,Gn,c,{flash:7})}get flash(){return this.$$.ctx[7]}}function qn(t){const e=t-1;return e*e*e+1}function Kn(t,{delay:e=0,duration:n=400,easing:r=qn}={}){const o=getComputedStyle(t),s=+o.opacity,i=parseFloat(o.height),c=parseFloat(o.paddingTop),u=parseFloat(o.paddingBottom),l=parseFloat(o.marginTop),a=parseFloat(o.marginBottom),f=parseFloat(o.borderTopWidth),d=parseFloat(o.borderBottomWidth);return{delay:e,duration:n,easing:r,css:t=>`overflow: hidden;opacity: ${Math.min(20*t,1)*s};height: ${t*i}px;padding-top: ${t*c}px;padding-bottom: ${t*u}px;margin-top: ${t*l}px;margin-bottom: ${t*a}px;border-top-width: ${t*f}px;border-bottom-width: ${t*d}px;`}}var Qn=[{symbolic:"NOP",numeric:0,takesOperand:!1,takesImmediate:!1,operator:""},{symbolic:"HLT",numeric:1,takesOperand:!1,takesImmediate:!1,operator:""},{symbolic:"JMP",numeric:2,takesOperand:!0,takesImmediate:!1,operator:""},{symbolic:"JZ",numeric:3,takesOperand:!0,takesImmediate:!1,operator:""},{symbolic:"JNZ",numeric:4,takesOperand:!0,takesImmediate:!1,operator:""},{symbolic:"JN",numeric:5,takesOperand:!0,takesImmediate:!1,operator:""},{symbolic:"JNN",numeric:6,takesOperand:!0,takesImmediate:!1,operator:""},{symbolic:"LOD",numeric:7,takesOperand:!0,takesImmediate:!0,operator:"="},{symbolic:"STO",numeric:8,takesOperand:!0,takesImmediate:!1,operator:""},{symbolic:"ADD",numeric:9,takesOperand:!0,takesImmediate:!0,operator:"+"},{symbolic:"SUB",numeric:10,takesOperand:!0,takesImmediate:!0,operator:"-"},{symbolic:"MUL",numeric:11,takesOperand:!0,takesImmediate:!0,operator:"*"},{symbolic:"DIV",numeric:12,takesOperand:!0,takesImmediate:!0,operator:"/"},{symbolic:"AND",numeric:13,takesOperand:!0,takesImmediate:!0,operator:"&"},{symbolic:"CMP",numeric:14,takesOperand:!0,takesImmediate:!0,operator:":"},{symbolic:"NOT",numeric:15,takesOperand:!0,takesImmediate:!0,operator:"!"}];function Yn(t){return"string"==typeof t?Qn.find((function(e){return e.symbolic===t})):Qn.find((function(e){return e.numeric===t.getByte(1).unsigned()}))}function tr(t){return t.isBitSet(1)}function er(t,e){return t.setBit(1,e)}function nr(t){return er(t,!1)}var rr=function(){function t(t,e,n,r){if(void 0===r&&(r=!1),16!==n.bits())throw new Error("Value must be 16 bit");this.opcode=Yn(nr(n)),this.symbolicOpcode=t,this.symbolicOperand=e,this.value=n,r&&(this.opcode=void 0)}return t.prototype.immediateFlag=function(){return tr(this.value)},t.prototype.opcodeValue=function(){return this.value.getByte(1)},t.prototype.operandValue=function(){return this.value.getByte(2)},t.prototype.numericOpcode=function(){return this.value.getByte(1).signed()},t.prototype.numericOperand=function(){return this.immediateFlag()?this.value.getByte(2).signed():this.value.getByte(2).unsigned()},t.prototype.binaryOpcode=function(){return this.value.getByte(1).toBinaryString()},t.prototype.binaryOperand=function(){return this.value.getByte(2).toBinaryString()},t}(),or=function(t){function e(e,n){var r=t.call(this,e)||this;return r.inputString=n,r}return Vt(e,t),e}(Pe),sr=/^[01]{0,8}\s?[01]{1,8}?$/,ir=/^-?[0-9]{1,5}$/,cr=/#-?[0-9]{1,3}/,ur=/[A-Z_]{1,10}/,lr=/#[A-Z_]{1,10}/,ar=new RegExp("^"+/[A-Z]{2,3}/.source+"( (("+cr.source+")|("+lr.source+")|("+/[0-9]{1,3}/.source+")|("+ur.source+")))?$");function fr(t,e){var n=sr.test(t),r=ar.test(t),o=ir.test(t);if(e&&!n)throw new or("Invalid binary input",t);if(!e&&!o&&!r)throw new or("Invalid input",t);return r?function(t){var e=t.split(" "),n=e[0],r=e[1],o=!!r,s=Yn(n);if(!s)throw new or("Invalid opcode",t);if(o){if(!s.takesOperand)throw new or("Opcode doesn't allow operand",t);return lr.test(r)?function(t,e){var n=t.split(" "),r=n[0],o=n[1],s=o.slice(1);if(!Er.hasLabel(s))throw new or("Unknown label",t);var i=er(new Ge(8,e.numeric),!0).signed(),c=Er.getAddress(s);if(!e.takesImmediate)throw new or("Opcode doesn't allow immediate operand",t);if(!He(c,8))throw new or("Operand is not a valid 8 bit signed value",t);return new rr(r,o,Ge.fromBytesValues([i,c]))}(t,s):ur.test(r)?function(t,e){var n=t.split(" "),r=n[0],o=n[1];if(!Er.hasLabel(o))throw new or("Unknown label",t);var s=Er.getAddress(o);return new rr(r,o,Ge.fromBytesValues([e.numeric,s]))}(t,s):cr.test(r)?function(t,e){var n=t.split(" "),r=n[0],o=n[1],s=er(new Ge(8,e.numeric),!0).signed(),i=parseInt(o.slice(1));if(!e.takesImmediate)throw new or("Opcode doesn't allow immediate operand",t);if(!He(i,8))throw new or("Operand is not a valid 8 bit signed value",t);return new rr(r,o,Ge.fromBytesValues([s,i]))}(t,s):function(t,e){var n=t.split(" "),r=n[0],o=n[1],s=parseInt(o);if(!qe(s))throw new or("Operand is not a valid address",t);return new rr(r,o,Ge.fromBytesValues([e.numeric,s]))}(t,s)}if(s.takesOperand)throw new or("Opcode requires operand",t);return new rr(n,"",Ge.fromBytesValues([s.numeric,0]))}(t):n&&e?function(t){if(t.includes(" ")){var e=t.split(" ");t=e[0]+Xe(e[1],8)}var n=new Ge(16,t),r=n.getByte(1),o=n.getByte(2),s=tr(r),i=Yn(nr(r)),c=!1;i&&i.takesOperand?s&&!i.takesImmediate?c=!0:s||qe(o.unsigned())||(c=!0):c=!0;var u=c?n.signed().toString():i.symbolic,l=s?"#"+o.signed():o.unsigned().toString();c&&(l="");return new rr(u,l,n,c)}(t):function(t){var e=parseInt(t);if(!He(e,16))throw new or("Input is not a valid 16 bit signed value",t);var n=new Ge(16,e),r=n.getByte(1),o=Yn(nr(r)),s=tr(r),i=!o||s&&!o.takesImmediate||s&&!o.takesOperand;return new rr(t,"",n,i)}(t)}var dr=Nt(new Array),pr=dr.subscribe,hr=dr.set,$r=dr.update,gr=[];function mr(t){$r(t),gr=t(gr)}function wr(){for(var t=Je(0);t<=Je(Ve);t++)gr[t]=fr("NOP",!1);var e;hr(e=gr),gr=e}wr();var vr={subscribe:pr,read:function(t){if(!qe(t))throw new Error("Invalid address: "+t);return gr[Je(t)]},write:function(t,e){if(!qe(t))throw new Error("Invalid address: "+t);var n=Je(t);mr((function(t){return t.map((function(t,r){return n===r?e:t}))}))},clear:wr,updateLabels:function(t,e){mr((function(n){return n.map((function(n){return n.symbolicOperand===t?new rr(n.symbolicOpcode,e,n.value):n.symbolicOperand==="#"+t?new rr(n.symbolicOpcode,"#"+e,n.value):n}))}))},deleteLabel:function(t){mr((function(e){return e.map((function(e){return e.symbolicOperand===t?new rr(e.symbolicOpcode,e.numericOperand().toString(),e.value):e.symbolicOperand==="#"+t?new rr(e.symbolicOpcode,"#"+e.numericOperand(),e.value):e}))}))},moveFirstHalfUpFromAddress:function(t){console.log("moveFirstHalfUpFromAddress "+t)},moveFirstHalfDownFromAddress:function(t){console.log("moveFirstHalfDownFromAddress "+t)},moveSecondHalfUpFromAddress:function(t){console.log("moveSecondHalfUpFromAddress "+t)},moveSecondHalfDownFromAddress:function(t){console.log("moveSecondHalfDownFromAddress "+t)}},xr=Nt([]),br=xr.subscribe,yr=xr.set,Ar=xr.update,Cr=[];function kr(t){return Cr[Je(t)]}function Rr(t){if(""===t)return-1;var e=Cr.findIndex((function(e){return e===t}));return-1===e?-1:function(t){var e=2*t;if(!qe(e))throw new Error("Invalid index: "+t);return e}(e)}function Lr(t){return-1!==Rr(t)}function Ir(){for(var t=Je(0);t<=Je(Ve);t++)Cr[t]="";yr(Cr)}Ir();var Er={subscribe:br,getLabel:kr,getAddress:Rr,setLabel:function(t,e){var n=kr(t);if(n!==e){if(Lr(e))throw new Pe("Label already exists");var r,o=Je(t);Ar(r=function(t){return t.map((function(t,n){return n===o?e:t}))}),Cr=r(Cr),""!==n&&(""===e?vr.deleteLabel(n):vr.updateLabels(n,e))}},hasLabel:Lr,clear:Ir},Ur={address:null,column:"CELL"},Sr=Nt(Ur),Tr=Sr.subscribe;Sr.set;var Or=Sr.update;function Nr(t){Or(t),Ur=t(Ur)}var Dr={subscribe:Tr,selectUp:function(){Nr((function(t){var e=t.address-=2;return Jt(Jt({},t),{address:e<0?Ve:e})}))},selectDown:function(){Nr((function(t){var e=t.address+=2;return Jt(Jt({},t),{address:e>Ve?0:e})}))},selectLeft:function(){Nr((function(t){return Jt(Jt({},t),{column:"LABEL"})}))},selectRight:function(){Nr((function(t){return Jt(Jt({},t),{column:"CELL"})}))},select:function(t,e){if(void 0===e&&(e="CELL"),!qe(t))throw new Error("Invalid address");Nr((function(n){return Jt(Jt({},n),{address:t,column:e})}))},deselect:function(){Nr((function(t){return Jt(Jt({},t),{address:null})}))},noSelection:function(){return null===Ur.address}};function _r(n){let r,o,s,c,u,l;return{c(){r=O("svg"),o=O("rect"),s=O("path"),M(o,"fill","none"),M(o,"height","24px"),M(o,"width","24px"),M(s,"d","M21,12l-4.37,6.16C16.26,18.68,15.65,19,15,19h-3l0-2h3l3.55-5L15,7H5v3H3V7c0-1.1,0.9-2,2-2h10c0.65,0,1.26,0.31,1.63,0.84 L21,12z M10,15H7v-3H5v3H2v2h3v3h2v-3h3V15z"),M(r,"xmlns","http://www.w3.org/2000/svg"),M(r,"viewBox","0 0 24 24"),M(r,"class","svelte-17eshqc")},m(t,e){E(t,r,e),R(r,o),R(r,s),u||(l=P(r,"click",n[0]),u=!0)},p:t,i(o){c||ct((()=>{c=function(n,r,o){let s,c,u=r(n,o),l=!1,a=0;function f(){s&&J(n,s)}function d(){const{delay:r=0,duration:o=300,easing:i=e,tick:d=t,css:p}=u||yt;p&&(s=V(n,0,1,o,r,i,p,a++)),d(0,1);const h=b()+r,$=h+o;c&&c.abort(),l=!0,ct((()=>$t(n,!0,"start"))),c=k((t=>{if(l){if(t>=$)return d(1,0),$t(n,!0,"end"),f(),l=!1;if(t>=h){const e=i((t-h)/o);d(e,1-e)}}return l}))}let p=!1;return{start(){p||(p=!0,J(n),i(u)?(u=u(),ht().then(d)):d())},invalidate(){p=!1},end(){l&&(f(),l=!1)}}}(r,n[6],{delay:300}),c.start()}))},o:t,d(t){t&&U(r),u=!1,l()}}}function Pr(t){let e,n,r,o,i;return{c(){e=T("input"),e.value=t[3],M(e,"class","svelte-17eshqc")},m(n,s){E(n,e,s),t[12](e),r=!0,o||(i=[P(e,"input",Fr),P(e,"focus",t[0]),P(e,"focusout",t[1])],o=!0)},p(t,n){(!r||8&n&&e.value!==t[3])&&(e.value=t[3])},i(o){r||(ct((()=>{n||(n=At(e,t[5],{},!0)),n.run(1)})),r=!0)},o(o){n||(n=At(e,t[5],{},!1)),n.run(0),r=!1},d(r){r&&U(e),t[12](null),r&&n&&n.end(),o=!1,s(i)}}}function Mr(t){let e,n,r,o;const s=[Pr,_r],i=[];function c(t,e){return t[4]?0:1}return n=c(t),r=i[n]=s[n](t),{c(){e=T("div"),r.c(),M(e,"class","label svelte-17eshqc")},m(t,r){E(t,e,r),i[n].m(e,null),o=!0},p(t,[o]){let u=n;n=c(t),n===u?i[n].p(t,o):(wt(),bt(i[u],1,1,(()=>{i[u]=null})),vt(),r=i[n],r?r.p(t,o):(r=i[n]=s[n](t),r.c()),xt(r,1),r.m(e,null))},i(t){o||(xt(r),o=!0)},o(t){bt(r),o=!1},d(t){t&&U(e),i[n].d()}}}function Fr({target:t}){t.value=t.value.toUpperCase().replaceAll(/[^A-Z_]/g,"").slice(0,10)}function zr(t,e,n){let r,o,s,i,c,u;a(t,zt,(t=>n(14,i=t))),a(t,Er,(t=>n(11,c=t))),a(t,Dr,(t=>n(15,u=t))),Y();let l,{address:f}=e,{selected:d}=e;function p(){try{if(!l)return;Mn.info(`RamLabel input: "${l.value}"`,"USER_INPUT"),Er.setLabel(f,l.value),n(3,r=c[Je(f)])}catch(t){i.message("ERROR",t.message),Mn.error(t,"USER_INPUT",t.isChecked)}}return t.$$set=t=>{"address"in t&&n(7,f=t.address),"selected"in t&&n(8,d=t.selected)},t.$$.update=()=>{2176&t.$$.dirty&&n(3,r=c[Je(f)]),8&t.$$.dirty&&(o=!r),264&t.$$.dirty&&n(4,s=d||!!r),260&t.$$.dirty&&d&&l&&l.focus()},[function(){Dr.select(f,"LABEL")},function(){p(),"LABEL"===u.column&&f===u.address&&Dr.deselect()},l,r,s,function(t,{delay:e=0,duration:n=200}){return{delay:0,duration:o?n:0,css:t=>o?`transform: scaleX(${t})`:""}},function(t,{delay:e=0,duration:n=0}){return{delay:o?e:0,duration:n,css:t=>o?`filter: opacity(${t})`:""}},f,d,p,function(){return f},c,function(t){nt[t?"unshift":"push"]((()=>{l=t,n(2,l)}))}]}class Br extends Tt{constructor(t){super(),St(this,t,zr,Mr,c,{address:7,selected:8,select:0,deselect:1,commitInput:9,getAddress:10})}get select(){return this.$$.ctx[0]}get deselect(){return this.$$.ctx[1]}get commitInput(){return this.$$.ctx[9]}get getAddress(){return this.$$.ctx[10]}}function Hr(e){let n,r,o=(e[2]?new Ge(8,e[0]).toBinaryString():e[0])+"";return{c(){n=T("div"),r=N(o),M(n,"class","address svelte-dn79ne")},m(t,o){E(t,n,o),R(n,r),e[5](n)},p(t,[e]){5&e&&o!==(o=(t[2]?new Ge(8,t[0]).toBinaryString():t[0])+"")&&F(r,o)},i:t,o:t,d(t){t&&U(n),e[5](null)}}}function Wr(t,e,n){let r;a(t,ye,(t=>n(2,r=t)));let o,{address:s}=e;return t.$$set=t=>{"address"in t&&n(0,s=t.address)},[s,o,r,function(){return s},function(){return cn(o,"background-color",{r:255,g:140,b:0},{r:0,g:255,b:0})},function(t){nt[t?"unshift":"push"]((()=>{o=t,n(1,o)}))}]}class jr extends Tt{constructor(t){super(),St(this,t,Wr,Hr,c,{address:0,getAddress:3,flash:4})}get getAddress(){return this.$$.ctx[3]}get flash(){return this.$$.ctx[4]}}function Xr(t){let e,n,r,o,s=t[5]&&Gr(t);return{c(){e=T("div"),n=N(t[6]),r=D(),s&&s.c(),o=_(),M(e,"class","opcode svelte-1j7xnvh")},m(t,i){E(t,e,i),R(e,n),E(t,r,i),s&&s.m(t,i),E(t,o,i)},p(t,e){64&e&&F(n,t[6]),t[5]?s?s.p(t,e):(s=Gr(t),s.c(),s.m(o.parentNode,o)):s&&(s.d(1),s=null)},d(t){t&&U(e),t&&U(r),s&&s.d(t),t&&U(o)}}}function Zr(t){let e,n,r,o;return{c(){e=T("input"),e.value=n=t[6]+(t[5]?" "+t[5]:""),M(e,"class","svelte-1j7xnvh")},m(n,s){E(n,e,s),t[15](e),r||(o=[v(t[7].call(null,e)),P(e,"focusout",t[2]),P(e,"input",Jr)],r=!0)},p(t,r){96&r&&n!==(n=t[6]+(t[5]?" "+t[5]:""))&&e.value!==n&&(e.value=n)},d(n){n&&U(e),t[15](null),r=!1,s(o)}}}function Gr(t){let e,n;return{c(){e=T("div"),n=N(t[5]),M(e,"class","operand svelte-1j7xnvh")},m(t,r){E(t,e,r),R(e,n)},p(t,e){32&e&&F(n,t[5])},d(t){t&&U(e)}}}function Vr(e){let n,r,o;function s(t,e){return t[0]?Zr:Xr}let i=s(e),c=i(e);return{c(){n=T("div"),c.c(),M(n,"class","cell svelte-1j7xnvh")},m(t,s){E(t,n,s),c.m(n,null),e[16](n),r||(o=P(n,"click",e[1]),r=!0)},p(t,[e]){i===(i=s(t))&&c?c.p(t,e):(c.d(1),c=i(t),c&&(c.c(),c.m(n,null)))},i:t,o:t,d(t){t&&U(n),c.d(),e[16](null),r=!1,o()}}}function Jr({target:t}){t.value=t.value.toUpperCase().replaceAll(/[^A-Z0-9 _\-#\(\)]*/g,"")}function qr(t,e,n){let r,o,s,i,c,u,l;a(t,zt,(t=>n(17,i=t))),a(t,ye,(t=>n(13,c=t))),a(t,Dr,(t=>n(18,u=t))),a(t,vr,(t=>n(14,l=t)));let f,d,{address:p}=e,{selected:h=!1}=e;function $(){try{d&&""!==d.value&&(Mn.info(`RamCell input: "${d.value}"`,"USER_INPUT"),vr.write(p,fr(d.value.trim(),c)))}catch(t){i.message("ERROR",t.message),Mn.error(t,"USER_INPUT",t.isChecked)}}return t.$$set=t=>{"address"in t&&n(8,p=t.address),"selected"in t&&n(0,h=t.selected)},t.$$.update=()=>{16640&t.$$.dirty&&n(12,r=l[Je(p)]),12288&t.$$.dirty&&n(6,o=c?r.binaryOpcode():r.symbolicOpcode),12288&t.$$.dirty&&n(5,s=c?r.binaryOperand():r.symbolicOperand)},[h,function(){Dr.select(p,"CELL")},function(){$(),"CELL"===u.column&&p===u.address&&Dr.deselect()},f,d,s,o,function(t){t.value=o+(s?` ${s}`:""),t.focus(),setTimeout((()=>t.select()))},p,$,function(){return cn(f,"background-color",{r:211,g:211,b:211},{r:0,g:255,b:0})},function(){return p},r,c,l,function(t){nt[t?"unshift":"push"]((()=>{d=t,n(4,d)}))},function(t){nt[t?"unshift":"push"]((()=>{f=t,n(3,f)}))}]}class Kr extends Tt{constructor(t){super(),St(this,t,qr,Vr,c,{address:8,selected:0,select:1,deselect:2,commitInput:9,flash:10,getAddress:11})}get select(){return this.$$.ctx[1]}get deselect(){return this.$$.ctx[2]}get commitInput(){return this.$$.ctx[9]}get flash(){return this.$$.ctx[10]}get getAddress(){return this.$$.ctx[11]}}function Qr(t,e,n){const r=t.slice();return r[25]=e[n],r[26]=e,r[27]=n,r}function Yr(t,e,n){const r=t.slice();return r[25]=e[n],r[28]=e,r[27]=n,r}function to(t){let e,n,r=t[27];const o=()=>t[15](e,r),s=()=>t[15](null,r);let i={address:t[25],selected:t[4].address===t[25]&&"LABEL"===t[4].column};return e=new Br({props:i}),o(),{c(){Lt(e.$$.fragment)},m(t,r){It(e,t,r),n=!0},p(t,n){r!==t[27]&&(s(),r=t[27],o());const i={};1&n&&(i.address=t[25]),17&n&&(i.selected=t[4].address===t[25]&&"LABEL"===t[4].column),e.$set(i)},i(t){n||(xt(e.$$.fragment,t),n=!0)},o(t){bt(e.$$.fragment,t),n=!1},d(t){s(),Et(e,t)}}}function eo(t){let e,n,r,o,s,i,c=t[27];const u=()=>t[16](n,c),l=()=>t[16](null,c);let a={address:t[25]};n=new jr({props:a}),u();const f=()=>t[17](o,c),d=()=>t[17](null,c);let p={address:t[25],selected:t[4].address===t[25]&&"CELL"===t[4].column};return o=new Kr({props:p}),f(),{c(){e=T("div"),Lt(n.$$.fragment),r=D(),Lt(o.$$.fragment),s=D(),M(e,"class","row svelte-1gpgw8f")},m(t,c){E(t,e,c),It(n,e,null),R(e,r),It(o,e,null),R(e,s),i=!0},p(t,e){c!==t[27]&&(l(),c=t[27],u());const r={};1&e&&(r.address=t[25]),n.$set(r),c!==t[27]&&(d(),c=t[27],f());const s={};1&e&&(s.address=t[25]),17&e&&(s.selected=t[4].address===t[25]&&"CELL"===t[4].column),o.$set(s)},i(t){i||(xt(n.$$.fragment,t),xt(o.$$.fragment,t),i=!0)},o(t){bt(n.$$.fragment,t),bt(o.$$.fragment,t),i=!1},d(t){t&&U(e),l(),Et(n),d(),Et(o)}}}function no(t){let e,n,r,o,i,c,u,l,a;n=new _e({props:{text:"RAM",fontSize:"LARGE",top:"-30px",right:"0"}});let f=t[0],d=[];for(let e=0;e<f.length;e+=1)d[e]=to(Yr(t,f,e));const p=t=>bt(d[t],1,1,(()=>{d[t]=null}));let h=t[0],$=[];for(let e=0;e<h.length;e+=1)$[e]=eo(Qr(t,h,e));const g=t=>bt($[t],1,1,(()=>{$[t]=null}));return{c(){e=T("div"),Lt(n.$$.fragment),r=D(),o=T("div");for(let t=0;t<d.length;t+=1)d[t].c();i=D(),c=T("div");for(let t=0;t<$.length;t+=1)$[t].c();M(o,"class","labels svelte-1gpgw8f"),M(c,"class","ram svelte-1gpgw8f"),M(e,"class","ram-wrapper svelte-1gpgw8f")},m(s,f){E(s,e,f),It(n,e,null),R(e,r),R(e,o);for(let t=0;t<d.length;t+=1)d[t].m(o,null);R(e,i),R(e,c);for(let t=0;t<$.length;t+=1)$[t].m(c,null);u=!0,l||(a=[P(e,"wheel",t[5]),v(t[6].call(null,e))],l=!0)},p(t,[e]){if(19&e){let n;for(f=t[0],n=0;n<f.length;n+=1){const r=Yr(t,f,n);d[n]?(d[n].p(r,e),xt(d[n],1)):(d[n]=to(r),d[n].c(),xt(d[n],1),d[n].m(o,null))}for(wt(),n=f.length;n<d.length;n+=1)p(n);vt()}if(29&e){let n;for(h=t[0],n=0;n<h.length;n+=1){const r=Qr(t,h,n);$[n]?($[n].p(r,e),xt($[n],1)):($[n]=eo(r),$[n].c(),xt($[n],1),$[n].m(c,null))}for(wt(),n=h.length;n<$.length;n+=1)g(n);vt()}},i(t){if(!u){xt(n.$$.fragment,t);for(let t=0;t<f.length;t+=1)xt(d[t]);for(let t=0;t<h.length;t+=1)xt($[t]);u=!0}},o(t){bt(n.$$.fragment,t),d=d.filter(Boolean);for(let t=0;t<d.length;t+=1)bt(d[t]);$=$.filter(Boolean);for(let t=0;t<$.length;t+=1)bt($[t]);u=!1},d(t){t&&U(e),Et(n),S(d,t),S($,t),l=!1,s(a)}}}function ro(t,e,n){let r,o;a(t,Dr,(t=>n(4,o=t)));var s=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,s){function i(t){try{u(r.next(t))}catch(t){s(t)}}function c(t){try{u(r.throw(t))}catch(t){s(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,c)}u((r=r.apply(t,e||[])).next())}))};let i=0,c=[],u=[],l=[],f=[];function d({deltaY:t}){let e=i+(t>0?2:-2);e<0&&(e=220),e>220&&(e=0),n(13,i=e)}function p(){d({deltaY:-1})}function h(){d({deltaY:1})}function $(t){if(!qe(t))throw new Error("Invalid address");return t>=i&&t<=r}function g(t){if(!qe(t))throw new Error("Invalid address");if($(t))return;let e=t,r=e+34;r>Ve&&(e-=r-Ve),n(13,i=e)}return t.$$.update=()=>{if(8192&t.$$.dirty&&n(14,r=i+34),24576&t.$$.dirty){n(0,c=[]);for(let t=i,e=0;t<=r;t+=2,e++)n(0,c[e]=t,c)}},[c,u,l,f,o,function({deltaY:t}){Dr.deselect(),d({deltaY:t})},function(t){const e=t=>{switch(t.key){case"ArrowUp":!function(t){Dr.noSelection()||(t.ctrlKey?vr.moveSecondHalfUpFromAddress(o.address):t.shiftKey&&vr.moveFirstHalfUpFromAddress(o.address),o.address===i&&p(),Dr.selectUp())}(t);break;case"ArrowDown":!function(t){Dr.noSelection()||(t.ctrlKey?vr.moveSecondHalfDownFromAddress(o.address):t.shiftKey&&vr.moveFirstHalfDownFromAddress(o.address),o.address===r&&h(),Dr.selectDown())}(t);break;case"ArrowLeft":Dr.noSelection()||Dr.selectLeft();break;case"ArrowRight":Dr.noSelection()||Dr.selectRight();break;case"Enter":Dr.noSelection()?Dr.select(i):Dr.deselect()}};return document.addEventListener("keydown",e),{destroy(){document.removeEventListener("keydown",e)}}},p,h,$,g,function(t){return s(this,void 0,void 0,(function*(){if(!qe(t))throw new Error("Invalid address");return g(t),l.find((e=>e.getAddress()===t)).flash()}))},function(t){return s(this,void 0,void 0,(function*(){if(!qe(t))throw new Error("Invalid address");return g(t),f.find((e=>e.getAddress()===t)).flash()}))},i,r,function(t,e){nt[t?"unshift":"push"]((()=>{u[e]=t,n(1,u)}))},function(t,e){nt[t?"unshift":"push"]((()=>{l[e]=t,n(2,l)}))},function(t,e){nt[t?"unshift":"push"]((()=>{f[e]=t,n(3,f)}))}]}class oo extends Tt{constructor(t){super(),St(this,t,ro,no,c,{scrollUp:7,scrollDown:8,addressIsVisible:9,showAddress:10,flashAddress:11,flashContent:12})}get scrollUp(){return this.$$.ctx[7]}get scrollDown(){return this.$$.ctx[8]}get addressIsVisible(){return this.$$.ctx[9]}get showAddress(){return this.$$.ctx[10]}get flashAddress(){return this.$$.ctx[11]}get flashContent(){return this.$$.ctx[12]}}function so(t){let e,n,r=t[0].name+"";return{c(){e=T("span"),n=N(r),M(e,"class","text-fuchsia-500")},m(t,r){E(t,e,r),R(e,n)},p(t,e){1&e&&r!==(r=t[0].name+"")&&F(n,r)},d(t){t&&U(e)}}}function io(t){let e,n,r,o,s,i,c,u=t[0].x+"",l=t[0].y+"";return{c(){e=T("span"),n=N("x: "),r=N(u),o=D(),s=T("span"),i=N("y: "),c=N(l),M(e,"class","text-blue-700"),M(s,"class","text-red-700")},m(t,u){E(t,e,u),R(e,n),R(e,r),E(t,o,u),E(t,s,u),R(s,i),R(s,c)},p(t,e){1&e&&u!==(u=t[0].x+"")&&F(r,u),1&e&&l!==(l=t[0].y+"")&&F(c,l)},d(t){t&&U(e),t&&U(o),t&&U(s)}}}function co(e){let n,r,o,s,i,c,u=e[1]&&so(e),l=e[2]&&io(e);return{c(){n=T("div"),r=T("div"),s=D(),i=T("div"),u&&u.c(),c=D(),l&&l.c(),M(r,"class","absolute top-0 left-0 w-2 h-2 -translate-x-1/2 -translate-y-1/2 rounded-full bg-white border border-fuchsia-500"),M(r,"title",o=`${e[0].name} x: ${e[0].x} y: ${e[0].y}`),M(i,"class","relative left-[7px] top-[-10px] bg-white font-bold"),M(n,"class","absolute z-10"),B(n,"top",e[0].y+"px"),B(n,"left",e[0].x+"px")},m(t,e){E(t,n,e),R(n,r),R(n,s),R(n,i),u&&u.m(i,null),R(i,c),l&&l.m(i,null)},p(t,[e]){1&e&&o!==(o=`${t[0].name} x: ${t[0].x} y: ${t[0].y}`)&&M(r,"title",o),t[1]?u?u.p(t,e):(u=so(t),u.c(),u.m(i,c)):u&&(u.d(1),u=null),t[2]?l?l.p(t,e):(l=io(t),l.c(),l.m(i,null)):l&&(l.d(1),l=null),1&e&&B(n,"top",t[0].y+"px"),1&e&&B(n,"left",t[0].x+"px")},i:t,o:t,d(t){t&&U(n),u&&u.d(),l&&l.d()}}}function uo(t,e,n){let r,o;a(t,Xt,(t=>n(1,r=t))),a(t,Zt,(t=>n(2,o=t)));let{node:s}=e;return t.$$set=t=>{"node"in t&&n(0,s=t.node)},[s,r,o]}class lo extends Tt{constructor(t){super(),St(this,t,uo,co,c,{node:0})}}function ao(t,e,n){const r=t.slice();return r[7]=e[n],r}function fo(t){let e,n,r=re,o=[];for(let e=0;e<r.length;e+=1)o[e]=po(ao(t,r,e));const s=t=>bt(o[t],1,1,(()=>{o[t]=null}));return{c(){for(let t=0;t<o.length;t+=1)o[t].c();e=_()},m(t,r){for(let e=0;e<o.length;e+=1)o[e].m(t,r);E(t,e,r),n=!0},p(t,n){if(0&n){let i;for(r=re,i=0;i<r.length;i+=1){const s=ao(t,r,i);o[i]?(o[i].p(s,n),xt(o[i],1)):(o[i]=po(s),o[i].c(),xt(o[i],1),o[i].m(e.parentNode,e))}for(wt(),i=r.length;i<o.length;i+=1)s(i);vt()}},i(t){if(!n){for(let t=0;t<r.length;t+=1)xt(o[t]);n=!0}},o(t){o=o.filter(Boolean);for(let t=0;t<o.length;t+=1)bt(o[t]);n=!1},d(t){S(o,t),t&&U(e)}}}function po(e){let n,r;return n=new lo({props:{node:e[7]}}),{c(){Lt(n.$$.fragment)},m(t,e){It(n,t,e),r=!0},p:t,i(t){r||(xt(n.$$.fragment,t),r=!0)},o(t){bt(n.$$.fragment,t),r=!1},d(t){Et(n,t)}}}function ho(t){let e,n,r,o,s,i,c,u;n=new Oe({props:{}}),t[4](n);o=new Jn({props:{}}),t[5](o);i=new oo({props:{}}),t[6](i);let l=t[3]&&fo(t);return{c(){e=T("div"),Lt(n.$$.fragment),r=D(),Lt(o.$$.fragment),s=D(),Lt(i.$$.fragment),c=D(),l&&l.c(),M(e,"class","absolute top-0 left-0 w-app h-app")},m(t,a){E(t,e,a),It(n,e,null),R(e,r),It(o,e,null),R(e,s),It(i,e,null),R(e,c),l&&l.m(e,null),u=!0},p(t,[r]){n.$set({});o.$set({});i.$set({}),t[3]?l?(l.p(t,r),8&r&&xt(l,1)):(l=fo(t),l.c(),xt(l,1),l.m(e,null)):l&&(wt(),bt(l,1,1,(()=>{l=null})),vt())},i(t){u||(xt(n.$$.fragment,t),xt(o.$$.fragment,t),xt(i.$$.fragment,t),xt(l),u=!0)},o(t){bt(n.$$.fragment,t),bt(o.$$.fragment,t),bt(i.$$.fragment,t),bt(l),u=!1},d(r){r&&U(e),t[4](null),Et(n),t[5](null),Et(o),t[6](null),Et(i),l&&l.d()}}}function $o(t,e,n){let r,o,s,i;return a(t,Pt,(t=>n(0,r=t))),a(t,_t,(t=>n(1,o=t))),a(t,Dt,(t=>n(2,s=t))),a(t,jt,(t=>n(3,i=t))),[r,o,s,i,function(t){nt[t?"unshift":"push"]((()=>{r=t,Pt.set(r)}))},function(t){nt[t?"unshift":"push"]((()=>{o=t,_t.set(o)}))},function(t){nt[t?"unshift":"push"]((()=>{s=t,Dt.set(s)}))}]}class go extends Tt{constructor(t){super(),St(this,t,$o,ho,c,{})}}var mo=function(t){function e(e,n){var r=t.call(this)||this;return r.component=e,r.address=n,r}return Vt(e,t),e.prototype.action=function(t){return qt(this,void 0,void 0,(function(){var e,n;return Kt(this,(function(r){if(e=l(Ht.ram),"number"!=typeof(n="number"==typeof this.address?this.address:t[this.address]))throw new Error(this.address+" is not a number");switch(this.component){case"ADDRESS":return[2,e.flashAddress(n)];case"DATA":return[2,e.flashContent(n)]}return[2]}))}))},e.prototype.toString=function(){return"".concat(t.prototype.toString.call(this),", component: ").concat(this.component,", address: ").concat(this.address)},e}(Xn),wo=function(t){function e(e,n){var r=t.call(this)||this;return r.from=e,r.to=n,r}return Vt(e,t),e.prototype.action=function(t){return qt(this,void 0,void 0,(function(){return Kt(this,(function(t){return[2,l(Ht.wires).flashWire(this.from,this.to)]}))}))},e.prototype.toString=function(){return"".concat(t.prototype.toString.call(this),", from: ").concat(this.from,", to: ").concat(this.to)},e}(Xn),vo=function(t){function e(e){var n=t.call(this)||this;return n.key=e,n}return Vt(e,t),e.prototype.toString=function(){return"".concat(t.prototype.toString.call(this),", key: ").concat(this.key)},e}(Fn),xo=function(t){function e(e){var n=t.call(this,e)||this;if("RAM"===e)throw new Error("CacheCpuValue cannot cache RAM value");return n}return Vt(e,t),e.prototype.action=function(t){return qt(this,void 0,void 0,(function(){var e;return Kt(this,(function(n){switch(e=l(rn),this.key){case"ACC":t.ACC=e.accumulator.signed();break;case"ALU:1":t["ALU:1"]=e.alu1.signed();break;case"ALU:2":t["ALU:2"]=e.alu2.signed();break;case"ALU:OPR":t["ALU:OPR"]=e.operation;break;case"IR":t.IR=e.instructionRegister,t["IR:OPC"]=e.instructionRegister.numericOpcode(),t["IR:OPR"]=e.instructionRegister.numericOperand();break;case"PC":t.PC=e.programCounter.unsigned();break;case"INC":t.INC=e.increment.unsigned();break;case"SW:Z":t["SW:Z"]=e.zeroFlag;break;case"SW:N":t["SW:N"]=e.negativeFlag;break;default:throw new Error('Unexpected cacheable key "'.concat(this.key,'"'))}return[2]}))}))},e}(vo),bo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Vt(e,t),e}(Fn),yo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Vt(e,t),e.prototype.action=function(t){return qt(this,void 0,void 0,(function(){var e,n;return Kt(this,(function(r){switch(r.label){case 0:return e=t["ALU:2"]===t["ALU:1"],n=t["ALU:2"]>t["ALU:1"],e===l(rn).zeroFlag||n===l(rn).negativeFlag?[3,2]:(rn.setZeroFlag(e),rn.setNegativeFlag(n),[4,Promise.all([l(_t).flash("SW:Z"),l(_t).flash("SW:N")])]);case 1:return r.sent(),[3,6];case 2:return e===l(rn).zeroFlag?[3,4]:(rn.setZeroFlag(e),[4,l(_t).flash("SW:Z")]);case 3:r.sent(),r.label=4;case 4:return n===l(rn).negativeFlag?[3,6]:(rn.setNegativeFlag(n),[4,l(_t).flash("SW:N")]);case 5:r.sent(),r.label=6;case 6:return t["SW:Z"]=e,t["SW:N"]=n,[2]}}))}))},e}(bo),Ao=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Vt(e,t),e.prototype.action=function(t){return qt(this,void 0,void 0,(function(){var e;return Kt(this,(function(n){switch(n.label){case 0:switch(t["ALU:OPR"]){case"!":e=~t["ALU:2"];break;case"&":e=t["ALU:1"]&t["ALU:2"];break;case"*":e=t["ALU:1"]*t["ALU:2"];break;case"+":e=t["ALU:1"]+t["ALU:2"];break;case"-":e=t["ALU:1"]-t["ALU:2"];break;case"/":if(0===t["ALU:2"])throw new Error("Division by zero");e=t["ALU:1"]/t["ALU:2"];break;case"=":e=t["ALU:2"];break;default:throw new Error('Operator "'.concat(t["ALU:OP"],"\" doesn't set the Accumulator"))}return rn.setACC(e),[4,l(_t).flash("ACC")];case 1:return n.sent(),t.ACC=e,[2]}}))}))},e}(bo),Co=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Vt(e,t),e.prototype.action=function(t){return qt(this,void 0,void 0,(function(){var e,n;return Kt(this,(function(r){switch(r.label){case 0:return e=0===t.ACC,n=t.ACC<0,e===l(rn).zeroFlag||n===l(rn).negativeFlag?[3,2]:(rn.setZeroFlag(e),rn.setNegativeFlag(n),[4,Promise.all([l(_t).flash("SW:Z"),l(_t).flash("SW:N")])]);case 1:return r.sent(),[3,6];case 2:return e===l(rn).zeroFlag?[3,4]:(rn.setZeroFlag(e),[4,l(_t).flash("SW:Z")]);case 3:r.sent(),r.label=4;case 4:return n===l(rn).negativeFlag?[3,6]:(rn.setNegativeFlag(n),[4,l(_t).flash("SW:N")]);case 5:r.sent(),r.label=6;case 6:return t["SW:Z"]=e,t["SW:N"]=n,[2]}}))}))},e}(bo),ko=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Vt(e,t),e}(Fn),Ro=function(t){function e(e){var n=t.call(this)||this;return n.address=e,n}return Vt(e,t),e.prototype.action=function(t){return qt(this,void 0,void 0,(function(){var e,n;return Kt(this,(function(r){switch(r.label){case 0:if("number"!=typeof(e="number"==typeof this.address?this.address:t[this.address]))throw new Error("Address is not a number");return n=vr.read(e).symbolicOpcode,/^[A-Z]+$/.test(n)&&"NOP"!==n?vr.write(e,fr(new Ge(16,t.ACC).toBinaryString(),!0)):vr.write(e,fr(t.ACC.toString(),!1)),[4,l(Dt).flashContent(e)];case 1:return r.sent(),[2]}}))}))},e}(ko),Lo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Vt(e,t),e.prototype.action=function(t){return qt(this,void 0,void 0,(function(){return Kt(this,(function(t){return rn.setIsHalting(!0),[2]}))}))},e}(bo),Io=function(t){function e(e){var n=t.call(this,"RAM")||this;return n.address=e,n}return Vt(e,t),e.prototype.action=function(t){return qt(this,void 0,void 0,(function(){var e;return Kt(this,(function(n){if("number"!=typeof(e="number"==typeof this.address?this.address:t[this.address]))throw new Error("Address is not a number");return t.RAM={address:e,data:vr.read(e)},[2]}))}))},e}(vo),Eo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Vt(e,t),e.prototype.action=function(t){return qt(this,void 0,void 0,(function(){return Kt(this,(function(e){switch(e.label){case 0:return rn.setALU1(t.ACC),[4,l(_t).flash("ALU:1")];case 1:return e.sent(),t["ALU:1"]=t.ACC,[2]}}))}))},e}(bo),Uo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Vt(e,t),e.prototype.action=function(t){return qt(this,void 0,void 0,(function(){return Kt(this,(function(e){switch(e.label){case 0:return rn.setIR(t.RAM.data),[4,l(_t).flash("IR")];case 1:return e.sent(),t.IR=t.RAM.data,t["IR:OPC"]=t.IR.numericOpcode(),t["IR:OPR"]=t.IR.numericOperand(),[2]}}))}))},e}(bo),So=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Vt(e,t),e.prototype.action=function(t){return qt(this,void 0,void 0,(function(){var e;return Kt(this,(function(n){switch(n.label){case 0:return e=t.PC+t.INC,rn.setPC(e),[4,l(_t).flash("PC")];case 1:return n.sent(),t.PC=e,[2]}}))}))},e}(bo),To=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Vt(e,t),e.prototype.action=function(t){return qt(this,void 0,void 0,(function(){return Kt(this,(function(e){switch(e.label){case 0:return rn.setIsJumping(!0),rn.setPC(t["IR:OPR"]),[4,l(_t).flash("PC")];case 1:return e.sent(),t.PC=t["IR:OPR"],[2]}}))}))},e}(bo),Oo=function(t){function e(e){var n=t.call(this)||this;return n.value=e,n}return Vt(e,t),e.prototype.action=function(t){return qt(this,void 0,void 0,(function(){return Kt(this,(function(e){switch(e.label){case 0:switch(this.value){case"IR:OPR":rn.setALU2(t.IR.numericOperand()),t["ALU:2"]=t.IR.numericOperand();break;case"RAM":rn.setALU2(t.RAM.data.value.signed()),t["ALU:2"]=t.RAM.data.value.signed();break;default:throw new Error('Unexpected value "'.concat(this.value,'"'))}return[4,l(_t).flash("ALU:2")];case 1:return e.sent(),[2]}}))}))},e}(bo),No=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Vt(e,t),e.prototype.action=function(t){return qt(this,void 0,void 0,(function(){return Kt(this,(function(e){switch(e.label){case 0:return rn.setOperation(t.IR.opcode.operator),[4,l(_t).flash("ALU:OPR")];case 1:return e.sent(),t["ALU:OPR"]=t.IR.opcode.operator,[2]}}))}))},e}(bo),Do=[new xo("INC").sideffects(new wo("PC:1","INC:2")),new wo("INC:1","PC:2"),new So],_o=[new xo("PC").sideffects(new Zn("PC")),new wo("PC:2","RAM:ADD"),new mo("ADDRESS","PC"),new wo("CU:3","RAM:CTRL"),new Io("PC").sideffects(new mo("DATA","PC")),new wo("RAM:DATA","IR:1"),new Uo],Po=[new Zn("IR:OPC"),new wo("IR:3","CU:1"),new Zn("CU")],Mo=[new wo("CU:2","MUX:4"),new Zn("MUX")],Fo=[new wo("CU:4","ALU:5"),new No],zo=[new xo("ACC").sideffects(new Zn("ACC")),new wo("ACC:1","ALU:1"),new Eo];function Bo(t){return t?Ho:Wo}var Ho=[new Zn("IR:OPR"),new wo("IR:2","MUX:1"),new wo("MUX:3","ALU:2"),new Oo("IR:OPR")],Wo=[new Zn("IR:OPR"),new wo("IR:2","RAM:ADD"),new mo("ADDRESS","IR:OPR"),new Zn("CU"),new wo("CU:3","RAM:CTRL"),new Io("IR:OPR").sideffects(new mo("DATA","IR:OPR")),new wo("RAM:DATA","MUX:2"),new wo("MUX:3","ALU:2"),new Oo("RAM")],jo=[new Zn("IR:OPR"),new wo("IR:2","PC:2"),new To],Xo=[new Zn("IR:OPR").condition(zn),new wo("IR:2","PC:2").condition(zn),(new To).condition(zn)],Zo=[new Zn("IR:OPR").condition(Bn),new wo("IR:2","PC:2").condition(Bn),(new To).condition(Bn)],Go=[new Zn("IR:OPR").condition(Hn),new wo("IR:2","PC:2").condition(Hn),(new To).condition(Hn)],Vo=[new Zn("IR:OPR").condition(Wn),new wo("IR:2","PC:2").condition(Wn),(new To).condition(Wn)];var Jo=Jt(Jt({},Nt(!1)),{update:function(){return Jo.set(Ko||Qo||Yo)}}),qo={subscribe:Jo.subscribe},Ko=!1,Qo=!1,Yo=!1,ts=!1,es="ENQUEUING_FETCH",ns=[],rs={IR:null,"IR:OPC":null,"IR:OPR":null,PC:null,INC:null,"ALU:1":null,"ALU:2":null,"ALU:OPR":"",ACC:null,"SW:Z":!0,"SW:N":!1,RAM:null};function os(){return qt(this,void 0,void 0,(function(){var t;return Kt(this,(function(e){switch(e.label){case 0:return ls()||!us()?[3,2]:[4,(t=ns.shift()).execute(rs)];case 1:return e.sent(),Qo&&t.doesEndStep()&&fs(!1),[3,0];case 2:return[2]}}))}))}function ss(){as(!0),fs(!1),ds(!1),Mn.info("Execution - START","EXECUTION")}function is(){as(!1),fs(!1),ds(!1),Mn.info("Execution - PAUSE","EXECUTION")}function cs(){is(),es="ENQUEUING_FETCH",ns=[],Mn.info("Execution - RESET","EXECUTION")}function us(){return Ko||Qo||Yo}function ls(){return 0===ns.length}function as(t){Ko=t,Jo.update()}function fs(t){Qo=t,Jo.update()}function ds(t){Yo=t,Jo.update()}setInterval((function(){return qt(this,void 0,void 0,(function(){var t;return Kt(this,(function(e){switch(e.label){case 0:if(ts||!us())return[2];ts=!0,e.label=1;case 1:switch(e.trys.push([1,12,13,14]),es){case"ENQUEUING_FETCH":return[3,2];case"EXECUTING_FETCH":return[3,3];case"ENQUEUING_INSTRUCTION":return[3,5];case"EXECUTING_INSTRUCTION":return[3,6];case"ENQUEUEING_PC_INCREMENT":return[3,8];case"EXECUTING_PC_INCREMENT":return[3,9]}return[3,11];case 2:return ns.push.apply(ns,_o),rn.clear(),es="EXECUTING_FETCH",[3,11];case 3:return[4,os()];case 4:return e.sent(),ls()&&(es="ENQUEUING_INSTRUCTION"),[3,11];case 5:return ns.push.apply(ns,function(t){if(!t.opcode)throw new Error("Invalid opcode");var e=[];switch(t.opcode.symbolic){case"ADD":case"SUB":case"MUL":case"DIV":case"AND":e.push.apply(e,Qt(Qt(Qt(Qt(Qt(Qt([],Po,!1),Mo,!1),Fo,!1),zo,!1),Bo(t.immediateFlag()),!1),[new wo("ALU:4","ACC:2"),new Ao,new wo("ALU:3","SW:1"),new Co],!1));break;case"NOT":e.push.apply(e,Qt(Qt(Qt(Qt(Qt([],Po,!1),Mo,!1),Fo,!1),Bo(t.immediateFlag()),!1),[new wo("ALU:4","ACC:2"),new Ao,new wo("ALU:3","SW:1"),new Co],!1));break;case"CMP":e.push.apply(e,Qt(Qt(Qt(Qt(Qt(Qt([],Po,!1),Mo,!1),Fo,!1),zo,!1),Bo(t.immediateFlag()),!1),[new wo("ALU:3","SW:1"),new yo],!1));break;case"LOD":e.push.apply(e,Qt(Qt(Qt(Qt(Qt([],Po,!1),Mo,!1),Fo,!1),Bo(t.immediateFlag()),!1),[new wo("ALU:4","ACC:2"),new Ao],!1));break;case"STO":e.push.apply(e,Qt(Qt([],Po,!1),[new wo("IR:2","RAM:ADD"),new mo("ADDRESS","IR:OPR"),new xo("ACC").sideffects(new Zn("ACC")),new wo("ACC:1","RAM:DATA"),new wo("CU:3","RAM:CTRL"),new Ro("IR:OPR")],!1));break;case"JMP":e.push.apply(e,Qt(Qt([],Po,!1),jo,!1));break;case"JZ":e.push.apply(e,Qt(Qt(Qt([],Po,!1),[new Zn("SW:Z")],!1),Xo,!1));break;case"JNZ":e.push.apply(e,Qt(Qt(Qt([],Po,!1),[new Zn("SW:Z")],!1),Zo,!1));break;case"JN":e.push.apply(e,Qt(Qt(Qt([],Po,!1),[new Zn("SW:N")],!1),Go,!1));break;case"JNN":e.push.apply(e,Qt(Qt(Qt([],Po,!1),[new Zn("SW:N")],!1),Vo,!1));break;case"NOP":e.push.apply(e,Po);break;case"HLT":e.push.apply(e,Qt(Qt([],Po,!1),[new Lo],!1));break;default:throw new Error('Unrecognized opcode: "'.concat(t.opcode.symbolic,'"'))}return e}(rs.IR)),es="EXECUTING_INSTRUCTION",[3,11];case 6:return[4,os()];case 7:return e.sent(),ls()&&(l(rn).programCounter.unsigned()!==Ve||l(rn).isJumping||rn.setIsHalting(!0),l(rn).isJumping?(es="ENQUEUING_FETCH",Yo&&ds(!1)):es="ENQUEUEING_PC_INCREMENT"),[3,11];case 8:return ns.push.apply(ns,Do),es="EXECUTING_PC_INCREMENT",[3,11];case 9:return[4,os()];case 10:return e.sent(),Yo&&(ds(!1),rn.setIsHalting(!0)),ls()&&(es="ENQUEUING_FETCH"),[3,11];case 11:return[3,14];case 12:return t=e.sent(),rn.setIsHalting(!0),l(zt).message("ERROR",t.message),Mn.error(t,"EXECUTION",t.isChecked),[3,14];case 13:return l(rn).isHalting&&cs(),ts=!1,[7];case 14:return[2]}}))}))}),50);var ps={start:ss,pause:is,toggle:function(){l(Jo)?is():ss()},step:function(){as(!1),fs(!0),ds(!1),Mn.info("Execution - STEP","EXECUTION")},instruction:function(){as(!1),fs(!1),ds(!0),Mn.info("Execution - INSTRUCTION","EXECUTION")},reset:cs};function hs(t){let e,n;return{c(){e=O("svg"),n=O("path"),M(n,"d","M8 6.82v10.36c0 .79.87 1.27 1.54.84l8.14-5.18c.62-.39.62-1.29 0-1.69L9.54 5.98C8.87 5.55 8 6.03 8 6.82z"),M(e,"xmlns","http://www.w3.org/2000/svg"),M(e,"height","24px"),M(e,"viewBox","0 0 24 24"),M(e,"width","24px"),M(e,"fill","#000000"),M(e,"class","svelte-1x4uvz4")},m(t,r){E(t,e,r),R(e,n)},d(t){t&&U(e)}}}function $s(t){let e,n;return{c(){e=O("svg"),n=O("path"),M(n,"d","M8 19c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2s-2 .9-2 2v10c0 1.1.9 2 2 2zm6-12v10c0 1.1.9 2 2 2s2-.9 2-2V7c0-1.1-.9-2-2-2s-2 .9-2 2z"),M(e,"xmlns","http://www.w3.org/2000/svg"),M(e,"height","24px"),M(e,"viewBox","0 0 24 24"),M(e,"width","24px"),M(e,"fill","#000000"),M(e,"class","svelte-1x4uvz4")},m(t,r){E(t,e,r),R(e,n)},d(t){t&&U(e)}}}function gs(e){let n,r,o,i,c,u,l,a,f,d,p,h,$,g,m,w,v,x,b,y,A,C,k,L,I,S,O,_,z,B,H,W,j,X,Z,G,V,J,q,K,Q,Y=e[0]?"Symbolic":"Binary";function tt(t,e){return t[1]?$s:hs}let et=tt(e),nt=et(e);return{c(){n=T("div"),r=T("div"),o=T("fieldset"),i=T("legend"),i.textContent="Execution",c=D(),u=T("button"),u.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#000000" class="svelte-1x4uvz4"><path d="M7 6c.55 0 1 .45 1 1v10c0 .55-.45 1-1 1s-1-.45-1-1V7c0-.55.45-1 1-1zm3.66 6.82l5.77 4.07c.66.47 1.58-.01 1.58-.82V7.93c0-.81-.91-1.28-1.58-.82l-5.77 4.07c-.57.4-.57 1.24 0 1.64z"></path></svg>',l=D(),a=T("button"),nt.c(),f=D(),d=T("button"),d.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#000000" class="svelte-1x4uvz4"><path d="M7.58 16.89l5.77-4.07c.56-.4.56-1.24 0-1.63L7.58 7.11C6.91 6.65 6 7.12 6 7.93v8.14c0 .81.91 1.28 1.58.82zM16 7v10c0 .55.45 1 1 1s1-.45 1-1V7c0-.55-.45-1-1-1s-1 .45-1 1z"></path></svg>',p=D(),h=T("fieldset"),$=T("legend"),$.textContent="Step",g=D(),m=T("button"),m.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#000000" class="svelte-1x4uvz4"><path d="M8 6.82v10.36c0 .79.87 1.27 1.54.84l8.14-5.18c.62-.39.62-1.29 0-1.69L9.54 5.98C8.87 5.55 8 6.03 8 6.82z"></path></svg>',w=D(),v=T("button"),v.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#000000" class="svelte-1x4uvz4"><path d="M7.58 16.89l5.77-4.07c.56-.4.56-1.24 0-1.63L7.58 7.11C6.91 6.65 6 7.12 6 7.93v8.14c0 .81.91 1.28 1.58.82zM16 7v10c0 .55.45 1 1 1s1-.45 1-1V7c0-.55-.45-1-1-1s-1 .45-1 1z"></path></svg>',x=D(),b=T("fieldset"),y=T("legend"),y.textContent="Instruction",A=D(),C=T("button"),C.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#000000" class="svelte-1x4uvz4"><path d="M8 6.82v10.36c0 .79.87 1.27 1.54.84l8.14-5.18c.62-.39.62-1.29 0-1.69L9.54 5.98C8.87 5.55 8 6.03 8 6.82z"></path></svg>',k=D(),L=T("button"),L.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#000000" class="svelte-1x4uvz4"><path d="M7.58 16.89l5.77-4.07c.56-.4.56-1.24 0-1.63L7.58 7.11C6.91 6.65 6 7.12 6 7.93v8.14c0 .81.91 1.28 1.58.82zM16 7v10c0 .55.45 1 1 1s1-.45 1-1V7c0-.55-.45-1-1-1s-1 .45-1 1z"></path></svg>',I=D(),S=T("div"),O=T("fieldset"),O.innerHTML='<legend class="svelte-1x4uvz4">Animation speed</legend> \n\t\t\t<input type="range" disabled=""/>',_=D(),z=T("fieldset"),B=T("legend"),B.textContent="Animation",H=D(),W=T("input"),j=D(),X=T("div"),Z=T("fieldset"),G=T("legend"),G.textContent="Dispaly",V=D(),J=T("button"),q=N(Y),M(i,"class","svelte-1x4uvz4"),M(u,"title","Reset"),u.disabled=!0,M(u,"class","svelte-1x4uvz4"),M(a,"title","Play"),M(a,"class","svelte-1x4uvz4"),M(d,"title","Skip to end"),d.disabled=!0,M(d,"class","svelte-1x4uvz4"),M(o,"class","svelte-1x4uvz4"),M($,"class","svelte-1x4uvz4"),M(m,"title","Play step"),m.disabled=!0,M(m,"class","svelte-1x4uvz4"),M(v,"title","Skip step"),v.disabled=!0,M(v,"class","svelte-1x4uvz4"),M(h,"class","svelte-1x4uvz4"),M(y,"class","svelte-1x4uvz4"),M(C,"class","svelte-1x4uvz4"),L.disabled=!0,M(L,"class","svelte-1x4uvz4"),M(b,"class","svelte-1x4uvz4"),M(r,"class","execution-buttons svelte-1x4uvz4"),M(O,"class","svelte-1x4uvz4"),M(B,"class","svelte-1x4uvz4"),M(W,"type","checkbox"),M(z,"class","svelte-1x4uvz4"),M(S,"class","animation svelte-1x4uvz4"),M(G,"class","svelte-1x4uvz4"),M(Z,"class","svelte-1x4uvz4"),M(X,"class","display svelte-1x4uvz4"),M(n,"class","control-bar svelte-1x4uvz4")},m(t,s){E(t,n,s),R(n,r),R(r,o),R(o,i),R(o,c),R(o,u),R(o,l),R(o,a),nt.m(a,null),R(o,f),R(o,d),R(r,p),R(r,h),R(h,$),R(h,g),R(h,m),R(h,w),R(h,v),R(r,x),R(r,b),R(b,y),R(b,A),R(b,C),R(b,k),R(b,L),R(n,I),R(n,S),R(S,O),R(S,_),R(S,z),R(z,B),R(z,H),R(z,W),W.checked=e[2],R(n,j),R(n,X),R(X,Z),R(Z,G),R(Z,V),R(Z,J),R(J,q),K||(Q=[P(u,"click",e[3]),P(a,"click",e[4]),P(d,"click",ms),P(m,"click",e[5]),P(v,"click",ws),P(C,"click",e[6]),P(L,"click",vs),P(W,"change",e[8]),P(J,"click",e[7])],K=!0)},p(t,[e]){et!==(et=tt(t))&&(nt.d(1),nt=et(t),nt&&(nt.c(),nt.m(a,null))),4&e&&(W.checked=t[2]),1&e&&Y!==(Y=t[0]?"Symbolic":"Binary")&&F(q,Y)},i:t,o:t,d(t){t&&U(n),nt.d(),K=!1,s(Q)}}}function ms(){}function ws(){}function vs(){}function xs(t,e,n){let r,o,s;return a(t,ye,(t=>n(0,r=t))),a(t,qo,(t=>n(1,o=t))),a(t,Ce,(t=>n(2,s=t))),[r,o,s,function(){ps.reset()},function(){ps.toggle()},function(){ps.step()},function(){ps.instruction()},function(){w(ye,r=!r,r)},function(){s=this.checked,Ce.set(s)}]}class bs extends Tt{constructor(t){super(),St(this,t,xs,gs,c,{})}}var ys=null,As=l(ke),Cs=l(Re);function ks(t){As=t,null!==ys&&(ys.rate=As)}function Rs(t){Cs=t,null!==ys&&(ys.lang=Cs)}ke.subscribe(ks),Re.subscribe(Rs);var Ls={read:function(t){(ys=new SpeechSynthesisUtterance(t)).rate=As,ys.lang=Cs,ys.onend=ys.onerror=function(){return ys=null},speechSynthesis.speak(ys)},endedReading:function(){return null===ys}};function Is(t){let e,n,r,o,i;const c=t[3].default,u=f(c,t,t[2],null);return{c(){e=T("button"),u&&u.c(),M(e,"class",n="text-white border border-white px-2 rounded-md hover:text-black hover:bg-white transition-colors disabled:brightness-[.6] disabled:cursor-default active:brightness-90 "+t[1].class),e.disabled=t[0]},m(n,s){E(n,e,s),u&&u.m(e,null),r=!0,o||(i=[P(e,"click",t[4]),P(e,"focus",t[5]),P(e,"focusout",t[6]),P(e,"mouseenter",t[7]),P(e,"mouseleave",t[8]),P(e,"mouseover",t[9])],o=!0)},p(t,[o]){u&&u.p&&(!r||4&o)&&h(u,c,t,t[2],r?p(c,t[2],o,null):$(t[2]),null),(!r||2&o&&n!==(n="text-white border border-white px-2 rounded-md hover:text-black hover:bg-white transition-colors disabled:brightness-[.6] disabled:cursor-default active:brightness-90 "+t[1].class))&&M(e,"class",n),(!r||1&o)&&(e.disabled=t[0])},i(t){r||(xt(u,t),r=!0)},o(t){bt(u,t),r=!1},d(t){t&&U(e),u&&u.d(t),o=!1,s(i)}}}function Es(t,e,r){const o=["disabled"];let s=m(e,o),{$$slots:i={},$$scope:c}=e,{disabled:u=!1}=e;return t.$$set=t=>{e=n(n({},e),g(t)),r(1,s=m(e,o)),"disabled"in t&&r(0,u=t.disabled),"$$scope"in t&&r(2,c=t.$$scope)},[u,s,c,i,function(e){tt.call(this,t,e)},function(e){tt.call(this,t,e)},function(e){tt.call(this,t,e)},function(e){tt.call(this,t,e)},function(e){tt.call(this,t,e)},function(e){tt.call(this,t,e)}]}class Us extends Tt{constructor(t){super(),St(this,t,Es,Is,c,{disabled:0})}}function Ss(t){let e,n,r,o,i;const c=t[5].default,u=f(c,t,t[4],null);return{c(){e=T("button"),u&&u.c(),M(e,"class",n="text-white border border-white px-2 rounded-md transition-colors disabled:brightness-[.6] disabled:cursor-default active:brightness-90 "+(t[0]?"text-black bg-white":"")+" "+t[3].class),e.disabled=t[1]},m(n,s){E(n,e,s),u&&u.m(e,null),r=!0,o||(i=[P(e,"click",t[2]),P(e,"focus",t[6]),P(e,"focusout",t[7]),P(e,"mouseenter",t[8]),P(e,"mouseleave",t[9]),P(e,"mouseover",t[10])],o=!0)},p(t,[o]){u&&u.p&&(!r||16&o)&&h(u,c,t,t[4],r?p(c,t[4],o,null):$(t[4]),null),(!r||9&o&&n!==(n="text-white border border-white px-2 rounded-md transition-colors disabled:brightness-[.6] disabled:cursor-default active:brightness-90 "+(t[0]?"text-black bg-white":"")+" "+t[3].class))&&M(e,"class",n),(!r||2&o)&&(e.disabled=t[1])},i(t){r||(xt(u,t),r=!0)},o(t){bt(u,t),r=!1},d(t){t&&U(e),u&&u.d(t),o=!1,s(i)}}}function Ts(t,e,r){const o=["disabled","checked"];let s=m(e,o),{$$slots:i={},$$scope:c}=e,{disabled:u=!1}=e,{checked:l=!1}=e;const a=Y();return t.$$set=t=>{e=n(n({},e),g(t)),r(3,s=m(e,o)),"disabled"in t&&r(1,u=t.disabled),"checked"in t&&r(0,l=t.checked),"$$scope"in t&&r(4,c=t.$$scope)},[l,u,function(t){r(0,l=!l),a("click",t)},s,c,i,function(e){tt.call(this,t,e)},function(e){tt.call(this,t,e)},function(e){tt.call(this,t,e)},function(e){tt.call(this,t,e)},function(e){tt.call(this,t,e)}]}class Os extends Tt{constructor(t){super(),St(this,t,Ts,Ss,c,{disabled:1,checked:0})}}function Ns(e){let n,r,o,i;return{c(){n=T("input"),M(n,"class",r="bg-transparent border-2 border-white text-white rounded-md px-1 disabled:brightness-[.6] "+e[4].class),M(n,"type","text"),M(n,"placeholder",e[1]),n.disabled=e[2]},m(t,r){E(t,n,r),z(n,e[0]),o||(i=[P(n,"input",e[6]),P(n,"change",e[7]),P(n,"focus",e[8]),P(n,"focusout",e[9]),P(n,"mouseenter",e[10]),P(n,"mouseleave",e[11]),P(n,"mouseover",e[12]),P(n,"input",e[13]),v(e[3].call(null,n))],o=!0)},p(t,[e]){16&e&&r!==(r="bg-transparent border-2 border-white text-white rounded-md px-1 disabled:brightness-[.6] "+t[4].class)&&M(n,"class",r),2&e&&M(n,"placeholder",t[1]),4&e&&(n.disabled=t[2]),1&e&&n.value!==t[0]&&z(n,t[0])},i:t,o:t,d(t){t&&U(n),o=!1,s(i)}}}function Ds(t,e,r){const o=["value","placeholder","disabled","type"];let s=m(e,o),{value:i=""}=e,{placeholder:c=""}=e,{disabled:u=!1}=e,{type:l="text"}=e;return t.$$set=t=>{e=n(n({},e),g(t)),r(4,s=m(e,o)),"value"in t&&r(0,i=t.value),"placeholder"in t&&r(1,c=t.placeholder),"disabled"in t&&r(2,u=t.disabled),"type"in t&&r(5,l=t.type)},[i,c,u,function(t){t.type=l},s,l,function(e){tt.call(this,t,e)},function(e){tt.call(this,t,e)},function(e){tt.call(this,t,e)},function(e){tt.call(this,t,e)},function(e){tt.call(this,t,e)},function(e){tt.call(this,t,e)},function(e){tt.call(this,t,e)},function(){i=this.value,r(0,i)}]}class _s extends Tt{constructor(t){super(),St(this,t,Ds,Ns,c,{value:0,placeholder:1,disabled:2,type:5})}}function Ps(t,e,n){const r=t.slice();return r[13]=e[n],r}function Ms(t){let e,n;return{c(){e=T("option"),n=N(t[1]),M(e,"class","text-black bg-white"),e.__value="",e.value=e.__value,e.selected=!0,e.disabled=!0},m(t,r){E(t,e,r),R(e,n)},p(t,e){2&e&&F(n,t[1])},d(t){t&&U(e)}}}function Fs(t){let e,n,r,o=t[13]+"";return{c(){e=T("option"),n=N(o),M(e,"class","text-black bg-white"),e.__value=r=t[13],e.value=e.__value},m(t,r){E(t,e,r),R(e,n)},p(t,s){8&s&&o!==(o=t[13]+"")&&F(n,o),8&s&&r!==(r=t[13])&&(e.__value=r,e.value=e.__value)},d(t){t&&U(e)}}}function zs(e){let n,r,o,i,c,u=""!==e[1]&&Ms(e),l=e[3],a=[];for(let t=0;t<l.length;t+=1)a[t]=Fs(Ps(e,l,t));return{c(){n=T("select"),u&&u.c(),r=_();for(let t=0;t<a.length;t+=1)a[t].c();M(n,"class",o="cursor-pointer bg-transparent border-2 border-white text-white rounded-md px-1 disabled:brightness-[.6] "+e[4].class),n.disabled=e[2],void 0===e[0]&&ct((()=>e[12].call(n)))},m(t,o){E(t,n,o),u&&u.m(n,null),R(n,r);for(let t=0;t<a.length;t+=1)a[t].m(n,null);H(n,e[0]),i||(c=[P(n,"input",e[5]),P(n,"change",e[6]),P(n,"focus",e[7]),P(n,"focusout",e[8]),P(n,"mouseenter",e[9]),P(n,"mouseleave",e[10]),P(n,"mouseover",e[11]),P(n,"change",e[12])],i=!0)},p(t,[e]){if(""!==t[1]?u?u.p(t,e):(u=Ms(t),u.c(),u.m(n,r)):u&&(u.d(1),u=null),8&e){let r;for(l=t[3],r=0;r<l.length;r+=1){const o=Ps(t,l,r);a[r]?a[r].p(o,e):(a[r]=Fs(o),a[r].c(),a[r].m(n,null))}for(;r<a.length;r+=1)a[r].d(1);a.length=l.length}16&e&&o!==(o="cursor-pointer bg-transparent border-2 border-white text-white rounded-md px-1 disabled:brightness-[.6] "+t[4].class)&&M(n,"class",o),4&e&&(n.disabled=t[2]),9&e&&H(n,t[0])},i:t,o:t,d(t){t&&U(n),u&&u.d(),S(a,t),i=!1,s(c)}}}function Bs(t,e,r){const o=["value","placeholder","disabled","options"];let s=m(e,o),{value:i=""}=e,{placeholder:c=""}=e,{disabled:u=!1}=e,{options:l=[]}=e;return t.$$set=t=>{e=n(n({},e),g(t)),r(4,s=m(e,o)),"value"in t&&r(0,i=t.value),"placeholder"in t&&r(1,c=t.placeholder),"disabled"in t&&r(2,u=t.disabled),"options"in t&&r(3,l=t.options)},[i,c,u,l,s,function(e){tt.call(this,t,e)},function(e){tt.call(this,t,e)},function(e){tt.call(this,t,e)},function(e){tt.call(this,t,e)},function(e){tt.call(this,t,e)},function(e){tt.call(this,t,e)},function(e){tt.call(this,t,e)},function(){i=W(this),r(0,i),r(3,l)}]}class Hs extends Tt{constructor(t){super(),St(this,t,Bs,zs,c,{value:0,placeholder:1,disabled:2,options:3})}}function Ws(t){let e,n;return{c(){e=T("p"),n=N(t[4]),M(e,"class","text-red-500")},m(t,r){E(t,e,r),R(e,n)},p(t,e){16&e&&F(n,t[4])},d(t){t&&U(e)}}}function js(t){let e;return{c(){e=N("#")},m(t,n){E(t,e,n)},d(t){t&&U(e)}}}function Xs(t){let e,n,r,o,s,i,c,u,l,a,f,d,p=null!==t[4]&&Ws(t);function h(e){t[6](e)}let $={options:Qn.map(Zs)};function g(e){t[7](e)}void 0!==t[0]&&($.value=t[0]),o=new Hs({props:$}),nt.push((()=>Rt(o,"value",h)));let m={disabled:!t[3].takesOperand||!t[3].takesImmediate,$$slots:{default:[js]},$$scope:{ctx:t}};function w(e){t[8](e)}void 0!==t[2]&&(m.checked=t[2]),c=new Os({props:m}),nt.push((()=>Rt(c,"checked",g)));let v={class:"w-20",type:"number",disabled:!t[3].takesOperand};return void 0!==t[1]&&(v.value=t[1]),a=new _s({props:v}),nt.push((()=>Rt(a,"value",w))),{c(){e=T("div"),p&&p.c(),n=D(),r=T("div"),Lt(o.$$.fragment),i=D(),Lt(c.$$.fragment),l=D(),Lt(a.$$.fragment),M(r,"class","flex items-center justify-center gap-1"),M(e,"class","flex flex-col items-center justify-center gap-1")},m(t,s){E(t,e,s),p&&p.m(e,null),R(e,n),R(e,r),It(o,r,null),R(r,i),It(c,r,null),R(r,l),It(a,r,null),d=!0},p(t,[r]){null!==t[4]?p?p.p(t,r):(p=Ws(t),p.c(),p.m(e,n)):p&&(p.d(1),p=null);const i={};!s&&1&r&&(s=!0,i.value=t[0],ut((()=>s=!1))),o.$set(i);const l={};8&r&&(l.disabled=!t[3].takesOperand||!t[3].takesImmediate),512&r&&(l.$$scope={dirty:r,ctx:t}),!u&&4&r&&(u=!0,l.checked=t[2],ut((()=>u=!1))),c.$set(l);const d={};8&r&&(d.disabled=!t[3].takesOperand),!f&&2&r&&(f=!0,d.value=t[1],ut((()=>f=!1))),a.$set(d)},i(t){d||(xt(o.$$.fragment,t),xt(c.$$.fragment,t),xt(a.$$.fragment,t),d=!0)},o(t){bt(o.$$.fragment,t),bt(c.$$.fragment,t),bt(a.$$.fragment,t),d=!1},d(t){t&&U(e),p&&p.d(),Et(o),Et(c),Et(a)}}}const Zs=t=>t.symbolic;function Gs(t,e,n){let r,{value:o=fr("NOP",!1)}=e,s="NOP",i=0,c=!1,u=null;return t.$$set=t=>{"value"in t&&n(5,o=t.value)},t.$$.update=()=>{if(1&t.$$.dirty&&n(3,r=Yn(s)),15&t.$$.dirty){n(4,u=null);try{r.takesOperand?c&&r.takesImmediate?n(5,o=fr(`${s} #${i}`,!1)):n(5,o=fr(`${s} ${i}`,!1)):n(5,o=fr(s,!1))}catch(t){n(4,u=t.message)}}},[s,i,c,r,u,o,function(t){s=t,n(0,s)},function(t){c=t,n(2,c)},function(t){i=t,n(1,i)}]}class Vs extends Tt{constructor(t){super(),St(this,t,Gs,Xs,c,{value:5})}}const Js=t=>({}),qs=t=>({}),Ks=t=>({}),Qs=t=>({});function Ys(t){let e,n,r,o,s,i,c,u;const l=t[2].inputs,a=f(l,t,t[1],Qs),d=t[2].buttons,g=f(d,t,t[1],qs);return{c(){e=T("div"),n=T("h2"),r=N(t[0]),o=D(),s=T("div"),a&&a.c(),i=D(),c=T("div"),g&&g.c(),M(n,"class","text-lg mx-auto"),M(s,"class","w-full flex flex-col items-center gap-0.5"),M(c,"class","w-full flex flex-wrap justify-center gap-1"),M(e,"class","flex flex-col items-center gap-1.5 max-w-[250px]")},m(t,l){E(t,e,l),R(e,n),R(n,r),R(e,o),R(e,s),a&&a.m(s,null),R(e,i),R(e,c),g&&g.m(c,null),u=!0},p(t,[e]){(!u||1&e)&&F(r,t[0]),a&&a.p&&(!u||2&e)&&h(a,l,t,t[1],u?p(l,t[1],e,Ks):$(t[1]),Qs),g&&g.p&&(!u||2&e)&&h(g,d,t,t[1],u?p(d,t[1],e,Js):$(t[1]),qs)},i(t){u||(xt(a,t),xt(g,t),u=!0)},o(t){bt(a,t),bt(g,t),u=!1},d(t){t&&U(e),a&&a.d(t),g&&g.d(t)}}}function ti(t,e,n){let{$$slots:r={},$$scope:o}=e,{title:s=""}=e;return t.$$set=t=>{"title"in t&&n(0,s=t.title),"$$scope"in t&&n(1,o=t.$$scope)},[s,o,r]}class ei extends Tt{constructor(t){super(),St(this,t,ti,Ys,c,{title:0})}}function ni(t){let e,n,r,o,s,i,c,u,l,a,f,d,p,h,$,g,m,w,v,x,b,y,A,C,k,L,I;return u=new ei({props:{title:"Execution",$$slots:{buttons:[ai]},$$scope:{ctx:t}}}),a=new ei({props:{title:"CPU",$$slots:{buttons:[Ai],inputs:[di]},$$scope:{ctx:t}}}),d=new ei({props:{title:"CPU ANIMATION",$$slots:{buttons:[Ri],inputs:[Ci]},$$scope:{ctx:t}}}),h=new ei({props:{title:"RAM",$$slots:{buttons:[Ni],inputs:[Li]},$$scope:{ctx:t}}}),g=new ei({props:{title:"MESSAGE",$$slots:{buttons:[zi],inputs:[Di]},$$scope:{ctx:t}}}),w=new ei({props:{title:"WIRES",$$slots:{buttons:[Wi],inputs:[Bi]},$$scope:{ctx:t}}}),x=new ei({props:{title:"NODES",$$slots:{buttons:[Gi]},$$scope:{ctx:t}}}),y=new ei({props:{title:"DISPLAY",$$slots:{buttons:[qi]},$$scope:{ctx:t}}}),C=new ei({props:{title:"TTS",$$slots:{buttons:[Yi],inputs:[Ki]},$$scope:{ctx:t}}}),{c(){e=T("div"),n=T("div"),r=T("h1"),r.textContent="Debugger",o=D(),s=T("button"),s.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" class="h-7 w-7 fill-white"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>',i=D(),c=T("div"),Lt(u.$$.fragment),l=D(),Lt(a.$$.fragment),f=D(),Lt(d.$$.fragment),p=D(),Lt(h.$$.fragment),$=D(),Lt(g.$$.fragment),m=D(),Lt(w.$$.fragment),v=D(),Lt(x.$$.fragment),b=D(),Lt(y.$$.fragment),A=D(),Lt(C.$$.fragment),M(r,"class","text-xl"),M(s,"title","Close debugger"),M(n,"class","w-full flex flex-wrap items-center justify-between p-4"),M(c,"class","w-full overflow-y-auto p-5 flex flex-wrap gap-8"),M(e,"class","fixed top-0 left-0 w-screen h-screen bg-black/50 text-white")},m(U,S){E(U,e,S),R(e,n),R(n,r),R(n,o),R(n,s),R(e,i),R(e,c),It(u,c,null),R(c,l),It(a,c,null),R(c,f),It(d,c,null),R(c,p),It(h,c,null),R(c,$),It(g,c,null),R(c,m),It(w,c,null),R(c,v),It(x,c,null),R(c,b),It(y,c,null),R(c,A),It(C,c,null),k=!0,L||(I=P(s,"click",t[23]),L=!0)},p(t,e){const n={};64&e[2]&&(n.$$scope={dirty:e,ctx:t}),u.$set(n);const r={};15&e[0]|64&e[2]&&(r.$$scope={dirty:e,ctx:t}),a.$set(r);const o={};4112&e[0]|64&e[2]&&(o.$$scope={dirty:e,ctx:t}),d.$set(o);const s={};24672&e[0]|64&e[2]&&(s.$$scope={dirty:e,ctx:t}),h.$set(s);const i={};32896&e[0]|64&e[2]&&(i.$$scope={dirty:e,ctx:t}),g.$set(i);const c={};66304&e[0]|64&e[2]&&(c.$$scope={dirty:e,ctx:t}),w.$set(c);const l={};917504&e[0]|64&e[2]&&(l.$$scope={dirty:e,ctx:t}),x.$set(l);const f={};3145728&e[0]|64&e[2]&&(f.$$scope={dirty:e,ctx:t}),y.$set(f);const p={};1024&e[0]|64&e[2]&&(p.$$scope={dirty:e,ctx:t}),C.$set(p)},i(t){k||(xt(u.$$.fragment,t),xt(a.$$.fragment,t),xt(d.$$.fragment,t),xt(h.$$.fragment,t),xt(g.$$.fragment,t),xt(w.$$.fragment,t),xt(x.$$.fragment,t),xt(y.$$.fragment,t),xt(C.$$.fragment,t),k=!0)},o(t){bt(u.$$.fragment,t),bt(a.$$.fragment,t),bt(d.$$.fragment,t),bt(h.$$.fragment,t),bt(g.$$.fragment,t),bt(w.$$.fragment,t),bt(x.$$.fragment,t),bt(y.$$.fragment,t),bt(C.$$.fragment,t),k=!1},d(t){t&&U(e),Et(u),Et(a),Et(d),Et(h),Et(g),Et(w),Et(x),Et(y),Et(C),L=!1,I()}}}function ri(t){let e;return{c(){e=N("Reset")},m(t,n){E(t,e,n)},d(t){t&&U(e)}}}function oi(t){let e;return{c(){e=N("Play")},m(t,n){E(t,e,n)},d(t){t&&U(e)}}}function si(t){let e;return{c(){e=N("Pause")},m(t,n){E(t,e,n)},d(t){t&&U(e)}}}function ii(t){let e;return{c(){e=N("Step")},m(t,n){E(t,e,n)},d(t){t&&U(e)}}}function ci(t){let e;return{c(){e=N("Instruction")},m(t,n){E(t,e,n)},d(t){t&&U(e)}}}function ui(t){let e;return{c(){e=N("Skip Step")},m(t,n){E(t,e,n)},d(t){t&&U(e)}}}function li(t){let e;return{c(){e=N("Skip Instruction")},m(t,n){E(t,e,n)},d(t){t&&U(e)}}}function ai(t){let e,n,r,o,s,i,c,u,l,a,f,d,p,h;return e=new Us({props:{$$slots:{default:[ri]},$$scope:{ctx:t}}}),e.$on("click",t[24]),r=new Us({props:{$$slots:{default:[oi]},$$scope:{ctx:t}}}),r.$on("click",t[25]),s=new Us({props:{$$slots:{default:[si]},$$scope:{ctx:t}}}),s.$on("click",t[26]),c=new Us({props:{$$slots:{default:[ii]},$$scope:{ctx:t}}}),c.$on("click",t[27]),l=new Us({props:{$$slots:{default:[ci]},$$scope:{ctx:t}}}),l.$on("click",t[28]),f=new Us({props:{disabled:!0,$$slots:{default:[ui]},$$scope:{ctx:t}}}),p=new Us({props:{disabled:!0,$$slots:{default:[li]},$$scope:{ctx:t}}}),{c(){Lt(e.$$.fragment),n=D(),Lt(r.$$.fragment),o=D(),Lt(s.$$.fragment),i=D(),Lt(c.$$.fragment),u=D(),Lt(l.$$.fragment),a=D(),Lt(f.$$.fragment),d=D(),Lt(p.$$.fragment)},m(t,$){It(e,t,$),E(t,n,$),It(r,t,$),E(t,o,$),It(s,t,$),E(t,i,$),It(c,t,$),E(t,u,$),It(l,t,$),E(t,a,$),It(f,t,$),E(t,d,$),It(p,t,$),h=!0},p(t,n){const o={};64&n[2]&&(o.$$scope={dirty:n,ctx:t}),e.$set(o);const i={};64&n[2]&&(i.$$scope={dirty:n,ctx:t}),r.$set(i);const u={};64&n[2]&&(u.$$scope={dirty:n,ctx:t}),s.$set(u);const a={};64&n[2]&&(a.$$scope={dirty:n,ctx:t}),c.$set(a);const d={};64&n[2]&&(d.$$scope={dirty:n,ctx:t}),l.$set(d);const h={};64&n[2]&&(h.$$scope={dirty:n,ctx:t}),f.$set(h);const $={};64&n[2]&&($.$$scope={dirty:n,ctx:t}),p.$set($)},i(t){h||(xt(e.$$.fragment,t),xt(r.$$.fragment,t),xt(s.$$.fragment,t),xt(c.$$.fragment,t),xt(l.$$.fragment,t),xt(f.$$.fragment,t),xt(p.$$.fragment,t),h=!0)},o(t){bt(e.$$.fragment,t),bt(r.$$.fragment,t),bt(s.$$.fragment,t),bt(c.$$.fragment,t),bt(l.$$.fragment,t),bt(f.$$.fragment,t),bt(p.$$.fragment,t),h=!1},d(t){Et(e,t),t&&U(n),Et(r,t),t&&U(o),Et(s,t),t&&U(i),Et(c,t),t&&U(u),Et(l,t),t&&U(a),Et(f,t),t&&U(d),Et(p,t)}}}function fi(t){let e;return{c(){e=N("Flag")},m(t,n){E(t,e,n)},d(t){t&&U(e)}}}function di(t){let e,n,r,o,s,i,c,u,l,a,f,d,p;function h(e){t[39](e)}let $={};function g(e){t[40](e)}void 0!==t[0]&&($.value=t[0]),e=new Vs({props:$}),nt.push((()=>Rt(e,"value",h)));let m={type:"number",placeholder:"Value"};function w(e){t[41](e)}void 0!==t[1]&&(m.value=t[1]),o=new _s({props:m}),nt.push((()=>Rt(o,"value",g)));let v={placeholder:"Operation",options:["+","-","*","/",":","!","&","="],class:"w-fit"};function x(e){t[42](e)}void 0!==t[2]&&(v.value=t[2]),u=new Hs({props:v}),nt.push((()=>Rt(u,"value",w)));let b={$$slots:{default:[fi]},$$scope:{ctx:t}};return void 0!==t[3]&&(b.checked=t[3]),f=new Os({props:b}),nt.push((()=>Rt(f,"checked",x))),{c(){Lt(e.$$.fragment),r=D(),Lt(o.$$.fragment),i=D(),c=T("div"),Lt(u.$$.fragment),a=D(),Lt(f.$$.fragment),M(c,"class","flex gap-1")},m(t,n){It(e,t,n),E(t,r,n),It(o,t,n),E(t,i,n),E(t,c,n),It(u,c,null),R(c,a),It(f,c,null),p=!0},p(t,r){const i={};!n&&1&r[0]&&(n=!0,i.value=t[0],ut((()=>n=!1))),e.$set(i);const c={};!s&&2&r[0]&&(s=!0,c.value=t[1],ut((()=>s=!1))),o.$set(c);const a={};!l&&4&r[0]&&(l=!0,a.value=t[2],ut((()=>l=!1))),u.$set(a);const p={};64&r[2]&&(p.$$scope={dirty:r,ctx:t}),!d&&8&r[0]&&(d=!0,p.checked=t[3],ut((()=>d=!1))),f.$set(p)},i(t){p||(xt(e.$$.fragment,t),xt(o.$$.fragment,t),xt(u.$$.fragment,t),xt(f.$$.fragment,t),p=!0)},o(t){bt(e.$$.fragment,t),bt(o.$$.fragment,t),bt(u.$$.fragment,t),bt(f.$$.fragment,t),p=!1},d(t){Et(e,t),t&&U(r),Et(o,t),t&&U(i),t&&U(c),Et(u),Et(f)}}}function pi(t){let e;return{c(){e=N("Clear")},m(t,n){E(t,e,n)},d(t){t&&U(e)}}}function hi(t){let e;return{c(){e=N("Reset")},m(t,n){E(t,e,n)},d(t){t&&U(e)}}}function $i(t){let e;return{c(){e=N("Set IR")},m(t,n){E(t,e,n)},d(t){t&&U(e)}}}function gi(t){let e;return{c(){e=N("Set PC")},m(t,n){E(t,e,n)},d(t){t&&U(e)}}}function mi(t){let e;return{c(){e=N("Set ALU:1")},m(t,n){E(t,e,n)},d(t){t&&U(e)}}}function wi(t){let e;return{c(){e=N("Set ALU:2")},m(t,n){E(t,e,n)},d(t){t&&U(e)}}}function vi(t){let e;return{c(){e=N("Set ALU:OPR")},m(t,n){E(t,e,n)},d(t){t&&U(e)}}}function xi(t){let e;return{c(){e=N("Set ACC")},m(t,n){E(t,e,n)},d(t){t&&U(e)}}}function bi(t){let e;return{c(){e=N("Set SW:Z")},m(t,n){E(t,e,n)},d(t){t&&U(e)}}}function yi(t){let e;return{c(){e=N("Set SW:N")},m(t,n){E(t,e,n)},d(t){t&&U(e)}}}function Ai(t){let e,n,r,o,s,i,c,u,l,a,f,d,p,h,$,g,m,w,v,x;return e=new Us({props:{$$slots:{default:[pi]},$$scope:{ctx:t}}}),e.$on("click",t[29]),r=new Us({props:{$$slots:{default:[hi]},$$scope:{ctx:t}}}),r.$on("click",t[30]),s=new Us({props:{$$slots:{default:[$i]},$$scope:{ctx:t}}}),s.$on("click",t[31]),c=new Us({props:{$$slots:{default:[gi]},$$scope:{ctx:t}}}),c.$on("click",t[32]),l=new Us({props:{$$slots:{default:[mi]},$$scope:{ctx:t}}}),l.$on("click",t[33]),f=new Us({props:{$$slots:{default:[wi]},$$scope:{ctx:t}}}),f.$on("click",t[34]),p=new Us({props:{$$slots:{default:[vi]},$$scope:{ctx:t}}}),p.$on("click",t[35]),$=new Us({props:{$$slots:{default:[xi]},$$scope:{ctx:t}}}),$.$on("click",t[36]),m=new Us({props:{$$slots:{default:[bi]},$$scope:{ctx:t}}}),m.$on("click",t[37]),v=new Us({props:{$$slots:{default:[yi]},$$scope:{ctx:t}}}),v.$on("click",t[38]),{c(){Lt(e.$$.fragment),n=D(),Lt(r.$$.fragment),o=D(),Lt(s.$$.fragment),i=D(),Lt(c.$$.fragment),u=D(),Lt(l.$$.fragment),a=D(),Lt(f.$$.fragment),d=D(),Lt(p.$$.fragment),h=D(),Lt($.$$.fragment),g=D(),Lt(m.$$.fragment),w=D(),Lt(v.$$.fragment)},m(t,b){It(e,t,b),E(t,n,b),It(r,t,b),E(t,o,b),It(s,t,b),E(t,i,b),It(c,t,b),E(t,u,b),It(l,t,b),E(t,a,b),It(f,t,b),E(t,d,b),It(p,t,b),E(t,h,b),It($,t,b),E(t,g,b),It(m,t,b),E(t,w,b),It(v,t,b),x=!0},p(t,n){const o={};64&n[2]&&(o.$$scope={dirty:n,ctx:t}),e.$set(o);const i={};64&n[2]&&(i.$$scope={dirty:n,ctx:t}),r.$set(i);const u={};64&n[2]&&(u.$$scope={dirty:n,ctx:t}),s.$set(u);const a={};64&n[2]&&(a.$$scope={dirty:n,ctx:t}),c.$set(a);const d={};64&n[2]&&(d.$$scope={dirty:n,ctx:t}),l.$set(d);const h={};64&n[2]&&(h.$$scope={dirty:n,ctx:t}),f.$set(h);const g={};64&n[2]&&(g.$$scope={dirty:n,ctx:t}),p.$set(g);const w={};64&n[2]&&(w.$$scope={dirty:n,ctx:t}),$.$set(w);const x={};64&n[2]&&(x.$$scope={dirty:n,ctx:t}),m.$set(x);const b={};64&n[2]&&(b.$$scope={dirty:n,ctx:t}),v.$set(b)},i(t){x||(xt(e.$$.fragment,t),xt(r.$$.fragment,t),xt(s.$$.fragment,t),xt(c.$$.fragment,t),xt(l.$$.fragment,t),xt(f.$$.fragment,t),xt(p.$$.fragment,t),xt($.$$.fragment,t),xt(m.$$.fragment,t),xt(v.$$.fragment,t),x=!0)},o(t){bt(e.$$.fragment,t),bt(r.$$.fragment,t),bt(s.$$.fragment,t),bt(c.$$.fragment,t),bt(l.$$.fragment,t),bt(f.$$.fragment,t),bt(p.$$.fragment,t),bt($.$$.fragment,t),bt(m.$$.fragment,t),bt(v.$$.fragment,t),x=!1},d(t){Et(e,t),t&&U(n),Et(r,t),t&&U(o),Et(s,t),t&&U(i),Et(c,t),t&&U(u),Et(l,t),t&&U(a),Et(f,t),t&&U(d),Et(p,t),t&&U(h),Et($,t),t&&U(g),Et(m,t),t&&U(w),Et(v,t)}}}function Ci(t){let e,n,r;function o(e){t[44](e)}let s={placeholder:"Flashable component",options:t[22],class:"w-fit"};return void 0!==t[4]&&(s.value=t[4]),e=new Hs({props:s}),nt.push((()=>Rt(e,"value",o))),{c(){Lt(e.$$.fragment)},m(t,n){It(e,t,n),r=!0},p(t,r){const o={};!n&&16&r[0]&&(n=!0,o.value=t[4],ut((()=>n=!1))),e.$set(o)},i(t){r||(xt(e.$$.fragment,t),r=!0)},o(t){bt(e.$$.fragment,t),r=!1},d(t){Et(e,t)}}}function ki(t){let e;return{c(){e=N("Flash")},m(t,n){E(t,e,n)},d(t){t&&U(e)}}}function Ri(t){let e,n;return e=new Us({props:{$$slots:{default:[ki]},$$scope:{ctx:t}}}),e.$on("click",t[43]),{c(){Lt(e.$$.fragment)},m(t,r){It(e,t,r),n=!0},p(t,n){const r={};64&n[2]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(xt(e.$$.fragment,t),n=!0)},o(t){bt(e.$$.fragment,t),n=!1},d(t){Et(e,t)}}}function Li(t){let e,n,r,o,s,i;function c(e){t[51](e)}let u={type:"number",placeholder:"Address"};function l(e){t[52](e)}void 0!==t[6]&&(u.value=t[6]),e=new _s({props:u}),nt.push((()=>Rt(e,"value",c)));let a={};return void 0!==t[5]&&(a.value=t[5]),o=new Vs({props:a}),nt.push((()=>Rt(o,"value",l))),{c(){Lt(e.$$.fragment),r=D(),Lt(o.$$.fragment)},m(t,n){It(e,t,n),E(t,r,n),It(o,t,n),i=!0},p(t,r){const i={};!n&&64&r[0]&&(n=!0,i.value=t[6],ut((()=>n=!1))),e.$set(i);const c={};!s&&32&r[0]&&(s=!0,c.value=t[5],ut((()=>s=!1))),o.$set(c)},i(t){i||(xt(e.$$.fragment,t),xt(o.$$.fragment,t),i=!0)},o(t){bt(e.$$.fragment,t),bt(o.$$.fragment,t),i=!1},d(t){Et(e,t),t&&U(r),Et(o,t)}}}function Ii(t){let e;return{c(){e=N("Flash address")},m(t,n){E(t,e,n)},d(t){t&&U(e)}}}function Ei(t){let e;return{c(){e=N("Flash data")},m(t,n){E(t,e,n)},d(t){t&&U(e)}}}function Ui(t){let e;return{c(){e=N("Show address")},m(t,n){E(t,e,n)},d(t){t&&U(e)}}}function Si(t){let e;return{c(){e=N("Clear")},m(t,n){E(t,e,n)},d(t){t&&U(e)}}}function Ti(t){let e;return{c(){e=N("Write")},m(t,n){E(t,e,n)},d(t){t&&U(e)}}}function Oi(t){let e;return{c(){e=N("Dump")},m(t,n){E(t,e,n)},d(t){t&&U(e)}}}function Ni(t){let e,n,r,o,s,i,c,u,l,a,f,d;return e=new Us({props:{$$slots:{default:[Ii]},$$scope:{ctx:t}}}),e.$on("click",t[45]),r=new Us({props:{$$slots:{default:[Ei]},$$scope:{ctx:t}}}),r.$on("click",t[46]),s=new Us({props:{$$slots:{default:[Ui]},$$scope:{ctx:t}}}),s.$on("click",t[47]),c=new Us({props:{$$slots:{default:[Si]},$$scope:{ctx:t}}}),c.$on("click",t[48]),l=new Us({props:{$$slots:{default:[Ti]},$$scope:{ctx:t}}}),l.$on("click",t[49]),f=new Us({props:{$$slots:{default:[Oi]},$$scope:{ctx:t}}}),f.$on("click",t[50]),{c(){Lt(e.$$.fragment),n=D(),Lt(r.$$.fragment),o=D(),Lt(s.$$.fragment),i=D(),Lt(c.$$.fragment),u=D(),Lt(l.$$.fragment),a=D(),Lt(f.$$.fragment)},m(t,p){It(e,t,p),E(t,n,p),It(r,t,p),E(t,o,p),It(s,t,p),E(t,i,p),It(c,t,p),E(t,u,p),It(l,t,p),E(t,a,p),It(f,t,p),d=!0},p(t,n){const o={};64&n[2]&&(o.$$scope={dirty:n,ctx:t}),e.$set(o);const i={};64&n[2]&&(i.$$scope={dirty:n,ctx:t}),r.$set(i);const u={};64&n[2]&&(u.$$scope={dirty:n,ctx:t}),s.$set(u);const a={};64&n[2]&&(a.$$scope={dirty:n,ctx:t}),c.$set(a);const d={};64&n[2]&&(d.$$scope={dirty:n,ctx:t}),l.$set(d);const p={};64&n[2]&&(p.$$scope={dirty:n,ctx:t}),f.$set(p)},i(t){d||(xt(e.$$.fragment,t),xt(r.$$.fragment,t),xt(s.$$.fragment,t),xt(c.$$.fragment,t),xt(l.$$.fragment,t),xt(f.$$.fragment,t),d=!0)},o(t){bt(e.$$.fragment,t),bt(r.$$.fragment,t),bt(s.$$.fragment,t),bt(c.$$.fragment,t),bt(l.$$.fragment,t),bt(f.$$.fragment,t),d=!1},d(t){Et(e,t),t&&U(n),Et(r,t),t&&U(o),Et(s,t),t&&U(i),Et(c,t),t&&U(u),Et(l,t),t&&U(a),Et(f,t)}}}function Di(t){let e,n,r;function o(e){t[57](e)}let s={};return void 0!==t[7]&&(s.value=t[7]),e=new _s({props:s}),nt.push((()=>Rt(e,"value",o))),{c(){Lt(e.$$.fragment)},m(t,n){It(e,t,n),r=!0},p(t,r){const o={};!n&&128&r[0]&&(n=!0,o.value=t[7],ut((()=>n=!1))),e.$set(o)},i(t){r||(xt(e.$$.fragment,t),r=!0)},o(t){bt(e.$$.fragment,t),r=!1},d(t){Et(e,t)}}}function _i(t){let e;return{c(){e=N("Error")},m(t,n){E(t,e,n)},d(t){t&&U(e)}}}function Pi(t){let e;return{c(){e=N("Warning")},m(t,n){E(t,e,n)},d(t){t&&U(e)}}}function Mi(t){let e;return{c(){e=N("Success")},m(t,n){E(t,e,n)},d(t){t&&U(e)}}}function Fi(t){let e;return{c(){e=N("Info")},m(t,n){E(t,e,n)},d(t){t&&U(e)}}}function zi(t){let e,n,r,o,s,i,c,u;return e=new Us({props:{$$slots:{default:[_i]},$$scope:{ctx:t}}}),e.$on("click",t[53]),r=new Us({props:{$$slots:{default:[Pi]},$$scope:{ctx:t}}}),r.$on("click",t[54]),s=new Us({props:{$$slots:{default:[Mi]},$$scope:{ctx:t}}}),s.$on("click",t[55]),c=new Us({props:{$$slots:{default:[Fi]},$$scope:{ctx:t}}}),c.$on("click",t[56]),{c(){Lt(e.$$.fragment),n=D(),Lt(r.$$.fragment),o=D(),Lt(s.$$.fragment),i=D(),Lt(c.$$.fragment)},m(t,l){It(e,t,l),E(t,n,l),It(r,t,l),E(t,o,l),It(s,t,l),E(t,i,l),It(c,t,l),u=!0},p(t,n){const o={};64&n[2]&&(o.$$scope={dirty:n,ctx:t}),e.$set(o);const i={};64&n[2]&&(i.$$scope={dirty:n,ctx:t}),r.$set(i);const u={};64&n[2]&&(u.$$scope={dirty:n,ctx:t}),s.$set(u);const l={};64&n[2]&&(l.$$scope={dirty:n,ctx:t}),c.$set(l)},i(t){u||(xt(e.$$.fragment,t),xt(r.$$.fragment,t),xt(s.$$.fragment,t),xt(c.$$.fragment,t),u=!0)},o(t){bt(e.$$.fragment,t),bt(r.$$.fragment,t),bt(s.$$.fragment,t),bt(c.$$.fragment,t),u=!1},d(t){Et(e,t),t&&U(n),Et(r,t),t&&U(o),Et(s,t),t&&U(i),Et(c,t)}}}function Bi(t){let e,n,r,o,s,i;function c(e){t[59](e)}let u={placeholder:"From node",options:re.map(ec),class:"w-fit"};function l(e){t[60](e)}void 0!==t[8]&&(u.value=t[8]),e=new Hs({props:u}),nt.push((()=>Rt(e,"value",c)));let a={placeholder:"To node",options:re.map(nc),class:"w-fit"};return void 0!==t[9]&&(a.value=t[9]),o=new Hs({props:a}),nt.push((()=>Rt(o,"value",l))),{c(){Lt(e.$$.fragment),r=D(),Lt(o.$$.fragment)},m(t,n){It(e,t,n),E(t,r,n),It(o,t,n),i=!0},p(t,r){const i={};!n&&256&r[0]&&(n=!0,i.value=t[8],ut((()=>n=!1))),e.$set(i);const c={};!s&&512&r[0]&&(s=!0,c.value=t[9],ut((()=>s=!1))),o.$set(c)},i(t){i||(xt(e.$$.fragment,t),xt(o.$$.fragment,t),i=!0)},o(t){bt(e.$$.fragment,t),bt(o.$$.fragment,t),i=!1},d(t){Et(e,t),t&&U(r),Et(o,t)}}}function Hi(t){let e;return{c(){e=N("Flash")},m(t,n){E(t,e,n)},d(t){t&&U(e)}}}function Wi(t){let e,n;return e=new Us({props:{$$slots:{default:[Hi]},$$scope:{ctx:t}}}),e.$on("click",t[58]),{c(){Lt(e.$$.fragment)},m(t,r){It(e,t,r),n=!0},p(t,n){const r={};64&n[2]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(xt(e.$$.fragment,t),n=!0)},o(t){bt(e.$$.fragment,t),n=!1},d(t){Et(e,t)}}}function ji(t){let e;return{c(){e=N("Show nodes")},m(t,n){E(t,e,n)},d(t){t&&U(e)}}}function Xi(t){let e;return{c(){e=N("Show names")},m(t,n){E(t,e,n)},d(t){t&&U(e)}}}function Zi(t){let e;return{c(){e=N("Show coordinates")},m(t,n){E(t,e,n)},d(t){t&&U(e)}}}function Gi(t){let e,n,r,o,s,i,c,u,l;function a(e){t[61](e)}let f={$$slots:{default:[ji]},$$scope:{ctx:t}};function d(e){t[62](e)}void 0!==t[17]&&(f.checked=t[17]),e=new Os({props:f}),nt.push((()=>Rt(e,"checked",a)));let p={disabled:!t[17],$$slots:{default:[Xi]},$$scope:{ctx:t}};function h(e){t[63](e)}void 0!==t[18]&&(p.checked=t[18]),o=new Os({props:p}),nt.push((()=>Rt(o,"checked",d)));let $={disabled:!t[17],$$slots:{default:[Zi]},$$scope:{ctx:t}};return void 0!==t[19]&&($.checked=t[19]),c=new Os({props:$}),nt.push((()=>Rt(c,"checked",h))),{c(){Lt(e.$$.fragment),r=D(),Lt(o.$$.fragment),i=D(),Lt(c.$$.fragment)},m(t,n){It(e,t,n),E(t,r,n),It(o,t,n),E(t,i,n),It(c,t,n),l=!0},p(t,r){const i={};64&r[2]&&(i.$$scope={dirty:r,ctx:t}),!n&&131072&r[0]&&(n=!0,i.checked=t[17],ut((()=>n=!1))),e.$set(i);const l={};131072&r[0]&&(l.disabled=!t[17]),64&r[2]&&(l.$$scope={dirty:r,ctx:t}),!s&&262144&r[0]&&(s=!0,l.checked=t[18],ut((()=>s=!1))),o.$set(l);const a={};131072&r[0]&&(a.disabled=!t[17]),64&r[2]&&(a.$$scope={dirty:r,ctx:t}),!u&&524288&r[0]&&(u=!0,a.checked=t[19],ut((()=>u=!1))),c.$set(a)},i(t){l||(xt(e.$$.fragment,t),xt(o.$$.fragment,t),xt(c.$$.fragment,t),l=!0)},o(t){bt(e.$$.fragment,t),bt(o.$$.fragment,t),bt(c.$$.fragment,t),l=!1},d(t){Et(e,t),t&&U(r),Et(o,t),t&&U(i),Et(c,t)}}}function Vi(t){let e;return{c(){e=N("Binary")},m(t,n){E(t,e,n)},d(t){t&&U(e)}}}function Ji(t){let e;return{c(){e=N("Labels")},m(t,n){E(t,e,n)},d(t){t&&U(e)}}}function qi(t){let e,n,r,o,s,i;function c(e){t[64](e)}let u={$$slots:{default:[Vi]},$$scope:{ctx:t}};function l(e){t[65](e)}void 0!==t[20]&&(u.checked=t[20]),e=new Os({props:u}),nt.push((()=>Rt(e,"checked",c)));let a={$$slots:{default:[Ji]},$$scope:{ctx:t}};return void 0!==t[21]&&(a.checked=t[21]),o=new Os({props:a}),nt.push((()=>Rt(o,"checked",l))),{c(){Lt(e.$$.fragment),r=D(),Lt(o.$$.fragment)},m(t,n){It(e,t,n),E(t,r,n),It(o,t,n),i=!0},p(t,r){const i={};64&r[2]&&(i.$$scope={dirty:r,ctx:t}),!n&&1048576&r[0]&&(n=!0,i.checked=t[20],ut((()=>n=!1))),e.$set(i);const c={};64&r[2]&&(c.$$scope={dirty:r,ctx:t}),!s&&2097152&r[0]&&(s=!0,c.checked=t[21],ut((()=>s=!1))),o.$set(c)},i(t){i||(xt(e.$$.fragment,t),xt(o.$$.fragment,t),i=!0)},o(t){bt(e.$$.fragment,t),bt(o.$$.fragment,t),i=!1},d(t){Et(e,t),t&&U(r),Et(o,t)}}}function Ki(t){let e,n,r;function o(e){t[67](e)}let s={placeholder:"Utterance"};return void 0!==t[10]&&(s.value=t[10]),e=new _s({props:s}),nt.push((()=>Rt(e,"value",o))),{c(){Lt(e.$$.fragment)},m(t,n){It(e,t,n),r=!0},p(t,r){const o={};!n&&1024&r[0]&&(n=!0,o.value=t[10],ut((()=>n=!1))),e.$set(o)},i(t){r||(xt(e.$$.fragment,t),r=!0)},o(t){bt(e.$$.fragment,t),r=!1},d(t){Et(e,t)}}}function Qi(t){let e;return{c(){e=N("Speak")},m(t,n){E(t,e,n)},d(t){t&&U(e)}}}function Yi(t){let e,n;return e=new Us({props:{$$slots:{default:[Qi]},$$scope:{ctx:t}}}),e.$on("click",t[66]),{c(){Lt(e.$$.fragment)},m(t,r){It(e,t,r),n=!0},p(t,n){const r={};64&n[2]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(xt(e.$$.fragment,t),n=!0)},o(t){bt(e.$$.fragment,t),n=!1},d(t){Et(e,t)}}}function tc(t){let e,n,r=t[11]&&ni(t);return{c(){r&&r.c(),e=_()},m(t,o){r&&r.m(t,o),E(t,e,o),n=!0},p(t,n){t[11]?r?(r.p(t,n),2048&n[0]&&xt(r,1)):(r=ni(t),r.c(),xt(r,1),r.m(e.parentNode,e)):r&&(wt(),bt(r,1,1,(()=>{r=null})),vt())},i(t){n||(xt(r),n=!0)},o(t){bt(r),n=!1},d(t){r&&r.d(t),t&&U(e)}}}const ec=t=>t.name,nc=t=>t.name;function rc(t,e,n){let r,o,s,i,c,u,l,f,d,p,h;a(t,Wt,(t=>n(11,r=t))),a(t,_t,(t=>n(12,o=t))),a(t,Dt,(t=>n(13,s=t))),a(t,vr,(t=>n(14,i=t))),a(t,zt,(t=>n(15,c=t))),a(t,Pt,(t=>n(16,u=t))),a(t,jt,(t=>n(17,l=t))),a(t,Xt,(t=>n(18,f=t))),a(t,Zt,(t=>n(19,d=t))),a(t,ye,(t=>n(20,p=t))),a(t,Ae,(t=>n(21,h=t))),Q((()=>{const t=t=>{t.altKey&&"d"===t.key.toLowerCase()&&(t.preventDefault(),L())};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)}));let $,g,m,v,x,b,y,A,C,k,R=!1;function L(){w(Wt,r=!r,r)}return[$,g,m,R,v,x,b,y,A,C,k,r,o,s,i,c,u,l,f,d,p,h,["IR","IR:OPC","IR:OPR","PC","INC","MUX","CU","ALU:1","ALU:2","ALU:OPR","ACC","SW:Z","SW:N"],L,()=>ps.reset(),()=>ps.start(),()=>ps.pause(),()=>ps.step(),()=>ps.instruction(),()=>rn.clear(),()=>rn.reset(),()=>rn.setIR($),()=>rn.setPC(parseInt(g)),()=>rn.setALU1(parseInt(g)),()=>rn.setALU2(parseInt(g)),()=>rn.setOperation(m),()=>rn.setACC(parseInt(g)),()=>rn.setZeroFlag(R),()=>rn.setNegativeFlag(R),function(t){$=t,n(0,$)},function(t){g=t,n(1,g)},function(t){m=t,n(2,m)},function(t){R=t,n(3,R)},()=>o.flash(v),function(t){v=t,n(4,v)},()=>s.flashAddress(parseInt(b)),()=>s.flashContent(parseInt(b)),()=>s.showAddress(parseInt(b)),()=>vr.clear(),()=>vr.write(parseInt(b),x),()=>{console.log("--- RAM CONTENT ----------------"),console.dir(i),console.log("--------------------------------")},function(t){b=t,n(6,b)},function(t){x=t,n(5,x)},()=>c.message("ERROR",y),()=>c.message("WARNING",y),()=>c.message("SUCCESS",y),()=>c.message("INFO",y),function(t){y=t,n(7,y)},()=>u.flashWire(A,C),function(t){A=t,n(8,A)},function(t){C=t,n(9,C)},function(t){l=t,jt.set(l)},function(t){f=t,Xt.set(f)},function(t){d=t,Zt.set(d)},function(t){p=t,ye.set(p)},function(t){h=t,Ae.set(h)},()=>Ls.read(k),function(t){k=t,n(10,k)}]}class oc extends Tt{constructor(t){super(),St(this,t,rc,tc,c,{},null,[-1,-1,-1])}}function sc(t,e,n){const r=t.slice();return r[0]=e[n],r}function ic(t,e){let n,r,o,s,i,c,u,l,a,f,d,p=e[0].message+"";function h(){return e[3](e[0])}return{key:t,first:null,c(){n=T("div"),r=T("button"),r.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#FFFFFF" class="hover:scale-105"><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M18.3 5.71c-.39-.39-1.02-.39-1.41 0L12 10.59 7.11 5.7c-.39-.39-1.02-.39-1.41 0-.39.39-.39 1.02 0 1.41L10.59 12 5.7 16.89c-.39.39-.39 1.02 0 1.41.39.39 1.02.39 1.41 0L12 13.41l4.89 4.89c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L13.41 12l4.89-4.89c.38-.38.38-1.02 0-1.4z"></path></svg>',o=D(),s=T("p"),i=N(p),c=D(),M(r,"class","absolute bg-transparent text-white cursor-pointer font-bold right-8"),M(s,"class","w-3/4 text-center text-xl"),M(n,"class",u="relative w-full h-fit flex justify-center items-center p-5 origin-left border text-white "+e[0].type+" svelte-tz4rgo"),this.first=n},m(t,e){E(t,n,e),R(n,r),R(n,o),R(n,s),R(s,i),R(n,c),a=!0,f||(d=P(r,"click",h),f=!0)},p(t,r){e=t,(!a||2&r)&&p!==(p=e[0].message+"")&&F(i,p),(!a||2&r&&u!==(u="relative w-full h-fit flex justify-center items-center p-5 origin-left border text-white "+e[0].type+" svelte-tz4rgo"))&&M(n,"class",u)},i(t){a||(ct((()=>{l||(l=At(n,Kn,{},!0)),l.run(1)})),a=!0)},o(t){l||(l=At(n,Kn,{},!1)),l.run(0),a=!1},d(t){t&&U(n),t&&l&&l.end(),f=!1,d()}}}function cc(t){let e,n,r=[],o=new Map,s=t[1];const i=t=>t[0].id;for(let e=0;e<s.length;e+=1){let n=sc(t,s,e),c=i(n);o.set(c,r[e]=ic(c,n))}return{c(){e=T("div");for(let t=0;t<r.length;t+=1)r[t].c();M(e,"class","fixed top-0 left-0 w-screen h-fit flex flex-col")},m(t,o){E(t,e,o);for(let t=0;t<r.length;t+=1)r[t].m(e,null);n=!0},p(t,[n]){6&n&&(s=t[1],wt(),r=function(t,e,n,r,o,s,i,c,u,l,a,f){let d=t.length,p=s.length,h=d;const $={};for(;h--;)$[t[h].key]=h;const g=[],m=new Map,w=new Map;for(h=p;h--;){const t=f(o,s,h),c=n(t);let u=i.get(c);u?r&&u.p(t,e):(u=l(c,t),u.c()),m.set(c,g[h]=u),c in $&&w.set(c,Math.abs(h-$[c]))}const v=new Set,x=new Set;function b(t){xt(t,1),t.m(c,a),i.set(t.key,t),a=t.first,p--}for(;d&&p;){const e=g[p-1],n=t[d-1],r=e.key,o=n.key;e===n?(a=e.first,d--,p--):m.has(o)?!i.has(r)||v.has(r)?b(e):x.has(o)?d--:w.get(r)>w.get(o)?(x.add(r),b(e)):(v.add(o),d--):(u(n,i),d--)}for(;d--;){const e=t[d];m.has(e.key)||u(e,i)}for(;p;)b(g[p-1]);return g}(r,n,i,1,t,s,o,e,kt,ic,null,sc),vt())},i(t){if(!n){for(let t=0;t<s.length;t+=1)xt(r[t]);n=!0}},o(t){for(let t=0;t<r.length;t+=1)bt(r[t]);n=!1},d(t){t&&U(e);for(let t=0;t<r.length;t+=1)r[t].d()}}}function uc(t,e,n){let r=[];function o(t){n(1,r=r.filter((e=>e.id!==t)))}return[function(t,e){3===r.length&&r.shift(),n(1,r=[...r,{id:Math.random(),type:t,message:e}])},r,o,t=>o(t.id)]}class lc extends Tt{constructor(t){super(),St(this,t,uc,cc,c,{message:0})}get message(){return this.$$.ctx[0]}}function ac(t,e,n){const r=t.slice();return r[17]=e[n],r}function fc(t,e,n){const r=t.slice();return r[20]=e[n],r}function dc(t,e,n){const r=t.slice();return r[23]=e[n],r}function pc(t){let e,n,r,o,i,c,u,l,a,f,d,p,h,$,g,m,w,v,x,b,y,A,C,k,L,I,O,_,F,B,W,j,X,Z,G,V,J=_n,q=[];for(let e=0;e<J.length;e+=1)q[e]=hc(dc(t,J,e));let K=Dn,Q=[];for(let e=0;e<K.length;e+=1)Q[e]=$c(fc(t,K,e));let Y=t[5],tt=[];for(let e=0;e<Y.length;e+=1)tt[e]=mc(ac(t,Y,e));return{c(){e=T("div"),n=T("div"),r=T("h2"),r.textContent="Logs",o=D(),i=T("div"),c=T("label"),u=N("Keyword:\n\t\t\t\t\t"),l=T("input"),a=D(),f=T("label"),d=N("Type:\n\t\t\t\t\t"),p=T("select"),h=T("option"),h.textContent="ALL";for(let t=0;t<q.length;t+=1)q[t].c();$=D(),g=T("label"),m=N("Group:\n\t\t\t\t\t"),w=T("select"),v=T("option"),v.textContent="ALL";for(let t=0;t<Q.length;t+=1)Q[t].c();x=D(),b=T("div"),y=T("label"),A=N("Lock scroll to bottom\n\t\t\t\t\t"),C=T("input"),k=D(),L=T("label"),I=N("Show timestamp\n\t\t\t\t\t"),O=T("input"),_=D(),F=T("div"),B=T("button"),B.textContent="Export",W=D(),j=T("button"),j.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" class="h-7 w-7 fill-white"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>',X=D(),Z=T("div");for(let t=0;t<tt.length;t+=1)tt[t].c();M(r,"class","text-2xl"),M(l,"type","text"),M(l,"class","text-black px-1 py-0.5"),M(c,"for","keyword"),h.__value="ALL",h.value=h.__value,M(p,"id","type"),M(p,"class","text-black px-1 py-0.5"),void 0===t[1]&&ct((()=>t[12].call(p))),M(f,"for","type"),v.__value="ALL",v.value=v.__value,M(w,"id","group"),M(w,"class","text-black px-1 py-0.5"),void 0===t[2]&&ct((()=>t[13].call(w))),M(g,"for","group"),M(i,"class","flex items-center flex-wrap gap-4 p-2"),M(C,"type","checkbox"),M(C,"id","lock-scroll-to-bottom"),M(y,"for","lock-scroll-to-bottom"),M(O,"type","checkbox"),M(O,"id","show-timestamp"),M(L,"for","show-timestamp"),M(b,"class","flex items-center flex-wrap gap-4 p-2"),M(B,"class","border px-1"),M(F,"class","flex items-center flex-wrap gap-4 p-2"),M(j,"title","Close logs"),M(n,"class","flex flex-wrap items-center justify-around gap-4 p-4"),M(Z,"class","w-full h-[90%] overflow-y-auto"),M(e,"class","fixed top-0 left-0 w-screen h-screen z-[1000] bg-black/70 text-white")},m(s,U){E(s,e,U),R(e,n),R(n,r),R(n,o),R(n,i),R(i,c),R(c,u),R(c,l),z(l,t[3]),R(i,a),R(i,f),R(f,d),R(f,p),R(p,h);for(let t=0;t<q.length;t+=1)q[t].m(p,null);H(p,t[1]),R(i,$),R(i,g),R(g,m),R(g,w),R(w,v);for(let t=0;t<Q.length;t+=1)Q[t].m(w,null);H(w,t[2]),R(n,x),R(n,b),R(b,y),R(y,A),R(y,C),C.checked=t[4],R(b,k),R(b,L),R(L,I),R(L,O),O.checked=t[6],R(n,_),R(n,F),R(F,B),R(n,W),R(n,j),R(e,X),R(e,Z);for(let t=0;t<tt.length;t+=1)tt[t].m(Z,null);t[16](Z),G||(V=[P(l,"input",t[11]),P(p,"change",t[12]),P(w,"change",t[13]),P(C,"change",t[14]),P(O,"change",t[15]),P(B,"click",t[9]),P(j,"click",t[8])],G=!0)},p(t,e){if(8&e&&l.value!==t[3]&&z(l,t[3]),0&e){let n;for(J=_n,n=0;n<J.length;n+=1){const r=dc(t,J,n);q[n]?q[n].p(r,e):(q[n]=hc(r),q[n].c(),q[n].m(p,null))}for(;n<q.length;n+=1)q[n].d(1);q.length=J.length}if(2&e&&H(p,t[1]),0&e){let n;for(K=Dn,n=0;n<K.length;n+=1){const r=fc(t,K,n);Q[n]?Q[n].p(r,e):(Q[n]=$c(r),Q[n].c(),Q[n].m(w,null))}for(;n<Q.length;n+=1)Q[n].d(1);Q.length=K.length}if(4&e&&H(w,t[2]),16&e&&(C.checked=t[4]),64&e&&(O.checked=t[6]),96&e){let n;for(Y=t[5],n=0;n<Y.length;n+=1){const r=ac(t,Y,n);tt[n]?tt[n].p(r,e):(tt[n]=mc(r),tt[n].c(),tt[n].m(Z,null))}for(;n<tt.length;n+=1)tt[n].d(1);tt.length=Y.length}},d(n){n&&U(e),S(q,n),S(Q,n),S(tt,n),t[16](null),G=!1,s(V)}}}function hc(e){let n,r,o,s=e[23]+"";return{c(){n=T("option"),r=N(s),n.__value=o=e[23],n.value=n.__value},m(t,e){E(t,n,e),R(n,r)},p:t,d(t){t&&U(n)}}}function $c(e){let n,r,o,s=e[20]+"";return{c(){n=T("option"),r=N(s),n.__value=o=e[20],n.value=n.__value},m(t,e){E(t,n,e),R(n,r)},p:t,d(t){t&&U(n)}}}function gc(t){let e,n,r=t[17].timestamp+"";return{c(){e=N(r),n=N(" - ")},m(t,r){E(t,e,r),E(t,n,r)},p(t,n){32&n&&r!==(r=t[17].timestamp+"")&&F(e,r)},d(t){t&&U(e),t&&U(n)}}}function mc(t){let e,n,r,o,s=t[17].message+"",i=t[6]&&gc(t);return{c(){e=T("p"),i&&i.c(),n=N(s),r=D(),M(e,"class",o="m-2 whitespace-pre-line "+t[17].logType+" svelte-7zjq9j")},m(t,o){E(t,e,o),i&&i.m(e,null),R(e,n),R(e,r)},p(t,r){t[6]?i?i.p(t,r):(i=gc(t),i.c(),i.m(e,n)):i&&(i.d(1),i=null),32&r&&s!==(s=t[17].message+"")&&F(n,s),32&r&&o!==(o="m-2 whitespace-pre-line "+t[17].logType+" svelte-7zjq9j")&&M(e,"class",o)},d(t){t&&U(e),i&&i.d()}}}function wc(e){let n,r=e[7].showLogger&&pc(e);return{c(){r&&r.c(),n=_()},m(t,e){r&&r.m(t,e),E(t,n,e)},p(t,[e]){t[7].showLogger?r?r.p(t,e):(r=pc(t),r.c(),r.m(n.parentNode,n)):r&&(r.d(1),r=null)},i:t,o:t,d(t){r&&r.d(t),t&&U(n)}}}function vc(t,e,n){let r,o,s;a(t,Sn,(t=>n(10,r=t))),a(t,On,(t=>n(7,o=t)));let i=[],c="ALL",u="ALL",l="",f=!1,d=!0;function p(){On.updateShowLogger((t=>!t))}return Q((()=>{const t=t=>{t.altKey&&t.shiftKey&&"l"===t.key.toLowerCase()&&p()};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)})),t.$$.update=()=>{1055&t.$$.dirty&&s&&(n(5,i=r.filter((t=>("ALL"===c||t.logType===c)&&("ALL"===u||t.logGroup===u)&&t.message.toLowerCase().includes(l)))),d&&n(0,s.scrollTop=s.scrollHeight,s))},[s,c,u,l,d,i,f,o,p,function(){var t,e,n,o;t=JSON.stringify(r),e=`cpu-visual-simultor-logs-${(new Date).toDateString()}.json`,n=document.createElement("a"),o=new Blob([t],{type:"text/plain"}),n.href=URL.createObjectURL(o),n.download=e,n.click()},r,function(){l=this.value,n(3,l)},function(){c=W(this),n(1,c)},function(){u=W(this),n(2,u)},function(){d=this.checked,n(4,d)},function(){f=this.checked,n(6,f)},function(t){nt[t?"unshift":"push"]((()=>{s=t,n(0,s),n(10,r),n(1,c),n(2,u),n(3,l),n(4,d)}))}]}class xc extends Tt{constructor(t){super(),St(this,t,vc,wc,c,{})}}const{window:bc}=Ct;function yc(t){let e,n,r,o,i,c,u,l,a,f,d,p,h;n=new go({});o=new bs({props:{}}),t[7](o);c=new oc({props:{}}),t[9](c);l=new xc({props:{}}),t[10](l);return f=new lc({props:{}}),t[11](f),{c(){e=T("div"),Lt(n.$$.fragment),r=D(),Lt(o.$$.fragment),i=D(),Lt(c.$$.fragment),u=D(),Lt(l.$$.fragment),a=D(),Lt(f.$$.fragment),M(e,"class","relative w-app h-app origin-top-left")},m(s,$){E(s,e,$),It(n,e,null),R(e,r),It(o,e,null),t[8](e),E(s,i,$),It(c,s,$),E(s,u,$),It(l,s,$),E(s,a,$),It(f,s,$),d=!0,p||(h=[P(bc,"resize",t[5]),P(bc,"error",t[6])],p=!0)},p(t,[e]){o.$set({});c.$set({});l.$set({});f.$set({})},i(t){d||(xt(n.$$.fragment,t),xt(o.$$.fragment,t),xt(c.$$.fragment,t),xt(l.$$.fragment,t),xt(f.$$.fragment,t),d=!0)},o(t){bt(n.$$.fragment,t),bt(o.$$.fragment,t),bt(c.$$.fragment,t),bt(l.$$.fragment,t),bt(f.$$.fragment,t),d=!1},d(r){r&&U(e),Et(n),t[7](null),Et(o),t[8](null),r&&U(i),t[9](null),Et(c,r),r&&U(u),t[10](null),Et(l,r),r&&U(a),t[11](null),Et(f,r),p=!1,s(h)}}}function Ac(t,e,n){let r,o,s,i,c;function u(){let t=window.innerWidth/1400,e=window.innerHeight/800,r=t<e?t:e;n(0,c.style.transform=`scale(${r})`,c)}return a(t,Mt,(t=>n(1,r=t))),a(t,Ft,(t=>n(2,o=t))),a(t,Bt,(t=>n(3,s=t))),a(t,zt,(t=>n(4,i=t))),Q(u),[c,r,o,s,i,u,function(t){t.preventDefault(),Mn.error(t.error,"UNCAUGHT")},function(t){nt[t?"unshift":"push"]((()=>{r=t,Mt.set(r)}))},function(t){nt[t?"unshift":"push"]((()=>{c=t,n(0,c)}))},function(t){nt[t?"unshift":"push"]((()=>{o=t,Ft.set(o)}))},function(t){nt[t?"unshift":"push"]((()=>{s=t,Bt.set(s)}))},function(t){nt[t?"unshift":"push"]((()=>{i=t,zt.set(i)}))}]}return new class extends Tt{constructor(t){super(),St(this,t,Ac,yc,c,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
